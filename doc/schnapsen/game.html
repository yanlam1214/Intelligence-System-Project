<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 12.3.1"/>
    <title>schnapsen.game API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent }nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--code);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../schnapsen.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;schnapsen</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



        <h2>API Documentation</h2>
            <ul class="memberlist">
            <li>
                    <a class="class" href="#Bot">Bot</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Bot.get_move">get_move</a>
                        </li>
                        <li>
                                <a class="function" href="#Bot.notify_trump_exchange">notify_trump_exchange</a>
                        </li>
                        <li>
                                <a class="function" href="#Bot.notify_game_end">notify_game_end</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Move">Move</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#Move.cards">cards</a>
                        </li>
                        <li>
                                <a class="function" href="#Move.is_regular_move">is_regular_move</a>
                        </li>
                        <li>
                                <a class="function" href="#Move.as_regular_move">as_regular_move</a>
                        </li>
                        <li>
                                <a class="function" href="#Move.is_marriage">is_marriage</a>
                        </li>
                        <li>
                                <a class="function" href="#Move.as_marriage">as_marriage</a>
                        </li>
                        <li>
                                <a class="function" href="#Move.is_trump_exchange">is_trump_exchange</a>
                        </li>
                        <li>
                                <a class="function" href="#Move.as_trump_exchange">as_trump_exchange</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Trump_Exchange">Trump_Exchange</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Trump_Exchange.__init__">Trump_Exchange</a>
                        </li>
                        <li>
                                <a class="variable" href="#Trump_Exchange.jack">jack</a>
                        </li>
                        <li>
                                <a class="function" href="#Trump_Exchange.is_trump_exchange">is_trump_exchange</a>
                        </li>
                        <li>
                                <a class="function" href="#Trump_Exchange.as_trump_exchange">as_trump_exchange</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#RegularMove">RegularMove</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#RegularMove.__init__">RegularMove</a>
                        </li>
                        <li>
                                <a class="variable" href="#RegularMove.card">card</a>
                        </li>
                        <li>
                                <a class="function" href="#RegularMove.from_cards">from_cards</a>
                        </li>
                        <li>
                                <a class="function" href="#RegularMove.is_regular_move">is_regular_move</a>
                        </li>
                        <li>
                                <a class="function" href="#RegularMove.as_regular_move">as_regular_move</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Marriage">Marriage</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Marriage.__init__">Marriage</a>
                        </li>
                        <li>
                                <a class="variable" href="#Marriage.queen_card">queen_card</a>
                        </li>
                        <li>
                                <a class="variable" href="#Marriage.king_card">king_card</a>
                        </li>
                        <li>
                                <a class="variable" href="#Marriage.suit">suit</a>
                        </li>
                        <li>
                                <a class="function" href="#Marriage.is_marriage">is_marriage</a>
                        </li>
                        <li>
                                <a class="function" href="#Marriage.as_marriage">as_marriage</a>
                        </li>
                        <li>
                                <a class="function" href="#Marriage.underlying_regular_move">underlying_regular_move</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Hand">Hand</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Hand.__init__">Hand</a>
                        </li>
                        <li>
                                <a class="function" href="#Hand.remove">remove</a>
                        </li>
                        <li>
                                <a class="function" href="#Hand.add">add</a>
                        </li>
                        <li>
                                <a class="function" href="#Hand.has_cards">has_cards</a>
                        </li>
                        <li>
                                <a class="function" href="#Hand.copy">copy</a>
                        </li>
                        <li>
                                <a class="function" href="#Hand.is_empty">is_empty</a>
                        </li>
                        <li>
                                <a class="function" href="#Hand.get_cards">get_cards</a>
                        </li>
                        <li>
                                <a class="function" href="#Hand.filter_suit">filter_suit</a>
                        </li>
                        <li>
                                <a class="function" href="#Hand.filter_rank">filter_rank</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Talon">Talon</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Talon.__init__">Talon</a>
                        </li>
                        <li>
                                <a class="function" href="#Talon.copy">copy</a>
                        </li>
                        <li>
                                <a class="function" href="#Talon.trump_exchange">trump_exchange</a>
                        </li>
                        <li>
                                <a class="function" href="#Talon.draw_cards">draw_cards</a>
                        </li>
                        <li>
                                <a class="function" href="#Talon.trump_suit">trump_suit</a>
                        </li>
                        <li>
                                <a class="function" href="#Talon.trump_card">trump_card</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Trick">Trick</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#Trick.cards">cards</a>
                        </li>
                        <li>
                                <a class="function" href="#Trick.is_trump_exchange">is_trump_exchange</a>
                        </li>
                        <li>
                                <a class="function" href="#Trick.as_partial">as_partial</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ExchangeTrick">ExchangeTrick</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ExchangeTrick.__init__">ExchangeTrick</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExchangeTrick.exchange">exchange</a>
                        </li>
                        <li>
                                <a class="variable" href="#ExchangeTrick.trump_card">trump_card</a>
                        </li>
                        <li>
                                <a class="function" href="#ExchangeTrick.is_trump_exchange">is_trump_exchange</a>
                        </li>
                        <li>
                                <a class="function" href="#ExchangeTrick.as_partial">as_partial</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#PartialTrick">PartialTrick</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#PartialTrick.__init__">PartialTrick</a>
                        </li>
                        <li>
                                <a class="variable" href="#PartialTrick.leader_move">leader_move</a>
                        </li>
                        <li>
                                <a class="function" href="#PartialTrick.is_trump_exchange">is_trump_exchange</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#RegularTrick">RegularTrick</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#RegularTrick.__init__">RegularTrick</a>
                        </li>
                        <li>
                                <a class="variable" href="#RegularTrick.follower_move">follower_move</a>
                        </li>
                        <li>
                                <a class="function" href="#RegularTrick.is_trump_exchange">is_trump_exchange</a>
                        </li>
                        <li>
                                <a class="function" href="#RegularTrick.as_partial">as_partial</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Score">Score</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Score.__init__">Score</a>
                        </li>
                        <li>
                                <a class="variable" href="#Score.direct_points">direct_points</a>
                        </li>
                        <li>
                                <a class="variable" href="#Score.pending_points">pending_points</a>
                        </li>
                        <li>
                                <a class="function" href="#Score.redeem_pending_points">redeem_pending_points</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#GamePhase">GamePhase</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#GamePhase.ONE">ONE</a>
                        </li>
                        <li>
                                <a class="variable" href="#GamePhase.TWO">TWO</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#BotState">BotState</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#BotState.__init__">BotState</a>
                        </li>
                        <li>
                                <a class="function" href="#BotState.get_move">get_move</a>
                        </li>
                        <li>
                                <a class="function" href="#BotState.copy">copy</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Previous">Previous</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Previous.__init__">Previous</a>
                        </li>
                        <li>
                                <a class="variable" href="#Previous.state">state</a>
                        </li>
                        <li>
                                <a class="variable" href="#Previous.trick">trick</a>
                        </li>
                        <li>
                                <a class="variable" href="#Previous.leader_remained_leader">leader_remained_leader</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#GameState">GameState</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#GameState.__init__">GameState</a>
                        </li>
                        <li>
                                <a class="variable" href="#GameState.leader">leader</a>
                        </li>
                        <li>
                                <a class="variable" href="#GameState.follower">follower</a>
                        </li>
                        <li>
                                <a class="variable" href="#GameState.trump_suit">trump_suit</a>
                        </li>
                        <li>
                                <a class="variable" href="#GameState.talon">talon</a>
                        </li>
                        <li>
                                <a class="variable" href="#GameState.previous">previous</a>
                        </li>
                        <li>
                                <a class="function" href="#GameState.copy_for_next">copy_for_next</a>
                        </li>
                        <li>
                                <a class="function" href="#GameState.copy_with_other_bots">copy_with_other_bots</a>
                        </li>
                        <li>
                                <a class="function" href="#GameState.game_phase">game_phase</a>
                        </li>
                        <li>
                                <a class="function" href="#GameState.are_all_cards_played">are_all_cards_played</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#PlayerPerspective">PlayerPerspective</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#PlayerPerspective.valid_moves">valid_moves</a>
                        </li>
                        <li>
                                <a class="function" href="#PlayerPerspective.get_game_history">get_game_history</a>
                        </li>
                        <li>
                                <a class="function" href="#PlayerPerspective.get_hand">get_hand</a>
                        </li>
                        <li>
                                <a class="function" href="#PlayerPerspective.get_my_score">get_my_score</a>
                        </li>
                        <li>
                                <a class="function" href="#PlayerPerspective.get_opponent_score">get_opponent_score</a>
                        </li>
                        <li>
                                <a class="function" href="#PlayerPerspective.get_trump_suit">get_trump_suit</a>
                        </li>
                        <li>
                                <a class="function" href="#PlayerPerspective.get_trump_card">get_trump_card</a>
                        </li>
                        <li>
                                <a class="function" href="#PlayerPerspective.get_talon_size">get_talon_size</a>
                        </li>
                        <li>
                                <a class="function" href="#PlayerPerspective.get_phase">get_phase</a>
                        </li>
                        <li>
                                <a class="function" href="#PlayerPerspective.get_opponent_hand_in_phase_two">get_opponent_hand_in_phase_two</a>
                        </li>
                        <li>
                                <a class="function" href="#PlayerPerspective.am_i_leader">am_i_leader</a>
                        </li>
                        <li>
                                <a class="function" href="#PlayerPerspective.get_won_cards">get_won_cards</a>
                        </li>
                        <li>
                                <a class="function" href="#PlayerPerspective.get_opponent_won_cards">get_opponent_won_cards</a>
                        </li>
                        <li>
                                <a class="function" href="#PlayerPerspective.seen_cards">seen_cards</a>
                        </li>
                        <li>
                                <a class="function" href="#PlayerPerspective.get_known_cards_of_opponent_hand">get_known_cards_of_opponent_hand</a>
                        </li>
                        <li>
                                <a class="function" href="#PlayerPerspective.get_engine">get_engine</a>
                        </li>
                        <li>
                                <a class="function" href="#PlayerPerspective.get_state_in_phase_two">get_state_in_phase_two</a>
                        </li>
                        <li>
                                <a class="function" href="#PlayerPerspective.make_assumption">make_assumption</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#LeaderPerspective">LeaderPerspective</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#LeaderPerspective.__init__">LeaderPerspective</a>
                        </li>
                        <li>
                                <a class="function" href="#LeaderPerspective.valid_moves">valid_moves</a>
                        </li>
                        <li>
                                <a class="function" href="#LeaderPerspective.get_hand">get_hand</a>
                        </li>
                        <li>
                                <a class="function" href="#LeaderPerspective.get_my_score">get_my_score</a>
                        </li>
                        <li>
                                <a class="function" href="#LeaderPerspective.get_opponent_score">get_opponent_score</a>
                        </li>
                        <li>
                                <a class="function" href="#LeaderPerspective.get_opponent_hand_in_phase_two">get_opponent_hand_in_phase_two</a>
                        </li>
                        <li>
                                <a class="function" href="#LeaderPerspective.am_i_leader">am_i_leader</a>
                        </li>
                        <li>
                                <a class="function" href="#LeaderPerspective.get_won_cards">get_won_cards</a>
                        </li>
                        <li>
                                <a class="function" href="#LeaderPerspective.get_opponent_won_cards">get_opponent_won_cards</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#FollowerPerspective">FollowerPerspective</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#FollowerPerspective.__init__">FollowerPerspective</a>
                        </li>
                        <li>
                                <a class="function" href="#FollowerPerspective.valid_moves">valid_moves</a>
                        </li>
                        <li>
                                <a class="function" href="#FollowerPerspective.get_hand">get_hand</a>
                        </li>
                        <li>
                                <a class="function" href="#FollowerPerspective.get_my_score">get_my_score</a>
                        </li>
                        <li>
                                <a class="function" href="#FollowerPerspective.get_opponent_score">get_opponent_score</a>
                        </li>
                        <li>
                                <a class="function" href="#FollowerPerspective.get_opponent_hand_in_phase_two">get_opponent_hand_in_phase_two</a>
                        </li>
                        <li>
                                <a class="function" href="#FollowerPerspective.am_i_leader">am_i_leader</a>
                        </li>
                        <li>
                                <a class="function" href="#FollowerPerspective.get_won_cards">get_won_cards</a>
                        </li>
                        <li>
                                <a class="function" href="#FollowerPerspective.get_opponent_won_cards">get_opponent_won_cards</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ExchangeFollowerPerspective">ExchangeFollowerPerspective</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ExchangeFollowerPerspective.__init__">ExchangeFollowerPerspective</a>
                        </li>
                        <li>
                                <a class="function" href="#ExchangeFollowerPerspective.valid_moves">valid_moves</a>
                        </li>
                        <li>
                                <a class="function" href="#ExchangeFollowerPerspective.get_hand">get_hand</a>
                        </li>
                        <li>
                                <a class="function" href="#ExchangeFollowerPerspective.get_my_score">get_my_score</a>
                        </li>
                        <li>
                                <a class="function" href="#ExchangeFollowerPerspective.get_opponent_score">get_opponent_score</a>
                        </li>
                        <li>
                                <a class="function" href="#ExchangeFollowerPerspective.get_trump_suit">get_trump_suit</a>
                        </li>
                        <li>
                                <a class="function" href="#ExchangeFollowerPerspective.get_opponent_hand_in_phase_two">get_opponent_hand_in_phase_two</a>
                        </li>
                        <li>
                                <a class="function" href="#ExchangeFollowerPerspective.get_opponent_won_cards">get_opponent_won_cards</a>
                        </li>
                        <li>
                                <a class="function" href="#ExchangeFollowerPerspective.get_won_cards">get_won_cards</a>
                        </li>
                        <li>
                                <a class="function" href="#ExchangeFollowerPerspective.am_i_leader">am_i_leader</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#WinnerPerspective">WinnerPerspective</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#WinnerPerspective.__init__">WinnerPerspective</a>
                        </li>
                        <li>
                                <a class="function" href="#WinnerPerspective.valid_moves">valid_moves</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#LoserPerspective">LoserPerspective</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#LoserPerspective.__init__">LoserPerspective</a>
                        </li>
                        <li>
                                <a class="function" href="#LoserPerspective.valid_moves">valid_moves</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#DeckGenerator">DeckGenerator</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#DeckGenerator.get_initial_deck">get_initial_deck</a>
                        </li>
                        <li>
                                <a class="function" href="#DeckGenerator.shuffle_deck">shuffle_deck</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#SchnapsenDeckGenerator">SchnapsenDeckGenerator</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#SchnapsenDeckGenerator.__init__">SchnapsenDeckGenerator</a>
                        </li>
                        <li>
                                <a class="function" href="#SchnapsenDeckGenerator.get_initial_deck">get_initial_deck</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#HandGenerator">HandGenerator</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#HandGenerator.generateHands">generateHands</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#SchnapsenHandGenerator">SchnapsenHandGenerator</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#SchnapsenHandGenerator.__init__">SchnapsenHandGenerator</a>
                        </li>
                        <li>
                                <a class="function" href="#SchnapsenHandGenerator.generateHands">generateHands</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#TrickImplementer">TrickImplementer</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#TrickImplementer.play_trick">play_trick</a>
                        </li>
                        <li>
                                <a class="function" href="#TrickImplementer.play_trick_with_fixed_leader_move">play_trick_with_fixed_leader_move</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#SchnapsenTrickImplementer">SchnapsenTrickImplementer</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#SchnapsenTrickImplementer.__init__">SchnapsenTrickImplementer</a>
                        </li>
                        <li>
                                <a class="function" href="#SchnapsenTrickImplementer.play_trick">play_trick</a>
                        </li>
                        <li>
                                <a class="function" href="#SchnapsenTrickImplementer.play_trick_with_fixed_leader_move">play_trick_with_fixed_leader_move</a>
                        </li>
                        <li>
                                <a class="function" href="#SchnapsenTrickImplementer.get_leader_move">get_leader_move</a>
                        </li>
                        <li>
                                <a class="function" href="#SchnapsenTrickImplementer.play_trump_exchange">play_trump_exchange</a>
                        </li>
                        <li>
                                <a class="function" href="#SchnapsenTrickImplementer.get_follower_move">get_follower_move</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#MoveRequester">MoveRequester</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#MoveRequester.__init__">MoveRequester</a>
                        </li>
                        <li>
                                <a class="function" href="#MoveRequester.get_move">get_move</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#SimpleMoveRequester">SimpleMoveRequester</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#SimpleMoveRequester.__init__">SimpleMoveRequester</a>
                        </li>
                        <li>
                                <a class="function" href="#SimpleMoveRequester.get_move">get_move</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#MoveValidator">MoveValidator</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#MoveValidator.get_legal_leader_moves">get_legal_leader_moves</a>
                        </li>
                        <li>
                                <a class="function" href="#MoveValidator.is_legal_leader_move">is_legal_leader_move</a>
                        </li>
                        <li>
                                <a class="function" href="#MoveValidator.get_legal_follower_moves">get_legal_follower_moves</a>
                        </li>
                        <li>
                                <a class="function" href="#MoveValidator.is_legal_follower_move">is_legal_follower_move</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#SchnapsenMoveValidator">SchnapsenMoveValidator</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#SchnapsenMoveValidator.__init__">SchnapsenMoveValidator</a>
                        </li>
                        <li>
                                <a class="function" href="#SchnapsenMoveValidator.get_legal_leader_moves">get_legal_leader_moves</a>
                        </li>
                        <li>
                                <a class="function" href="#SchnapsenMoveValidator.is_legal_leader_move">is_legal_leader_move</a>
                        </li>
                        <li>
                                <a class="function" href="#SchnapsenMoveValidator.get_legal_follower_moves">get_legal_follower_moves</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#TrickScorer">TrickScorer</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#TrickScorer.score">score</a>
                        </li>
                        <li>
                                <a class="function" href="#TrickScorer.declare_winner">declare_winner</a>
                        </li>
                        <li>
                                <a class="function" href="#TrickScorer.rank_to_points">rank_to_points</a>
                        </li>
                        <li>
                                <a class="function" href="#TrickScorer.marriage">marriage</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#SchnapsenTrickScorer">SchnapsenTrickScorer</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#SchnapsenTrickScorer.__init__">SchnapsenTrickScorer</a>
                        </li>
                        <li>
                                <a class="function" href="#SchnapsenTrickScorer.rank_to_points">rank_to_points</a>
                        </li>
                        <li>
                                <a class="function" href="#SchnapsenTrickScorer.marriage">marriage</a>
                        </li>
                        <li>
                                <a class="function" href="#SchnapsenTrickScorer.score">score</a>
                        </li>
                        <li>
                                <a class="function" href="#SchnapsenTrickScorer.declare_winner">declare_winner</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#GamePlayEngine">GamePlayEngine</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#GamePlayEngine.__init__">GamePlayEngine</a>
                        </li>
                        <li>
                                <a class="function" href="#GamePlayEngine.play_game">play_game</a>
                        </li>
                        <li>
                                <a class="function" href="#GamePlayEngine.play_game_from_state_with_new_bots">play_game_from_state_with_new_bots</a>
                        </li>
                        <li>
                                <a class="function" href="#GamePlayEngine.play_game_from_state">play_game_from_state</a>
                        </li>
                        <li>
                                <a class="function" href="#GamePlayEngine.play_at_most_n_tricks">play_at_most_n_tricks</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#SchnapsenGamePlayEngine">SchnapsenGamePlayEngine</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#SchnapsenGamePlayEngine.__init__">SchnapsenGamePlayEngine</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../schnapsen.html">schnapsen</a><wbr>.game    </h1>

                        <div class="docstring"><p>In this module you will find all parts related to playing a game of Schnapsen.</p>
</div>

                        <input id="mod-game-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-game-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">   1</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">   2</span></a><span class="sd">In this module you will find all parts related to playing a game of Schnapsen.</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">   3</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">   4</span></a>
</span><span id="L-5"><a href="#L-5"><span class="linenos">   5</span></a><span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">   6</span></a><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span><span class="p">,</span> <span class="n">field</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">   7</span></a><span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">   8</span></a><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">Random</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">   9</span></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Iterable</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Union</span><span class="p">,</span> <span class="n">cast</span><span class="p">,</span> <span class="n">Any</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos">  10</span></a><span class="kn">from</span> <span class="nn">.deck</span> <span class="kn">import</span> <span class="n">CardCollection</span><span class="p">,</span> <span class="n">OrderedCardCollection</span><span class="p">,</span> <span class="n">Card</span><span class="p">,</span> <span class="n">Rank</span><span class="p">,</span> <span class="n">Suit</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos">  11</span></a><span class="kn">import</span> <span class="nn">itertools</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos">  12</span></a>
</span><span id="L-13"><a href="#L-13"><span class="linenos">  13</span></a>
</span><span id="L-14"><a href="#L-14"><span class="linenos">  14</span></a><span class="k">class</span> <span class="nc">Bot</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos">  15</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos">  16</span></a><span class="sd">    The Bot baseclass. Derive your own bots from this class and implement the get_move method to use it in games.</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos">  17</span></a>
</span><span id="L-18"><a href="#L-18"><span class="linenos">  18</span></a><span class="sd">    Besides the get_move method, it is also possible to override notify_trump_exchange and notify_game_end to get notified when these events happen.</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos">  19</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos">  20</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos">  21</span></a>    <span class="k">def</span> <span class="nf">get_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="s1">&#39;PlayerPerspective&#39;</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s1">&#39;Move&#39;</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s1">&#39;Move&#39;</span><span class="p">:</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos">  22</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos">  23</span></a><span class="sd">        Get the move this Bot wants to play.</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos">  24</span></a><span class="sd">        If this Bot is leading, the leader_move will be None. If this both is following, the leader_move will contain the move the opponent just played</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos">  25</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos">  26</span></a>
</span><span id="L-27"><a href="#L-27"><span class="linenos">  27</span></a>    <span class="k">def</span> <span class="nf">notify_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">move</span><span class="p">:</span> <span class="s1">&#39;Trump_Exchange&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos">  28</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos">  29</span></a><span class="sd">        Overide this method to get notified about trump exchanges. Note that this only notifies about the other bots exchanges.</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos">  30</span></a>
</span><span id="L-31"><a href="#L-31"><span class="linenos">  31</span></a><span class="sd">        :param move: the Trump Exchange move that was played.</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos">  32</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos">  33</span></a>
</span><span id="L-34"><a href="#L-34"><span class="linenos">  34</span></a>    <span class="k">def</span> <span class="nf">notify_game_end</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">won</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="s1">&#39;PlayerPerspective&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos">  35</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos">  36</span></a><span class="sd">        Override this method to get notified about the end of the game.</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos">  37</span></a>
</span><span id="L-38"><a href="#L-38"><span class="linenos">  38</span></a><span class="sd">        :param won: Did this bot win the game?</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos">  39</span></a><span class="sd">        :param state: The final state of the game.</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos">  40</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos">  41</span></a>
</span><span id="L-42"><a href="#L-42"><span class="linenos">  42</span></a>
</span><span id="L-43"><a href="#L-43"><span class="linenos">  43</span></a><span class="k">class</span> <span class="nc">Move</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos">  44</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos">  45</span></a><span class="sd">    A single move during a game. There are several types of move possible: normal moves, trump exchanges, and marriages. They are implmented in classes inheriting from this class.</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos">  46</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos">  47</span></a>
</span><span id="L-48"><a href="#L-48"><span class="linenos">  48</span></a>    <span class="n">cards</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Card</span><span class="p">]</span>  <span class="c1"># implementation detail: The creation of this list is defered to the derived classes in _cards()</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos">  49</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The cards played in this move&quot;&quot;&quot;</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos">  50</span></a>
</span><span id="L-51"><a href="#L-51"><span class="linenos">  51</span></a>    <span class="k">def</span> <span class="nf">is_regular_move</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos">  52</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos">  53</span></a><span class="sd">        Is this Move a regular move (not a mariage or trump exchange)</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos">  54</span></a>
</span><span id="L-55"><a href="#L-55"><span class="linenos">  55</span></a><span class="sd">        :returns: a bool indicating whether this is a regular move</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos">  56</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos">  57</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos">  58</span></a>
</span><span id="L-59"><a href="#L-59"><span class="linenos">  59</span></a>    <span class="k">def</span> <span class="nf">as_regular_move</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;RegularMove&#39;</span><span class="p">:</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos">  60</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns this same move but as a Marriage.&quot;&quot;&quot;</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos">  61</span></a>        <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;as_regular_move called on a Move which is not a regular move. Check with is_regular_move first.&quot;</span><span class="p">)</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos">  62</span></a>
</span><span id="L-63"><a href="#L-63"><span class="linenos">  63</span></a>    <span class="k">def</span> <span class="nf">is_marriage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos">  64</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos">  65</span></a><span class="sd">        Is this Move a marriage?</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos">  66</span></a>
</span><span id="L-67"><a href="#L-67"><span class="linenos">  67</span></a><span class="sd">        :returns: a bool indicating whether this move is a marriage</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos">  68</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos">  69</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos">  70</span></a>
</span><span id="L-71"><a href="#L-71"><span class="linenos">  71</span></a>    <span class="k">def</span> <span class="nf">as_marriage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Marriage&#39;</span><span class="p">:</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos">  72</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns this same move but as a Marriage.&quot;&quot;&quot;</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos">  73</span></a>        <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;as_marriage called on a Move which is not a Marriage. Check with is_marriage first.&quot;</span><span class="p">)</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos">  74</span></a>
</span><span id="L-75"><a href="#L-75"><span class="linenos">  75</span></a>    <span class="k">def</span> <span class="nf">is_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos">  76</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos">  77</span></a><span class="sd">        Is this Move a trump exchange move?</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos">  78</span></a>
</span><span id="L-79"><a href="#L-79"><span class="linenos">  79</span></a><span class="sd">        :returns: a bool indicating whether this move is a trump exchange</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos">  80</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos">  81</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos">  82</span></a>
</span><span id="L-83"><a href="#L-83"><span class="linenos">  83</span></a>    <span class="k">def</span> <span class="nf">as_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Trump_Exchange&#39;</span><span class="p">:</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos">  84</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns this same move but as a Trump_Exchange.&quot;&quot;&quot;</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos">  85</span></a>        <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;as_marriage called on a Move which is not a Trump_Exchange. Check with is_trump_exchange first.&quot;</span><span class="p">)</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos">  86</span></a>
</span><span id="L-87"><a href="#L-87"><span class="linenos">  87</span></a>    <span class="k">def</span> <span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">__name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos">  88</span></a>        <span class="k">if</span> <span class="n">__name</span> <span class="o">==</span> <span class="s2">&quot;cards&quot;</span><span class="p">:</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos">  89</span></a>            <span class="c1"># We call the method to compute the card list</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos">  90</span></a>            <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_cards&quot;</span><span class="p">)()</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos">  91</span></a>        <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">__name</span><span class="p">)</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos">  92</span></a>
</span><span id="L-93"><a href="#L-93"><span class="linenos">  93</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos">  94</span></a>    <span class="k">def</span> <span class="nf">_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos">  95</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos">  96</span></a><span class="sd">        Get the list of cards in this move. This method should not be called direcly, use the cards property instead.</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos">  97</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos">  98</span></a>
</span><span id="L-99"><a href="#L-99"><span class="linenos">  99</span></a>
</span><span id="L-100"><a href="#L-100"><span class="linenos"> 100</span></a><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos"> 101</span></a><span class="k">class</span> <span class="nc">Trump_Exchange</span><span class="p">(</span><span class="n">Move</span><span class="p">):</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos"> 102</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A move that implements the exchange of the trump card for a Jack of the same suit.&quot;&quot;&quot;</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos"> 103</span></a>
</span><span id="L-104"><a href="#L-104"><span class="linenos"> 104</span></a>    <span class="n">jack</span><span class="p">:</span> <span class="n">Card</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos"> 105</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The Jack which will be placed at the bottom of the Talon&quot;&quot;&quot;</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos"> 106</span></a>
</span><span id="L-107"><a href="#L-107"><span class="linenos"> 107</span></a>    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos"> 108</span></a>        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">jack</span><span class="o">.</span><span class="n">rank</span> <span class="ow">is</span> <span class="n">Rank</span><span class="o">.</span><span class="n">JACK</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos"> 109</span></a>
</span><span id="L-110"><a href="#L-110"><span class="linenos"> 110</span></a>    <span class="k">def</span> <span class="nf">is_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos"> 111</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos"> 112</span></a>
</span><span id="L-113"><a href="#L-113"><span class="linenos"> 113</span></a>    <span class="k">def</span> <span class="nf">as_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Trump_Exchange&#39;</span><span class="p">:</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos"> 114</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos"> 115</span></a>
</span><span id="L-116"><a href="#L-116"><span class="linenos"> 116</span></a>    <span class="k">def</span> <span class="nf">_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos"> 117</span></a>        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">jack</span><span class="p">]</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos"> 118</span></a>
</span><span id="L-119"><a href="#L-119"><span class="linenos"> 119</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos"> 120</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Trump_Exchange(jack=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">jack</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos"> 121</span></a>
</span><span id="L-122"><a href="#L-122"><span class="linenos"> 122</span></a>
</span><span id="L-123"><a href="#L-123"><span class="linenos"> 123</span></a><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos"> 124</span></a><span class="k">class</span> <span class="nc">RegularMove</span><span class="p">(</span><span class="n">Move</span><span class="p">):</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos"> 125</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A regular move in the game&quot;&quot;&quot;</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos"> 126</span></a>
</span><span id="L-127"><a href="#L-127"><span class="linenos"> 127</span></a>    <span class="n">card</span><span class="p">:</span> <span class="n">Card</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos"> 128</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The card which is played&quot;&quot;&quot;</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos"> 129</span></a>
</span><span id="L-130"><a href="#L-130"><span class="linenos"> 130</span></a>    <span class="k">def</span> <span class="nf">_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos"> 131</span></a>        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">card</span><span class="p">]</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos"> 132</span></a>
</span><span id="L-133"><a href="#L-133"><span class="linenos"> 133</span></a>    <span class="nd">@staticmethod</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos"> 134</span></a>    <span class="k">def</span> <span class="nf">from_cards</span><span class="p">(</span><span class="n">cards</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Card</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos"> 135</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create an iterable of Moves from an iterable of cards.&quot;&quot;&quot;</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos"> 136</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">RegularMove</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">cards</span><span class="p">]</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos"> 137</span></a>
</span><span id="L-138"><a href="#L-138"><span class="linenos"> 138</span></a>    <span class="k">def</span> <span class="nf">is_regular_move</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos"> 139</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos"> 140</span></a>
</span><span id="L-141"><a href="#L-141"><span class="linenos"> 141</span></a>    <span class="k">def</span> <span class="nf">as_regular_move</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;RegularMove&#39;</span><span class="p">:</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos"> 142</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos"> 143</span></a>
</span><span id="L-144"><a href="#L-144"><span class="linenos"> 144</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos"> 145</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;RegularMove(card=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">card</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos"> 146</span></a>
</span><span id="L-147"><a href="#L-147"><span class="linenos"> 147</span></a>
</span><span id="L-148"><a href="#L-148"><span class="linenos"> 148</span></a><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos"> 149</span></a><span class="k">class</span> <span class="nc">Marriage</span><span class="p">(</span><span class="n">Move</span><span class="p">):</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos"> 150</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos"> 151</span></a><span class="sd">    A Move representing a marriage in the game. This move has two cards, a king and a queen of the same suit.</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos"> 152</span></a><span class="sd">    Right after the marriage is played, the player must play either the queen or the king.</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos"> 153</span></a><span class="sd">    Because it can only be beneficial to play the queen, it is chosen automatically.</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos"> 154</span></a><span class="sd">    This Regular move is part of this Move already and does not have to be played separatly.</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos"> 155</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos"> 156</span></a>    <span class="n">queen_card</span><span class="p">:</span> <span class="n">Card</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos"> 157</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The queen card of this marriage&quot;&quot;&quot;</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos"> 158</span></a>    <span class="n">king_card</span><span class="p">:</span> <span class="n">Card</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos"> 159</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The king card of this marriage&quot;&quot;&quot;</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos"> 160</span></a>    <span class="n">suit</span><span class="p">:</span> <span class="n">Suit</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="nb">repr</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="nb">hash</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos"> 161</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The suit of this marriage, gets derived from the suit of the queen and king.&quot;&quot;&quot;</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos"> 162</span></a>
</span><span id="L-163"><a href="#L-163"><span class="linenos"> 163</span></a>    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos"> 164</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos"> 165</span></a><span class="sd">        Make sure that the suits of the fields all have the same suit and are a king and a queen.</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos"> 166</span></a><span class="sd">        Finally, sets the suit field.</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos"> 167</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos"> 168</span></a>        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">queen_card</span><span class="o">.</span><span class="n">rank</span> <span class="ow">is</span> <span class="n">Rank</span><span class="o">.</span><span class="n">QUEEN</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos"> 169</span></a>        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">king_card</span><span class="o">.</span><span class="n">rank</span> <span class="ow">is</span> <span class="n">Rank</span><span class="o">.</span><span class="n">KING</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos"> 170</span></a>        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">queen_card</span><span class="o">.</span><span class="n">suit</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">king_card</span><span class="o">.</span><span class="n">suit</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos"> 171</span></a>        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;suit&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queen_card</span><span class="o">.</span><span class="n">suit</span><span class="p">)</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos"> 172</span></a>
</span><span id="L-173"><a href="#L-173"><span class="linenos"> 173</span></a>    <span class="k">def</span> <span class="nf">is_marriage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos"> 174</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos"> 175</span></a>
</span><span id="L-176"><a href="#L-176"><span class="linenos"> 176</span></a>    <span class="k">def</span> <span class="nf">as_marriage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Marriage&#39;</span><span class="p">:</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos"> 177</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos"> 178</span></a>
</span><span id="L-179"><a href="#L-179"><span class="linenos"> 179</span></a>    <span class="k">def</span> <span class="nf">underlying_regular_move</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RegularMove</span><span class="p">:</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos"> 180</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos"> 181</span></a><span class="sd">        Get the regular move which was played because of the marriage. In this engine this is always the queen card.</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos"> 182</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos"> 183</span></a>        <span class="c1"># this limits you to only have the queen to play after a marriage, while in general you would have a choice.</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos"> 184</span></a>        <span class="c1"># This is not an issue since playing the queen give you the highest score.</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos"> 185</span></a>        <span class="k">return</span> <span class="n">RegularMove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">queen_card</span><span class="p">)</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos"> 186</span></a>
</span><span id="L-187"><a href="#L-187"><span class="linenos"> 187</span></a>    <span class="k">def</span> <span class="nf">_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos"> 188</span></a>        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">queen_card</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">king_card</span><span class="p">]</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos"> 189</span></a>
</span><span id="L-190"><a href="#L-190"><span class="linenos"> 190</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos"> 191</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Marriage(queen_card=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">queen_card</span><span class="si">}</span><span class="s2">, king_card=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">king_card</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos"> 192</span></a>
</span><span id="L-193"><a href="#L-193"><span class="linenos"> 193</span></a>
</span><span id="L-194"><a href="#L-194"><span class="linenos"> 194</span></a><span class="k">class</span> <span class="nc">Hand</span><span class="p">(</span><span class="n">CardCollection</span><span class="p">):</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos"> 195</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Representing the cards in the hand of a player. These are the cards which the player can see and which he can play with in the turn.&quot;&quot;&quot;</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos"> 196</span></a>
</span><span id="L-197"><a href="#L-197"><span class="linenos"> 197</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cards</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Card</span><span class="p">],</span> <span class="n">max_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos"> 198</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos"> 199</span></a><span class="sd">        Create a hand containing the cards.</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos"> 200</span></a>
</span><span id="L-201"><a href="#L-201"><span class="linenos"> 201</span></a><span class="sd">        :param cards: The cards to be added to the hand</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos"> 202</span></a><span class="sd">        :param max_size: The maximum number of cards the hand can contain. If the number of cards goes beyond, an Exception is raised.</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos"> 203</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos"> 204</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">max_size</span> <span class="o">=</span> <span class="n">max_size</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos"> 205</span></a>        <span class="n">cards</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">cards</span><span class="p">)</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos"> 206</span></a>        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">cards</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">max_size</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;The number of cards </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">cards</span><span class="p">)</span><span class="si">}</span><span class="s2"> is larger than the maximum number fo allowed cards </span><span class="si">{</span><span class="n">max_size</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos"> 207</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cards</span> <span class="o">=</span> <span class="n">cards</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos"> 208</span></a>
</span><span id="L-209"><a href="#L-209"><span class="linenos"> 209</span></a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">card</span><span class="p">:</span> <span class="n">Card</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos"> 210</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove one occurence of the card from this hand&quot;&quot;&quot;</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos"> 211</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos"> 212</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos"> 213</span></a>        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos"> 214</span></a>            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Trying to remove a card from the hand which is not in the hand. Hand is </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="si">}</span><span class="s2">, trying to remove </span><span class="si">{</span><span class="n">card</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">ve</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos"> 215</span></a>
</span><span id="L-216"><a href="#L-216"><span class="linenos"> 216</span></a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">card</span><span class="p">:</span> <span class="n">Card</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos"> 217</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos"> 218</span></a><span class="sd">        Add a card to the Hand</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos"> 219</span></a>
</span><span id="L-220"><a href="#L-220"><span class="linenos"> 220</span></a><span class="sd">        :param card:  The card to be added to the hand</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos"> 221</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos"> 222</span></a>        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_size</span><span class="p">,</span> <span class="s2">&quot;Adding one more card to the hand will cause a hand with too many cards&quot;</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos"> 223</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos"> 224</span></a>
</span><span id="L-225"><a href="#L-225"><span class="linenos"> 225</span></a>    <span class="k">def</span> <span class="nf">has_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cards</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Card</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos"> 226</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos"> 227</span></a><span class="sd">        Are all the cards contained in this Hand?</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos"> 228</span></a>
</span><span id="L-229"><a href="#L-229"><span class="linenos"> 229</span></a><span class="sd">        :param cards: An iterable of cards which need to be checked</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos"> 230</span></a><span class="sd">        :returns: Whether all cards in the provided iterable are in this Hand</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos"> 231</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos"> 232</span></a>        <span class="k">return</span> <span class="nb">all</span><span class="p">(</span><span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cards</span> <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">cards</span><span class="p">)</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos"> 233</span></a>
</span><span id="L-234"><a href="#L-234"><span class="linenos"> 234</span></a>    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Hand&#39;</span><span class="p">:</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos"> 235</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos"> 236</span></a><span class="sd">        Create a deep copy of this Hand</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos"> 237</span></a>
</span><span id="L-238"><a href="#L-238"><span class="linenos"> 238</span></a><span class="sd">        :returns: A deep copy of this hand. Changes to the original will not affect the copy and vice versa.</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos"> 239</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos"> 240</span></a>        <span class="k">return</span> <span class="n">Hand</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="p">),</span> <span class="n">max_size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">max_size</span><span class="p">)</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos"> 241</span></a>
</span><span id="L-242"><a href="#L-242"><span class="linenos"> 242</span></a>    <span class="k">def</span> <span class="nf">is_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos"> 243</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos"> 244</span></a><span class="sd">        Is the Hand emoty?</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos"> 245</span></a>
</span><span id="L-246"><a href="#L-246"><span class="linenos"> 246</span></a><span class="sd">        :returns: A bool indicating whether the hand is empty</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos"> 247</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos"> 248</span></a>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos"> 249</span></a>
</span><span id="L-250"><a href="#L-250"><span class="linenos"> 250</span></a>    <span class="k">def</span> <span class="nf">get_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos"> 251</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="p">)</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos"> 252</span></a>
</span><span id="L-253"><a href="#L-253"><span class="linenos"> 253</span></a>    <span class="k">def</span> <span class="nf">filter_suit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">suit</span><span class="p">:</span> <span class="n">Suit</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos"> 254</span></a>        <span class="n">results</span> <span class="o">=</span> <span class="p">[</span><span class="n">card</span> <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cards</span> <span class="k">if</span> <span class="n">card</span><span class="o">.</span><span class="n">suit</span> <span class="ow">is</span> <span class="n">suit</span><span class="p">]</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos"> 255</span></a>        <span class="k">return</span> <span class="n">results</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos"> 256</span></a>
</span><span id="L-257"><a href="#L-257"><span class="linenos"> 257</span></a>    <span class="k">def</span> <span class="nf">filter_rank</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rank</span><span class="p">:</span> <span class="n">Rank</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos"> 258</span></a>        <span class="n">results</span> <span class="o">=</span> <span class="p">[</span><span class="n">card</span> <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cards</span> <span class="k">if</span> <span class="n">card</span><span class="o">.</span><span class="n">rank</span> <span class="ow">is</span> <span class="n">rank</span><span class="p">]</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos"> 259</span></a>        <span class="k">return</span> <span class="n">results</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos"> 260</span></a>
</span><span id="L-261"><a href="#L-261"><span class="linenos"> 261</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos"> 262</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Hand(cards=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="si">}</span><span class="s2">, max_size=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">max_size</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos"> 263</span></a>
</span><span id="L-264"><a href="#L-264"><span class="linenos"> 264</span></a>
</span><span id="L-265"><a href="#L-265"><span class="linenos"> 265</span></a><span class="k">class</span> <span class="nc">Talon</span><span class="p">(</span><span class="n">OrderedCardCollection</span><span class="p">):</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos"> 266</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos"> 267</span></a><span class="sd">    The Talon contains the cards which have not yet been given to the players.</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos"> 268</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos"> 269</span></a>
</span><span id="L-270"><a href="#L-270"><span class="linenos"> 270</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cards</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Card</span><span class="p">],</span> <span class="n">trump_suit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Suit</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos"> 271</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos"> 272</span></a><span class="sd">        The cards of the Talon. The last card of the iterable is the bottommost card.</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos"> 273</span></a><span class="sd">        The first one is the top card (which will be taken is a card is drawn)</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos"> 274</span></a><span class="sd">        The Trump card is at the bottom of the Talon.</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos"> 275</span></a><span class="sd">        The trump_suit can also be specified explicitly, which is important when the Talon is empty.</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos"> 276</span></a><span class="sd">        If the trump_suit is specified and there are cards, then the suit of the bottommost card must be the same.</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos"> 277</span></a>
</span><span id="L-278"><a href="#L-278"><span class="linenos"> 278</span></a><span class="sd">        :param cards: The cards to be put on this talon, a defensive copy will be made.</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos"> 279</span></a><span class="sd">        :param trump_suit: The trump suit of the Talon, important if there are no more cards to be taken.</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos"> 280</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos"> 281</span></a>        <span class="k">if</span> <span class="n">cards</span><span class="p">:</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos"> 282</span></a>            <span class="n">trump_card_suit</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">cards</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">suit</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos"> 283</span></a>            <span class="k">assert</span> <span class="ow">not</span> <span class="n">trump_suit</span> <span class="ow">or</span> <span class="n">trump_card_suit</span> <span class="o">==</span> <span class="n">trump_suit</span><span class="p">,</span> <span class="s2">&quot;If the trump suit is specified, and there are cards on the talon, the suit must be the same!&quot;</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos"> 284</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__trump_suit</span> <span class="o">=</span> <span class="n">trump_card_suit</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos"> 285</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos"> 286</span></a>            <span class="k">assert</span> <span class="n">trump_suit</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos"> 287</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__trump_suit</span> <span class="o">=</span> <span class="n">trump_suit</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos"> 288</span></a>
</span><span id="L-289"><a href="#L-289"><span class="linenos"> 289</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">cards</span><span class="p">)</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos"> 290</span></a>
</span><span id="L-291"><a href="#L-291"><span class="linenos"> 291</span></a>    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Talon&#39;</span><span class="p">:</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos"> 292</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos"> 293</span></a><span class="sd">        Create an independent copy of this talon.</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos"> 294</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos"> 295</span></a>        <span class="c1"># We do not need to make a copy of the cards as this happend in the constructor of Talon.</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos"> 296</span></a>        <span class="k">return</span> <span class="n">Talon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__trump_suit</span><span class="p">)</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos"> 297</span></a>
</span><span id="L-298"><a href="#L-298"><span class="linenos"> 298</span></a>    <span class="k">def</span> <span class="nf">trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_trump</span><span class="p">:</span> <span class="n">Card</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Card</span><span class="p">:</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos"> 299</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos"> 300</span></a><span class="sd">        perfom a trump-jack exchange. The card to be put as the trump card must be a Jack of the same suit.</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos"> 301</span></a><span class="sd">        As a result, this Talon changed: the old trump is removed and the new_trump is at the bottom of the Talon</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos"> 302</span></a>
</span><span id="L-303"><a href="#L-303"><span class="linenos"> 303</span></a><span class="sd">        We also require that there must be two cards on the Talon, which is always the case in a normal game of Schnapsen</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos"> 304</span></a>
</span><span id="L-305"><a href="#L-305"><span class="linenos"> 305</span></a><span class="sd">        :param new_trump: The card to be put. It must be a Jack of the same suit as the card at the bottom</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos"> 306</span></a>
</span><span id="L-307"><a href="#L-307"><span class="linenos"> 307</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos"> 308</span></a>        <span class="k">assert</span> <span class="n">new_trump</span><span class="o">.</span><span class="n">rank</span> <span class="ow">is</span> <span class="n">Rank</span><span class="o">.</span><span class="n">JACK</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos"> 309</span></a>        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos"> 310</span></a>        <span class="k">assert</span> <span class="n">new_trump</span><span class="o">.</span><span class="n">suit</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">suit</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos"> 311</span></a>        <span class="n">old_trump</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos"> 312</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_trump</span><span class="p">)</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos"> 313</span></a>        <span class="k">return</span> <span class="n">old_trump</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos"> 314</span></a>
</span><span id="L-315"><a href="#L-315"><span class="linenos"> 315</span></a>    <span class="k">def</span> <span class="nf">draw_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos"> 316</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Draw a card from this Talon. This does not change the talon, btu rather returns a talon with the change applied and the card drawn&quot;&quot;&quot;</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos"> 317</span></a>        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">amount</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;There are only </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">)</span><span class="si">}</span><span class="s2"> on the Talon, but </span><span class="si">{</span><span class="n">amount</span><span class="si">}</span><span class="s2"> cards are requested&quot;</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos"> 318</span></a>        <span class="n">draw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">[:</span><span class="n">amount</span><span class="p">]</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos"> 319</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_cards</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">[</span><span class="n">amount</span><span class="p">:]</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos"> 320</span></a>        <span class="k">return</span> <span class="n">draw</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos"> 321</span></a>
</span><span id="L-322"><a href="#L-322"><span class="linenos"> 322</span></a>    <span class="k">def</span> <span class="nf">trump_suit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Suit</span><span class="p">:</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos"> 323</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the suit of the trump card, i.e., the bottommost card.</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos"> 324</span></a><span class="sd">        This still works, even when the Talon has become empty.</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos"> 325</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos"> 326</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__trump_suit</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos"> 327</span></a>
</span><span id="L-328"><a href="#L-328"><span class="linenos"> 328</span></a>    <span class="k">def</span> <span class="nf">trump_card</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos"> 329</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the current trump card, i.e., the bottommost card.</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos"> 330</span></a><span class="sd">        Or None in case this Talon is empty</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos"> 331</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos"> 332</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos"> 333</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos"> 334</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos"> 335</span></a>
</span><span id="L-336"><a href="#L-336"><span class="linenos"> 336</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos"> 337</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Talon(cards=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="si">}</span><span class="s2">, trump_suit=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__trump_suit</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos"> 338</span></a>
</span><span id="L-339"><a href="#L-339"><span class="linenos"> 339</span></a>
</span><span id="L-340"><a href="#L-340"><span class="linenos"> 340</span></a><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos"> 341</span></a><span class="k">class</span> <span class="nc">Trick</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos"> 342</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos"> 343</span></a><span class="sd">    A complete trick. This is, the move of the leader and if that was not an exchange, the move of the follower.</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos"> 344</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos"> 345</span></a>
</span><span id="L-346"><a href="#L-346"><span class="linenos"> 346</span></a>    <span class="n">cards</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Card</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="nb">repr</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="nb">hash</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos"> 347</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;All cards used as part of this trick. This includes cards used in marriages&quot;&quot;&quot;</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos"> 348</span></a>
</span><span id="L-349"><a href="#L-349"><span class="linenos"> 349</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos"> 350</span></a>    <span class="k">def</span> <span class="nf">is_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos"> 351</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos"> 352</span></a><span class="sd">        Returns True if this is a trump exchange</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos"> 353</span></a>
</span><span id="L-354"><a href="#L-354"><span class="linenos"> 354</span></a><span class="sd">        :returns: True in case this was a trump exchange</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos"> 355</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos"> 356</span></a>
</span><span id="L-357"><a href="#L-357"><span class="linenos"> 357</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos"> 358</span></a>    <span class="k">def</span> <span class="nf">as_partial</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;PartialTrick&#39;</span><span class="p">:</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos"> 359</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos"> 360</span></a><span class="sd">        Returns the first part of this trick. Raises an Exceptption if this is not a Trick with two parts</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos"> 361</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos"> 362</span></a>
</span><span id="L-363"><a href="#L-363"><span class="linenos"> 363</span></a>    <span class="k">def</span> <span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">__name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos"> 364</span></a>        <span class="k">if</span> <span class="n">__name</span> <span class="o">==</span> <span class="s2">&quot;cards&quot;</span><span class="p">:</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos"> 365</span></a>            <span class="c1"># We call the method to compute the card list</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos"> 366</span></a>            <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_cards&quot;</span><span class="p">)()</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos"> 367</span></a>        <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">__name</span><span class="p">)</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos"> 368</span></a>
</span><span id="L-369"><a href="#L-369"><span class="linenos"> 369</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos"> 370</span></a>    <span class="k">def</span> <span class="nf">_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos"> 371</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos"> 372</span></a><span class="sd">        Get all cards used in this tick. This method should not be called directly.</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos"> 373</span></a><span class="sd">        Use the cards property instead.</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos"> 374</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos"> 375</span></a>
</span><span id="L-376"><a href="#L-376"><span class="linenos"> 376</span></a>
</span><span id="L-377"><a href="#L-377"><span class="linenos"> 377</span></a><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos"> 378</span></a><span class="k">class</span> <span class="nc">ExchangeTrick</span><span class="p">(</span><span class="n">Trick</span><span class="p">):</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos"> 379</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos"> 380</span></a><span class="sd">    A Trick in which the player does a trump exchange.</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos"> 381</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos"> 382</span></a>
</span><span id="L-383"><a href="#L-383"><span class="linenos"> 383</span></a>    <span class="n">exchange</span><span class="p">:</span> <span class="n">Trump_Exchange</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos"> 384</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A trump exchange by the leading player&quot;&quot;&quot;</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos"> 385</span></a>
</span><span id="L-386"><a href="#L-386"><span class="linenos"> 386</span></a>    <span class="n">trump_card</span><span class="p">:</span> <span class="n">Card</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos"> 387</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The card at the bottom of the talon&quot;&quot;&quot;</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos"> 388</span></a>
</span><span id="L-389"><a href="#L-389"><span class="linenos"> 389</span></a>    <span class="k">def</span> <span class="nf">is_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos"> 390</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos"> 391</span></a>
</span><span id="L-392"><a href="#L-392"><span class="linenos"> 392</span></a>    <span class="k">def</span> <span class="nf">as_partial</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;PartialTrick&#39;</span><span class="p">:</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos"> 393</span></a>        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;An Exchange Trick does not have a first part&quot;</span><span class="p">)</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos"> 394</span></a>
</span><span id="L-395"><a href="#L-395"><span class="linenos"> 395</span></a>    <span class="k">def</span> <span class="nf">_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos"> 396</span></a>        <span class="n">exchange</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exchange</span><span class="o">.</span><span class="n">cards</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos"> 397</span></a>        <span class="n">exchange</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">trump_card</span><span class="p">)</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos"> 398</span></a>        <span class="k">return</span> <span class="n">exchange</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos"> 399</span></a>
</span><span id="L-400"><a href="#L-400"><span class="linenos"> 400</span></a>
</span><span id="L-401"><a href="#L-401"><span class="linenos"> 401</span></a><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos"> 402</span></a><span class="k">class</span> <span class="nc">PartialTrick</span><span class="p">:</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos"> 403</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos"> 404</span></a><span class="sd">    A partial trick is the move(s) played by the leading player.</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos"> 405</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos"> 406</span></a>    <span class="n">leader_move</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">RegularMove</span><span class="p">,</span> <span class="n">Marriage</span><span class="p">]</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos"> 407</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The move played by the leader of the trick&quot;&quot;&quot;</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos"> 408</span></a>
</span><span id="L-409"><a href="#L-409"><span class="linenos"> 409</span></a>    <span class="k">def</span> <span class="nf">is_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos"> 410</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos"> 411</span></a><span class="sd">        is this PartialTrick a Trump exchange?</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos"> 412</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos"> 413</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos"> 414</span></a>
</span><span id="L-415"><a href="#L-415"><span class="linenos"> 415</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos"> 416</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;PartialTrick(leader_move=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">leader_move</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos"> 417</span></a>
</span><span id="L-418"><a href="#L-418"><span class="linenos"> 418</span></a>
</span><span id="L-419"><a href="#L-419"><span class="linenos"> 419</span></a><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos"> 420</span></a><span class="k">class</span> <span class="nc">RegularTrick</span><span class="p">(</span><span class="n">Trick</span><span class="p">,</span> <span class="n">PartialTrick</span><span class="p">):</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos"> 421</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos"> 422</span></a><span class="sd">    A regular trick, with a move by the leader and a move by the follower</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos"> 423</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos"> 424</span></a>    <span class="n">follower_move</span><span class="p">:</span> <span class="n">RegularMove</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos"> 425</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The move played by the follower&quot;&quot;&quot;</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos"> 426</span></a>
</span><span id="L-427"><a href="#L-427"><span class="linenos"> 427</span></a>    <span class="k">def</span> <span class="nf">is_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos"> 428</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos"> 429</span></a>
</span><span id="L-430"><a href="#L-430"><span class="linenos"> 430</span></a>    <span class="k">def</span> <span class="nf">as_partial</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartialTrick</span><span class="p">:</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos"> 431</span></a>        <span class="k">return</span> <span class="n">PartialTrick</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos"> 432</span></a>
</span><span id="L-433"><a href="#L-433"><span class="linenos"> 433</span></a>    <span class="k">def</span> <span class="nf">_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos"> 434</span></a>        <span class="k">return</span> <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">leader_move</span><span class="o">.</span><span class="n">cards</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">follower_move</span><span class="o">.</span><span class="n">cards</span><span class="p">)</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos"> 435</span></a>
</span><span id="L-436"><a href="#L-436"><span class="linenos"> 436</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos"> 437</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;RegularTrick(leader_move=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">leader_move</span><span class="si">}</span><span class="s2">, follower_move=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">follower_move</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos"> 438</span></a>
</span><span id="L-439"><a href="#L-439"><span class="linenos"> 439</span></a>
</span><span id="L-440"><a href="#L-440"><span class="linenos"> 440</span></a><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos"> 441</span></a><span class="k">class</span> <span class="nc">Score</span><span class="p">:</span>
</span><span id="L-442"><a href="#L-442"><span class="linenos"> 442</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos"> 443</span></a><span class="sd">    The score of one of the bots. This consists of the current points and potential pending points because of an earlier played marriage.</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos"> 444</span></a><span class="sd">    Note that the socre object is immutable and supports the `+` operator, so it can be used somewhat as a usual number.</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos"> 445</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos"> 446</span></a>    <span class="n">direct_points</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos"> 447</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The current number of points&quot;&quot;&quot;</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos"> 448</span></a>    <span class="n">pending_points</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos"> 449</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Points to be applied in the future because of a past marriage&quot;&quot;&quot;</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos"> 450</span></a>
</span><span id="L-451"><a href="#L-451"><span class="linenos"> 451</span></a>    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s1">&#39;Score&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Score&#39;</span><span class="p">:</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos"> 452</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos"> 453</span></a><span class="sd">        Adds two scores together. Direct points and pending points are added separately.</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos"> 454</span></a>
</span><span id="L-455"><a href="#L-455"><span class="linenos"> 455</span></a><span class="sd">        :param other:  The score to be added to the current one.</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos"> 456</span></a><span class="sd">        :returns: A new score object with the points of the current score and the other combined</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos"> 457</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos"> 458</span></a>        <span class="n">total_direct_points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">direct_points</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">direct_points</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos"> 459</span></a>        <span class="n">total_pending_points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pending_points</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">pending_points</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos"> 460</span></a>        <span class="k">return</span> <span class="n">Score</span><span class="p">(</span><span class="n">total_direct_points</span><span class="p">,</span> <span class="n">total_pending_points</span><span class="p">)</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos"> 461</span></a>
</span><span id="L-462"><a href="#L-462"><span class="linenos"> 462</span></a>    <span class="k">def</span> <span class="nf">redeem_pending_points</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Score&#39;</span><span class="p">:</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos"> 463</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos"> 464</span></a><span class="sd">        Redeem the pending points</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos"> 465</span></a>
</span><span id="L-466"><a href="#L-466"><span class="linenos"> 466</span></a><span class="sd">        :returns: A new score object with the pending points added to the direct points and the pending points set to zero.</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos"> 467</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos"> 468</span></a>        <span class="k">return</span> <span class="n">Score</span><span class="p">(</span><span class="n">direct_points</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">direct_points</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">pending_points</span><span class="p">,</span> <span class="n">pending_points</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos"> 469</span></a>
</span><span id="L-470"><a href="#L-470"><span class="linenos"> 470</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos"> 471</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Score(direct_points=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">direct_points</span><span class="si">}</span><span class="s2">, pending_points=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pending_points</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos"> 472</span></a>
</span><span id="L-473"><a href="#L-473"><span class="linenos"> 473</span></a>
</span><span id="L-474"><a href="#L-474"><span class="linenos"> 474</span></a><span class="k">class</span> <span class="nc">GamePhase</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos"> 475</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos"> 476</span></a><span class="sd">    An indicator about the phase of the game. This is used because in Schnapsen, the rules change when the game enters the second phase.</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos"> 477</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos"> 478</span></a>    <span class="n">ONE</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos"> 479</span></a>    <span class="n">TWO</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos"> 480</span></a>
</span><span id="L-481"><a href="#L-481"><span class="linenos"> 481</span></a>
</span><span id="L-482"><a href="#L-482"><span class="linenos"> 482</span></a><span class="nd">@dataclass</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos"> 483</span></a><span class="k">class</span> <span class="nc">BotState</span><span class="p">:</span>
</span><span id="L-484"><a href="#L-484"><span class="linenos"> 484</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A bot with its implementation and current state in a game&quot;&quot;&quot;</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos"> 485</span></a>
</span><span id="L-486"><a href="#L-486"><span class="linenos"> 486</span></a>    <span class="n">implementation</span><span class="p">:</span> <span class="n">Bot</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos"> 487</span></a>    <span class="n">hand</span><span class="p">:</span> <span class="n">Hand</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos"> 488</span></a>    <span class="n">score</span><span class="p">:</span> <span class="n">Score</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">Score</span><span class="p">)</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos"> 489</span></a>    <span class="n">won_cards</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Card</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos"> 490</span></a>
</span><span id="L-491"><a href="#L-491"><span class="linenos"> 491</span></a>    <span class="k">def</span> <span class="nf">get_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="s1">&#39;PlayerPerspective&#39;</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Move</span><span class="p">:</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos"> 492</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos"> 493</span></a><span class="sd">        Gets the next move from the bot itself, passing it the state.</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos"> 494</span></a><span class="sd">        Does a quick check to make sure that the hand has the cards which are played. More advanced checks are performed outside of this call.</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos"> 495</span></a>
</span><span id="L-496"><a href="#L-496"><span class="linenos"> 496</span></a><span class="sd">        :param state: The PlayerGameState which contains the information on the current state of the game from the perspective of this player</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos"> 497</span></a><span class="sd">        :returns: The move the both played</span>
</span><span id="L-498"><a href="#L-498"><span class="linenos"> 498</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos"> 499</span></a>        <span class="n">move</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">implementation</span><span class="o">.</span><span class="n">get_move</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">leader_move</span><span class="o">=</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos"> 500</span></a>        <span class="k">assert</span> <span class="n">move</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;The bot </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">implementation</span><span class="si">}</span><span class="s2"> returned a move which is None&quot;</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos"> 501</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">move</span><span class="p">,</span> <span class="n">Move</span><span class="p">):</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos"> 502</span></a>            <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The bot </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">implementation</span><span class="si">}</span><span class="s2"> returned an object which is not a Move, got </span><span class="si">{</span><span class="n">move</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos"> 503</span></a>        <span class="k">return</span> <span class="n">move</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos"> 504</span></a>
</span><span id="L-505"><a href="#L-505"><span class="linenos"> 505</span></a>    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;BotState&#39;</span><span class="p">:</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos"> 506</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-507"><a href="#L-507"><span class="linenos"> 507</span></a><span class="sd">        Makes a deep copy of the current state.</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos"> 508</span></a>
</span><span id="L-509"><a href="#L-509"><span class="linenos"> 509</span></a><span class="sd">        :returns: The deep copy.</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos"> 510</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos"> 511</span></a>        <span class="n">new_bot</span> <span class="o">=</span> <span class="n">BotState</span><span class="p">(</span>
</span><span id="L-512"><a href="#L-512"><span class="linenos"> 512</span></a>            <span class="n">implementation</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">implementation</span><span class="p">,</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos"> 513</span></a>            <span class="n">hand</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos"> 514</span></a>            <span class="n">score</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">score</span><span class="p">,</span>  <span class="c1"># does not need a copy because it is not mutable</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos"> 515</span></a>            <span class="n">won_cards</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">won_cards</span><span class="p">),</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos"> 516</span></a>        <span class="p">)</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos"> 517</span></a>        <span class="k">return</span> <span class="n">new_bot</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos"> 518</span></a>
</span><span id="L-519"><a href="#L-519"><span class="linenos"> 519</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos"> 520</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;BotState(implementation=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">implementation</span><span class="si">}</span><span class="s2">, hand=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hand</span><span class="si">}</span><span class="s2">, &quot;</span>\
</span><span id="L-521"><a href="#L-521"><span class="linenos"> 521</span></a>               <span class="sa">f</span><span class="s2">&quot;score=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">score</span><span class="si">}</span><span class="s2">, won_cards=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">won_cards</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="L-522"><a href="#L-522"><span class="linenos"> 522</span></a>
</span><span id="L-523"><a href="#L-523"><span class="linenos"> 523</span></a>
</span><span id="L-524"><a href="#L-524"><span class="linenos"> 524</span></a><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos"> 525</span></a><span class="k">class</span> <span class="nc">Previous</span><span class="p">:</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos"> 526</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-527"><a href="#L-527"><span class="linenos"> 527</span></a><span class="sd">    Information about the previous GameState.</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos"> 528</span></a><span class="sd">    This object can be used to access the history which lead to the current GameState</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos"> 529</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos"> 530</span></a>
</span><span id="L-531"><a href="#L-531"><span class="linenos"> 531</span></a>    <span class="n">state</span><span class="p">:</span> <span class="s1">&#39;GameState&#39;</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos"> 532</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The previous state of the game. &quot;&quot;&quot;</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos"> 533</span></a>    <span class="n">trick</span><span class="p">:</span> <span class="n">Trick</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos"> 534</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The trick which led to the current Gamestate from the Previous state&quot;&quot;&quot;</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos"> 535</span></a>    <span class="n">leader_remained_leader</span><span class="p">:</span> <span class="nb">bool</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos"> 536</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Did the leader of remain the leader.&quot;&quot;&quot;</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos"> 537</span></a>
</span><span id="L-538"><a href="#L-538"><span class="linenos"> 538</span></a>
</span><span id="L-539"><a href="#L-539"><span class="linenos"> 539</span></a><span class="nd">@dataclass</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos"> 540</span></a><span class="k">class</span> <span class="nc">GameState</span><span class="p">:</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos"> 541</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos"> 542</span></a><span class="sd">    The current state of the game, as seen by the game engine.</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos"> 543</span></a><span class="sd">    This contains all information about the positions of the cards, bots, scores, etc.</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos"> 544</span></a><span class="sd">    The bot must not get direct access to this information because it would allow it to cheat.</span>
</span><span id="L-545"><a href="#L-545"><span class="linenos"> 545</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos"> 546</span></a>    <span class="n">leader</span><span class="p">:</span> <span class="n">BotState</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos"> 547</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The current leader, i.e., the one who will play the first move in the next trick&quot;&quot;&quot;</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos"> 548</span></a>    <span class="n">follower</span><span class="p">:</span> <span class="n">BotState</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos"> 549</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The current follower, i.e., the one who will play the second move in the next trick&quot;&quot;&quot;</span>
</span><span id="L-550"><a href="#L-550"><span class="linenos"> 550</span></a>    <span class="n">trump_suit</span><span class="p">:</span> <span class="n">Suit</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos"> 551</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The trump suit in this game. This information is also in the Talon.&quot;&quot;&quot;</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos"> 552</span></a>    <span class="n">talon</span><span class="p">:</span> <span class="n">Talon</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos"> 553</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The talon, containing the cards not yet in the hand of the player and the trump card at the bottom&quot;&quot;&quot;</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos"> 554</span></a>    <span class="n">previous</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Previous</span><span class="p">]</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos"> 555</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The events which led to this GameState, or None, if this is the initial GameState (or previous tricks and states are unknown)&quot;&quot;&quot;</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos"> 556</span></a>
</span><span id="L-557"><a href="#L-557"><span class="linenos"> 557</span></a>    <span class="k">def</span> <span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">__name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos"> 558</span></a>        <span class="k">if</span> <span class="n">__name</span> <span class="o">==</span> <span class="s2">&quot;trump_suit&quot;</span><span class="p">:</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos"> 559</span></a>            <span class="c1"># We get it from the talon</span>
</span><span id="L-560"><a href="#L-560"><span class="linenos"> 560</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">trump_suit</span><span class="p">()</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos"> 561</span></a>        <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">__name</span><span class="p">)</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos"> 562</span></a>
</span><span id="L-563"><a href="#L-563"><span class="linenos"> 563</span></a>    <span class="k">def</span> <span class="nf">copy_for_next</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;GameState&#39;</span><span class="p">:</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos"> 564</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos"> 565</span></a><span class="sd">        Make a copy of the gamestate, modified such that the previous state is this state, but the previous trick is not filled yet.</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos"> 566</span></a><span class="sd">        This is used to create a GameState which will be modified to become the next gamestate.</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos"> 567</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos"> 568</span></a>        <span class="c1"># We intentionally do no initialize the previous information. It is not known yet</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos"> 569</span></a>        <span class="n">new_state</span> <span class="o">=</span> <span class="n">GameState</span><span class="p">(</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos"> 570</span></a>            <span class="n">leader</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos"> 571</span></a>            <span class="n">follower</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
</span><span id="L-572"><a href="#L-572"><span class="linenos"> 572</span></a>            <span class="n">talon</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos"> 573</span></a>            <span class="n">previous</span><span class="o">=</span><span class="kc">None</span>
</span><span id="L-574"><a href="#L-574"><span class="linenos"> 574</span></a>        <span class="p">)</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos"> 575</span></a>        <span class="k">return</span> <span class="n">new_state</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos"> 576</span></a>
</span><span id="L-577"><a href="#L-577"><span class="linenos"> 577</span></a>    <span class="k">def</span> <span class="nf">copy_with_other_bots</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_leader</span><span class="p">:</span> <span class="n">Bot</span><span class="p">,</span> <span class="n">new_follower</span><span class="p">:</span> <span class="n">Bot</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;GameState&#39;</span><span class="p">:</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos"> 578</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-579"><a href="#L-579"><span class="linenos"> 579</span></a><span class="sd">        Make a copy of the gamestate, modified such that the bots are replaced by the provided ones.</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos"> 580</span></a><span class="sd">        This is used to continue playing an existing GameState with different bots.</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos"> 581</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-582"><a href="#L-582"><span class="linenos"> 582</span></a>        <span class="n">new_state</span> <span class="o">=</span> <span class="n">GameState</span><span class="p">(</span>
</span><span id="L-583"><a href="#L-583"><span class="linenos"> 583</span></a>            <span class="n">leader</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos"> 584</span></a>            <span class="n">follower</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos"> 585</span></a>            <span class="n">talon</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
</span><span id="L-586"><a href="#L-586"><span class="linenos"> 586</span></a>            <span class="n">previous</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">previous</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos"> 587</span></a>        <span class="p">)</span>
</span><span id="L-588"><a href="#L-588"><span class="linenos"> 588</span></a>        <span class="n">new_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">implementation</span> <span class="o">=</span> <span class="n">new_leader</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos"> 589</span></a>        <span class="n">new_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">implementation</span> <span class="o">=</span> <span class="n">new_follower</span>
</span><span id="L-590"><a href="#L-590"><span class="linenos"> 590</span></a>        <span class="k">return</span> <span class="n">new_state</span>
</span><span id="L-591"><a href="#L-591"><span class="linenos"> 591</span></a>
</span><span id="L-592"><a href="#L-592"><span class="linenos"> 592</span></a>    <span class="k">def</span> <span class="nf">game_phase</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GamePhase</span><span class="p">:</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos"> 593</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;What is the current phase of the game</span>
</span><span id="L-594"><a href="#L-594"><span class="linenos"> 594</span></a>
</span><span id="L-595"><a href="#L-595"><span class="linenos"> 595</span></a><span class="sd">        :returns: GamePhase.ONE or GamePahse.TWO indicating the current phase</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos"> 596</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-597"><a href="#L-597"><span class="linenos"> 597</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
</span><span id="L-598"><a href="#L-598"><span class="linenos"> 598</span></a>            <span class="k">return</span> <span class="n">GamePhase</span><span class="o">.</span><span class="n">TWO</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos"> 599</span></a>        <span class="k">return</span> <span class="n">GamePhase</span><span class="o">.</span><span class="n">ONE</span>
</span><span id="L-600"><a href="#L-600"><span class="linenos"> 600</span></a>
</span><span id="L-601"><a href="#L-601"><span class="linenos"> 601</span></a>    <span class="k">def</span> <span class="nf">are_all_cards_played</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos"> 602</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True in case the players have played all their cards and the game is has come to an end</span>
</span><span id="L-603"><a href="#L-603"><span class="linenos"> 603</span></a>
</span><span id="L-604"><a href="#L-604"><span class="linenos"> 604</span></a><span class="sd">        :returns: Wheter all cards have been played</span>
</span><span id="L-605"><a href="#L-605"><span class="linenos"> 605</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos"> 606</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">is_empty</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">is_empty</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">is_empty</span><span class="p">()</span>
</span><span id="L-607"><a href="#L-607"><span class="linenos"> 607</span></a>
</span><span id="L-608"><a href="#L-608"><span class="linenos"> 608</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-609"><a href="#L-609"><span class="linenos"> 609</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;GameState(leader=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">leader</span><span class="si">}</span><span class="s2">, follower=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">follower</span><span class="si">}</span><span class="s2">, &quot;</span>\
</span><span id="L-610"><a href="#L-610"><span class="linenos"> 610</span></a>               <span class="sa">f</span><span class="s2">&quot;talon=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">talon</span><span class="si">}</span><span class="s2">, previous=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">previous</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="L-611"><a href="#L-611"><span class="linenos"> 611</span></a>
</span><span id="L-612"><a href="#L-612"><span class="linenos"> 612</span></a>
</span><span id="L-613"><a href="#L-613"><span class="linenos"> 613</span></a><span class="k">class</span> <span class="nc">PlayerPerspective</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="L-614"><a href="#L-614"><span class="linenos"> 614</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-615"><a href="#L-615"><span class="linenos"> 615</span></a><span class="sd">    The perspective a player has on the state of the game. This only gives access to the partially observable information.</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos"> 616</span></a><span class="sd">    The Bot gets passed an instance of this class when it gets requested a move by the GamePlayEngine</span>
</span><span id="L-617"><a href="#L-617"><span class="linenos"> 617</span></a>
</span><span id="L-618"><a href="#L-618"><span class="linenos"> 618</span></a><span class="sd">    This class has several convenience methods to get more information about the current state.</span>
</span><span id="L-619"><a href="#L-619"><span class="linenos"> 619</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-620"><a href="#L-620"><span class="linenos"> 620</span></a>
</span><span id="L-621"><a href="#L-621"><span class="linenos"> 621</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="s1">&#39;GameState&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-622"><a href="#L-622"><span class="linenos"> 622</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span> <span class="o">=</span> <span class="n">state</span>
</span><span id="L-623"><a href="#L-623"><span class="linenos"> 623</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span> <span class="o">=</span> <span class="n">engine</span>
</span><span id="L-624"><a href="#L-624"><span class="linenos"> 624</span></a>
</span><span id="L-625"><a href="#L-625"><span class="linenos"> 625</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="L-626"><a href="#L-626"><span class="linenos"> 626</span></a>    <span class="k">def</span> <span class="nf">valid_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="L-627"><a href="#L-627"><span class="linenos"> 627</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos"> 628</span></a><span class="sd">        Get a list of all valid moves the bot can play at this point in the game.</span>
</span><span id="L-629"><a href="#L-629"><span class="linenos"> 629</span></a>
</span><span id="L-630"><a href="#L-630"><span class="linenos"> 630</span></a><span class="sd">        Design note: this could also return an Iterable[Move], but list[Move] was chosen to make the API easier to use.</span>
</span><span id="L-631"><a href="#L-631"><span class="linenos"> 631</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-632"><a href="#L-632"><span class="linenos"> 632</span></a>
</span><span id="L-633"><a href="#L-633"><span class="linenos"> 633</span></a>    <span class="k">def</span> <span class="nf">get_game_history</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="s1">&#39;PlayerPerspective&#39;</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Trick</span><span class="p">]]]:</span>
</span><span id="L-634"><a href="#L-634"><span class="linenos"> 634</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-635"><a href="#L-635"><span class="linenos"> 635</span></a><span class="sd">        The game history from the perspective of the player. This means all the past PlayerPerspective this bot has seen, and the Tricks played.</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos"> 636</span></a><span class="sd">        This only provides access to cards the Bot is allowed to see.</span>
</span><span id="L-637"><a href="#L-637"><span class="linenos"> 637</span></a>
</span><span id="L-638"><a href="#L-638"><span class="linenos"> 638</span></a><span class="sd">        :returns: The PlayerPerspective and Tricks in chronological order, index 0 is the first round played. Only the last Trick will be None.</span>
</span><span id="L-639"><a href="#L-639"><span class="linenos"> 639</span></a><span class="sd">        The last pair will contain the current PlayerGameState.</span>
</span><span id="L-640"><a href="#L-640"><span class="linenos"> 640</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-641"><a href="#L-641"><span class="linenos"> 641</span></a>
</span><span id="L-642"><a href="#L-642"><span class="linenos"> 642</span></a>        <span class="c1"># We reconstruct the history backwards.</span>
</span><span id="L-643"><a href="#L-643"><span class="linenos"> 643</span></a>        <span class="n">game_state_history</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">PlayerPerspective</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Trick</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos"> 644</span></a>        <span class="c1"># We first push the current state to the end</span>
</span><span id="L-645"><a href="#L-645"><span class="linenos"> 645</span></a>        <span class="n">game_state_history</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
</span><span id="L-646"><a href="#L-646"><span class="linenos"> 646</span></a>
</span><span id="L-647"><a href="#L-647"><span class="linenos"> 647</span></a>        <span class="n">current_leader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">am_i_leader</span><span class="p">()</span>
</span><span id="L-648"><a href="#L-648"><span class="linenos"> 648</span></a>        <span class="n">current</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">previous</span>
</span><span id="L-649"><a href="#L-649"><span class="linenos"> 649</span></a>
</span><span id="L-650"><a href="#L-650"><span class="linenos"> 650</span></a>        <span class="k">while</span> <span class="n">current</span><span class="p">:</span>
</span><span id="L-651"><a href="#L-651"><span class="linenos"> 651</span></a>            <span class="c1"># If we were leader, and we remained, then we were leader before</span>
</span><span id="L-652"><a href="#L-652"><span class="linenos"> 652</span></a>            <span class="c1"># If we were follower, and we remained, then we were follower before</span>
</span><span id="L-653"><a href="#L-653"><span class="linenos"> 653</span></a>            <span class="c1"># If we were leader, and we did not remain, then we were follower before</span>
</span><span id="L-654"><a href="#L-654"><span class="linenos"> 654</span></a>            <span class="c1"># If we were follower, and we did not remain, then we were leader before</span>
</span><span id="L-655"><a href="#L-655"><span class="linenos"> 655</span></a>            <span class="c1"># This logic gets reflected by the negation of a xor</span>
</span><span id="L-656"><a href="#L-656"><span class="linenos"> 656</span></a>            <span class="n">current_leader</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">current_leader</span> <span class="o">^</span> <span class="n">current</span><span class="o">.</span><span class="n">leader_remained_leader</span>
</span><span id="L-657"><a href="#L-657"><span class="linenos"> 657</span></a>
</span><span id="L-658"><a href="#L-658"><span class="linenos"> 658</span></a>            <span class="n">current_player_state</span><span class="p">:</span> <span class="n">PlayerPerspective</span>
</span><span id="L-659"><a href="#L-659"><span class="linenos"> 659</span></a>            <span class="k">if</span> <span class="n">current_leader</span><span class="p">:</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos"> 660</span></a>                <span class="n">current_player_state</span> <span class="o">=</span> <span class="n">LeaderPerspective</span><span class="p">(</span><span class="n">current</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="p">)</span>
</span><span id="L-661"><a href="#L-661"><span class="linenos"> 661</span></a>            <span class="k">else</span><span class="p">:</span>  <span class="c1"># We are following</span>
</span><span id="L-662"><a href="#L-662"><span class="linenos"> 662</span></a>                <span class="k">if</span> <span class="n">current</span><span class="o">.</span><span class="n">trick</span><span class="o">.</span><span class="n">is_trump_exchange</span><span class="p">():</span>
</span><span id="L-663"><a href="#L-663"><span class="linenos"> 663</span></a>                    <span class="n">current_player_state</span> <span class="o">=</span> <span class="n">ExchangeFollowerPerspective</span><span class="p">(</span><span class="n">current</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="p">)</span>
</span><span id="L-664"><a href="#L-664"><span class="linenos"> 664</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos"> 665</span></a>                    <span class="n">current_player_state</span> <span class="o">=</span> <span class="n">FollowerPerspective</span><span class="p">(</span><span class="n">current</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="p">,</span> <span class="n">current</span><span class="o">.</span><span class="n">trick</span><span class="o">.</span><span class="n">as_partial</span><span class="p">()</span><span class="o">.</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="L-666"><a href="#L-666"><span class="linenos"> 666</span></a>            <span class="n">history_record</span> <span class="o">=</span> <span class="p">(</span><span class="n">current_player_state</span><span class="p">,</span> <span class="n">current</span><span class="o">.</span><span class="n">trick</span><span class="p">)</span>
</span><span id="L-667"><a href="#L-667"><span class="linenos"> 667</span></a>            <span class="n">game_state_history</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">history_record</span><span class="p">)</span>
</span><span id="L-668"><a href="#L-668"><span class="linenos"> 668</span></a>
</span><span id="L-669"><a href="#L-669"><span class="linenos"> 669</span></a>            <span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">previous</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos"> 670</span></a>        <span class="k">return</span> <span class="n">game_state_history</span>
</span><span id="L-671"><a href="#L-671"><span class="linenos"> 671</span></a>
</span><span id="L-672"><a href="#L-672"><span class="linenos"> 672</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="L-673"><a href="#L-673"><span class="linenos"> 673</span></a>    <span class="k">def</span> <span class="nf">get_hand</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hand</span><span class="p">:</span>
</span><span id="L-674"><a href="#L-674"><span class="linenos"> 674</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the cards in the hand of the current player&quot;&quot;&quot;</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos"> 675</span></a>
</span><span id="L-676"><a href="#L-676"><span class="linenos"> 676</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="L-677"><a href="#L-677"><span class="linenos"> 677</span></a>    <span class="k">def</span> <span class="nf">get_my_score</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
</span><span id="L-678"><a href="#L-678"><span class="linenos"> 678</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the socre of the current player. The return Score object contains both the direct points and pending points from a marriage.&quot;&quot;&quot;</span>
</span><span id="L-679"><a href="#L-679"><span class="linenos"> 679</span></a>
</span><span id="L-680"><a href="#L-680"><span class="linenos"> 680</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos"> 681</span></a>    <span class="k">def</span> <span class="nf">get_opponent_score</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
</span><span id="L-682"><a href="#L-682"><span class="linenos"> 682</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the socre of the other player. The return Score object contains both the direct points and pending points from a marriage.&quot;&quot;&quot;</span>
</span><span id="L-683"><a href="#L-683"><span class="linenos"> 683</span></a>
</span><span id="L-684"><a href="#L-684"><span class="linenos"> 684</span></a>    <span class="k">def</span> <span class="nf">get_trump_suit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Suit</span><span class="p">:</span>
</span><span id="L-685"><a href="#L-685"><span class="linenos"> 685</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the suit of the trump&quot;&quot;&quot;</span>
</span><span id="L-686"><a href="#L-686"><span class="linenos"> 686</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">trump_suit</span>
</span><span id="L-687"><a href="#L-687"><span class="linenos"> 687</span></a>
</span><span id="L-688"><a href="#L-688"><span class="linenos"> 688</span></a>    <span class="k">def</span> <span class="nf">get_trump_card</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="L-689"><a href="#L-689"><span class="linenos"> 689</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the card which is at the bottom of the talon. Will be None if the talon is empty&quot;&quot;&quot;</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos"> 690</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">trump_card</span><span class="p">()</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos"> 691</span></a>
</span><span id="L-692"><a href="#L-692"><span class="linenos"> 692</span></a>    <span class="k">def</span> <span class="nf">get_talon_size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="L-693"><a href="#L-693"><span class="linenos"> 693</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;How many cards are still on the talon?&quot;&quot;&quot;</span>
</span><span id="L-694"><a href="#L-694"><span class="linenos"> 694</span></a>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">talon</span><span class="p">)</span>
</span><span id="L-695"><a href="#L-695"><span class="linenos"> 695</span></a>
</span><span id="L-696"><a href="#L-696"><span class="linenos"> 696</span></a>    <span class="k">def</span> <span class="nf">get_phase</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GamePhase</span><span class="p">:</span>
</span><span id="L-697"><a href="#L-697"><span class="linenos"> 697</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;What is the pahse of the game? This returns a GamePhase object.</span>
</span><span id="L-698"><a href="#L-698"><span class="linenos"> 698</span></a><span class="sd">        You can check the phase by checking state.get_phase == GamePhase.ONE</span>
</span><span id="L-699"><a href="#L-699"><span class="linenos"> 699</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-700"><a href="#L-700"><span class="linenos"> 700</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">game_phase</span><span class="p">()</span>
</span><span id="L-701"><a href="#L-701"><span class="linenos"> 701</span></a>
</span><span id="L-702"><a href="#L-702"><span class="linenos"> 702</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="L-703"><a href="#L-703"><span class="linenos"> 703</span></a>    <span class="k">def</span> <span class="nf">get_opponent_hand_in_phase_two</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hand</span><span class="p">:</span>
</span><span id="L-704"><a href="#L-704"><span class="linenos"> 704</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;If the game is in the second phase, you can get the cards in the hand of the opponent.</span>
</span><span id="L-705"><a href="#L-705"><span class="linenos"> 705</span></a><span class="sd">        If this gets called, but the second pahse has not started yet, this will throw en Exception</span>
</span><span id="L-706"><a href="#L-706"><span class="linenos"> 706</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-707"><a href="#L-707"><span class="linenos"> 707</span></a>
</span><span id="L-708"><a href="#L-708"><span class="linenos"> 708</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="L-709"><a href="#L-709"><span class="linenos"> 709</span></a>    <span class="k">def</span> <span class="nf">am_i_leader</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-710"><a href="#L-710"><span class="linenos"> 710</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if the bot is the leader of this trick, False if it is a follower.&quot;&quot;&quot;</span>
</span><span id="L-711"><a href="#L-711"><span class="linenos"> 711</span></a>
</span><span id="L-712"><a href="#L-712"><span class="linenos"> 712</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="L-713"><a href="#L-713"><span class="linenos"> 713</span></a>    <span class="k">def</span> <span class="nf">get_won_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="L-714"><a href="#L-714"><span class="linenos"> 714</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of all cards this Bot has won until now.&quot;&quot;&quot;</span>
</span><span id="L-715"><a href="#L-715"><span class="linenos"> 715</span></a>
</span><span id="L-716"><a href="#L-716"><span class="linenos"> 716</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="L-717"><a href="#L-717"><span class="linenos"> 717</span></a>    <span class="k">def</span> <span class="nf">get_opponent_won_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="L-718"><a href="#L-718"><span class="linenos"> 718</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the list of cards the opponent has won until now.&quot;&quot;&quot;</span>
</span><span id="L-719"><a href="#L-719"><span class="linenos"> 719</span></a>
</span><span id="L-720"><a href="#L-720"><span class="linenos"> 720</span></a>    <span class="k">def</span> <span class="nf">__get_own_bot_state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BotState</span><span class="p">:</span>
</span><span id="L-721"><a href="#L-721"><span class="linenos"> 721</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the internal state object of this bot. This should not be used by a bot.&quot;&quot;&quot;</span>
</span><span id="L-722"><a href="#L-722"><span class="linenos"> 722</span></a>        <span class="n">bot</span><span class="p">:</span> <span class="n">BotState</span>
</span><span id="L-723"><a href="#L-723"><span class="linenos"> 723</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">am_i_leader</span><span class="p">():</span>
</span><span id="L-724"><a href="#L-724"><span class="linenos"> 724</span></a>            <span class="n">bot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span>
</span><span id="L-725"><a href="#L-725"><span class="linenos"> 725</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-726"><a href="#L-726"><span class="linenos"> 726</span></a>            <span class="n">bot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span>
</span><span id="L-727"><a href="#L-727"><span class="linenos"> 727</span></a>        <span class="k">return</span> <span class="n">bot</span>
</span><span id="L-728"><a href="#L-728"><span class="linenos"> 728</span></a>
</span><span id="L-729"><a href="#L-729"><span class="linenos"> 729</span></a>    <span class="k">def</span> <span class="nf">__get_opponent_bot_state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BotState</span><span class="p">:</span>
</span><span id="L-730"><a href="#L-730"><span class="linenos"> 730</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the internal state object of the other bot. This should not be used by a bot.&quot;&quot;&quot;</span>
</span><span id="L-731"><a href="#L-731"><span class="linenos"> 731</span></a>        <span class="n">bot</span><span class="p">:</span> <span class="n">BotState</span>
</span><span id="L-732"><a href="#L-732"><span class="linenos"> 732</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">am_i_leader</span><span class="p">():</span>
</span><span id="L-733"><a href="#L-733"><span class="linenos"> 733</span></a>            <span class="n">bot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span>
</span><span id="L-734"><a href="#L-734"><span class="linenos"> 734</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-735"><a href="#L-735"><span class="linenos"> 735</span></a>            <span class="n">bot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span>
</span><span id="L-736"><a href="#L-736"><span class="linenos"> 736</span></a>        <span class="k">return</span> <span class="n">bot</span>
</span><span id="L-737"><a href="#L-737"><span class="linenos"> 737</span></a>
</span><span id="L-738"><a href="#L-738"><span class="linenos"> 738</span></a>    <span class="k">def</span> <span class="nf">seen_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="L-739"><a href="#L-739"><span class="linenos"> 739</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of all cards your bot has seen until now</span>
</span><span id="L-740"><a href="#L-740"><span class="linenos"> 740</span></a>
</span><span id="L-741"><a href="#L-741"><span class="linenos"> 741</span></a><span class="sd">        :param leader_move: The move made by the leader of the trick. These cards have also been seen until now.</span>
</span><span id="L-742"><a href="#L-742"><span class="linenos"> 742</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-743"><a href="#L-743"><span class="linenos"> 743</span></a>        <span class="n">bot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_own_bot_state</span><span class="p">()</span>
</span><span id="L-744"><a href="#L-744"><span class="linenos"> 744</span></a>
</span><span id="L-745"><a href="#L-745"><span class="linenos"> 745</span></a>        <span class="n">seen_cards</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">Card</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>  <span class="c1"># We make it a set to remove duplicates</span>
</span><span id="L-746"><a href="#L-746"><span class="linenos"> 746</span></a>
</span><span id="L-747"><a href="#L-747"><span class="linenos"> 747</span></a>        <span class="c1"># in own hand</span>
</span><span id="L-748"><a href="#L-748"><span class="linenos"> 748</span></a>        <span class="n">seen_cards</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">hand</span><span class="p">)</span>
</span><span id="L-749"><a href="#L-749"><span class="linenos"> 749</span></a>
</span><span id="L-750"><a href="#L-750"><span class="linenos"> 750</span></a>        <span class="c1"># the trump card</span>
</span><span id="L-751"><a href="#L-751"><span class="linenos"> 751</span></a>        <span class="n">trump</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_trump_card</span><span class="p">()</span>
</span><span id="L-752"><a href="#L-752"><span class="linenos"> 752</span></a>        <span class="k">if</span> <span class="n">trump</span><span class="p">:</span>
</span><span id="L-753"><a href="#L-753"><span class="linenos"> 753</span></a>            <span class="n">seen_cards</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">trump</span><span class="p">)</span>
</span><span id="L-754"><a href="#L-754"><span class="linenos"> 754</span></a>
</span><span id="L-755"><a href="#L-755"><span class="linenos"> 755</span></a>        <span class="c1"># all cards which were played in Tricks (icludes marriages and Trump exchanges)</span>
</span><span id="L-756"><a href="#L-756"><span class="linenos"> 756</span></a>
</span><span id="L-757"><a href="#L-757"><span class="linenos"> 757</span></a>        <span class="n">seen_cards</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__past_tricks_cards</span><span class="p">())</span>
</span><span id="L-758"><a href="#L-758"><span class="linenos"> 758</span></a>        <span class="k">if</span> <span class="n">leader_move</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-759"><a href="#L-759"><span class="linenos"> 759</span></a>            <span class="n">seen_cards</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">leader_move</span><span class="o">.</span><span class="n">cards</span><span class="p">)</span>
</span><span id="L-760"><a href="#L-760"><span class="linenos"> 760</span></a>
</span><span id="L-761"><a href="#L-761"><span class="linenos"> 761</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="n">seen_cards</span><span class="p">)</span>
</span><span id="L-762"><a href="#L-762"><span class="linenos"> 762</span></a>
</span><span id="L-763"><a href="#L-763"><span class="linenos"> 763</span></a>    <span class="k">def</span> <span class="nf">__past_tricks_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="L-764"><a href="#L-764"><span class="linenos"> 764</span></a>        <span class="n">past_cards</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">Card</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</span><span id="L-765"><a href="#L-765"><span class="linenos"> 765</span></a>        <span class="n">prev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">previous</span>
</span><span id="L-766"><a href="#L-766"><span class="linenos"> 766</span></a>        <span class="k">while</span> <span class="n">prev</span><span class="p">:</span>
</span><span id="L-767"><a href="#L-767"><span class="linenos"> 767</span></a>            <span class="n">past_cards</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">prev</span><span class="o">.</span><span class="n">trick</span><span class="o">.</span><span class="n">cards</span><span class="p">)</span>
</span><span id="L-768"><a href="#L-768"><span class="linenos"> 768</span></a>            <span class="n">prev</span> <span class="o">=</span> <span class="n">prev</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">previous</span>
</span><span id="L-769"><a href="#L-769"><span class="linenos"> 769</span></a>        <span class="k">return</span> <span class="n">past_cards</span>
</span><span id="L-770"><a href="#L-770"><span class="linenos"> 770</span></a>
</span><span id="L-771"><a href="#L-771"><span class="linenos"> 771</span></a>    <span class="k">def</span> <span class="nf">get_known_cards_of_opponent_hand</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="L-772"><a href="#L-772"><span class="linenos"> 772</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all cards which are in the opponents hand, but known to your Bot. This includes cards earlier used in marriages, or a trump exchange.</span>
</span><span id="L-773"><a href="#L-773"><span class="linenos"> 773</span></a><span class="sd">        All cards in the second pahse of the game.&quot;&quot;&quot;</span>
</span><span id="L-774"><a href="#L-774"><span class="linenos"> 774</span></a>        <span class="n">opponent_hand</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_opponent_bot_state</span><span class="p">()</span><span class="o">.</span><span class="n">hand</span>
</span><span id="L-775"><a href="#L-775"><span class="linenos"> 775</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_phase</span><span class="p">()</span> <span class="o">==</span> <span class="n">GamePhase</span><span class="o">.</span><span class="n">TWO</span><span class="p">:</span>
</span><span id="L-776"><a href="#L-776"><span class="linenos"> 776</span></a>            <span class="k">return</span> <span class="n">opponent_hand</span>
</span><span id="L-777"><a href="#L-777"><span class="linenos"> 777</span></a>        <span class="c1"># We only disclose cards which have been part of a move, i.e., an Exchange or a Marriage</span>
</span><span id="L-778"><a href="#L-778"><span class="linenos"> 778</span></a>        <span class="n">past_trick_cards</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__past_tricks_cards</span><span class="p">()</span>
</span><span id="L-779"><a href="#L-779"><span class="linenos"> 779</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">c</span><span class="p">:</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">past_trick_cards</span><span class="p">,</span> <span class="n">opponent_hand</span><span class="p">))</span>
</span><span id="L-780"><a href="#L-780"><span class="linenos"> 780</span></a>
</span><span id="L-781"><a href="#L-781"><span class="linenos"> 781</span></a>    <span class="k">def</span> <span class="nf">get_engine</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">:</span>
</span><span id="L-782"><a href="#L-782"><span class="linenos"> 782</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-783"><a href="#L-783"><span class="linenos"> 783</span></a><span class="sd">        Get the GamePlayEngine in use for the current game.</span>
</span><span id="L-784"><a href="#L-784"><span class="linenos"> 784</span></a><span class="sd">        This engine can be used to retrieve all information about what kind of game we are playing,</span>
</span><span id="L-785"><a href="#L-785"><span class="linenos"> 785</span></a><span class="sd">        but can also be used to simulate alternative game rollouts.</span>
</span><span id="L-786"><a href="#L-786"><span class="linenos"> 786</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-787"><a href="#L-787"><span class="linenos"> 787</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span>
</span><span id="L-788"><a href="#L-788"><span class="linenos"> 788</span></a>
</span><span id="L-789"><a href="#L-789"><span class="linenos"> 789</span></a>    <span class="k">def</span> <span class="nf">get_state_in_phase_two</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GameState</span><span class="p">:</span>
</span><span id="L-790"><a href="#L-790"><span class="linenos"> 790</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-791"><a href="#L-791"><span class="linenos"> 791</span></a><span class="sd">        In phase TWO of the game, all information is known, so you can get the complete state</span>
</span><span id="L-792"><a href="#L-792"><span class="linenos"> 792</span></a>
</span><span id="L-793"><a href="#L-793"><span class="linenos"> 793</span></a><span class="sd">        This removes the real bots from the GameState. If you want to continue the game, provide new Bots. See copy_with_other_bots in the GameState class.</span>
</span><span id="L-794"><a href="#L-794"><span class="linenos"> 794</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-795"><a href="#L-795"><span class="linenos"> 795</span></a>
</span><span id="L-796"><a href="#L-796"><span class="linenos"> 796</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_phase</span><span class="p">()</span> <span class="o">==</span> <span class="n">GamePhase</span><span class="o">.</span><span class="n">TWO</span><span class="p">:</span>
</span><span id="L-797"><a href="#L-797"><span class="linenos"> 797</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">copy_with_other_bots</span><span class="p">(</span><span class="n">_DummyBot</span><span class="p">(),</span> <span class="n">_DummyBot</span><span class="p">())</span>
</span><span id="L-798"><a href="#L-798"><span class="linenos"> 798</span></a>        <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;You cannot get the state in phase one&quot;</span><span class="p">)</span>
</span><span id="L-799"><a href="#L-799"><span class="linenos"> 799</span></a>
</span><span id="L-800"><a href="#L-800"><span class="linenos"> 800</span></a>    <span class="k">def</span> <span class="nf">make_assumption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">],</span> <span class="n">rand</span><span class="p">:</span> <span class="n">Random</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GameState</span><span class="p">:</span>
</span><span id="L-801"><a href="#L-801"><span class="linenos"> 801</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-802"><a href="#L-802"><span class="linenos"> 802</span></a><span class="sd">        Takes the current imperfect information state and makes a random guess as to the position of the unknown cards.</span>
</span><span id="L-803"><a href="#L-803"><span class="linenos"> 803</span></a><span class="sd">        This also takes into account cards seen earlier during marriages played by the opponent, as well as potential trump jack exchanges</span>
</span><span id="L-804"><a href="#L-804"><span class="linenos"> 804</span></a>
</span><span id="L-805"><a href="#L-805"><span class="linenos"> 805</span></a><span class="sd">        This removes the real bots from the GameState. If you want to continue the game, provide new Bots. See copy_with_other_bots in the GameState class.</span>
</span><span id="L-806"><a href="#L-806"><span class="linenos"> 806</span></a>
</span><span id="L-807"><a href="#L-807"><span class="linenos"> 807</span></a><span class="sd">        :param leader_move: the optional already executed leader_move in the current trick. This card is guaranteed to be in the hand of the leader in the returned GameState.</span>
</span><span id="L-808"><a href="#L-808"><span class="linenos"> 808</span></a><span class="sd">        :param rand: the source of random numbers to do the random assignment of unknown cards</span>
</span><span id="L-809"><a href="#L-809"><span class="linenos"> 809</span></a>
</span><span id="L-810"><a href="#L-810"><span class="linenos"> 810</span></a><span class="sd">        :returns: A perfect information state object.</span>
</span><span id="L-811"><a href="#L-811"><span class="linenos"> 811</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-812"><a href="#L-812"><span class="linenos"> 812</span></a>        <span class="n">opponent_hand</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_opponent_bot_state</span><span class="p">()</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-813"><a href="#L-813"><span class="linenos"> 813</span></a>
</span><span id="L-814"><a href="#L-814"><span class="linenos"> 814</span></a>        <span class="k">if</span> <span class="n">leader_move</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-815"><a href="#L-815"><span class="linenos"> 815</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">get_cards</span><span class="p">()</span>
</span><span id="L-816"><a href="#L-816"><span class="linenos"> 816</span></a>            <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="n">card</span> <span class="ow">in</span> <span class="n">opponent_hand</span> <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">leader_move</span><span class="o">.</span><span class="n">cards</span><span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;The specified leader_move </span><span class="si">{</span><span class="n">leader_move</span><span class="si">}</span><span class="s2"> is not in the hand of the opponent </span><span class="si">{</span><span class="n">opponent_hand</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-817"><a href="#L-817"><span class="linenos"> 817</span></a>
</span><span id="L-818"><a href="#L-818"><span class="linenos"> 818</span></a>        <span class="n">full_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">copy_with_other_bots</span><span class="p">(</span><span class="n">_DummyBot</span><span class="p">(),</span> <span class="n">_DummyBot</span><span class="p">())</span>
</span><span id="L-819"><a href="#L-819"><span class="linenos"> 819</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_phase</span><span class="p">()</span> <span class="o">==</span> <span class="n">GamePhase</span><span class="o">.</span><span class="n">TWO</span><span class="p">:</span>
</span><span id="L-820"><a href="#L-820"><span class="linenos"> 820</span></a>            <span class="k">return</span> <span class="n">full_state</span>
</span><span id="L-821"><a href="#L-821"><span class="linenos"> 821</span></a>
</span><span id="L-822"><a href="#L-822"><span class="linenos"> 822</span></a>        <span class="n">seen_cards</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">seen_cards</span><span class="p">(</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="L-823"><a href="#L-823"><span class="linenos"> 823</span></a>        <span class="n">full_deck</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">deck_generator</span><span class="o">.</span><span class="n">get_initial_deck</span><span class="p">()</span>
</span><span id="L-824"><a href="#L-824"><span class="linenos"> 824</span></a>
</span><span id="L-825"><a href="#L-825"><span class="linenos"> 825</span></a>        <span class="n">opponent_hand</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_opponent_bot_state</span><span class="p">()</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-826"><a href="#L-826"><span class="linenos"> 826</span></a>        <span class="n">unseen_opponent_hand</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">card</span><span class="p">:</span> <span class="n">card</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_cards</span><span class="p">,</span> <span class="n">opponent_hand</span><span class="p">))</span>
</span><span id="L-827"><a href="#L-827"><span class="linenos"> 827</span></a>
</span><span id="L-828"><a href="#L-828"><span class="linenos"> 828</span></a>        <span class="n">talon</span> <span class="o">=</span> <span class="n">full_state</span><span class="o">.</span><span class="n">talon</span>
</span><span id="L-829"><a href="#L-829"><span class="linenos"> 829</span></a>        <span class="n">unseen_talon</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">card</span><span class="p">:</span> <span class="n">card</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_cards</span><span class="p">,</span> <span class="n">talon</span><span class="p">))</span>
</span><span id="L-830"><a href="#L-830"><span class="linenos"> 830</span></a>
</span><span id="L-831"><a href="#L-831"><span class="linenos"> 831</span></a>        <span class="n">unseen_cards</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">card</span><span class="p">:</span> <span class="n">card</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_cards</span><span class="p">,</span> <span class="n">full_deck</span><span class="p">))</span>
</span><span id="L-832"><a href="#L-832"><span class="linenos"> 832</span></a>        <span class="n">rand</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">unseen_cards</span><span class="p">)</span>
</span><span id="L-833"><a href="#L-833"><span class="linenos"> 833</span></a>
</span><span id="L-834"><a href="#L-834"><span class="linenos"> 834</span></a>        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">unseen_talon</span><span class="p">)</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">unseen_opponent_hand</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">unseen_cards</span><span class="p">),</span> <span class="s2">&quot;Logical error. The number of unseen cards in the opponents hand and in the talon must be equal to the number of unseen cards&quot;</span>
</span><span id="L-835"><a href="#L-835"><span class="linenos"> 835</span></a>
</span><span id="L-836"><a href="#L-836"><span class="linenos"> 836</span></a>        <span class="n">new_talon</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-837"><a href="#L-837"><span class="linenos"> 837</span></a>        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">talon</span><span class="p">:</span>
</span><span id="L-838"><a href="#L-838"><span class="linenos"> 838</span></a>            <span class="k">if</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">unseen_talon</span><span class="p">:</span>
</span><span id="L-839"><a href="#L-839"><span class="linenos"> 839</span></a>                <span class="c1"># take one of the random cards</span>
</span><span id="L-840"><a href="#L-840"><span class="linenos"> 840</span></a>                <span class="n">new_talon</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">unseen_cards</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span>
</span><span id="L-841"><a href="#L-841"><span class="linenos"> 841</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-842"><a href="#L-842"><span class="linenos"> 842</span></a>                <span class="n">new_talon</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
</span><span id="L-843"><a href="#L-843"><span class="linenos"> 843</span></a>
</span><span id="L-844"><a href="#L-844"><span class="linenos"> 844</span></a>        <span class="n">full_state</span><span class="o">.</span><span class="n">talon</span> <span class="o">=</span> <span class="n">Talon</span><span class="p">(</span><span class="n">new_talon</span><span class="p">)</span>
</span><span id="L-845"><a href="#L-845"><span class="linenos"> 845</span></a>
</span><span id="L-846"><a href="#L-846"><span class="linenos"> 846</span></a>        <span class="n">new_opponent_hand</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-847"><a href="#L-847"><span class="linenos"> 847</span></a>        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">opponent_hand</span><span class="p">:</span>
</span><span id="L-848"><a href="#L-848"><span class="linenos"> 848</span></a>            <span class="k">if</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">unseen_opponent_hand</span><span class="p">:</span>
</span><span id="L-849"><a href="#L-849"><span class="linenos"> 849</span></a>                <span class="n">new_opponent_hand</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">unseen_cards</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span>
</span><span id="L-850"><a href="#L-850"><span class="linenos"> 850</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-851"><a href="#L-851"><span class="linenos"> 851</span></a>                <span class="n">new_opponent_hand</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
</span><span id="L-852"><a href="#L-852"><span class="linenos"> 852</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">am_i_leader</span><span class="p">():</span>
</span><span id="L-853"><a href="#L-853"><span class="linenos"> 853</span></a>            <span class="n">full_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">hand</span> <span class="o">=</span> <span class="n">Hand</span><span class="p">(</span><span class="n">new_opponent_hand</span><span class="p">)</span>
</span><span id="L-854"><a href="#L-854"><span class="linenos"> 854</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-855"><a href="#L-855"><span class="linenos"> 855</span></a>            <span class="n">full_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span> <span class="o">=</span> <span class="n">Hand</span><span class="p">(</span><span class="n">new_opponent_hand</span><span class="p">)</span>
</span><span id="L-856"><a href="#L-856"><span class="linenos"> 856</span></a>
</span><span id="L-857"><a href="#L-857"><span class="linenos"> 857</span></a>        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">unseen_cards</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;All cards must be consumed by either the opponent hand or talon by now&quot;</span>
</span><span id="L-858"><a href="#L-858"><span class="linenos"> 858</span></a>
</span><span id="L-859"><a href="#L-859"><span class="linenos"> 859</span></a>        <span class="k">return</span> <span class="n">full_state</span>
</span><span id="L-860"><a href="#L-860"><span class="linenos"> 860</span></a>
</span><span id="L-861"><a href="#L-861"><span class="linenos"> 861</span></a>
</span><span id="L-862"><a href="#L-862"><span class="linenos"> 862</span></a><span class="k">class</span> <span class="nc">_DummyBot</span><span class="p">(</span><span class="n">Bot</span><span class="p">):</span>
</span><span id="L-863"><a href="#L-863"><span class="linenos"> 863</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A bot used by PlayerPerspective.make_assumption to replace the real bots. This bot cannot play and will throw an Exception for everything&quot;&quot;&quot;</span>
</span><span id="L-864"><a href="#L-864"><span class="linenos"> 864</span></a>
</span><span id="L-865"><a href="#L-865"><span class="linenos"> 865</span></a>    <span class="k">def</span> <span class="nf">get_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">PlayerPerspective</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Move</span><span class="p">:</span>
</span><span id="L-866"><a href="#L-866"><span class="linenos"> 866</span></a>        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;The GameState from make_assumption removes the real bots from the Game. If you want to continue the game, provide new Bots. See copy_with_other_bots in the GameState class.&quot;</span><span class="p">)</span>
</span><span id="L-867"><a href="#L-867"><span class="linenos"> 867</span></a>
</span><span id="L-868"><a href="#L-868"><span class="linenos"> 868</span></a>    <span class="k">def</span> <span class="nf">notify_game_end</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">won</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">PlayerPerspective</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-869"><a href="#L-869"><span class="linenos"> 869</span></a>        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;The GameState from make_assumption removes the real bots from the Game. If you want to continue the game, provide new Bots. See copy_with_other_bots in the GameState class.&quot;</span><span class="p">)</span>
</span><span id="L-870"><a href="#L-870"><span class="linenos"> 870</span></a>
</span><span id="L-871"><a href="#L-871"><span class="linenos"> 871</span></a>    <span class="k">def</span> <span class="nf">notify_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">move</span><span class="p">:</span> <span class="n">Trump_Exchange</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-872"><a href="#L-872"><span class="linenos"> 872</span></a>        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;The GameState from make_assumption removes the real bots from the Game. If you want to continue the game, provide new Bots. See copy_with_other_bots in the GameState class.&quot;</span><span class="p">)</span>
</span><span id="L-873"><a href="#L-873"><span class="linenos"> 873</span></a>
</span><span id="L-874"><a href="#L-874"><span class="linenos"> 874</span></a>
</span><span id="L-875"><a href="#L-875"><span class="linenos"> 875</span></a><span class="k">class</span> <span class="nc">LeaderPerspective</span><span class="p">(</span><span class="n">PlayerPerspective</span><span class="p">):</span>
</span><span id="L-876"><a href="#L-876"><span class="linenos"> 876</span></a>
</span><span id="L-877"><a href="#L-877"><span class="linenos"> 877</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="s1">&#39;GameState&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-878"><a href="#L-878"><span class="linenos"> 878</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>
</span><span id="L-879"><a href="#L-879"><span class="linenos"> 879</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span> <span class="o">=</span> <span class="n">state</span>
</span><span id="L-880"><a href="#L-880"><span class="linenos"> 880</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span> <span class="o">=</span> <span class="n">engine</span>
</span><span id="L-881"><a href="#L-881"><span class="linenos"> 881</span></a>
</span><span id="L-882"><a href="#L-882"><span class="linenos"> 882</span></a>    <span class="k">def</span> <span class="nf">valid_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="L-883"><a href="#L-883"><span class="linenos"> 883</span></a>        <span class="n">moves</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">move_validator</span><span class="o">.</span><span class="n">get_legal_leader_moves</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="p">)</span>
</span><span id="L-884"><a href="#L-884"><span class="linenos"> 884</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">moves</span><span class="p">)</span>
</span><span id="L-885"><a href="#L-885"><span class="linenos"> 885</span></a>
</span><span id="L-886"><a href="#L-886"><span class="linenos"> 886</span></a>    <span class="k">def</span> <span class="nf">get_hand</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hand</span><span class="p">:</span>
</span><span id="L-887"><a href="#L-887"><span class="linenos"> 887</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-888"><a href="#L-888"><span class="linenos"> 888</span></a>
</span><span id="L-889"><a href="#L-889"><span class="linenos"> 889</span></a>    <span class="k">def</span> <span class="nf">get_my_score</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
</span><span id="L-890"><a href="#L-890"><span class="linenos"> 890</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">score</span>
</span><span id="L-891"><a href="#L-891"><span class="linenos"> 891</span></a>
</span><span id="L-892"><a href="#L-892"><span class="linenos"> 892</span></a>    <span class="k">def</span> <span class="nf">get_opponent_score</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
</span><span id="L-893"><a href="#L-893"><span class="linenos"> 893</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">score</span>
</span><span id="L-894"><a href="#L-894"><span class="linenos"> 894</span></a>
</span><span id="L-895"><a href="#L-895"><span class="linenos"> 895</span></a>    <span class="k">def</span> <span class="nf">get_opponent_hand_in_phase_two</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hand</span><span class="p">:</span>
</span><span id="L-896"><a href="#L-896"><span class="linenos"> 896</span></a>        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_phase</span><span class="p">()</span> <span class="o">==</span> <span class="n">GamePhase</span><span class="o">.</span><span class="n">TWO</span>
</span><span id="L-897"><a href="#L-897"><span class="linenos"> 897</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-898"><a href="#L-898"><span class="linenos"> 898</span></a>
</span><span id="L-899"><a href="#L-899"><span class="linenos"> 899</span></a>    <span class="k">def</span> <span class="nf">am_i_leader</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-900"><a href="#L-900"><span class="linenos"> 900</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-901"><a href="#L-901"><span class="linenos"> 901</span></a>
</span><span id="L-902"><a href="#L-902"><span class="linenos"> 902</span></a>    <span class="k">def</span> <span class="nf">get_won_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="L-903"><a href="#L-903"><span class="linenos"> 903</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">won_cards</span><span class="p">)</span>
</span><span id="L-904"><a href="#L-904"><span class="linenos"> 904</span></a>
</span><span id="L-905"><a href="#L-905"><span class="linenos"> 905</span></a>    <span class="k">def</span> <span class="nf">get_opponent_won_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="L-906"><a href="#L-906"><span class="linenos"> 906</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">won_cards</span><span class="p">)</span>
</span><span id="L-907"><a href="#L-907"><span class="linenos"> 907</span></a>
</span><span id="L-908"><a href="#L-908"><span class="linenos"> 908</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-909"><a href="#L-909"><span class="linenos"> 909</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;LeaderPerspective(state=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="si">}</span><span class="s2">, engine=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="L-910"><a href="#L-910"><span class="linenos"> 910</span></a>
</span><span id="L-911"><a href="#L-911"><span class="linenos"> 911</span></a>
</span><span id="L-912"><a href="#L-912"><span class="linenos"> 912</span></a><span class="k">class</span> <span class="nc">FollowerPerspective</span><span class="p">(</span><span class="n">PlayerPerspective</span><span class="p">):</span>
</span><span id="L-913"><a href="#L-913"><span class="linenos"> 913</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="s1">&#39;GameState&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-914"><a href="#L-914"><span class="linenos"> 914</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>
</span><span id="L-915"><a href="#L-915"><span class="linenos"> 915</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span> <span class="o">=</span> <span class="n">state</span>
</span><span id="L-916"><a href="#L-916"><span class="linenos"> 916</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span> <span class="o">=</span> <span class="n">engine</span>
</span><span id="L-917"><a href="#L-917"><span class="linenos"> 917</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__partial_trick</span> <span class="o">=</span> <span class="n">partial_trick</span>
</span><span id="L-918"><a href="#L-918"><span class="linenos"> 918</span></a>
</span><span id="L-919"><a href="#L-919"><span class="linenos"> 919</span></a>    <span class="k">def</span> <span class="nf">valid_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="L-920"><a href="#L-920"><span class="linenos"> 920</span></a>        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">__partial_trick</span><span class="p">,</span> <span class="s2">&quot;There is no partial trick for this follower, so no valid moves.&quot;</span>
</span><span id="L-921"><a href="#L-921"><span class="linenos"> 921</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">move_validator</span><span class="o">.</span><span class="n">get_legal_follower_moves</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__partial_trick</span><span class="p">))</span>
</span><span id="L-922"><a href="#L-922"><span class="linenos"> 922</span></a>
</span><span id="L-923"><a href="#L-923"><span class="linenos"> 923</span></a>    <span class="k">def</span> <span class="nf">get_hand</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hand</span><span class="p">:</span>
</span><span id="L-924"><a href="#L-924"><span class="linenos"> 924</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-925"><a href="#L-925"><span class="linenos"> 925</span></a>
</span><span id="L-926"><a href="#L-926"><span class="linenos"> 926</span></a>    <span class="k">def</span> <span class="nf">get_my_score</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
</span><span id="L-927"><a href="#L-927"><span class="linenos"> 927</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">score</span>
</span><span id="L-928"><a href="#L-928"><span class="linenos"> 928</span></a>
</span><span id="L-929"><a href="#L-929"><span class="linenos"> 929</span></a>    <span class="k">def</span> <span class="nf">get_opponent_score</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
</span><span id="L-930"><a href="#L-930"><span class="linenos"> 930</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">score</span>
</span><span id="L-931"><a href="#L-931"><span class="linenos"> 931</span></a>
</span><span id="L-932"><a href="#L-932"><span class="linenos"> 932</span></a>    <span class="k">def</span> <span class="nf">get_opponent_hand_in_phase_two</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hand</span><span class="p">:</span>
</span><span id="L-933"><a href="#L-933"><span class="linenos"> 933</span></a>        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_phase</span><span class="p">()</span> <span class="o">==</span> <span class="n">GamePhase</span><span class="o">.</span><span class="n">TWO</span>
</span><span id="L-934"><a href="#L-934"><span class="linenos"> 934</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-935"><a href="#L-935"><span class="linenos"> 935</span></a>
</span><span id="L-936"><a href="#L-936"><span class="linenos"> 936</span></a>    <span class="k">def</span> <span class="nf">am_i_leader</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-937"><a href="#L-937"><span class="linenos"> 937</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-938"><a href="#L-938"><span class="linenos"> 938</span></a>
</span><span id="L-939"><a href="#L-939"><span class="linenos"> 939</span></a>    <span class="k">def</span> <span class="nf">get_won_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="L-940"><a href="#L-940"><span class="linenos"> 940</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">won_cards</span><span class="p">)</span>
</span><span id="L-941"><a href="#L-941"><span class="linenos"> 941</span></a>
</span><span id="L-942"><a href="#L-942"><span class="linenos"> 942</span></a>    <span class="k">def</span> <span class="nf">get_opponent_won_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="L-943"><a href="#L-943"><span class="linenos"> 943</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">won_cards</span><span class="p">)</span>
</span><span id="L-944"><a href="#L-944"><span class="linenos"> 944</span></a>
</span><span id="L-945"><a href="#L-945"><span class="linenos"> 945</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-946"><a href="#L-946"><span class="linenos"> 946</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;FollowerPerspective(state=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="si">}</span><span class="s2">, engine=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="si">}</span><span class="s2">, partial_trick=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__partial_trick</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="L-947"><a href="#L-947"><span class="linenos"> 947</span></a>
</span><span id="L-948"><a href="#L-948"><span class="linenos"> 948</span></a>
</span><span id="L-949"><a href="#L-949"><span class="linenos"> 949</span></a><span class="k">class</span> <span class="nc">ExchangeFollowerPerspective</span><span class="p">(</span><span class="n">PlayerPerspective</span><span class="p">):</span>
</span><span id="L-950"><a href="#L-950"><span class="linenos"> 950</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-951"><a href="#L-951"><span class="linenos"> 951</span></a><span class="sd">    A special PlayerGameState only used for the history of a game in which a Trump Exchange happened.</span>
</span><span id="L-952"><a href="#L-952"><span class="linenos"> 952</span></a><span class="sd">    This state is does not allow any moves.</span>
</span><span id="L-953"><a href="#L-953"><span class="linenos"> 953</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-954"><a href="#L-954"><span class="linenos"> 954</span></a>
</span><span id="L-955"><a href="#L-955"><span class="linenos"> 955</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="s1">&#39;GameState&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-956"><a href="#L-956"><span class="linenos"> 956</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span> <span class="o">=</span> <span class="n">state</span>
</span><span id="L-957"><a href="#L-957"><span class="linenos"> 957</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>
</span><span id="L-958"><a href="#L-958"><span class="linenos"> 958</span></a>
</span><span id="L-959"><a href="#L-959"><span class="linenos"> 959</span></a>    <span class="k">def</span> <span class="nf">valid_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="L-960"><a href="#L-960"><span class="linenos"> 960</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-961"><a href="#L-961"><span class="linenos"> 961</span></a><span class="sd">        Get a list of all valid moves the bot can play at this point in the game.</span>
</span><span id="L-962"><a href="#L-962"><span class="linenos"> 962</span></a>
</span><span id="L-963"><a href="#L-963"><span class="linenos"> 963</span></a><span class="sd">        Design note: this could also return an Iterable[Move], but list[Move] was chosen to make the API easier to use.</span>
</span><span id="L-964"><a href="#L-964"><span class="linenos"> 964</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-965"><a href="#L-965"><span class="linenos"> 965</span></a>        <span class="k">return</span> <span class="p">[]</span>
</span><span id="L-966"><a href="#L-966"><span class="linenos"> 966</span></a>
</span><span id="L-967"><a href="#L-967"><span class="linenos"> 967</span></a>    <span class="k">def</span> <span class="nf">get_hand</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hand</span><span class="p">:</span>
</span><span id="L-968"><a href="#L-968"><span class="linenos"> 968</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-969"><a href="#L-969"><span class="linenos"> 969</span></a>
</span><span id="L-970"><a href="#L-970"><span class="linenos"> 970</span></a>    <span class="k">def</span> <span class="nf">get_my_score</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
</span><span id="L-971"><a href="#L-971"><span class="linenos"> 971</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">score</span>
</span><span id="L-972"><a href="#L-972"><span class="linenos"> 972</span></a>
</span><span id="L-973"><a href="#L-973"><span class="linenos"> 973</span></a>    <span class="k">def</span> <span class="nf">get_opponent_score</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
</span><span id="L-974"><a href="#L-974"><span class="linenos"> 974</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">score</span>
</span><span id="L-975"><a href="#L-975"><span class="linenos"> 975</span></a>
</span><span id="L-976"><a href="#L-976"><span class="linenos"> 976</span></a>    <span class="k">def</span> <span class="nf">get_trump_suit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Suit</span><span class="p">:</span>
</span><span id="L-977"><a href="#L-977"><span class="linenos"> 977</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">trump_suit</span>
</span><span id="L-978"><a href="#L-978"><span class="linenos"> 978</span></a>
</span><span id="L-979"><a href="#L-979"><span class="linenos"> 979</span></a>    <span class="k">def</span> <span class="nf">get_opponent_hand_in_phase_two</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hand</span><span class="p">:</span>
</span><span id="L-980"><a href="#L-980"><span class="linenos"> 980</span></a>        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_phase</span><span class="p">()</span> <span class="o">==</span> <span class="n">GamePhase</span><span class="o">.</span><span class="n">TWO</span>
</span><span id="L-981"><a href="#L-981"><span class="linenos"> 981</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-982"><a href="#L-982"><span class="linenos"> 982</span></a>
</span><span id="L-983"><a href="#L-983"><span class="linenos"> 983</span></a>    <span class="k">def</span> <span class="nf">get_opponent_won_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="L-984"><a href="#L-984"><span class="linenos"> 984</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">won_cards</span><span class="p">)</span>
</span><span id="L-985"><a href="#L-985"><span class="linenos"> 985</span></a>
</span><span id="L-986"><a href="#L-986"><span class="linenos"> 986</span></a>    <span class="k">def</span> <span class="nf">get_won_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="L-987"><a href="#L-987"><span class="linenos"> 987</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">won_cards</span><span class="p">)</span>
</span><span id="L-988"><a href="#L-988"><span class="linenos"> 988</span></a>
</span><span id="L-989"><a href="#L-989"><span class="linenos"> 989</span></a>    <span class="k">def</span> <span class="nf">am_i_leader</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-990"><a href="#L-990"><span class="linenos"> 990</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-991"><a href="#L-991"><span class="linenos"> 991</span></a>
</span><span id="L-992"><a href="#L-992"><span class="linenos"> 992</span></a>
</span><span id="L-993"><a href="#L-993"><span class="linenos"> 993</span></a><span class="k">class</span> <span class="nc">WinnerPerspective</span><span class="p">(</span><span class="n">LeaderPerspective</span><span class="p">):</span>
</span><span id="L-994"><a href="#L-994"><span class="linenos"> 994</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The gamestate given to the winner of the game at the very end&quot;&quot;&quot;</span>
</span><span id="L-995"><a href="#L-995"><span class="linenos"> 995</span></a>
</span><span id="L-996"><a href="#L-996"><span class="linenos"> 996</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="s1">&#39;GameState&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-997"><a href="#L-997"><span class="linenos"> 997</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span> <span class="o">=</span> <span class="n">state</span>
</span><span id="L-998"><a href="#L-998"><span class="linenos"> 998</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span> <span class="o">=</span> <span class="n">engine</span>
</span><span id="L-999"><a href="#L-999"><span class="linenos"> 999</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>
</span><span id="L-1000"><a href="#L-1000"><span class="linenos">1000</span></a>
</span><span id="L-1001"><a href="#L-1001"><span class="linenos">1001</span></a>    <span class="k">def</span> <span class="nf">valid_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="L-1002"><a href="#L-1002"><span class="linenos">1002</span></a>        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Cannot request valid moves from the final PlayerGameState because the game is over&quot;</span><span class="p">)</span>
</span><span id="L-1003"><a href="#L-1003"><span class="linenos">1003</span></a>
</span><span id="L-1004"><a href="#L-1004"><span class="linenos">1004</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1005"><a href="#L-1005"><span class="linenos">1005</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;WinnerGameState(state=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="si">}</span><span class="s2">, engine=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="L-1006"><a href="#L-1006"><span class="linenos">1006</span></a>
</span><span id="L-1007"><a href="#L-1007"><span class="linenos">1007</span></a>
</span><span id="L-1008"><a href="#L-1008"><span class="linenos">1008</span></a><span class="k">class</span> <span class="nc">LoserPerspective</span><span class="p">(</span><span class="n">FollowerPerspective</span><span class="p">):</span>
</span><span id="L-1009"><a href="#L-1009"><span class="linenos">1009</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The gamestate given to the loser of the game at the very end&quot;&quot;&quot;</span>
</span><span id="L-1010"><a href="#L-1010"><span class="linenos">1010</span></a>
</span><span id="L-1011"><a href="#L-1011"><span class="linenos">1011</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="s1">&#39;GameState&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1012"><a href="#L-1012"><span class="linenos">1012</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span> <span class="o">=</span> <span class="n">state</span>
</span><span id="L-1013"><a href="#L-1013"><span class="linenos">1013</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span> <span class="o">=</span> <span class="n">engine</span>
</span><span id="L-1014"><a href="#L-1014"><span class="linenos">1014</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-1015"><a href="#L-1015"><span class="linenos">1015</span></a>
</span><span id="L-1016"><a href="#L-1016"><span class="linenos">1016</span></a>    <span class="k">def</span> <span class="nf">valid_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="L-1017"><a href="#L-1017"><span class="linenos">1017</span></a>        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Cannot request valid moves from the final PlayerGameState because the game is over&quot;</span><span class="p">)</span>
</span><span id="L-1018"><a href="#L-1018"><span class="linenos">1018</span></a>
</span><span id="L-1019"><a href="#L-1019"><span class="linenos">1019</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1020"><a href="#L-1020"><span class="linenos">1020</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;LoserGameState(state=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="si">}</span><span class="s2">, engine=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="L-1021"><a href="#L-1021"><span class="linenos">1021</span></a>
</span><span id="L-1022"><a href="#L-1022"><span class="linenos">1022</span></a>
</span><span id="L-1023"><a href="#L-1023"><span class="linenos">1023</span></a><span class="k">class</span> <span class="nc">DeckGenerator</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="L-1024"><a href="#L-1024"><span class="linenos">1024</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1025"><a href="#L-1025"><span class="linenos">1025</span></a><span class="sd">    A Deckgenerator specifies how what the cards for a game are.</span>
</span><span id="L-1026"><a href="#L-1026"><span class="linenos">1026</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1027"><a href="#L-1027"><span class="linenos">1027</span></a>
</span><span id="L-1028"><a href="#L-1028"><span class="linenos">1028</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="L-1029"><a href="#L-1029"><span class="linenos">1029</span></a>    <span class="k">def</span> <span class="nf">get_initial_deck</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OrderedCardCollection</span><span class="p">:</span>
</span><span id="L-1030"><a href="#L-1030"><span class="linenos">1030</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1031"><a href="#L-1031"><span class="linenos">1031</span></a><span class="sd">        Get the intial deck of cards which are used in the game.</span>
</span><span id="L-1032"><a href="#L-1032"><span class="linenos">1032</span></a><span class="sd">        This method must always return the same set of cards in the same order.</span>
</span><span id="L-1033"><a href="#L-1033"><span class="linenos">1033</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1034"><a href="#L-1034"><span class="linenos">1034</span></a>
</span><span id="L-1035"><a href="#L-1035"><span class="linenos">1035</span></a>    <span class="nd">@classmethod</span>
</span><span id="L-1036"><a href="#L-1036"><span class="linenos">1036</span></a>    <span class="k">def</span> <span class="nf">shuffle_deck</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">deck</span><span class="p">:</span> <span class="n">OrderedCardCollection</span><span class="p">,</span> <span class="n">rng</span><span class="p">:</span> <span class="n">Random</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OrderedCardCollection</span><span class="p">:</span>
</span><span id="L-1037"><a href="#L-1037"><span class="linenos">1037</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1038"><a href="#L-1038"><span class="linenos">1038</span></a><span class="sd">        Shuffle the given deck of cards, using the random number generator as a source of randomness.</span>
</span><span id="L-1039"><a href="#L-1039"><span class="linenos">1039</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1040"><a href="#L-1040"><span class="linenos">1040</span></a>        <span class="n">the_cards</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">deck</span><span class="o">.</span><span class="n">get_cards</span><span class="p">())</span>
</span><span id="L-1041"><a href="#L-1041"><span class="linenos">1041</span></a>        <span class="n">rng</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">the_cards</span><span class="p">)</span>
</span><span id="L-1042"><a href="#L-1042"><span class="linenos">1042</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="n">the_cards</span><span class="p">)</span>
</span><span id="L-1043"><a href="#L-1043"><span class="linenos">1043</span></a>
</span><span id="L-1044"><a href="#L-1044"><span class="linenos">1044</span></a>
</span><span id="L-1045"><a href="#L-1045"><span class="linenos">1045</span></a><span class="k">class</span> <span class="nc">SchnapsenDeckGenerator</span><span class="p">(</span><span class="n">DeckGenerator</span><span class="p">):</span>
</span><span id="L-1046"><a href="#L-1046"><span class="linenos">1046</span></a>
</span><span id="L-1047"><a href="#L-1047"><span class="linenos">1047</span></a>    <span class="k">def</span> <span class="nf">get_initial_deck</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OrderedCardCollection</span><span class="p">:</span>
</span><span id="L-1048"><a href="#L-1048"><span class="linenos">1048</span></a>        <span class="n">deck</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1049"><a href="#L-1049"><span class="linenos">1049</span></a>        <span class="k">for</span> <span class="n">suit</span> <span class="ow">in</span> <span class="n">Suit</span><span class="p">:</span>
</span><span id="L-1050"><a href="#L-1050"><span class="linenos">1050</span></a>            <span class="k">for</span> <span class="n">rank</span> <span class="ow">in</span> <span class="p">[</span><span class="n">Rank</span><span class="o">.</span><span class="n">JACK</span><span class="p">,</span> <span class="n">Rank</span><span class="o">.</span><span class="n">QUEEN</span><span class="p">,</span> <span class="n">Rank</span><span class="o">.</span><span class="n">KING</span><span class="p">,</span> <span class="n">Rank</span><span class="o">.</span><span class="n">TEN</span><span class="p">,</span> <span class="n">Rank</span><span class="o">.</span><span class="n">ACE</span><span class="p">]:</span>
</span><span id="L-1051"><a href="#L-1051"><span class="linenos">1051</span></a>                <span class="n">deck</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Card</span><span class="o">.</span><span class="n">get_card</span><span class="p">(</span><span class="n">rank</span><span class="p">,</span> <span class="n">suit</span><span class="p">))</span>
</span><span id="L-1052"><a href="#L-1052"><span class="linenos">1052</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="n">deck</span><span class="p">)</span>
</span><span id="L-1053"><a href="#L-1053"><span class="linenos">1053</span></a>
</span><span id="L-1054"><a href="#L-1054"><span class="linenos">1054</span></a>
</span><span id="L-1055"><a href="#L-1055"><span class="linenos">1055</span></a><span class="k">class</span> <span class="nc">HandGenerator</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="L-1056"><a href="#L-1056"><span class="linenos">1056</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1057"><a href="#L-1057"><span class="linenos">1057</span></a><span class="sd">    The HandGenerator specifies how the intial set of cards gets divided over the two player&#39;s hands and the talon</span>
</span><span id="L-1058"><a href="#L-1058"><span class="linenos">1058</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1059"><a href="#L-1059"><span class="linenos">1059</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="L-1060"><a href="#L-1060"><span class="linenos">1060</span></a>    <span class="k">def</span> <span class="nf">generateHands</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cards</span><span class="p">:</span> <span class="n">OrderedCardCollection</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Hand</span><span class="p">,</span> <span class="n">Hand</span><span class="p">,</span> <span class="n">Talon</span><span class="p">]:</span>
</span><span id="L-1061"><a href="#L-1061"><span class="linenos">1061</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1062"><a href="#L-1062"><span class="linenos">1062</span></a><span class="sd">        Divide the collection of cards over the two hands and the Talon</span>
</span><span id="L-1063"><a href="#L-1063"><span class="linenos">1063</span></a>
</span><span id="L-1064"><a href="#L-1064"><span class="linenos">1064</span></a><span class="sd">        :param cards: The cards to be dealt</span>
</span><span id="L-1065"><a href="#L-1065"><span class="linenos">1065</span></a><span class="sd">        :returns: Two hands of cards and the talon. The first hand is for the first player, i.e, the one who will lead the first trick.</span>
</span><span id="L-1066"><a href="#L-1066"><span class="linenos">1066</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1067"><a href="#L-1067"><span class="linenos">1067</span></a>
</span><span id="L-1068"><a href="#L-1068"><span class="linenos">1068</span></a>
</span><span id="L-1069"><a href="#L-1069"><span class="linenos">1069</span></a><span class="k">class</span> <span class="nc">SchnapsenHandGenerator</span><span class="p">(</span><span class="n">HandGenerator</span><span class="p">):</span>
</span><span id="L-1070"><a href="#L-1070"><span class="linenos">1070</span></a>    <span class="nd">@classmethod</span>
</span><span id="L-1071"><a href="#L-1071"><span class="linenos">1071</span></a>    <span class="k">def</span> <span class="nf">generateHands</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cards</span><span class="p">:</span> <span class="n">OrderedCardCollection</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Hand</span><span class="p">,</span> <span class="n">Hand</span><span class="p">,</span> <span class="n">Talon</span><span class="p">]:</span>
</span><span id="L-1072"><a href="#L-1072"><span class="linenos">1072</span></a>        <span class="n">the_cards</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">cards</span><span class="o">.</span><span class="n">get_cards</span><span class="p">())</span>
</span><span id="L-1073"><a href="#L-1073"><span class="linenos">1073</span></a>        <span class="n">hand1</span> <span class="o">=</span> <span class="n">Hand</span><span class="p">([</span><span class="n">the_cards</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)],</span> <span class="n">max_size</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</span><span id="L-1074"><a href="#L-1074"><span class="linenos">1074</span></a>        <span class="n">hand2</span> <span class="o">=</span> <span class="n">Hand</span><span class="p">([</span><span class="n">the_cards</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">2</span><span class="p">)],</span> <span class="n">max_size</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</span><span id="L-1075"><a href="#L-1075"><span class="linenos">1075</span></a>        <span class="n">rest</span> <span class="o">=</span> <span class="n">Talon</span><span class="p">(</span><span class="n">the_cards</span><span class="p">[</span><span class="mi">10</span><span class="p">:])</span>
</span><span id="L-1076"><a href="#L-1076"><span class="linenos">1076</span></a>        <span class="k">return</span> <span class="p">(</span><span class="n">hand1</span><span class="p">,</span> <span class="n">hand2</span><span class="p">,</span> <span class="n">rest</span><span class="p">)</span>
</span><span id="L-1077"><a href="#L-1077"><span class="linenos">1077</span></a>
</span><span id="L-1078"><a href="#L-1078"><span class="linenos">1078</span></a>
</span><span id="L-1079"><a href="#L-1079"><span class="linenos">1079</span></a><span class="k">class</span> <span class="nc">TrickImplementer</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="L-1080"><a href="#L-1080"><span class="linenos">1080</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1081"><a href="#L-1081"><span class="linenos">1081</span></a><span class="sd">    The TrickImplementer specifies how tricks are palyed in the game.</span>
</span><span id="L-1082"><a href="#L-1082"><span class="linenos">1082</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1083"><a href="#L-1083"><span class="linenos">1083</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="L-1084"><a href="#L-1084"><span class="linenos">1084</span></a>    <span class="k">def</span> <span class="nf">play_trick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GameState</span><span class="p">:</span>
</span><span id="L-1085"><a href="#L-1085"><span class="linenos">1085</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1086"><a href="#L-1086"><span class="linenos">1086</span></a><span class="sd">        Plays a single Trick the game by asking the bots in the game_state for their Moves,</span>
</span><span id="L-1087"><a href="#L-1087"><span class="linenos">1087</span></a><span class="sd">        using the MoveRequester from the game_engine.</span>
</span><span id="L-1088"><a href="#L-1088"><span class="linenos">1088</span></a><span class="sd">        These moves are then also validated using the MoveValidator of the game_engine.</span>
</span><span id="L-1089"><a href="#L-1089"><span class="linenos">1089</span></a><span class="sd">        Finally, the trick is recorder in the history (previous field) of the returned GameState.</span>
</span><span id="L-1090"><a href="#L-1090"><span class="linenos">1090</span></a>
</span><span id="L-1091"><a href="#L-1091"><span class="linenos">1091</span></a><span class="sd">        Note, the provided GameState does not get modified by this method.</span>
</span><span id="L-1092"><a href="#L-1092"><span class="linenos">1092</span></a>
</span><span id="L-1093"><a href="#L-1093"><span class="linenos">1093</span></a><span class="sd">        :param game_engine: The engine used to preform the underlying actions of the Trick.</span>
</span><span id="L-1094"><a href="#L-1094"><span class="linenos">1094</span></a><span class="sd">        :param game_state: The state of the game before the trick is played. Thi state will not be modified.</span>
</span><span id="L-1095"><a href="#L-1095"><span class="linenos">1095</span></a><span class="sd">        :returns: The GameState after the trick is completed.</span>
</span><span id="L-1096"><a href="#L-1096"><span class="linenos">1096</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1097"><a href="#L-1097"><span class="linenos">1097</span></a>
</span><span id="L-1098"><a href="#L-1098"><span class="linenos">1098</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="L-1099"><a href="#L-1099"><span class="linenos">1099</span></a>    <span class="k">def</span> <span class="nf">play_trick_with_fixed_leader_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span>
</span><span id="L-1100"><a href="#L-1100"><span class="linenos">1100</span></a>                                          <span class="n">leader_move</span><span class="p">:</span> <span class="n">Move</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GameState</span><span class="p">:</span>
</span><span id="L-1101"><a href="#L-1101"><span class="linenos">1101</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1102"><a href="#L-1102"><span class="linenos">1102</span></a><span class="sd">        The same as play_trick, but also takes the leader_move to start with as an argument.</span>
</span><span id="L-1103"><a href="#L-1103"><span class="linenos">1103</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1104"><a href="#L-1104"><span class="linenos">1104</span></a>
</span><span id="L-1105"><a href="#L-1105"><span class="linenos">1105</span></a>
</span><span id="L-1106"><a href="#L-1106"><span class="linenos">1106</span></a><span class="k">class</span> <span class="nc">SchnapsenTrickImplementer</span><span class="p">(</span><span class="n">TrickImplementer</span><span class="p">):</span>
</span><span id="L-1107"><a href="#L-1107"><span class="linenos">1107</span></a>
</span><span id="L-1108"><a href="#L-1108"><span class="linenos">1108</span></a>    <span class="k">def</span> <span class="nf">play_trick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GameState</span><span class="p">:</span>
</span><span id="L-1109"><a href="#L-1109"><span class="linenos">1109</span></a>        <span class="n">leader_move</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_leader_move</span><span class="p">(</span><span class="n">game_engine</span><span class="p">,</span> <span class="n">game_state</span><span class="p">)</span>
</span><span id="L-1110"><a href="#L-1110"><span class="linenos">1110</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">play_trick_with_fixed_leader_move</span><span class="p">(</span><span class="n">game_engine</span><span class="o">=</span><span class="n">game_engine</span><span class="p">,</span> <span class="n">game_state</span><span class="o">=</span><span class="n">game_state</span><span class="p">,</span> <span class="n">leader_move</span><span class="o">=</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="L-1111"><a href="#L-1111"><span class="linenos">1111</span></a>
</span><span id="L-1112"><a href="#L-1112"><span class="linenos">1112</span></a>    <span class="k">def</span> <span class="nf">play_trick_with_fixed_leader_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span>
</span><span id="L-1113"><a href="#L-1113"><span class="linenos">1113</span></a>                                          <span class="n">leader_move</span><span class="p">:</span> <span class="n">Move</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GameState</span><span class="p">:</span>
</span><span id="L-1114"><a href="#L-1114"><span class="linenos">1114</span></a>        <span class="k">if</span> <span class="n">leader_move</span><span class="o">.</span><span class="n">is_trump_exchange</span><span class="p">():</span>
</span><span id="L-1115"><a href="#L-1115"><span class="linenos">1115</span></a>            <span class="n">next_game_state</span> <span class="o">=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">copy_for_next</span><span class="p">()</span>
</span><span id="L-1116"><a href="#L-1116"><span class="linenos">1116</span></a>            <span class="n">exchange</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Trump_Exchange</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">)</span>
</span><span id="L-1117"><a href="#L-1117"><span class="linenos">1117</span></a>            <span class="n">old_trump_card</span> <span class="o">=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">trump_card</span><span class="p">()</span>
</span><span id="L-1118"><a href="#L-1118"><span class="linenos">1118</span></a>            <span class="k">assert</span> <span class="n">old_trump_card</span>
</span><span id="L-1119"><a href="#L-1119"><span class="linenos">1119</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">play_trump_exchange</span><span class="p">(</span><span class="n">next_game_state</span><span class="p">,</span> <span class="n">exchange</span><span class="p">)</span>
</span><span id="L-1120"><a href="#L-1120"><span class="linenos">1120</span></a>            <span class="c1"># remember the previous state</span>
</span><span id="L-1121"><a href="#L-1121"><span class="linenos">1121</span></a>            <span class="n">next_game_state</span><span class="o">.</span><span class="n">previous</span> <span class="o">=</span> <span class="n">Previous</span><span class="p">(</span><span class="n">game_state</span><span class="p">,</span> <span class="n">ExchangeTrick</span><span class="p">(</span><span class="n">exchange</span><span class="p">,</span> <span class="n">old_trump_card</span><span class="p">),</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="L-1122"><a href="#L-1122"><span class="linenos">1122</span></a>            <span class="c1"># The whole trick ends here.</span>
</span><span id="L-1123"><a href="#L-1123"><span class="linenos">1123</span></a>            <span class="k">return</span> <span class="n">next_game_state</span>
</span><span id="L-1124"><a href="#L-1124"><span class="linenos">1124</span></a>
</span><span id="L-1125"><a href="#L-1125"><span class="linenos">1125</span></a>        <span class="c1"># We have a PartialTrick, ask the follower for its move</span>
</span><span id="L-1126"><a href="#L-1126"><span class="linenos">1126</span></a>        <span class="n">partial_trick</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Union</span><span class="p">[</span><span class="n">Marriage</span><span class="p">,</span> <span class="n">RegularMove</span><span class="p">],</span> <span class="n">leader_move</span><span class="p">)</span>
</span><span id="L-1127"><a href="#L-1127"><span class="linenos">1127</span></a>        <span class="n">follower_move</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_follower_move</span><span class="p">(</span><span class="n">game_engine</span><span class="p">,</span> <span class="n">game_state</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">)</span>
</span><span id="L-1128"><a href="#L-1128"><span class="linenos">1128</span></a>
</span><span id="L-1129"><a href="#L-1129"><span class="linenos">1129</span></a>        <span class="n">trick</span> <span class="o">=</span> <span class="n">RegularTrick</span><span class="p">(</span><span class="n">leader_move</span><span class="o">=</span><span class="n">partial_trick</span><span class="p">,</span> <span class="n">follower_move</span><span class="o">=</span><span class="n">follower_move</span><span class="p">)</span>
</span><span id="L-1130"><a href="#L-1130"><span class="linenos">1130</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_apply_regular_trick</span><span class="p">(</span><span class="n">game_engine</span><span class="o">=</span><span class="n">game_engine</span><span class="p">,</span> <span class="n">game_state</span><span class="o">=</span><span class="n">game_state</span><span class="p">,</span> <span class="n">trick</span><span class="o">=</span><span class="n">trick</span><span class="p">)</span>
</span><span id="L-1131"><a href="#L-1131"><span class="linenos">1131</span></a>
</span><span id="L-1132"><a href="#L-1132"><span class="linenos">1132</span></a>    <span class="k">def</span> <span class="nf">_apply_regular_trick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">trick</span><span class="p">:</span> <span class="n">RegularTrick</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GameState</span><span class="p">:</span>
</span><span id="L-1133"><a href="#L-1133"><span class="linenos">1133</span></a>
</span><span id="L-1134"><a href="#L-1134"><span class="linenos">1134</span></a>        <span class="c1"># apply the trick to the next_game_state</span>
</span><span id="L-1135"><a href="#L-1135"><span class="linenos">1135</span></a>        <span class="c1"># The next game state will be modified during this trick. We start from the previous state</span>
</span><span id="L-1136"><a href="#L-1136"><span class="linenos">1136</span></a>        <span class="n">next_game_state</span> <span class="o">=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">copy_for_next</span><span class="p">()</span>
</span><span id="L-1137"><a href="#L-1137"><span class="linenos">1137</span></a>
</span><span id="L-1138"><a href="#L-1138"><span class="linenos">1138</span></a>        <span class="k">if</span> <span class="n">trick</span><span class="o">.</span><span class="n">leader_move</span><span class="o">.</span><span class="n">is_marriage</span><span class="p">():</span>
</span><span id="L-1139"><a href="#L-1139"><span class="linenos">1139</span></a>            <span class="n">marriage_move</span><span class="p">:</span> <span class="n">Marriage</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Marriage</span><span class="p">,</span> <span class="n">trick</span><span class="o">.</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="L-1140"><a href="#L-1140"><span class="linenos">1140</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_play_marriage</span><span class="p">(</span><span class="n">game_engine</span><span class="p">,</span> <span class="n">next_game_state</span><span class="p">,</span> <span class="n">marriage_move</span><span class="o">=</span><span class="n">marriage_move</span><span class="p">)</span>
</span><span id="L-1141"><a href="#L-1141"><span class="linenos">1141</span></a>            <span class="n">regular_leader_move</span><span class="p">:</span> <span class="n">RegularMove</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Marriage</span><span class="p">,</span> <span class="n">trick</span><span class="o">.</span><span class="n">leader_move</span><span class="p">)</span><span class="o">.</span><span class="n">underlying_regular_move</span><span class="p">()</span>
</span><span id="L-1142"><a href="#L-1142"><span class="linenos">1142</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1143"><a href="#L-1143"><span class="linenos">1143</span></a>            <span class="n">regular_leader_move</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">RegularMove</span><span class="p">,</span> <span class="n">trick</span><span class="o">.</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="L-1144"><a href="#L-1144"><span class="linenos">1144</span></a>
</span><span id="L-1145"><a href="#L-1145"><span class="linenos">1145</span></a>        <span class="c1"># # apply changes in the hand and talon</span>
</span><span id="L-1146"><a href="#L-1146"><span class="linenos">1146</span></a>        <span class="n">next_game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">regular_leader_move</span><span class="o">.</span><span class="n">card</span><span class="p">)</span>
</span><span id="L-1147"><a href="#L-1147"><span class="linenos">1147</span></a>        <span class="n">next_game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">trick</span><span class="o">.</span><span class="n">follower_move</span><span class="o">.</span><span class="n">card</span><span class="p">)</span>
</span><span id="L-1148"><a href="#L-1148"><span class="linenos">1148</span></a>
</span><span id="L-1149"><a href="#L-1149"><span class="linenos">1149</span></a>        <span class="c1"># We set the leader for the next state based on what the scorer decides</span>
</span><span id="L-1150"><a href="#L-1150"><span class="linenos">1150</span></a>        <span class="n">next_game_state</span><span class="o">.</span><span class="n">leader</span><span class="p">,</span> <span class="n">next_game_state</span><span class="o">.</span><span class="n">follower</span><span class="p">,</span> <span class="n">leader_remained_leader</span> <span class="o">=</span> <span class="n">game_engine</span><span class="o">.</span><span class="n">trick_scorer</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">trick</span><span class="p">,</span> <span class="n">next_game_state</span><span class="o">.</span><span class="n">leader</span><span class="p">,</span> <span class="n">next_game_state</span><span class="o">.</span><span class="n">follower</span><span class="p">,</span> <span class="n">next_game_state</span><span class="o">.</span><span class="n">trump_suit</span><span class="p">)</span>
</span><span id="L-1151"><a href="#L-1151"><span class="linenos">1151</span></a>
</span><span id="L-1152"><a href="#L-1152"><span class="linenos">1152</span></a>        <span class="c1"># important: the winner takes the first card of the talon, the loser the second one.</span>
</span><span id="L-1153"><a href="#L-1153"><span class="linenos">1153</span></a>        <span class="c1"># this also ensures that the loser of the last trick of the first phase gets the face up trump</span>
</span><span id="L-1154"><a href="#L-1154"><span class="linenos">1154</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">next_game_state</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
</span><span id="L-1155"><a href="#L-1155"><span class="linenos">1155</span></a>            <span class="n">drawn</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">next_game_state</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">draw_cards</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
</span><span id="L-1156"><a href="#L-1156"><span class="linenos">1156</span></a>            <span class="n">next_game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">drawn</span><span class="p">))</span>
</span><span id="L-1157"><a href="#L-1157"><span class="linenos">1157</span></a>            <span class="n">next_game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">drawn</span><span class="p">))</span>
</span><span id="L-1158"><a href="#L-1158"><span class="linenos">1158</span></a>
</span><span id="L-1159"><a href="#L-1159"><span class="linenos">1159</span></a>        <span class="n">next_game_state</span><span class="o">.</span><span class="n">previous</span> <span class="o">=</span> <span class="n">Previous</span><span class="p">(</span><span class="n">game_state</span><span class="p">,</span> <span class="n">trick</span><span class="o">=</span><span class="n">trick</span><span class="p">,</span> <span class="n">leader_remained_leader</span><span class="o">=</span><span class="n">leader_remained_leader</span><span class="p">)</span>
</span><span id="L-1160"><a href="#L-1160"><span class="linenos">1160</span></a>
</span><span id="L-1161"><a href="#L-1161"><span class="linenos">1161</span></a>        <span class="k">return</span> <span class="n">next_game_state</span>
</span><span id="L-1162"><a href="#L-1162"><span class="linenos">1162</span></a>
</span><span id="L-1163"><a href="#L-1163"><span class="linenos">1163</span></a>    <span class="k">def</span> <span class="nf">get_leader_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="s1">&#39;GameState&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Move</span><span class="p">:</span>
</span><span id="L-1164"><a href="#L-1164"><span class="linenos">1164</span></a>        <span class="c1"># ask first players move trough the requester</span>
</span><span id="L-1165"><a href="#L-1165"><span class="linenos">1165</span></a>        <span class="n">leader_game_state</span> <span class="o">=</span> <span class="n">LeaderPerspective</span><span class="p">(</span><span class="n">game_state</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">)</span>
</span><span id="L-1166"><a href="#L-1166"><span class="linenos">1166</span></a>        <span class="n">leader_move</span> <span class="o">=</span> <span class="n">game_engine</span><span class="o">.</span><span class="n">move_requester</span><span class="o">.</span><span class="n">get_move</span><span class="p">(</span><span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="p">,</span> <span class="n">leader_game_state</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-1167"><a href="#L-1167"><span class="linenos">1167</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">game_engine</span><span class="o">.</span><span class="n">move_validator</span><span class="o">.</span><span class="n">is_legal_leader_move</span><span class="p">(</span><span class="n">game_engine</span><span class="p">,</span> <span class="n">game_state</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">):</span>
</span><span id="L-1168"><a href="#L-1168"><span class="linenos">1168</span></a>            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Leader </span><span class="si">{</span><span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">implementation</span><span class="si">}</span><span class="s2"> played an illegal move&quot;</span><span class="p">)</span>
</span><span id="L-1169"><a href="#L-1169"><span class="linenos">1169</span></a>
</span><span id="L-1170"><a href="#L-1170"><span class="linenos">1170</span></a>        <span class="k">return</span> <span class="n">leader_move</span>
</span><span id="L-1171"><a href="#L-1171"><span class="linenos">1171</span></a>
</span><span id="L-1172"><a href="#L-1172"><span class="linenos">1172</span></a>    <span class="k">def</span> <span class="nf">play_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">trump_exchange</span><span class="p">:</span> <span class="n">Trump_Exchange</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1173"><a href="#L-1173"><span class="linenos">1173</span></a>        <span class="k">assert</span> <span class="n">trump_exchange</span><span class="o">.</span><span class="n">jack</span><span class="o">.</span><span class="n">suit</span> <span class="ow">is</span> <span class="n">game_state</span><span class="o">.</span><span class="n">trump_suit</span><span class="p">,</span> \
</span><span id="L-1174"><a href="#L-1174"><span class="linenos">1174</span></a>            <span class="sa">f</span><span class="s2">&quot;A trump exchange can only be done with a Jack of the same suit as the current trump. Got a </span><span class="si">{</span><span class="n">trump_exchange</span><span class="o">.</span><span class="n">jack</span><span class="si">}</span><span class="s2"> while the  Trump card is a </span><span class="si">{</span><span class="n">game_state</span><span class="o">.</span><span class="n">trump_suit</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-1175"><a href="#L-1175"><span class="linenos">1175</span></a>        <span class="c1"># apply the changes in the gamestate</span>
</span><span id="L-1176"><a href="#L-1176"><span class="linenos">1176</span></a>        <span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">trump_exchange</span><span class="o">.</span><span class="n">jack</span><span class="p">)</span>
</span><span id="L-1177"><a href="#L-1177"><span class="linenos">1177</span></a>        <span class="n">old_trump</span> <span class="o">=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">trump_exchange</span><span class="p">(</span><span class="n">trump_exchange</span><span class="o">.</span><span class="n">jack</span><span class="p">)</span>
</span><span id="L-1178"><a href="#L-1178"><span class="linenos">1178</span></a>        <span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">old_trump</span><span class="p">)</span>
</span><span id="L-1179"><a href="#L-1179"><span class="linenos">1179</span></a>        <span class="c1"># We notify the other bot that an exchange happened</span>
</span><span id="L-1180"><a href="#L-1180"><span class="linenos">1180</span></a>        <span class="n">game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">implementation</span><span class="o">.</span><span class="n">notify_trump_exchange</span><span class="p">(</span><span class="n">trump_exchange</span><span class="p">)</span>
</span><span id="L-1181"><a href="#L-1181"><span class="linenos">1181</span></a>
</span><span id="L-1182"><a href="#L-1182"><span class="linenos">1182</span></a>    <span class="k">def</span> <span class="nf">_play_marriage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">marriage_move</span><span class="p">:</span> <span class="n">Marriage</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1183"><a href="#L-1183"><span class="linenos">1183</span></a>        <span class="n">score</span> <span class="o">=</span> <span class="n">game_engine</span><span class="o">.</span><span class="n">trick_scorer</span><span class="o">.</span><span class="n">marriage</span><span class="p">(</span><span class="n">marriage_move</span><span class="p">,</span> <span class="n">game_state</span><span class="p">)</span>
</span><span id="L-1184"><a href="#L-1184"><span class="linenos">1184</span></a>        <span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">score</span> <span class="o">+=</span> <span class="n">score</span>
</span><span id="L-1185"><a href="#L-1185"><span class="linenos">1185</span></a>
</span><span id="L-1186"><a href="#L-1186"><span class="linenos">1186</span></a>    <span class="k">def</span> <span class="nf">get_follower_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="s1">&#39;GameState&#39;</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">:</span> <span class="n">Move</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RegularMove</span><span class="p">:</span>
</span><span id="L-1187"><a href="#L-1187"><span class="linenos">1187</span></a>        <span class="n">follower_game_state</span> <span class="o">=</span> <span class="n">FollowerPerspective</span><span class="p">(</span><span class="n">game_state</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">)</span>
</span><span id="L-1188"><a href="#L-1188"><span class="linenos">1188</span></a>
</span><span id="L-1189"><a href="#L-1189"><span class="linenos">1189</span></a>        <span class="n">follower_move</span> <span class="o">=</span> <span class="n">game_engine</span><span class="o">.</span><span class="n">move_requester</span><span class="o">.</span><span class="n">get_move</span><span class="p">(</span><span class="n">game_state</span><span class="o">.</span><span class="n">follower</span><span class="p">,</span> <span class="n">follower_game_state</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">)</span>
</span><span id="L-1190"><a href="#L-1190"><span class="linenos">1190</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">game_engine</span><span class="o">.</span><span class="n">move_validator</span><span class="o">.</span><span class="n">is_legal_follower_move</span><span class="p">(</span><span class="n">game_engine</span><span class="p">,</span> <span class="n">game_state</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">,</span> <span class="n">follower_move</span><span class="p">):</span>
</span><span id="L-1191"><a href="#L-1191"><span class="linenos">1191</span></a>            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Follower </span><span class="si">{</span><span class="n">game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">implementation</span><span class="si">}</span><span class="s2"> played an illegal move&quot;</span><span class="p">)</span>
</span><span id="L-1192"><a href="#L-1192"><span class="linenos">1192</span></a>        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">RegularMove</span><span class="p">,</span> <span class="n">follower_move</span><span class="p">)</span>
</span><span id="L-1193"><a href="#L-1193"><span class="linenos">1193</span></a>
</span><span id="L-1194"><a href="#L-1194"><span class="linenos">1194</span></a>
</span><span id="L-1195"><a href="#L-1195"><span class="linenos">1195</span></a><span class="k">class</span> <span class="nc">MoveRequester</span><span class="p">:</span>
</span><span id="L-1196"><a href="#L-1196"><span class="linenos">1196</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1197"><a href="#L-1197"><span class="linenos">1197</span></a><span class="sd">    An moveRequester captures the logic of requesting a move from a bot.</span>
</span><span id="L-1198"><a href="#L-1198"><span class="linenos">1198</span></a><span class="sd">    This logic also determines what happens in case the bot is to slow, throws an exception during operation, etc</span>
</span><span id="L-1199"><a href="#L-1199"><span class="linenos">1199</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1200"><a href="#L-1200"><span class="linenos">1200</span></a>
</span><span id="L-1201"><a href="#L-1201"><span class="linenos">1201</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="L-1202"><a href="#L-1202"><span class="linenos">1202</span></a>    <span class="k">def</span> <span class="nf">get_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bot</span><span class="p">:</span> <span class="n">BotState</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">PlayerPerspective</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Move</span><span class="p">:</span>
</span><span id="L-1203"><a href="#L-1203"><span class="linenos">1203</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1204"><a href="#L-1204"><span class="linenos">1204</span></a><span class="sd">        Get a move from the bot, potentially applying timeout logic.</span>
</span><span id="L-1205"><a href="#L-1205"><span class="linenos">1205</span></a>
</span><span id="L-1206"><a href="#L-1206"><span class="linenos">1206</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1207"><a href="#L-1207"><span class="linenos">1207</span></a>
</span><span id="L-1208"><a href="#L-1208"><span class="linenos">1208</span></a>
</span><span id="L-1209"><a href="#L-1209"><span class="linenos">1209</span></a><span class="k">class</span> <span class="nc">SimpleMoveRequester</span><span class="p">(</span><span class="n">MoveRequester</span><span class="p">):</span>
</span><span id="L-1210"><a href="#L-1210"><span class="linenos">1210</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The SimplemoveRquester just asks the move, and does nto time out&quot;&quot;&quot;</span>
</span><span id="L-1211"><a href="#L-1211"><span class="linenos">1211</span></a>
</span><span id="L-1212"><a href="#L-1212"><span class="linenos">1212</span></a>    <span class="k">def</span> <span class="nf">get_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bot</span><span class="p">:</span> <span class="n">BotState</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">PlayerPerspective</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Move</span><span class="p">:</span>
</span><span id="L-1213"><a href="#L-1213"><span class="linenos">1213</span></a>        <span class="k">return</span> <span class="n">bot</span><span class="o">.</span><span class="n">get_move</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">leader_move</span><span class="o">=</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="L-1214"><a href="#L-1214"><span class="linenos">1214</span></a>
</span><span id="L-1215"><a href="#L-1215"><span class="linenos">1215</span></a>
</span><span id="L-1216"><a href="#L-1216"><span class="linenos">1216</span></a><span class="k">class</span> <span class="nc">MoveValidator</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="L-1217"><a href="#L-1217"><span class="linenos">1217</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1218"><a href="#L-1218"><span class="linenos">1218</span></a><span class="sd">    An object of this class can be used to check whether a move is valid.</span>
</span><span id="L-1219"><a href="#L-1219"><span class="linenos">1219</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1220"><a href="#L-1220"><span class="linenos">1220</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="L-1221"><a href="#L-1221"><span class="linenos">1221</span></a>    <span class="k">def</span> <span class="nf">get_legal_leader_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="L-1222"><a href="#L-1222"><span class="linenos">1222</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1223"><a href="#L-1223"><span class="linenos">1223</span></a><span class="sd">        Get all legal moves for the current leader of the game.</span>
</span><span id="L-1224"><a href="#L-1224"><span class="linenos">1224</span></a>
</span><span id="L-1225"><a href="#L-1225"><span class="linenos">1225</span></a><span class="sd">        :param game_engine: The engine which is playing the game</span>
</span><span id="L-1226"><a href="#L-1226"><span class="linenos">1226</span></a><span class="sd">        :param game_state: The current state of the game</span>
</span><span id="L-1227"><a href="#L-1227"><span class="linenos">1227</span></a>
</span><span id="L-1228"><a href="#L-1228"><span class="linenos">1228</span></a><span class="sd">        :returns: An iterable containing the current legal moves.</span>
</span><span id="L-1229"><a href="#L-1229"><span class="linenos">1229</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1230"><a href="#L-1230"><span class="linenos">1230</span></a>
</span><span id="L-1231"><a href="#L-1231"><span class="linenos">1231</span></a>    <span class="k">def</span> <span class="nf">is_legal_leader_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">move</span><span class="p">:</span> <span class="n">Move</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-1232"><a href="#L-1232"><span class="linenos">1232</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1233"><a href="#L-1233"><span class="linenos">1233</span></a><span class="sd">        Whether the provided move is legal for the leader to play.</span>
</span><span id="L-1234"><a href="#L-1234"><span class="linenos">1234</span></a><span class="sd">        The basic implementation checks whether the move is in the legal leader moves.</span>
</span><span id="L-1235"><a href="#L-1235"><span class="linenos">1235</span></a><span class="sd">        Derived classes might implement this more performantly.</span>
</span><span id="L-1236"><a href="#L-1236"><span class="linenos">1236</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1237"><a href="#L-1237"><span class="linenos">1237</span></a>        <span class="k">assert</span> <span class="n">move</span><span class="p">,</span> <span class="s1">&#39;The move played by the leader cannot be None&#39;</span>
</span><span id="L-1238"><a href="#L-1238"><span class="linenos">1238</span></a>        <span class="k">return</span> <span class="n">move</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_legal_leader_moves</span><span class="p">(</span><span class="n">game_engine</span><span class="p">,</span> <span class="n">game_state</span><span class="p">)</span>
</span><span id="L-1239"><a href="#L-1239"><span class="linenos">1239</span></a>
</span><span id="L-1240"><a href="#L-1240"><span class="linenos">1240</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="L-1241"><a href="#L-1241"><span class="linenos">1241</span></a>    <span class="k">def</span> <span class="nf">get_legal_follower_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">:</span> <span class="n">Move</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="L-1242"><a href="#L-1242"><span class="linenos">1242</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1243"><a href="#L-1243"><span class="linenos">1243</span></a><span class="sd">        Get all legal moves for the current follower of the game.</span>
</span><span id="L-1244"><a href="#L-1244"><span class="linenos">1244</span></a>
</span><span id="L-1245"><a href="#L-1245"><span class="linenos">1245</span></a><span class="sd">        :param game_engine: The engine which is playing the game</span>
</span><span id="L-1246"><a href="#L-1246"><span class="linenos">1246</span></a><span class="sd">        :param game_state: The current state of the game</span>
</span><span id="L-1247"><a href="#L-1247"><span class="linenos">1247</span></a><span class="sd">        :param partial_trick: The move played by the leader of the trick.</span>
</span><span id="L-1248"><a href="#L-1248"><span class="linenos">1248</span></a>
</span><span id="L-1249"><a href="#L-1249"><span class="linenos">1249</span></a><span class="sd">        :returns: An iterable containing the current legal moves.</span>
</span><span id="L-1250"><a href="#L-1250"><span class="linenos">1250</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1251"><a href="#L-1251"><span class="linenos">1251</span></a>
</span><span id="L-1252"><a href="#L-1252"><span class="linenos">1252</span></a>    <span class="k">def</span> <span class="nf">is_legal_follower_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Move</span><span class="p">,</span> <span class="n">move</span><span class="p">:</span> <span class="n">Move</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-1253"><a href="#L-1253"><span class="linenos">1253</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1254"><a href="#L-1254"><span class="linenos">1254</span></a><span class="sd">        Whether the provided move is legal for the follower to play.</span>
</span><span id="L-1255"><a href="#L-1255"><span class="linenos">1255</span></a><span class="sd">        The basic implementation checks whether the move is in the legal fllower moves.</span>
</span><span id="L-1256"><a href="#L-1256"><span class="linenos">1256</span></a><span class="sd">        Derived classes might implement this more performantly.</span>
</span><span id="L-1257"><a href="#L-1257"><span class="linenos">1257</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1258"><a href="#L-1258"><span class="linenos">1258</span></a>        <span class="k">assert</span> <span class="n">move</span><span class="p">,</span> <span class="s1">&#39;The move played by the follower cannot be None&#39;</span>
</span><span id="L-1259"><a href="#L-1259"><span class="linenos">1259</span></a>        <span class="k">assert</span> <span class="n">leader_move</span><span class="p">,</span> <span class="s1">&#39;The move played by the leader cannot be None&#39;</span>
</span><span id="L-1260"><a href="#L-1260"><span class="linenos">1260</span></a>        <span class="k">return</span> <span class="n">move</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_legal_follower_moves</span><span class="p">(</span><span class="n">game_engine</span><span class="o">=</span><span class="n">game_engine</span><span class="p">,</span> <span class="n">game_state</span><span class="o">=</span><span class="n">game_state</span><span class="p">,</span> <span class="n">partial_trick</span><span class="o">=</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="L-1261"><a href="#L-1261"><span class="linenos">1261</span></a>
</span><span id="L-1262"><a href="#L-1262"><span class="linenos">1262</span></a>
</span><span id="L-1263"><a href="#L-1263"><span class="linenos">1263</span></a><span class="k">class</span> <span class="nc">SchnapsenMoveValidator</span><span class="p">(</span><span class="n">MoveValidator</span><span class="p">):</span>
</span><span id="L-1264"><a href="#L-1264"><span class="linenos">1264</span></a>
</span><span id="L-1265"><a href="#L-1265"><span class="linenos">1265</span></a>    <span class="k">def</span> <span class="nf">get_legal_leader_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="L-1266"><a href="#L-1266"><span class="linenos">1266</span></a>        <span class="c1"># all cards in the hand can be played</span>
</span><span id="L-1267"><a href="#L-1267"><span class="linenos">1267</span></a>        <span class="n">cards_in_hand</span> <span class="o">=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span>
</span><span id="L-1268"><a href="#L-1268"><span class="linenos">1268</span></a>        <span class="n">valid_moves</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Move</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">RegularMove</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">cards_in_hand</span><span class="p">]</span>
</span><span id="L-1269"><a href="#L-1269"><span class="linenos">1269</span></a>        <span class="c1"># trump exchanges</span>
</span><span id="L-1270"><a href="#L-1270"><span class="linenos">1270</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">game_state</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
</span><span id="L-1271"><a href="#L-1271"><span class="linenos">1271</span></a>            <span class="n">trump_jack</span> <span class="o">=</span> <span class="n">Card</span><span class="o">.</span><span class="n">get_card</span><span class="p">(</span><span class="n">Rank</span><span class="o">.</span><span class="n">JACK</span><span class="p">,</span> <span class="n">game_state</span><span class="o">.</span><span class="n">trump_suit</span><span class="p">)</span>
</span><span id="L-1272"><a href="#L-1272"><span class="linenos">1272</span></a>            <span class="k">if</span> <span class="n">trump_jack</span> <span class="ow">in</span> <span class="n">cards_in_hand</span><span class="p">:</span>
</span><span id="L-1273"><a href="#L-1273"><span class="linenos">1273</span></a>                <span class="n">valid_moves</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Trump_Exchange</span><span class="p">(</span><span class="n">trump_jack</span><span class="p">))</span>
</span><span id="L-1274"><a href="#L-1274"><span class="linenos">1274</span></a>        <span class="c1"># mariages</span>
</span><span id="L-1275"><a href="#L-1275"><span class="linenos">1275</span></a>        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">cards_in_hand</span><span class="o">.</span><span class="n">filter_rank</span><span class="p">(</span><span class="n">Rank</span><span class="o">.</span><span class="n">QUEEN</span><span class="p">):</span>
</span><span id="L-1276"><a href="#L-1276"><span class="linenos">1276</span></a>            <span class="n">king_card</span> <span class="o">=</span> <span class="n">Card</span><span class="o">.</span><span class="n">get_card</span><span class="p">(</span><span class="n">Rank</span><span class="o">.</span><span class="n">KING</span><span class="p">,</span> <span class="n">card</span><span class="o">.</span><span class="n">suit</span><span class="p">)</span>
</span><span id="L-1277"><a href="#L-1277"><span class="linenos">1277</span></a>            <span class="k">if</span> <span class="n">king_card</span> <span class="ow">in</span> <span class="n">cards_in_hand</span><span class="p">:</span>
</span><span id="L-1278"><a href="#L-1278"><span class="linenos">1278</span></a>                <span class="n">valid_moves</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Marriage</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="n">king_card</span><span class="p">))</span>
</span><span id="L-1279"><a href="#L-1279"><span class="linenos">1279</span></a>        <span class="k">return</span> <span class="n">valid_moves</span>
</span><span id="L-1280"><a href="#L-1280"><span class="linenos">1280</span></a>
</span><span id="L-1281"><a href="#L-1281"><span class="linenos">1281</span></a>    <span class="k">def</span> <span class="nf">is_legal_leader_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">move</span><span class="p">:</span> <span class="n">Move</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-1282"><a href="#L-1282"><span class="linenos">1282</span></a>        <span class="n">cards_in_hand</span> <span class="o">=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span>
</span><span id="L-1283"><a href="#L-1283"><span class="linenos">1283</span></a>        <span class="k">if</span> <span class="n">move</span><span class="o">.</span><span class="n">is_marriage</span><span class="p">():</span>
</span><span id="L-1284"><a href="#L-1284"><span class="linenos">1284</span></a>            <span class="n">marriage_move</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Marriage</span><span class="p">,</span> <span class="n">move</span><span class="p">)</span>
</span><span id="L-1285"><a href="#L-1285"><span class="linenos">1285</span></a>            <span class="c1"># we do not have to check whether they are the same suit because of the implementation of Marriage</span>
</span><span id="L-1286"><a href="#L-1286"><span class="linenos">1286</span></a>            <span class="k">return</span> <span class="n">marriage_move</span><span class="o">.</span><span class="n">queen_card</span> <span class="ow">in</span> <span class="n">cards_in_hand</span> <span class="ow">and</span> <span class="n">marriage_move</span><span class="o">.</span><span class="n">king_card</span> <span class="ow">in</span> <span class="n">cards_in_hand</span>
</span><span id="L-1287"><a href="#L-1287"><span class="linenos">1287</span></a>        <span class="k">if</span> <span class="n">move</span><span class="o">.</span><span class="n">is_trump_exchange</span><span class="p">():</span>
</span><span id="L-1288"><a href="#L-1288"><span class="linenos">1288</span></a>            <span class="k">if</span> <span class="n">game_state</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
</span><span id="L-1289"><a href="#L-1289"><span class="linenos">1289</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1290"><a href="#L-1290"><span class="linenos">1290</span></a>            <span class="n">trump_move</span><span class="p">:</span> <span class="n">Trump_Exchange</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Trump_Exchange</span><span class="p">,</span> <span class="n">move</span><span class="p">)</span>
</span><span id="L-1291"><a href="#L-1291"><span class="linenos">1291</span></a>            <span class="k">return</span> <span class="n">trump_move</span><span class="o">.</span><span class="n">jack</span> <span class="ow">in</span> <span class="n">cards_in_hand</span>
</span><span id="L-1292"><a href="#L-1292"><span class="linenos">1292</span></a>        <span class="c1"># it has to be a regular move</span>
</span><span id="L-1293"><a href="#L-1293"><span class="linenos">1293</span></a>        <span class="n">regular_move</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">RegularMove</span><span class="p">,</span> <span class="n">move</span><span class="p">)</span>
</span><span id="L-1294"><a href="#L-1294"><span class="linenos">1294</span></a>        <span class="k">return</span> <span class="n">regular_move</span><span class="o">.</span><span class="n">card</span> <span class="ow">in</span> <span class="n">cards_in_hand</span>
</span><span id="L-1295"><a href="#L-1295"><span class="linenos">1295</span></a>
</span><span id="L-1296"><a href="#L-1296"><span class="linenos">1296</span></a>    <span class="k">def</span> <span class="nf">get_legal_follower_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">:</span> <span class="n">Move</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="L-1297"><a href="#L-1297"><span class="linenos">1297</span></a>        <span class="n">hand</span> <span class="o">=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">hand</span>
</span><span id="L-1298"><a href="#L-1298"><span class="linenos">1298</span></a>        <span class="k">if</span> <span class="n">partial_trick</span><span class="o">.</span><span class="n">is_marriage</span><span class="p">():</span>
</span><span id="L-1299"><a href="#L-1299"><span class="linenos">1299</span></a>            <span class="n">leader_card</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Marriage</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">)</span><span class="o">.</span><span class="n">queen_card</span>
</span><span id="L-1300"><a href="#L-1300"><span class="linenos">1300</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1301"><a href="#L-1301"><span class="linenos">1301</span></a>            <span class="n">leader_card</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">RegularMove</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">)</span><span class="o">.</span><span class="n">card</span>
</span><span id="L-1302"><a href="#L-1302"><span class="linenos">1302</span></a>        <span class="k">if</span> <span class="n">game_state</span><span class="o">.</span><span class="n">game_phase</span><span class="p">()</span> <span class="ow">is</span> <span class="n">GamePhase</span><span class="o">.</span><span class="n">ONE</span><span class="p">:</span>
</span><span id="L-1303"><a href="#L-1303"><span class="linenos">1303</span></a>            <span class="c1"># no need to follow, any card in the hand is a legal move</span>
</span><span id="L-1304"><a href="#L-1304"><span class="linenos">1304</span></a>            <span class="k">return</span> <span class="n">RegularMove</span><span class="o">.</span><span class="n">from_cards</span><span class="p">(</span><span class="n">hand</span><span class="o">.</span><span class="n">get_cards</span><span class="p">())</span>
</span><span id="L-1305"><a href="#L-1305"><span class="linenos">1305</span></a>        <span class="c1"># information from https://www.pagat.com/marriage/schnaps.html</span>
</span><span id="L-1306"><a href="#L-1306"><span class="linenos">1306</span></a>        <span class="c1"># ## original formulation ##</span>
</span><span id="L-1307"><a href="#L-1307"><span class="linenos">1307</span></a>        <span class="c1"># if your opponent leads a non-trump:</span>
</span><span id="L-1308"><a href="#L-1308"><span class="linenos">1308</span></a>        <span class="c1">#     you must play a higher card of the same suit if you can;</span>
</span><span id="L-1309"><a href="#L-1309"><span class="linenos">1309</span></a>        <span class="c1">#     failing this you must play a lower card of the same suit;</span>
</span><span id="L-1310"><a href="#L-1310"><span class="linenos">1310</span></a>        <span class="c1">#     if you have no card of the suit that was led you must play a trump;</span>
</span><span id="L-1311"><a href="#L-1311"><span class="linenos">1311</span></a>        <span class="c1">#     if you have no trumps either you may play anything.</span>
</span><span id="L-1312"><a href="#L-1312"><span class="linenos">1312</span></a>        <span class="c1"># If your opponent leads a trump:</span>
</span><span id="L-1313"><a href="#L-1313"><span class="linenos">1313</span></a>        <span class="c1">#     you must play a higher trump if possible;</span>
</span><span id="L-1314"><a href="#L-1314"><span class="linenos">1314</span></a>        <span class="c1">#     if you have no higher trump you must play a lower trump;</span>
</span><span id="L-1315"><a href="#L-1315"><span class="linenos">1315</span></a>        <span class="c1">#     if you have no trumps at all you may play anything.</span>
</span><span id="L-1316"><a href="#L-1316"><span class="linenos">1316</span></a>        <span class="c1"># ## implemented version, realizing that the rules for trump are overlapping with the normal case ##</span>
</span><span id="L-1317"><a href="#L-1317"><span class="linenos">1317</span></a>        <span class="c1"># you must play a higher card of the same suit if you can</span>
</span><span id="L-1318"><a href="#L-1318"><span class="linenos">1318</span></a>        <span class="c1"># failing this, you must play a lower card of the same suit;</span>
</span><span id="L-1319"><a href="#L-1319"><span class="linenos">1319</span></a>        <span class="c1"># --new--&gt; failing this, if the opponen did not play a trump, you must play a trump</span>
</span><span id="L-1320"><a href="#L-1320"><span class="linenos">1320</span></a>        <span class="c1"># failing this, you can play anything</span>
</span><span id="L-1321"><a href="#L-1321"><span class="linenos">1321</span></a>        <span class="n">leader_card_score</span> <span class="o">=</span> <span class="n">game_engine</span><span class="o">.</span><span class="n">trick_scorer</span><span class="o">.</span><span class="n">rank_to_points</span><span class="p">(</span><span class="n">leader_card</span><span class="o">.</span><span class="n">rank</span><span class="p">)</span>
</span><span id="L-1322"><a href="#L-1322"><span class="linenos">1322</span></a>        <span class="c1"># you must play a higher card of the same suit if you can;</span>
</span><span id="L-1323"><a href="#L-1323"><span class="linenos">1323</span></a>        <span class="n">same_suit_cards</span> <span class="o">=</span> <span class="n">hand</span><span class="o">.</span><span class="n">filter_suit</span><span class="p">(</span><span class="n">leader_card</span><span class="o">.</span><span class="n">suit</span><span class="p">)</span>
</span><span id="L-1324"><a href="#L-1324"><span class="linenos">1324</span></a>        <span class="k">if</span> <span class="n">same_suit_cards</span><span class="p">:</span>
</span><span id="L-1325"><a href="#L-1325"><span class="linenos">1325</span></a>            <span class="n">higher_same_suit</span><span class="p">,</span> <span class="n">lower_same_suit</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
</span><span id="L-1326"><a href="#L-1326"><span class="linenos">1326</span></a>            <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">same_suit_cards</span><span class="p">:</span>
</span><span id="L-1327"><a href="#L-1327"><span class="linenos">1327</span></a>                <span class="c1"># TODO this is slightly ambigousm should this be &gt;= ??</span>
</span><span id="L-1328"><a href="#L-1328"><span class="linenos">1328</span></a>                <span class="n">higher_same_suit</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="k">if</span> <span class="n">game_engine</span><span class="o">.</span><span class="n">trick_scorer</span><span class="o">.</span><span class="n">rank_to_points</span><span class="p">(</span><span class="n">card</span><span class="o">.</span><span class="n">rank</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">leader_card_score</span> <span class="k">else</span> <span class="n">lower_same_suit</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
</span><span id="L-1329"><a href="#L-1329"><span class="linenos">1329</span></a>            <span class="k">if</span> <span class="n">higher_same_suit</span><span class="p">:</span>
</span><span id="L-1330"><a href="#L-1330"><span class="linenos">1330</span></a>                <span class="k">return</span> <span class="n">RegularMove</span><span class="o">.</span><span class="n">from_cards</span><span class="p">(</span><span class="n">higher_same_suit</span><span class="p">)</span>
</span><span id="L-1331"><a href="#L-1331"><span class="linenos">1331</span></a>        <span class="c1"># failing this, you must play a lower card of the same suit;</span>
</span><span id="L-1332"><a href="#L-1332"><span class="linenos">1332</span></a>            <span class="k">elif</span> <span class="n">lower_same_suit</span><span class="p">:</span>
</span><span id="L-1333"><a href="#L-1333"><span class="linenos">1333</span></a>                <span class="k">return</span> <span class="n">RegularMove</span><span class="o">.</span><span class="n">from_cards</span><span class="p">(</span><span class="n">lower_same_suit</span><span class="p">)</span>
</span><span id="L-1334"><a href="#L-1334"><span class="linenos">1334</span></a>            <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;Somethign is wrong in the logic here. There should be cards, but they are neither placed in the low, nor higher list&quot;</span><span class="p">)</span>
</span><span id="L-1335"><a href="#L-1335"><span class="linenos">1335</span></a>        <span class="c1"># failing this, if the opponen did not play a trump, you must play a trump</span>
</span><span id="L-1336"><a href="#L-1336"><span class="linenos">1336</span></a>        <span class="n">trump_cards</span> <span class="o">=</span> <span class="n">hand</span><span class="o">.</span><span class="n">filter_suit</span><span class="p">(</span><span class="n">game_state</span><span class="o">.</span><span class="n">trump_suit</span><span class="p">)</span>
</span><span id="L-1337"><a href="#L-1337"><span class="linenos">1337</span></a>        <span class="k">if</span> <span class="n">leader_card</span><span class="o">.</span><span class="n">suit</span> <span class="o">!=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">trump_suit</span> <span class="ow">and</span> <span class="n">trump_cards</span><span class="p">:</span>
</span><span id="L-1338"><a href="#L-1338"><span class="linenos">1338</span></a>            <span class="k">return</span> <span class="n">RegularMove</span><span class="o">.</span><span class="n">from_cards</span><span class="p">(</span><span class="n">trump_cards</span><span class="p">)</span>
</span><span id="L-1339"><a href="#L-1339"><span class="linenos">1339</span></a>        <span class="c1"># failing this, you can play anything</span>
</span><span id="L-1340"><a href="#L-1340"><span class="linenos">1340</span></a>        <span class="k">return</span> <span class="n">RegularMove</span><span class="o">.</span><span class="n">from_cards</span><span class="p">(</span><span class="n">hand</span><span class="o">.</span><span class="n">get_cards</span><span class="p">())</span>
</span><span id="L-1341"><a href="#L-1341"><span class="linenos">1341</span></a>
</span><span id="L-1342"><a href="#L-1342"><span class="linenos">1342</span></a>
</span><span id="L-1343"><a href="#L-1343"><span class="linenos">1343</span></a><span class="k">class</span> <span class="nc">TrickScorer</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="L-1344"><a href="#L-1344"><span class="linenos">1344</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="L-1345"><a href="#L-1345"><span class="linenos">1345</span></a>    <span class="k">def</span> <span class="nf">score</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">trick</span><span class="p">:</span> <span class="n">RegularTrick</span><span class="p">,</span> <span class="n">leader</span><span class="p">:</span> <span class="n">BotState</span><span class="p">,</span> <span class="n">follower</span><span class="p">:</span> <span class="n">BotState</span><span class="p">,</span> <span class="n">trump</span><span class="p">:</span> <span class="n">Suit</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">BotState</span><span class="p">,</span> <span class="n">BotState</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
</span><span id="L-1346"><a href="#L-1346"><span class="linenos">1346</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1347"><a href="#L-1347"><span class="linenos">1347</span></a><span class="sd">        Score the trick for the given leader and follower. The returned bots are the same bots provided (not copies) and have the score of the trick applied.</span>
</span><span id="L-1348"><a href="#L-1348"><span class="linenos">1348</span></a><span class="sd">        They are returned in order (new_leader, new_follower). If appropriate, also pending points have been applied.</span>
</span><span id="L-1349"><a href="#L-1349"><span class="linenos">1349</span></a><span class="sd">        The boolean is True if the leading bot remained the same, i.e., the past leader remains the leader</span>
</span><span id="L-1350"><a href="#L-1350"><span class="linenos">1350</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1351"><a href="#L-1351"><span class="linenos">1351</span></a>
</span><span id="L-1352"><a href="#L-1352"><span class="linenos">1352</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="L-1353"><a href="#L-1353"><span class="linenos">1353</span></a>    <span class="k">def</span> <span class="nf">declare_winner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">BotState</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]:</span>
</span><span id="L-1354"><a href="#L-1354"><span class="linenos">1354</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;return a bot and the number of points if there is a winner of this game already</span>
</span><span id="L-1355"><a href="#L-1355"><span class="linenos">1355</span></a>
</span><span id="L-1356"><a href="#L-1356"><span class="linenos">1356</span></a><span class="sd">        :param game_state: The current state of the game</span>
</span><span id="L-1357"><a href="#L-1357"><span class="linenos">1357</span></a><span class="sd">        :returns: The botstate of the winner and the number of game points, in case there is a winner already. Otherwise None.</span>
</span><span id="L-1358"><a href="#L-1358"><span class="linenos">1358</span></a>
</span><span id="L-1359"><a href="#L-1359"><span class="linenos">1359</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1360"><a href="#L-1360"><span class="linenos">1360</span></a>
</span><span id="L-1361"><a href="#L-1361"><span class="linenos">1361</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="L-1362"><a href="#L-1362"><span class="linenos">1362</span></a>    <span class="k">def</span> <span class="nf">rank_to_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rank</span><span class="p">:</span> <span class="n">Rank</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="L-1363"><a href="#L-1363"><span class="linenos">1363</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the point value for a given rank</span>
</span><span id="L-1364"><a href="#L-1364"><span class="linenos">1364</span></a>
</span><span id="L-1365"><a href="#L-1365"><span class="linenos">1365</span></a><span class="sd">        :param rank: the rank of a card for which you want to obtain the points</span>
</span><span id="L-1366"><a href="#L-1366"><span class="linenos">1366</span></a><span class="sd">        :returns: The score for that card</span>
</span><span id="L-1367"><a href="#L-1367"><span class="linenos">1367</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1368"><a href="#L-1368"><span class="linenos">1368</span></a>
</span><span id="L-1369"><a href="#L-1369"><span class="linenos">1369</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="L-1370"><a href="#L-1370"><span class="linenos">1370</span></a>    <span class="k">def</span> <span class="nf">marriage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">move</span><span class="p">:</span> <span class="n">Marriage</span><span class="p">,</span> <span class="n">gamestate</span><span class="p">:</span> <span class="n">GameState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Score&#39;</span><span class="p">:</span>
</span><span id="L-1371"><a href="#L-1371"><span class="linenos">1371</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the score which the player obtains for the given marriage</span>
</span><span id="L-1372"><a href="#L-1372"><span class="linenos">1372</span></a>
</span><span id="L-1373"><a href="#L-1373"><span class="linenos">1373</span></a><span class="sd">        :param move: The marriage for which to get the score</span>
</span><span id="L-1374"><a href="#L-1374"><span class="linenos">1374</span></a><span class="sd">        :param gamestate: the current state of the game, usually used to get the trump suit</span>
</span><span id="L-1375"><a href="#L-1375"><span class="linenos">1375</span></a><span class="sd">        :returns: The score for this marriage</span>
</span><span id="L-1376"><a href="#L-1376"><span class="linenos">1376</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1377"><a href="#L-1377"><span class="linenos">1377</span></a>
</span><span id="L-1378"><a href="#L-1378"><span class="linenos">1378</span></a>
</span><span id="L-1379"><a href="#L-1379"><span class="linenos">1379</span></a><span class="k">class</span> <span class="nc">SchnapsenTrickScorer</span><span class="p">(</span><span class="n">TrickScorer</span><span class="p">):</span>
</span><span id="L-1380"><a href="#L-1380"><span class="linenos">1380</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1381"><a href="#L-1381"><span class="linenos">1381</span></a><span class="sd">    A TrickScorer that scores ac cording to the Schnapsen rules</span>
</span><span id="L-1382"><a href="#L-1382"><span class="linenos">1382</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1383"><a href="#L-1383"><span class="linenos">1383</span></a>
</span><span id="L-1384"><a href="#L-1384"><span class="linenos">1384</span></a>    <span class="n">SCORES</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-1385"><a href="#L-1385"><span class="linenos">1385</span></a>        <span class="n">Rank</span><span class="o">.</span><span class="n">ACE</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span>
</span><span id="L-1386"><a href="#L-1386"><span class="linenos">1386</span></a>        <span class="n">Rank</span><span class="o">.</span><span class="n">TEN</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
</span><span id="L-1387"><a href="#L-1387"><span class="linenos">1387</span></a>        <span class="n">Rank</span><span class="o">.</span><span class="n">KING</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
</span><span id="L-1388"><a href="#L-1388"><span class="linenos">1388</span></a>        <span class="n">Rank</span><span class="o">.</span><span class="n">QUEEN</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
</span><span id="L-1389"><a href="#L-1389"><span class="linenos">1389</span></a>        <span class="n">Rank</span><span class="o">.</span><span class="n">JACK</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
</span><span id="L-1390"><a href="#L-1390"><span class="linenos">1390</span></a>    <span class="p">}</span>
</span><span id="L-1391"><a href="#L-1391"><span class="linenos">1391</span></a>
</span><span id="L-1392"><a href="#L-1392"><span class="linenos">1392</span></a>    <span class="k">def</span> <span class="nf">rank_to_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rank</span><span class="p">:</span> <span class="n">Rank</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="L-1393"><a href="#L-1393"><span class="linenos">1393</span></a>        <span class="k">return</span> <span class="n">SchnapsenTrickScorer</span><span class="o">.</span><span class="n">SCORES</span><span class="p">[</span><span class="n">rank</span><span class="p">]</span>
</span><span id="L-1394"><a href="#L-1394"><span class="linenos">1394</span></a>
</span><span id="L-1395"><a href="#L-1395"><span class="linenos">1395</span></a>    <span class="k">def</span> <span class="nf">marriage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">move</span><span class="p">:</span> <span class="n">Marriage</span><span class="p">,</span> <span class="n">gamestate</span><span class="p">:</span> <span class="n">GameState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Score&#39;</span><span class="p">:</span>
</span><span id="L-1396"><a href="#L-1396"><span class="linenos">1396</span></a>        <span class="k">if</span> <span class="n">move</span><span class="o">.</span><span class="n">suit</span> <span class="ow">is</span> <span class="n">gamestate</span><span class="o">.</span><span class="n">trump_suit</span><span class="p">:</span>
</span><span id="L-1397"><a href="#L-1397"><span class="linenos">1397</span></a>            <span class="c1"># royal marriage</span>
</span><span id="L-1398"><a href="#L-1398"><span class="linenos">1398</span></a>            <span class="k">return</span> <span class="n">Score</span><span class="p">(</span><span class="n">pending_points</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
</span><span id="L-1399"><a href="#L-1399"><span class="linenos">1399</span></a>        <span class="c1"># any other marriage</span>
</span><span id="L-1400"><a href="#L-1400"><span class="linenos">1400</span></a>        <span class="k">return</span> <span class="n">Score</span><span class="p">(</span><span class="n">pending_points</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</span><span id="L-1401"><a href="#L-1401"><span class="linenos">1401</span></a>
</span><span id="L-1402"><a href="#L-1402"><span class="linenos">1402</span></a>    <span class="k">def</span> <span class="nf">score</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">trick</span><span class="p">:</span> <span class="n">RegularTrick</span><span class="p">,</span> <span class="n">leader</span><span class="p">:</span> <span class="n">BotState</span><span class="p">,</span> <span class="n">follower</span><span class="p">:</span> <span class="n">BotState</span><span class="p">,</span> <span class="n">trump</span><span class="p">:</span> <span class="n">Suit</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">BotState</span><span class="p">,</span> <span class="n">BotState</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
</span><span id="L-1403"><a href="#L-1403"><span class="linenos">1403</span></a>
</span><span id="L-1404"><a href="#L-1404"><span class="linenos">1404</span></a>        <span class="k">if</span> <span class="n">trick</span><span class="o">.</span><span class="n">leader_move</span><span class="o">.</span><span class="n">is_marriage</span><span class="p">():</span>
</span><span id="L-1405"><a href="#L-1405"><span class="linenos">1405</span></a>            <span class="n">regular_leader_move</span><span class="p">:</span> <span class="n">RegularMove</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Marriage</span><span class="p">,</span> <span class="n">trick</span><span class="o">.</span><span class="n">leader_move</span><span class="p">)</span><span class="o">.</span><span class="n">underlying_regular_move</span><span class="p">()</span>
</span><span id="L-1406"><a href="#L-1406"><span class="linenos">1406</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1407"><a href="#L-1407"><span class="linenos">1407</span></a>            <span class="n">regular_leader_move</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">RegularMove</span><span class="p">,</span> <span class="n">trick</span><span class="o">.</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="L-1408"><a href="#L-1408"><span class="linenos">1408</span></a>
</span><span id="L-1409"><a href="#L-1409"><span class="linenos">1409</span></a>        <span class="n">leader_card</span> <span class="o">=</span> <span class="n">regular_leader_move</span><span class="o">.</span><span class="n">card</span>
</span><span id="L-1410"><a href="#L-1410"><span class="linenos">1410</span></a>        <span class="n">follower_card</span> <span class="o">=</span> <span class="n">trick</span><span class="o">.</span><span class="n">follower_move</span><span class="o">.</span><span class="n">card</span>
</span><span id="L-1411"><a href="#L-1411"><span class="linenos">1411</span></a>        <span class="k">assert</span> <span class="n">leader_card</span> <span class="o">!=</span> <span class="n">follower_card</span>
</span><span id="L-1412"><a href="#L-1412"><span class="linenos">1412</span></a>        <span class="n">leader_card_points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rank_to_points</span><span class="p">(</span><span class="n">leader_card</span><span class="o">.</span><span class="n">rank</span><span class="p">)</span>
</span><span id="L-1413"><a href="#L-1413"><span class="linenos">1413</span></a>        <span class="n">follower_card_points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rank_to_points</span><span class="p">(</span><span class="n">follower_card</span><span class="o">.</span><span class="n">rank</span><span class="p">)</span>
</span><span id="L-1414"><a href="#L-1414"><span class="linenos">1414</span></a>
</span><span id="L-1415"><a href="#L-1415"><span class="linenos">1415</span></a>        <span class="k">if</span> <span class="n">leader_card</span><span class="o">.</span><span class="n">suit</span> <span class="ow">is</span> <span class="n">follower_card</span><span class="o">.</span><span class="n">suit</span><span class="p">:</span>
</span><span id="L-1416"><a href="#L-1416"><span class="linenos">1416</span></a>            <span class="c1"># same suit, either trump or not</span>
</span><span id="L-1417"><a href="#L-1417"><span class="linenos">1417</span></a>            <span class="k">if</span> <span class="n">leader_card_points</span> <span class="o">&gt;</span> <span class="n">follower_card_points</span><span class="p">:</span>
</span><span id="L-1418"><a href="#L-1418"><span class="linenos">1418</span></a>                <span class="n">leader_wins</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-1419"><a href="#L-1419"><span class="linenos">1419</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1420"><a href="#L-1420"><span class="linenos">1420</span></a>                <span class="n">leader_wins</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1421"><a href="#L-1421"><span class="linenos">1421</span></a>        <span class="k">elif</span> <span class="n">leader_card</span><span class="o">.</span><span class="n">suit</span> <span class="ow">is</span> <span class="n">trump</span><span class="p">:</span>
</span><span id="L-1422"><a href="#L-1422"><span class="linenos">1422</span></a>            <span class="c1"># the follower suit cannot be trumps as per the previous condition</span>
</span><span id="L-1423"><a href="#L-1423"><span class="linenos">1423</span></a>            <span class="n">leader_wins</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-1424"><a href="#L-1424"><span class="linenos">1424</span></a>        <span class="k">elif</span> <span class="n">follower_card</span><span class="o">.</span><span class="n">suit</span> <span class="ow">is</span> <span class="n">trump</span><span class="p">:</span>
</span><span id="L-1425"><a href="#L-1425"><span class="linenos">1425</span></a>            <span class="c1"># the leader suit cannot be trumps because of the previous conditions</span>
</span><span id="L-1426"><a href="#L-1426"><span class="linenos">1426</span></a>            <span class="n">leader_wins</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1427"><a href="#L-1427"><span class="linenos">1427</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1428"><a href="#L-1428"><span class="linenos">1428</span></a>            <span class="c1"># the follower did not follow the suit of the leader and did not play trumps, hence the leader wins</span>
</span><span id="L-1429"><a href="#L-1429"><span class="linenos">1429</span></a>            <span class="n">leader_wins</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-1430"><a href="#L-1430"><span class="linenos">1430</span></a>        <span class="n">winner</span><span class="p">,</span> <span class="n">loser</span> <span class="o">=</span> <span class="p">(</span><span class="n">leader</span><span class="p">,</span> <span class="n">follower</span><span class="p">)</span> <span class="k">if</span> <span class="n">leader_wins</span> <span class="k">else</span> <span class="p">(</span><span class="n">follower</span><span class="p">,</span> <span class="n">leader</span><span class="p">)</span>
</span><span id="L-1431"><a href="#L-1431"><span class="linenos">1431</span></a>        <span class="c1"># record the win</span>
</span><span id="L-1432"><a href="#L-1432"><span class="linenos">1432</span></a>        <span class="n">winner</span><span class="o">.</span><span class="n">won_cards</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">leader_card</span><span class="p">,</span> <span class="n">follower_card</span><span class="p">])</span>
</span><span id="L-1433"><a href="#L-1433"><span class="linenos">1433</span></a>        <span class="c1"># apply the points</span>
</span><span id="L-1434"><a href="#L-1434"><span class="linenos">1434</span></a>        <span class="n">points_gained</span> <span class="o">=</span> <span class="n">leader_card_points</span> <span class="o">+</span> <span class="n">follower_card_points</span>
</span><span id="L-1435"><a href="#L-1435"><span class="linenos">1435</span></a>        <span class="n">winner</span><span class="o">.</span><span class="n">score</span> <span class="o">+=</span> <span class="n">Score</span><span class="p">(</span><span class="n">direct_points</span><span class="o">=</span><span class="n">points_gained</span><span class="p">)</span>
</span><span id="L-1436"><a href="#L-1436"><span class="linenos">1436</span></a>        <span class="c1"># add winner&#39;s total of direct and pending points as their new direct points</span>
</span><span id="L-1437"><a href="#L-1437"><span class="linenos">1437</span></a>        <span class="n">winner</span><span class="o">.</span><span class="n">score</span> <span class="o">=</span> <span class="n">winner</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">redeem_pending_points</span><span class="p">()</span>
</span><span id="L-1438"><a href="#L-1438"><span class="linenos">1438</span></a>        <span class="k">return</span> <span class="n">winner</span><span class="p">,</span> <span class="n">loser</span><span class="p">,</span> <span class="n">leader_wins</span>
</span><span id="L-1439"><a href="#L-1439"><span class="linenos">1439</span></a>
</span><span id="L-1440"><a href="#L-1440"><span class="linenos">1440</span></a>    <span class="k">def</span> <span class="nf">declare_winner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">BotState</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]:</span>
</span><span id="L-1441"><a href="#L-1441"><span class="linenos">1441</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1442"><a href="#L-1442"><span class="linenos">1442</span></a><span class="sd">        Declaring a winner uses the logic from https://www.pagat.com/marriage/schnaps.html#marriages , but simplified, because we do not have closing of the Talon and no need to guess the scores.</span>
</span><span id="L-1443"><a href="#L-1443"><span class="linenos">1443</span></a><span class="sd">        The following text adapted accordingly from that website.</span>
</span><span id="L-1444"><a href="#L-1444"><span class="linenos">1444</span></a>
</span><span id="L-1445"><a href="#L-1445"><span class="linenos">1445</span></a><span class="sd">        If a player has 66 or more points, she scores points toward game as follows:</span>
</span><span id="L-1446"><a href="#L-1446"><span class="linenos">1446</span></a>
</span><span id="L-1447"><a href="#L-1447"><span class="linenos">1447</span></a><span class="sd">            * one game point, if the opponent has made at least 33 points;</span>
</span><span id="L-1448"><a href="#L-1448"><span class="linenos">1448</span></a><span class="sd">            * two game points, if the opponent has made fewer than 33 points, but has won at least one trick (opponent is said to be Schneider);</span>
</span><span id="L-1449"><a href="#L-1449"><span class="linenos">1449</span></a><span class="sd">            * three game points, if the opponent has won no tricks (opponent is said to be Schwarz).</span>
</span><span id="L-1450"><a href="#L-1450"><span class="linenos">1450</span></a>
</span><span id="L-1451"><a href="#L-1451"><span class="linenos">1451</span></a><span class="sd">        If play continued to the very last trick with the talon exhausted, the player who takes the last trick wins the hand, scoring one game point, irrespective of the number of card points the players have taken.</span>
</span><span id="L-1452"><a href="#L-1452"><span class="linenos">1452</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1453"><a href="#L-1453"><span class="linenos">1453</span></a>        <span class="k">if</span> <span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">direct_points</span> <span class="o">&gt;=</span> <span class="mi">66</span><span class="p">:</span>
</span><span id="L-1454"><a href="#L-1454"><span class="linenos">1454</span></a>            <span class="n">follower_score</span> <span class="o">=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">direct_points</span>
</span><span id="L-1455"><a href="#L-1455"><span class="linenos">1455</span></a>            <span class="k">if</span> <span class="n">follower_score</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-1456"><a href="#L-1456"><span class="linenos">1456</span></a>                <span class="k">return</span> <span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="p">,</span> <span class="mi">3</span>
</span><span id="L-1457"><a href="#L-1457"><span class="linenos">1457</span></a>            <span class="k">elif</span> <span class="n">follower_score</span> <span class="o">&gt;=</span> <span class="mi">33</span><span class="p">:</span>
</span><span id="L-1458"><a href="#L-1458"><span class="linenos">1458</span></a>                <span class="k">return</span> <span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="p">,</span> <span class="mi">1</span>
</span><span id="L-1459"><a href="#L-1459"><span class="linenos">1459</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1460"><a href="#L-1460"><span class="linenos">1460</span></a>                <span class="c1"># second case in explaination above, 0 &lt; score &lt; 33</span>
</span><span id="L-1461"><a href="#L-1461"><span class="linenos">1461</span></a>                <span class="k">assert</span> <span class="n">follower_score</span> <span class="o">&lt;</span> <span class="mi">66</span>
</span><span id="L-1462"><a href="#L-1462"><span class="linenos">1462</span></a>                <span class="k">return</span> <span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="p">,</span> <span class="mi">2</span>
</span><span id="L-1463"><a href="#L-1463"><span class="linenos">1463</span></a>        <span class="k">elif</span> <span class="n">game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">direct_points</span> <span class="o">&gt;=</span> <span class="mi">66</span><span class="p">:</span>
</span><span id="L-1464"><a href="#L-1464"><span class="linenos">1464</span></a>            <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;Would declare the follower winner, but this should never happen in the current implementation&quot;</span><span class="p">)</span>
</span><span id="L-1465"><a href="#L-1465"><span class="linenos">1465</span></a>        <span class="k">elif</span> <span class="n">game_state</span><span class="o">.</span><span class="n">are_all_cards_played</span><span class="p">():</span>
</span><span id="L-1466"><a href="#L-1466"><span class="linenos">1466</span></a>            <span class="k">return</span> <span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="p">,</span> <span class="mi">1</span>
</span><span id="L-1467"><a href="#L-1467"><span class="linenos">1467</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1468"><a href="#L-1468"><span class="linenos">1468</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-1469"><a href="#L-1469"><span class="linenos">1469</span></a>
</span><span id="L-1470"><a href="#L-1470"><span class="linenos">1470</span></a>
</span><span id="L-1471"><a href="#L-1471"><span class="linenos">1471</span></a><span class="nd">@dataclass</span>
</span><span id="L-1472"><a href="#L-1472"><span class="linenos">1472</span></a><span class="k">class</span> <span class="nc">GamePlayEngine</span><span class="p">:</span>
</span><span id="L-1473"><a href="#L-1473"><span class="linenos">1473</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1474"><a href="#L-1474"><span class="linenos">1474</span></a><span class="sd">    The GamePlayengine combines the different aspects of the game into an engine that can execute games.</span>
</span><span id="L-1475"><a href="#L-1475"><span class="linenos">1475</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1476"><a href="#L-1476"><span class="linenos">1476</span></a>    <span class="n">deck_generator</span><span class="p">:</span> <span class="n">DeckGenerator</span>
</span><span id="L-1477"><a href="#L-1477"><span class="linenos">1477</span></a>    <span class="n">hand_generator</span><span class="p">:</span> <span class="n">HandGenerator</span>
</span><span id="L-1478"><a href="#L-1478"><span class="linenos">1478</span></a>    <span class="n">trick_implementer</span><span class="p">:</span> <span class="n">TrickImplementer</span>
</span><span id="L-1479"><a href="#L-1479"><span class="linenos">1479</span></a>    <span class="n">move_requester</span><span class="p">:</span> <span class="n">MoveRequester</span>
</span><span id="L-1480"><a href="#L-1480"><span class="linenos">1480</span></a>    <span class="n">move_validator</span><span class="p">:</span> <span class="n">MoveValidator</span>
</span><span id="L-1481"><a href="#L-1481"><span class="linenos">1481</span></a>    <span class="n">trick_scorer</span><span class="p">:</span> <span class="n">TrickScorer</span>
</span><span id="L-1482"><a href="#L-1482"><span class="linenos">1482</span></a>
</span><span id="L-1483"><a href="#L-1483"><span class="linenos">1483</span></a>    <span class="k">def</span> <span class="nf">play_game</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bot1</span><span class="p">:</span> <span class="n">Bot</span><span class="p">,</span> <span class="n">bot2</span><span class="p">:</span> <span class="n">Bot</span><span class="p">,</span> <span class="n">rng</span><span class="p">:</span> <span class="n">Random</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Bot</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">Score</span><span class="p">]:</span>
</span><span id="L-1484"><a href="#L-1484"><span class="linenos">1484</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1485"><a href="#L-1485"><span class="linenos">1485</span></a><span class="sd">        Play a game between bot1 and bot2, using the rng to create the game.</span>
</span><span id="L-1486"><a href="#L-1486"><span class="linenos">1486</span></a>
</span><span id="L-1487"><a href="#L-1487"><span class="linenos">1487</span></a><span class="sd">        :param bot1: The first bot playing the game. This bot will be the leader for the first trick.</span>
</span><span id="L-1488"><a href="#L-1488"><span class="linenos">1488</span></a><span class="sd">        :param bot2: The second bot playing the game. This bot will be the follower for the first trick.</span>
</span><span id="L-1489"><a href="#L-1489"><span class="linenos">1489</span></a><span class="sd">        :param rng: The random number generator used to shuffle the deck.</span>
</span><span id="L-1490"><a href="#L-1490"><span class="linenos">1490</span></a>
</span><span id="L-1491"><a href="#L-1491"><span class="linenos">1491</span></a><span class="sd">        :returns: A tuple with the bot which won the game, the number of points obtained from this game and the score attained.</span>
</span><span id="L-1492"><a href="#L-1492"><span class="linenos">1492</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1493"><a href="#L-1493"><span class="linenos">1493</span></a>        <span class="n">cards</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deck_generator</span><span class="o">.</span><span class="n">get_initial_deck</span><span class="p">()</span>
</span><span id="L-1494"><a href="#L-1494"><span class="linenos">1494</span></a>        <span class="n">shuffled</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deck_generator</span><span class="o">.</span><span class="n">shuffle_deck</span><span class="p">(</span><span class="n">cards</span><span class="p">,</span> <span class="n">rng</span><span class="p">)</span>
</span><span id="L-1495"><a href="#L-1495"><span class="linenos">1495</span></a>        <span class="n">hand1</span><span class="p">,</span> <span class="n">hand2</span><span class="p">,</span> <span class="n">talon</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hand_generator</span><span class="o">.</span><span class="n">generateHands</span><span class="p">(</span><span class="n">shuffled</span><span class="p">)</span>
</span><span id="L-1496"><a href="#L-1496"><span class="linenos">1496</span></a>
</span><span id="L-1497"><a href="#L-1497"><span class="linenos">1497</span></a>        <span class="n">leader_state</span> <span class="o">=</span> <span class="n">BotState</span><span class="p">(</span><span class="n">implementation</span><span class="o">=</span><span class="n">bot1</span><span class="p">,</span> <span class="n">hand</span><span class="o">=</span><span class="n">hand1</span><span class="p">)</span>
</span><span id="L-1498"><a href="#L-1498"><span class="linenos">1498</span></a>        <span class="n">follower_state</span> <span class="o">=</span> <span class="n">BotState</span><span class="p">(</span><span class="n">implementation</span><span class="o">=</span><span class="n">bot2</span><span class="p">,</span> <span class="n">hand</span><span class="o">=</span><span class="n">hand2</span><span class="p">)</span>
</span><span id="L-1499"><a href="#L-1499"><span class="linenos">1499</span></a>
</span><span id="L-1500"><a href="#L-1500"><span class="linenos">1500</span></a>        <span class="n">game_state</span> <span class="o">=</span> <span class="n">GameState</span><span class="p">(</span>
</span><span id="L-1501"><a href="#L-1501"><span class="linenos">1501</span></a>            <span class="n">leader</span><span class="o">=</span><span class="n">leader_state</span><span class="p">,</span>
</span><span id="L-1502"><a href="#L-1502"><span class="linenos">1502</span></a>            <span class="n">follower</span><span class="o">=</span><span class="n">follower_state</span><span class="p">,</span>
</span><span id="L-1503"><a href="#L-1503"><span class="linenos">1503</span></a>            <span class="n">talon</span><span class="o">=</span><span class="n">talon</span><span class="p">,</span>
</span><span id="L-1504"><a href="#L-1504"><span class="linenos">1504</span></a>            <span class="n">previous</span><span class="o">=</span><span class="kc">None</span>
</span><span id="L-1505"><a href="#L-1505"><span class="linenos">1505</span></a>        <span class="p">)</span>
</span><span id="L-1506"><a href="#L-1506"><span class="linenos">1506</span></a>        <span class="n">winner</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">score</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">play_game_from_state</span><span class="p">(</span><span class="n">game_state</span><span class="o">=</span><span class="n">game_state</span><span class="p">,</span> <span class="n">leader_move</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="L-1507"><a href="#L-1507"><span class="linenos">1507</span></a>        <span class="k">return</span> <span class="n">winner</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">score</span>
</span><span id="L-1508"><a href="#L-1508"><span class="linenos">1508</span></a>
</span><span id="L-1509"><a href="#L-1509"><span class="linenos">1509</span></a>    <span class="k">def</span> <span class="nf">play_game_from_state_with_new_bots</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">new_leader</span><span class="p">:</span> <span class="n">Bot</span><span class="p">,</span> <span class="n">new_follower</span><span class="p">:</span> <span class="n">Bot</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Bot</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">Score</span><span class="p">]:</span>
</span><span id="L-1510"><a href="#L-1510"><span class="linenos">1510</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1511"><a href="#L-1511"><span class="linenos">1511</span></a><span class="sd">        Continue a game  which might have started before with other bots, with new bots.</span>
</span><span id="L-1512"><a href="#L-1512"><span class="linenos">1512</span></a><span class="sd">        The new bots are new_leader and new_follower.</span>
</span><span id="L-1513"><a href="#L-1513"><span class="linenos">1513</span></a><span class="sd">        The leader move is an optional paramter which can be provided to force this first move from the leader.</span>
</span><span id="L-1514"><a href="#L-1514"><span class="linenos">1514</span></a>
</span><span id="L-1515"><a href="#L-1515"><span class="linenos">1515</span></a><span class="sd">        :param game_state: The state of the game to start from</span>
</span><span id="L-1516"><a href="#L-1516"><span class="linenos">1516</span></a><span class="sd">        :param new_leader: The bot which will take the leader role in the game.</span>
</span><span id="L-1517"><a href="#L-1517"><span class="linenos">1517</span></a><span class="sd">        :param new_follower: The bot which will take the follower in the game.</span>
</span><span id="L-1518"><a href="#L-1518"><span class="linenos">1518</span></a><span class="sd">        :param leader_move: if provided, the leader will be forced to play this move as its first move.</span>
</span><span id="L-1519"><a href="#L-1519"><span class="linenos">1519</span></a>
</span><span id="L-1520"><a href="#L-1520"><span class="linenos">1520</span></a><span class="sd">        :returns: A tuple with the bot which won the game, the number of points obtained from this game and the score attained.</span>
</span><span id="L-1521"><a href="#L-1521"><span class="linenos">1521</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1522"><a href="#L-1522"><span class="linenos">1522</span></a>
</span><span id="L-1523"><a href="#L-1523"><span class="linenos">1523</span></a>        <span class="n">game_state_copy</span> <span class="o">=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">copy_with_other_bots</span><span class="p">(</span><span class="n">new_leader</span><span class="o">=</span><span class="n">new_leader</span><span class="p">,</span> <span class="n">new_follower</span><span class="o">=</span><span class="n">new_follower</span><span class="p">)</span>
</span><span id="L-1524"><a href="#L-1524"><span class="linenos">1524</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">play_game_from_state</span><span class="p">(</span><span class="n">game_state_copy</span><span class="p">,</span> <span class="n">leader_move</span><span class="o">=</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="L-1525"><a href="#L-1525"><span class="linenos">1525</span></a>
</span><span id="L-1526"><a href="#L-1526"><span class="linenos">1526</span></a>    <span class="k">def</span> <span class="nf">play_game_from_state</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Bot</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">Score</span><span class="p">]:</span>
</span><span id="L-1527"><a href="#L-1527"><span class="linenos">1527</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1528"><a href="#L-1528"><span class="linenos">1528</span></a><span class="sd">        Continue a game  which might have been started before.</span>
</span><span id="L-1529"><a href="#L-1529"><span class="linenos">1529</span></a><span class="sd">        The leader move is an optional paramter which can be provided to force this first move from the leader.</span>
</span><span id="L-1530"><a href="#L-1530"><span class="linenos">1530</span></a>
</span><span id="L-1531"><a href="#L-1531"><span class="linenos">1531</span></a><span class="sd">        :param game_state: The state of the game to start from</span>
</span><span id="L-1532"><a href="#L-1532"><span class="linenos">1532</span></a><span class="sd">        :param leader_move: if provided, the leader will be forced to play this move as its first move.</span>
</span><span id="L-1533"><a href="#L-1533"><span class="linenos">1533</span></a>
</span><span id="L-1534"><a href="#L-1534"><span class="linenos">1534</span></a><span class="sd">        :returns: A tuple with the bot which won the game, the number of points obtained from this game and the score attained.</span>
</span><span id="L-1535"><a href="#L-1535"><span class="linenos">1535</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1536"><a href="#L-1536"><span class="linenos">1536</span></a>        <span class="n">winner</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">BotState</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1537"><a href="#L-1537"><span class="linenos">1537</span></a>        <span class="n">points</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="L-1538"><a href="#L-1538"><span class="linenos">1538</span></a>        <span class="k">while</span> <span class="ow">not</span> <span class="n">winner</span><span class="p">:</span>
</span><span id="L-1539"><a href="#L-1539"><span class="linenos">1539</span></a>            <span class="k">if</span> <span class="n">leader_move</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1540"><a href="#L-1540"><span class="linenos">1540</span></a>                <span class="c1"># we continues from a game where the leading bot already did a move, we immitate that</span>
</span><span id="L-1541"><a href="#L-1541"><span class="linenos">1541</span></a>                <span class="n">game_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trick_implementer</span><span class="o">.</span><span class="n">play_trick_with_fixed_leader_move</span><span class="p">(</span><span class="n">game_engine</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_state</span><span class="o">=</span><span class="n">game_state</span><span class="p">,</span> <span class="n">leader_move</span><span class="o">=</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="L-1542"><a href="#L-1542"><span class="linenos">1542</span></a>                <span class="n">leader_move</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1543"><a href="#L-1543"><span class="linenos">1543</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1544"><a href="#L-1544"><span class="linenos">1544</span></a>                <span class="n">game_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trick_implementer</span><span class="o">.</span><span class="n">play_trick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_state</span><span class="p">)</span>
</span><span id="L-1545"><a href="#L-1545"><span class="linenos">1545</span></a>            <span class="n">winner</span><span class="p">,</span> <span class="n">points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trick_scorer</span><span class="o">.</span><span class="n">declare_winner</span><span class="p">(</span><span class="n">game_state</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-1546"><a href="#L-1546"><span class="linenos">1546</span></a>
</span><span id="L-1547"><a href="#L-1547"><span class="linenos">1547</span></a>        <span class="n">winner_state</span> <span class="o">=</span> <span class="n">WinnerPerspective</span><span class="p">(</span><span class="n">game_state</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="L-1548"><a href="#L-1548"><span class="linenos">1548</span></a>        <span class="n">winner</span><span class="o">.</span><span class="n">implementation</span><span class="o">.</span><span class="n">notify_game_end</span><span class="p">(</span><span class="n">won</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="n">winner_state</span><span class="p">)</span>
</span><span id="L-1549"><a href="#L-1549"><span class="linenos">1549</span></a>
</span><span id="L-1550"><a href="#L-1550"><span class="linenos">1550</span></a>        <span class="n">loser_state</span> <span class="o">=</span> <span class="n">LoserPerspective</span><span class="p">(</span><span class="n">game_state</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="L-1551"><a href="#L-1551"><span class="linenos">1551</span></a>        <span class="n">game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">implementation</span><span class="o">.</span><span class="n">notify_game_end</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="n">loser_state</span><span class="p">)</span>
</span><span id="L-1552"><a href="#L-1552"><span class="linenos">1552</span></a>
</span><span id="L-1553"><a href="#L-1553"><span class="linenos">1553</span></a>        <span class="k">return</span> <span class="n">winner</span><span class="o">.</span><span class="n">implementation</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">winner</span><span class="o">.</span><span class="n">score</span>
</span><span id="L-1554"><a href="#L-1554"><span class="linenos">1554</span></a>
</span><span id="L-1555"><a href="#L-1555"><span class="linenos">1555</span></a>    <span class="k">def</span> <span class="nf">play_at_most_n_tricks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">new_leader</span><span class="p">:</span> <span class="n">Bot</span><span class="p">,</span> <span class="n">new_follower</span><span class="p">:</span> <span class="n">Bot</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">GameState</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
</span><span id="L-1556"><a href="#L-1556"><span class="linenos">1556</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1557"><a href="#L-1557"><span class="linenos">1557</span></a><span class="sd">        Plays up to n tricks (including the one started by the leader, if provided) on a game which might have started before.</span>
</span><span id="L-1558"><a href="#L-1558"><span class="linenos">1558</span></a><span class="sd">        The number of tricks will be smaller than n in case the game ends before n tricks are played.</span>
</span><span id="L-1559"><a href="#L-1559"><span class="linenos">1559</span></a><span class="sd">        The new bots are new_leader and new_follower.</span>
</span><span id="L-1560"><a href="#L-1560"><span class="linenos">1560</span></a>
</span><span id="L-1561"><a href="#L-1561"><span class="linenos">1561</span></a><span class="sd">        This method does not make changes to the provided game_state.</span>
</span><span id="L-1562"><a href="#L-1562"><span class="linenos">1562</span></a>
</span><span id="L-1563"><a href="#L-1563"><span class="linenos">1563</span></a><span class="sd">        :param game_state: The state of the game to start from</span>
</span><span id="L-1564"><a href="#L-1564"><span class="linenos">1564</span></a><span class="sd">        :param new_leader: The bot which will take the leader role in the game.</span>
</span><span id="L-1565"><a href="#L-1565"><span class="linenos">1565</span></a><span class="sd">        :param new_follower: The bot which will take the follower in the game.</span>
</span><span id="L-1566"><a href="#L-1566"><span class="linenos">1566</span></a>
</span><span id="L-1567"><a href="#L-1567"><span class="linenos">1567</span></a><span class="sd">        :returns: The GameState reached and the number of steps actually taken.</span>
</span><span id="L-1568"><a href="#L-1568"><span class="linenos">1568</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1569"><a href="#L-1569"><span class="linenos">1569</span></a>        <span class="k">assert</span> <span class="n">n</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Cannot play less than 0 rounds&quot;</span>
</span><span id="L-1570"><a href="#L-1570"><span class="linenos">1570</span></a>        <span class="n">game_state_copy</span> <span class="o">=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">copy_with_other_bots</span><span class="p">(</span><span class="n">new_leader</span><span class="o">=</span><span class="n">new_leader</span><span class="p">,</span> <span class="n">new_follower</span><span class="o">=</span><span class="n">new_follower</span><span class="p">)</span>
</span><span id="L-1571"><a href="#L-1571"><span class="linenos">1571</span></a>
</span><span id="L-1572"><a href="#L-1572"><span class="linenos">1572</span></a>        <span class="n">winner</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">BotState</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1573"><a href="#L-1573"><span class="linenos">1573</span></a>        <span class="n">rounds_played</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-1574"><a href="#L-1574"><span class="linenos">1574</span></a>        <span class="k">while</span> <span class="ow">not</span> <span class="n">winner</span><span class="p">:</span>
</span><span id="L-1575"><a href="#L-1575"><span class="linenos">1575</span></a>            <span class="k">if</span> <span class="n">rounds_played</span> <span class="o">==</span> <span class="n">n</span><span class="p">:</span>
</span><span id="L-1576"><a href="#L-1576"><span class="linenos">1576</span></a>                <span class="k">break</span>
</span><span id="L-1577"><a href="#L-1577"><span class="linenos">1577</span></a>            <span class="n">game_state_copy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trick_implementer</span><span class="o">.</span><span class="n">play_trick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_state_copy</span><span class="p">)</span>
</span><span id="L-1578"><a href="#L-1578"><span class="linenos">1578</span></a>            <span class="n">winner</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trick_scorer</span><span class="o">.</span><span class="n">declare_winner</span><span class="p">(</span><span class="n">game_state_copy</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-1579"><a href="#L-1579"><span class="linenos">1579</span></a>            <span class="n">rounds_played</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-1580"><a href="#L-1580"><span class="linenos">1580</span></a>        <span class="k">if</span> <span class="n">winner</span><span class="p">:</span>
</span><span id="L-1581"><a href="#L-1581"><span class="linenos">1581</span></a>            <span class="n">winner_state</span> <span class="o">=</span> <span class="n">WinnerPerspective</span><span class="p">(</span><span class="n">game_state_copy</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="L-1582"><a href="#L-1582"><span class="linenos">1582</span></a>            <span class="n">winner</span><span class="o">.</span><span class="n">implementation</span><span class="o">.</span><span class="n">notify_game_end</span><span class="p">(</span><span class="n">won</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="n">winner_state</span><span class="p">)</span>
</span><span id="L-1583"><a href="#L-1583"><span class="linenos">1583</span></a>
</span><span id="L-1584"><a href="#L-1584"><span class="linenos">1584</span></a>            <span class="n">loser_state</span> <span class="o">=</span> <span class="n">LoserPerspective</span><span class="p">(</span><span class="n">game_state_copy</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="L-1585"><a href="#L-1585"><span class="linenos">1585</span></a>            <span class="n">game_state_copy</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">implementation</span><span class="o">.</span><span class="n">notify_game_end</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="n">loser_state</span><span class="p">)</span>
</span><span id="L-1586"><a href="#L-1586"><span class="linenos">1586</span></a>
</span><span id="L-1587"><a href="#L-1587"><span class="linenos">1587</span></a>        <span class="k">return</span> <span class="n">game_state_copy</span><span class="p">,</span> <span class="n">rounds_played</span>
</span><span id="L-1588"><a href="#L-1588"><span class="linenos">1588</span></a>
</span><span id="L-1589"><a href="#L-1589"><span class="linenos">1589</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1590"><a href="#L-1590"><span class="linenos">1590</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;GamePlayEngine(deck_generator=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">deck_generator</span><span class="si">}</span><span class="s2">, &quot;</span>\
</span><span id="L-1591"><a href="#L-1591"><span class="linenos">1591</span></a>               <span class="sa">f</span><span class="s2">&quot;hand_generator=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hand_generator</span><span class="si">}</span><span class="s2">, &quot;</span>\
</span><span id="L-1592"><a href="#L-1592"><span class="linenos">1592</span></a>               <span class="sa">f</span><span class="s2">&quot;trick_implementer=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">trick_implementer</span><span class="si">}</span><span class="s2">, &quot;</span>\
</span><span id="L-1593"><a href="#L-1593"><span class="linenos">1593</span></a>               <span class="sa">f</span><span class="s2">&quot;move_requester=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">move_requester</span><span class="si">}</span><span class="s2">, &quot;</span>\
</span><span id="L-1594"><a href="#L-1594"><span class="linenos">1594</span></a>               <span class="sa">f</span><span class="s2">&quot;move_validator=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">move_validator</span><span class="si">}</span><span class="s2">, &quot;</span>\
</span><span id="L-1595"><a href="#L-1595"><span class="linenos">1595</span></a>               <span class="sa">f</span><span class="s2">&quot;trick_scorer=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">trick_scorer</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="L-1596"><a href="#L-1596"><span class="linenos">1596</span></a>
</span><span id="L-1597"><a href="#L-1597"><span class="linenos">1597</span></a>
</span><span id="L-1598"><a href="#L-1598"><span class="linenos">1598</span></a><span class="k">class</span> <span class="nc">SchnapsenGamePlayEngine</span><span class="p">(</span><span class="n">GamePlayEngine</span><span class="p">):</span>
</span><span id="L-1599"><a href="#L-1599"><span class="linenos">1599</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1600"><a href="#L-1600"><span class="linenos">1600</span></a><span class="sd">    A GamePlayEngine configured according to the rules of Schnapsen</span>
</span><span id="L-1601"><a href="#L-1601"><span class="linenos">1601</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1602"><a href="#L-1602"><span class="linenos">1602</span></a>
</span><span id="L-1603"><a href="#L-1603"><span class="linenos">1603</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1604"><a href="#L-1604"><span class="linenos">1604</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="L-1605"><a href="#L-1605"><span class="linenos">1605</span></a>            <span class="n">deck_generator</span><span class="o">=</span><span class="n">SchnapsenDeckGenerator</span><span class="p">(),</span>
</span><span id="L-1606"><a href="#L-1606"><span class="linenos">1606</span></a>            <span class="n">hand_generator</span><span class="o">=</span><span class="n">SchnapsenHandGenerator</span><span class="p">(),</span>
</span><span id="L-1607"><a href="#L-1607"><span class="linenos">1607</span></a>            <span class="n">trick_implementer</span><span class="o">=</span><span class="n">SchnapsenTrickImplementer</span><span class="p">(),</span>
</span><span id="L-1608"><a href="#L-1608"><span class="linenos">1608</span></a>            <span class="n">move_requester</span><span class="o">=</span><span class="n">SimpleMoveRequester</span><span class="p">(),</span>
</span><span id="L-1609"><a href="#L-1609"><span class="linenos">1609</span></a>            <span class="n">move_validator</span><span class="o">=</span><span class="n">SchnapsenMoveValidator</span><span class="p">(),</span>
</span><span id="L-1610"><a href="#L-1610"><span class="linenos">1610</span></a>            <span class="n">trick_scorer</span><span class="o">=</span><span class="n">SchnapsenTrickScorer</span><span class="p">()</span>
</span><span id="L-1611"><a href="#L-1611"><span class="linenos">1611</span></a>        <span class="p">)</span>
</span><span id="L-1612"><a href="#L-1612"><span class="linenos">1612</span></a>
</span><span id="L-1613"><a href="#L-1613"><span class="linenos">1613</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1614"><a href="#L-1614"><span class="linenos">1614</span></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>
</span></pre></div>


            </section>
                <section id="Bot">
                            <input id="Bot-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Bot</span><wbr>(<span class="base">abc.ABC</span>):

                <label class="view-source-button" for="Bot-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Bot"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Bot-15"><a href="#Bot-15"><span class="linenos">15</span></a><span class="k">class</span> <span class="nc">Bot</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="Bot-16"><a href="#Bot-16"><span class="linenos">16</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Bot-17"><a href="#Bot-17"><span class="linenos">17</span></a><span class="sd">    The Bot baseclass. Derive your own bots from this class and implement the get_move method to use it in games.</span>
</span><span id="Bot-18"><a href="#Bot-18"><span class="linenos">18</span></a>
</span><span id="Bot-19"><a href="#Bot-19"><span class="linenos">19</span></a><span class="sd">    Besides the get_move method, it is also possible to override notify_trump_exchange and notify_game_end to get notified when these events happen.</span>
</span><span id="Bot-20"><a href="#Bot-20"><span class="linenos">20</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Bot-21"><a href="#Bot-21"><span class="linenos">21</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="Bot-22"><a href="#Bot-22"><span class="linenos">22</span></a>    <span class="k">def</span> <span class="nf">get_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="s1">&#39;PlayerPerspective&#39;</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s1">&#39;Move&#39;</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s1">&#39;Move&#39;</span><span class="p">:</span>
</span><span id="Bot-23"><a href="#Bot-23"><span class="linenos">23</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Bot-24"><a href="#Bot-24"><span class="linenos">24</span></a><span class="sd">        Get the move this Bot wants to play.</span>
</span><span id="Bot-25"><a href="#Bot-25"><span class="linenos">25</span></a><span class="sd">        If this Bot is leading, the leader_move will be None. If this both is following, the leader_move will contain the move the opponent just played</span>
</span><span id="Bot-26"><a href="#Bot-26"><span class="linenos">26</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Bot-27"><a href="#Bot-27"><span class="linenos">27</span></a>
</span><span id="Bot-28"><a href="#Bot-28"><span class="linenos">28</span></a>    <span class="k">def</span> <span class="nf">notify_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">move</span><span class="p">:</span> <span class="s1">&#39;Trump_Exchange&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Bot-29"><a href="#Bot-29"><span class="linenos">29</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Bot-30"><a href="#Bot-30"><span class="linenos">30</span></a><span class="sd">        Overide this method to get notified about trump exchanges. Note that this only notifies about the other bots exchanges.</span>
</span><span id="Bot-31"><a href="#Bot-31"><span class="linenos">31</span></a>
</span><span id="Bot-32"><a href="#Bot-32"><span class="linenos">32</span></a><span class="sd">        :param move: the Trump Exchange move that was played.</span>
</span><span id="Bot-33"><a href="#Bot-33"><span class="linenos">33</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Bot-34"><a href="#Bot-34"><span class="linenos">34</span></a>
</span><span id="Bot-35"><a href="#Bot-35"><span class="linenos">35</span></a>    <span class="k">def</span> <span class="nf">notify_game_end</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">won</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="s1">&#39;PlayerPerspective&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Bot-36"><a href="#Bot-36"><span class="linenos">36</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Bot-37"><a href="#Bot-37"><span class="linenos">37</span></a><span class="sd">        Override this method to get notified about the end of the game.</span>
</span><span id="Bot-38"><a href="#Bot-38"><span class="linenos">38</span></a>
</span><span id="Bot-39"><a href="#Bot-39"><span class="linenos">39</span></a><span class="sd">        :param won: Did this bot win the game?</span>
</span><span id="Bot-40"><a href="#Bot-40"><span class="linenos">40</span></a><span class="sd">        :param state: The final state of the game.</span>
</span><span id="Bot-41"><a href="#Bot-41"><span class="linenos">41</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>The Bot baseclass. Derive your own bots from this class and implement the get_move method to use it in games.</p>

<p>Besides the get_move method, it is also possible to override notify_trump_exchange and notify_game_end to get notified when these events happen.</p>
</div>


                            <div id="Bot.get_move" class="classattr">
                                        <input id="Bot.get_move-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">get_move</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">state</span><span class="p">:</span> <span class="n"><a href="#PlayerPerspective">schnapsen.game.PlayerPerspective</a></span>,</span><span class="param">	<span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="#Move">schnapsen.game.Move</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n"><a href="#Move">schnapsen.game.Move</a></span>:</span></span>

                <label class="view-source-button" for="Bot.get_move-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Bot.get_move"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Bot.get_move-21"><a href="#Bot.get_move-21"><span class="linenos">21</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="Bot.get_move-22"><a href="#Bot.get_move-22"><span class="linenos">22</span></a>    <span class="k">def</span> <span class="nf">get_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="s1">&#39;PlayerPerspective&#39;</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s1">&#39;Move&#39;</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s1">&#39;Move&#39;</span><span class="p">:</span>
</span><span id="Bot.get_move-23"><a href="#Bot.get_move-23"><span class="linenos">23</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Bot.get_move-24"><a href="#Bot.get_move-24"><span class="linenos">24</span></a><span class="sd">        Get the move this Bot wants to play.</span>
</span><span id="Bot.get_move-25"><a href="#Bot.get_move-25"><span class="linenos">25</span></a><span class="sd">        If this Bot is leading, the leader_move will be None. If this both is following, the leader_move will contain the move the opponent just played</span>
</span><span id="Bot.get_move-26"><a href="#Bot.get_move-26"><span class="linenos">26</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Get the move this Bot wants to play.
If this Bot is leading, the leader_move will be None. If this both is following, the leader_move will contain the move the opponent just played</p>
</div>


                            </div>
                            <div id="Bot.notify_trump_exchange" class="classattr">
                                        <input id="Bot.notify_trump_exchange-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">notify_trump_exchange</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">move</span><span class="p">:</span> <span class="n"><a href="#Trump_Exchange">schnapsen.game.Trump_Exchange</a></span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Bot.notify_trump_exchange-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Bot.notify_trump_exchange"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Bot.notify_trump_exchange-28"><a href="#Bot.notify_trump_exchange-28"><span class="linenos">28</span></a>    <span class="k">def</span> <span class="nf">notify_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">move</span><span class="p">:</span> <span class="s1">&#39;Trump_Exchange&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Bot.notify_trump_exchange-29"><a href="#Bot.notify_trump_exchange-29"><span class="linenos">29</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Bot.notify_trump_exchange-30"><a href="#Bot.notify_trump_exchange-30"><span class="linenos">30</span></a><span class="sd">        Overide this method to get notified about trump exchanges. Note that this only notifies about the other bots exchanges.</span>
</span><span id="Bot.notify_trump_exchange-31"><a href="#Bot.notify_trump_exchange-31"><span class="linenos">31</span></a>
</span><span id="Bot.notify_trump_exchange-32"><a href="#Bot.notify_trump_exchange-32"><span class="linenos">32</span></a><span class="sd">        :param move: the Trump Exchange move that was played.</span>
</span><span id="Bot.notify_trump_exchange-33"><a href="#Bot.notify_trump_exchange-33"><span class="linenos">33</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Overide this method to get notified about trump exchanges. Note that this only notifies about the other bots exchanges.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>move</strong>:  the Trump Exchange move that was played.</li>
</ul>
</div>


                            </div>
                            <div id="Bot.notify_game_end" class="classattr">
                                        <input id="Bot.notify_game_end-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">notify_game_end</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">won</span><span class="p">:</span> <span class="nb">bool</span>, </span><span class="param"><span class="n">state</span><span class="p">:</span> <span class="n"><a href="#PlayerPerspective">schnapsen.game.PlayerPerspective</a></span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Bot.notify_game_end-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Bot.notify_game_end"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Bot.notify_game_end-35"><a href="#Bot.notify_game_end-35"><span class="linenos">35</span></a>    <span class="k">def</span> <span class="nf">notify_game_end</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">won</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="s1">&#39;PlayerPerspective&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Bot.notify_game_end-36"><a href="#Bot.notify_game_end-36"><span class="linenos">36</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Bot.notify_game_end-37"><a href="#Bot.notify_game_end-37"><span class="linenos">37</span></a><span class="sd">        Override this method to get notified about the end of the game.</span>
</span><span id="Bot.notify_game_end-38"><a href="#Bot.notify_game_end-38"><span class="linenos">38</span></a>
</span><span id="Bot.notify_game_end-39"><a href="#Bot.notify_game_end-39"><span class="linenos">39</span></a><span class="sd">        :param won: Did this bot win the game?</span>
</span><span id="Bot.notify_game_end-40"><a href="#Bot.notify_game_end-40"><span class="linenos">40</span></a><span class="sd">        :param state: The final state of the game.</span>
</span><span id="Bot.notify_game_end-41"><a href="#Bot.notify_game_end-41"><span class="linenos">41</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Override this method to get notified about the end of the game.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>won</strong>:  Did this bot win the game?</li>
<li><strong>state</strong>:  The final state of the game.</li>
</ul>
</div>


                            </div>
                </section>
                <section id="Move">
                            <input id="Move-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Move</span><wbr>(<span class="base">abc.ABC</span>):

                <label class="view-source-button" for="Move-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Move"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Move-44"><a href="#Move-44"><span class="linenos">44</span></a><span class="k">class</span> <span class="nc">Move</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="Move-45"><a href="#Move-45"><span class="linenos">45</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Move-46"><a href="#Move-46"><span class="linenos">46</span></a><span class="sd">    A single move during a game. There are several types of move possible: normal moves, trump exchanges, and marriages. They are implmented in classes inheriting from this class.</span>
</span><span id="Move-47"><a href="#Move-47"><span class="linenos">47</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Move-48"><a href="#Move-48"><span class="linenos">48</span></a>
</span><span id="Move-49"><a href="#Move-49"><span class="linenos">49</span></a>    <span class="n">cards</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Card</span><span class="p">]</span>  <span class="c1"># implementation detail: The creation of this list is defered to the derived classes in _cards()</span>
</span><span id="Move-50"><a href="#Move-50"><span class="linenos">50</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The cards played in this move&quot;&quot;&quot;</span>
</span><span id="Move-51"><a href="#Move-51"><span class="linenos">51</span></a>
</span><span id="Move-52"><a href="#Move-52"><span class="linenos">52</span></a>    <span class="k">def</span> <span class="nf">is_regular_move</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Move-53"><a href="#Move-53"><span class="linenos">53</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Move-54"><a href="#Move-54"><span class="linenos">54</span></a><span class="sd">        Is this Move a regular move (not a mariage or trump exchange)</span>
</span><span id="Move-55"><a href="#Move-55"><span class="linenos">55</span></a>
</span><span id="Move-56"><a href="#Move-56"><span class="linenos">56</span></a><span class="sd">        :returns: a bool indicating whether this is a regular move</span>
</span><span id="Move-57"><a href="#Move-57"><span class="linenos">57</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Move-58"><a href="#Move-58"><span class="linenos">58</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="Move-59"><a href="#Move-59"><span class="linenos">59</span></a>
</span><span id="Move-60"><a href="#Move-60"><span class="linenos">60</span></a>    <span class="k">def</span> <span class="nf">as_regular_move</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;RegularMove&#39;</span><span class="p">:</span>
</span><span id="Move-61"><a href="#Move-61"><span class="linenos">61</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns this same move but as a Marriage.&quot;&quot;&quot;</span>
</span><span id="Move-62"><a href="#Move-62"><span class="linenos">62</span></a>        <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;as_regular_move called on a Move which is not a regular move. Check with is_regular_move first.&quot;</span><span class="p">)</span>
</span><span id="Move-63"><a href="#Move-63"><span class="linenos">63</span></a>
</span><span id="Move-64"><a href="#Move-64"><span class="linenos">64</span></a>    <span class="k">def</span> <span class="nf">is_marriage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Move-65"><a href="#Move-65"><span class="linenos">65</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Move-66"><a href="#Move-66"><span class="linenos">66</span></a><span class="sd">        Is this Move a marriage?</span>
</span><span id="Move-67"><a href="#Move-67"><span class="linenos">67</span></a>
</span><span id="Move-68"><a href="#Move-68"><span class="linenos">68</span></a><span class="sd">        :returns: a bool indicating whether this move is a marriage</span>
</span><span id="Move-69"><a href="#Move-69"><span class="linenos">69</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Move-70"><a href="#Move-70"><span class="linenos">70</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="Move-71"><a href="#Move-71"><span class="linenos">71</span></a>
</span><span id="Move-72"><a href="#Move-72"><span class="linenos">72</span></a>    <span class="k">def</span> <span class="nf">as_marriage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Marriage&#39;</span><span class="p">:</span>
</span><span id="Move-73"><a href="#Move-73"><span class="linenos">73</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns this same move but as a Marriage.&quot;&quot;&quot;</span>
</span><span id="Move-74"><a href="#Move-74"><span class="linenos">74</span></a>        <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;as_marriage called on a Move which is not a Marriage. Check with is_marriage first.&quot;</span><span class="p">)</span>
</span><span id="Move-75"><a href="#Move-75"><span class="linenos">75</span></a>
</span><span id="Move-76"><a href="#Move-76"><span class="linenos">76</span></a>    <span class="k">def</span> <span class="nf">is_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Move-77"><a href="#Move-77"><span class="linenos">77</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Move-78"><a href="#Move-78"><span class="linenos">78</span></a><span class="sd">        Is this Move a trump exchange move?</span>
</span><span id="Move-79"><a href="#Move-79"><span class="linenos">79</span></a>
</span><span id="Move-80"><a href="#Move-80"><span class="linenos">80</span></a><span class="sd">        :returns: a bool indicating whether this move is a trump exchange</span>
</span><span id="Move-81"><a href="#Move-81"><span class="linenos">81</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Move-82"><a href="#Move-82"><span class="linenos">82</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="Move-83"><a href="#Move-83"><span class="linenos">83</span></a>
</span><span id="Move-84"><a href="#Move-84"><span class="linenos">84</span></a>    <span class="k">def</span> <span class="nf">as_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Trump_Exchange&#39;</span><span class="p">:</span>
</span><span id="Move-85"><a href="#Move-85"><span class="linenos">85</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns this same move but as a Trump_Exchange.&quot;&quot;&quot;</span>
</span><span id="Move-86"><a href="#Move-86"><span class="linenos">86</span></a>        <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;as_marriage called on a Move which is not a Trump_Exchange. Check with is_trump_exchange first.&quot;</span><span class="p">)</span>
</span><span id="Move-87"><a href="#Move-87"><span class="linenos">87</span></a>
</span><span id="Move-88"><a href="#Move-88"><span class="linenos">88</span></a>    <span class="k">def</span> <span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">__name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="Move-89"><a href="#Move-89"><span class="linenos">89</span></a>        <span class="k">if</span> <span class="n">__name</span> <span class="o">==</span> <span class="s2">&quot;cards&quot;</span><span class="p">:</span>
</span><span id="Move-90"><a href="#Move-90"><span class="linenos">90</span></a>            <span class="c1"># We call the method to compute the card list</span>
</span><span id="Move-91"><a href="#Move-91"><span class="linenos">91</span></a>            <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_cards&quot;</span><span class="p">)()</span>
</span><span id="Move-92"><a href="#Move-92"><span class="linenos">92</span></a>        <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">__name</span><span class="p">)</span>
</span><span id="Move-93"><a href="#Move-93"><span class="linenos">93</span></a>
</span><span id="Move-94"><a href="#Move-94"><span class="linenos">94</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="Move-95"><a href="#Move-95"><span class="linenos">95</span></a>    <span class="k">def</span> <span class="nf">_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="Move-96"><a href="#Move-96"><span class="linenos">96</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Move-97"><a href="#Move-97"><span class="linenos">97</span></a><span class="sd">        Get the list of cards in this move. This method should not be called direcly, use the cards property instead.</span>
</span><span id="Move-98"><a href="#Move-98"><span class="linenos">98</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>A single move during a game. There are several types of move possible: normal moves, trump exchanges, and marriages. They are implmented in classes inheriting from this class.</p>
</div>


                            <div id="Move.cards" class="classattr">
                                <div class="attr variable">
            <span class="name">cards</span><span class="annotation">: list[<a href="deck.html#Card">schnapsen.deck.Card</a>]</span>

        
    </div>
    <a class="headerlink" href="#Move.cards"></a>
    
            <div class="docstring"><p>The cards played in this move</p>
</div>


                            </div>
                            <div id="Move.is_regular_move" class="classattr">
                                        <input id="Move.is_regular_move-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">is_regular_move</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="Move.is_regular_move-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Move.is_regular_move"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Move.is_regular_move-52"><a href="#Move.is_regular_move-52"><span class="linenos">52</span></a>    <span class="k">def</span> <span class="nf">is_regular_move</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Move.is_regular_move-53"><a href="#Move.is_regular_move-53"><span class="linenos">53</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Move.is_regular_move-54"><a href="#Move.is_regular_move-54"><span class="linenos">54</span></a><span class="sd">        Is this Move a regular move (not a mariage or trump exchange)</span>
</span><span id="Move.is_regular_move-55"><a href="#Move.is_regular_move-55"><span class="linenos">55</span></a>
</span><span id="Move.is_regular_move-56"><a href="#Move.is_regular_move-56"><span class="linenos">56</span></a><span class="sd">        :returns: a bool indicating whether this is a regular move</span>
</span><span id="Move.is_regular_move-57"><a href="#Move.is_regular_move-57"><span class="linenos">57</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Move.is_regular_move-58"><a href="#Move.is_regular_move-58"><span class="linenos">58</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Is this Move a regular move (not a mariage or trump exchange)</p>

<p>:returns: a bool indicating whether this is a regular move</p>
</div>


                            </div>
                            <div id="Move.as_regular_move" class="classattr">
                                        <input id="Move.as_regular_move-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">as_regular_move</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#RegularMove">schnapsen.game.RegularMove</a></span>:</span></span>

                <label class="view-source-button" for="Move.as_regular_move-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Move.as_regular_move"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Move.as_regular_move-60"><a href="#Move.as_regular_move-60"><span class="linenos">60</span></a>    <span class="k">def</span> <span class="nf">as_regular_move</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;RegularMove&#39;</span><span class="p">:</span>
</span><span id="Move.as_regular_move-61"><a href="#Move.as_regular_move-61"><span class="linenos">61</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns this same move but as a Marriage.&quot;&quot;&quot;</span>
</span><span id="Move.as_regular_move-62"><a href="#Move.as_regular_move-62"><span class="linenos">62</span></a>        <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;as_regular_move called on a Move which is not a regular move. Check with is_regular_move first.&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns this same move but as a Marriage.</p>
</div>


                            </div>
                            <div id="Move.is_marriage" class="classattr">
                                        <input id="Move.is_marriage-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">is_marriage</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="Move.is_marriage-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Move.is_marriage"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Move.is_marriage-64"><a href="#Move.is_marriage-64"><span class="linenos">64</span></a>    <span class="k">def</span> <span class="nf">is_marriage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Move.is_marriage-65"><a href="#Move.is_marriage-65"><span class="linenos">65</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Move.is_marriage-66"><a href="#Move.is_marriage-66"><span class="linenos">66</span></a><span class="sd">        Is this Move a marriage?</span>
</span><span id="Move.is_marriage-67"><a href="#Move.is_marriage-67"><span class="linenos">67</span></a>
</span><span id="Move.is_marriage-68"><a href="#Move.is_marriage-68"><span class="linenos">68</span></a><span class="sd">        :returns: a bool indicating whether this move is a marriage</span>
</span><span id="Move.is_marriage-69"><a href="#Move.is_marriage-69"><span class="linenos">69</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Move.is_marriage-70"><a href="#Move.is_marriage-70"><span class="linenos">70</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Is this Move a marriage?</p>

<p>:returns: a bool indicating whether this move is a marriage</p>
</div>


                            </div>
                            <div id="Move.as_marriage" class="classattr">
                                        <input id="Move.as_marriage-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">as_marriage</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#Marriage">schnapsen.game.Marriage</a></span>:</span></span>

                <label class="view-source-button" for="Move.as_marriage-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Move.as_marriage"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Move.as_marriage-72"><a href="#Move.as_marriage-72"><span class="linenos">72</span></a>    <span class="k">def</span> <span class="nf">as_marriage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Marriage&#39;</span><span class="p">:</span>
</span><span id="Move.as_marriage-73"><a href="#Move.as_marriage-73"><span class="linenos">73</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns this same move but as a Marriage.&quot;&quot;&quot;</span>
</span><span id="Move.as_marriage-74"><a href="#Move.as_marriage-74"><span class="linenos">74</span></a>        <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;as_marriage called on a Move which is not a Marriage. Check with is_marriage first.&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns this same move but as a Marriage.</p>
</div>


                            </div>
                            <div id="Move.is_trump_exchange" class="classattr">
                                        <input id="Move.is_trump_exchange-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">is_trump_exchange</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="Move.is_trump_exchange-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Move.is_trump_exchange"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Move.is_trump_exchange-76"><a href="#Move.is_trump_exchange-76"><span class="linenos">76</span></a>    <span class="k">def</span> <span class="nf">is_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Move.is_trump_exchange-77"><a href="#Move.is_trump_exchange-77"><span class="linenos">77</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Move.is_trump_exchange-78"><a href="#Move.is_trump_exchange-78"><span class="linenos">78</span></a><span class="sd">        Is this Move a trump exchange move?</span>
</span><span id="Move.is_trump_exchange-79"><a href="#Move.is_trump_exchange-79"><span class="linenos">79</span></a>
</span><span id="Move.is_trump_exchange-80"><a href="#Move.is_trump_exchange-80"><span class="linenos">80</span></a><span class="sd">        :returns: a bool indicating whether this move is a trump exchange</span>
</span><span id="Move.is_trump_exchange-81"><a href="#Move.is_trump_exchange-81"><span class="linenos">81</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Move.is_trump_exchange-82"><a href="#Move.is_trump_exchange-82"><span class="linenos">82</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Is this Move a trump exchange move?</p>

<p>:returns: a bool indicating whether this move is a trump exchange</p>
</div>


                            </div>
                            <div id="Move.as_trump_exchange" class="classattr">
                                        <input id="Move.as_trump_exchange-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">as_trump_exchange</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#Trump_Exchange">schnapsen.game.Trump_Exchange</a></span>:</span></span>

                <label class="view-source-button" for="Move.as_trump_exchange-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Move.as_trump_exchange"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Move.as_trump_exchange-84"><a href="#Move.as_trump_exchange-84"><span class="linenos">84</span></a>    <span class="k">def</span> <span class="nf">as_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Trump_Exchange&#39;</span><span class="p">:</span>
</span><span id="Move.as_trump_exchange-85"><a href="#Move.as_trump_exchange-85"><span class="linenos">85</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns this same move but as a Trump_Exchange.&quot;&quot;&quot;</span>
</span><span id="Move.as_trump_exchange-86"><a href="#Move.as_trump_exchange-86"><span class="linenos">86</span></a>        <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;as_marriage called on a Move which is not a Trump_Exchange. Check with is_trump_exchange first.&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns this same move but as a Trump_Exchange.</p>
</div>


                            </div>
                </section>
                <section id="Trump_Exchange">
                            <input id="Trump_Exchange-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass(frozen=True)</div>

    <span class="def">class</span>
    <span class="name">Trump_Exchange</span><wbr>(<span class="base"><a href="#Move">Move</a></span>):

                <label class="view-source-button" for="Trump_Exchange-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Trump_Exchange"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Trump_Exchange-101"><a href="#Trump_Exchange-101"><span class="linenos">101</span></a><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Trump_Exchange-102"><a href="#Trump_Exchange-102"><span class="linenos">102</span></a><span class="k">class</span> <span class="nc">Trump_Exchange</span><span class="p">(</span><span class="n">Move</span><span class="p">):</span>
</span><span id="Trump_Exchange-103"><a href="#Trump_Exchange-103"><span class="linenos">103</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A move that implements the exchange of the trump card for a Jack of the same suit.&quot;&quot;&quot;</span>
</span><span id="Trump_Exchange-104"><a href="#Trump_Exchange-104"><span class="linenos">104</span></a>
</span><span id="Trump_Exchange-105"><a href="#Trump_Exchange-105"><span class="linenos">105</span></a>    <span class="n">jack</span><span class="p">:</span> <span class="n">Card</span>
</span><span id="Trump_Exchange-106"><a href="#Trump_Exchange-106"><span class="linenos">106</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The Jack which will be placed at the bottom of the Talon&quot;&quot;&quot;</span>
</span><span id="Trump_Exchange-107"><a href="#Trump_Exchange-107"><span class="linenos">107</span></a>
</span><span id="Trump_Exchange-108"><a href="#Trump_Exchange-108"><span class="linenos">108</span></a>    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Trump_Exchange-109"><a href="#Trump_Exchange-109"><span class="linenos">109</span></a>        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">jack</span><span class="o">.</span><span class="n">rank</span> <span class="ow">is</span> <span class="n">Rank</span><span class="o">.</span><span class="n">JACK</span>
</span><span id="Trump_Exchange-110"><a href="#Trump_Exchange-110"><span class="linenos">110</span></a>
</span><span id="Trump_Exchange-111"><a href="#Trump_Exchange-111"><span class="linenos">111</span></a>    <span class="k">def</span> <span class="nf">is_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Trump_Exchange-112"><a href="#Trump_Exchange-112"><span class="linenos">112</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="Trump_Exchange-113"><a href="#Trump_Exchange-113"><span class="linenos">113</span></a>
</span><span id="Trump_Exchange-114"><a href="#Trump_Exchange-114"><span class="linenos">114</span></a>    <span class="k">def</span> <span class="nf">as_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Trump_Exchange&#39;</span><span class="p">:</span>
</span><span id="Trump_Exchange-115"><a href="#Trump_Exchange-115"><span class="linenos">115</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Trump_Exchange-116"><a href="#Trump_Exchange-116"><span class="linenos">116</span></a>
</span><span id="Trump_Exchange-117"><a href="#Trump_Exchange-117"><span class="linenos">117</span></a>    <span class="k">def</span> <span class="nf">_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="Trump_Exchange-118"><a href="#Trump_Exchange-118"><span class="linenos">118</span></a>        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">jack</span><span class="p">]</span>
</span><span id="Trump_Exchange-119"><a href="#Trump_Exchange-119"><span class="linenos">119</span></a>
</span><span id="Trump_Exchange-120"><a href="#Trump_Exchange-120"><span class="linenos">120</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Trump_Exchange-121"><a href="#Trump_Exchange-121"><span class="linenos">121</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Trump_Exchange(jack=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">jack</span><span class="si">}</span><span class="s2">)&quot;</span>
</span></pre></div>


            <div class="docstring"><p>A move that implements the exchange of the trump card for a Jack of the same suit.</p>
</div>


                            <div id="Trump_Exchange.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">Trump_Exchange</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">jack</span><span class="p">:</span> <span class="n"><a href="deck.html#Card">schnapsen.deck.Card</a></span></span>)</span>

        
    </div>
    <a class="headerlink" href="#Trump_Exchange.__init__"></a>
    
    

                            </div>
                            <div id="Trump_Exchange.jack" class="classattr">
                                <div class="attr variable">
            <span class="name">jack</span><span class="annotation">: <a href="deck.html#Card">schnapsen.deck.Card</a></span>

        
    </div>
    <a class="headerlink" href="#Trump_Exchange.jack"></a>
    
            <div class="docstring"><p>The Jack which will be placed at the bottom of the Talon</p>
</div>


                            </div>
                            <div id="Trump_Exchange.is_trump_exchange" class="classattr">
                                        <input id="Trump_Exchange.is_trump_exchange-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">is_trump_exchange</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="Trump_Exchange.is_trump_exchange-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Trump_Exchange.is_trump_exchange"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Trump_Exchange.is_trump_exchange-111"><a href="#Trump_Exchange.is_trump_exchange-111"><span class="linenos">111</span></a>    <span class="k">def</span> <span class="nf">is_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Trump_Exchange.is_trump_exchange-112"><a href="#Trump_Exchange.is_trump_exchange-112"><span class="linenos">112</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Is this Move a trump exchange move?</p>

<p>:returns: a bool indicating whether this move is a trump exchange</p>
</div>


                            </div>
                            <div id="Trump_Exchange.as_trump_exchange" class="classattr">
                                        <input id="Trump_Exchange.as_trump_exchange-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">as_trump_exchange</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#Trump_Exchange">schnapsen.game.Trump_Exchange</a></span>:</span></span>

                <label class="view-source-button" for="Trump_Exchange.as_trump_exchange-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Trump_Exchange.as_trump_exchange"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Trump_Exchange.as_trump_exchange-114"><a href="#Trump_Exchange.as_trump_exchange-114"><span class="linenos">114</span></a>    <span class="k">def</span> <span class="nf">as_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Trump_Exchange&#39;</span><span class="p">:</span>
</span><span id="Trump_Exchange.as_trump_exchange-115"><a href="#Trump_Exchange.as_trump_exchange-115"><span class="linenos">115</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Returns this same move but as a Trump_Exchange.</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#Move">Move</a></dt>
                                <dd id="Trump_Exchange.cards" class="variable"><a href="#Move.cards">cards</a></dd>
                <dd id="Trump_Exchange.is_regular_move" class="function"><a href="#Move.is_regular_move">is_regular_move</a></dd>
                <dd id="Trump_Exchange.as_regular_move" class="function"><a href="#Move.as_regular_move">as_regular_move</a></dd>
                <dd id="Trump_Exchange.is_marriage" class="function"><a href="#Move.is_marriage">is_marriage</a></dd>
                <dd id="Trump_Exchange.as_marriage" class="function"><a href="#Move.as_marriage">as_marriage</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="RegularMove">
                            <input id="RegularMove-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass(frozen=True)</div>

    <span class="def">class</span>
    <span class="name">RegularMove</span><wbr>(<span class="base"><a href="#Move">Move</a></span>):

                <label class="view-source-button" for="RegularMove-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RegularMove"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RegularMove-124"><a href="#RegularMove-124"><span class="linenos">124</span></a><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="RegularMove-125"><a href="#RegularMove-125"><span class="linenos">125</span></a><span class="k">class</span> <span class="nc">RegularMove</span><span class="p">(</span><span class="n">Move</span><span class="p">):</span>
</span><span id="RegularMove-126"><a href="#RegularMove-126"><span class="linenos">126</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A regular move in the game&quot;&quot;&quot;</span>
</span><span id="RegularMove-127"><a href="#RegularMove-127"><span class="linenos">127</span></a>
</span><span id="RegularMove-128"><a href="#RegularMove-128"><span class="linenos">128</span></a>    <span class="n">card</span><span class="p">:</span> <span class="n">Card</span>
</span><span id="RegularMove-129"><a href="#RegularMove-129"><span class="linenos">129</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The card which is played&quot;&quot;&quot;</span>
</span><span id="RegularMove-130"><a href="#RegularMove-130"><span class="linenos">130</span></a>
</span><span id="RegularMove-131"><a href="#RegularMove-131"><span class="linenos">131</span></a>    <span class="k">def</span> <span class="nf">_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="RegularMove-132"><a href="#RegularMove-132"><span class="linenos">132</span></a>        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">card</span><span class="p">]</span>
</span><span id="RegularMove-133"><a href="#RegularMove-133"><span class="linenos">133</span></a>
</span><span id="RegularMove-134"><a href="#RegularMove-134"><span class="linenos">134</span></a>    <span class="nd">@staticmethod</span>
</span><span id="RegularMove-135"><a href="#RegularMove-135"><span class="linenos">135</span></a>    <span class="k">def</span> <span class="nf">from_cards</span><span class="p">(</span><span class="n">cards</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Card</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="RegularMove-136"><a href="#RegularMove-136"><span class="linenos">136</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create an iterable of Moves from an iterable of cards.&quot;&quot;&quot;</span>
</span><span id="RegularMove-137"><a href="#RegularMove-137"><span class="linenos">137</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">RegularMove</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">cards</span><span class="p">]</span>
</span><span id="RegularMove-138"><a href="#RegularMove-138"><span class="linenos">138</span></a>
</span><span id="RegularMove-139"><a href="#RegularMove-139"><span class="linenos">139</span></a>    <span class="k">def</span> <span class="nf">is_regular_move</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="RegularMove-140"><a href="#RegularMove-140"><span class="linenos">140</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="RegularMove-141"><a href="#RegularMove-141"><span class="linenos">141</span></a>
</span><span id="RegularMove-142"><a href="#RegularMove-142"><span class="linenos">142</span></a>    <span class="k">def</span> <span class="nf">as_regular_move</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;RegularMove&#39;</span><span class="p">:</span>
</span><span id="RegularMove-143"><a href="#RegularMove-143"><span class="linenos">143</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="RegularMove-144"><a href="#RegularMove-144"><span class="linenos">144</span></a>
</span><span id="RegularMove-145"><a href="#RegularMove-145"><span class="linenos">145</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="RegularMove-146"><a href="#RegularMove-146"><span class="linenos">146</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;RegularMove(card=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">card</span><span class="si">}</span><span class="s2">)&quot;</span>
</span></pre></div>


            <div class="docstring"><p>A regular move in the game</p>
</div>


                            <div id="RegularMove.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">RegularMove</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">card</span><span class="p">:</span> <span class="n"><a href="deck.html#Card">schnapsen.deck.Card</a></span></span>)</span>

        
    </div>
    <a class="headerlink" href="#RegularMove.__init__"></a>
    
    

                            </div>
                            <div id="RegularMove.card" class="classattr">
                                <div class="attr variable">
            <span class="name">card</span><span class="annotation">: <a href="deck.html#Card">schnapsen.deck.Card</a></span>

        
    </div>
    <a class="headerlink" href="#RegularMove.card"></a>
    
            <div class="docstring"><p>The card which is played</p>
</div>


                            </div>
                            <div id="RegularMove.from_cards" class="classattr">
                                        <input id="RegularMove.from_cards-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@staticmethod</div>

        <span class="def">def</span>
        <span class="name">from_cards</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">cards</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n"><a href="deck.html#Card">schnapsen.deck.Card</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="n"><a href="#Move">schnapsen.game.Move</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="RegularMove.from_cards-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RegularMove.from_cards"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RegularMove.from_cards-134"><a href="#RegularMove.from_cards-134"><span class="linenos">134</span></a>    <span class="nd">@staticmethod</span>
</span><span id="RegularMove.from_cards-135"><a href="#RegularMove.from_cards-135"><span class="linenos">135</span></a>    <span class="k">def</span> <span class="nf">from_cards</span><span class="p">(</span><span class="n">cards</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Card</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="RegularMove.from_cards-136"><a href="#RegularMove.from_cards-136"><span class="linenos">136</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create an iterable of Moves from an iterable of cards.&quot;&quot;&quot;</span>
</span><span id="RegularMove.from_cards-137"><a href="#RegularMove.from_cards-137"><span class="linenos">137</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">RegularMove</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">cards</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Create an iterable of Moves from an iterable of cards.</p>
</div>


                            </div>
                            <div id="RegularMove.is_regular_move" class="classattr">
                                        <input id="RegularMove.is_regular_move-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">is_regular_move</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="RegularMove.is_regular_move-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RegularMove.is_regular_move"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RegularMove.is_regular_move-139"><a href="#RegularMove.is_regular_move-139"><span class="linenos">139</span></a>    <span class="k">def</span> <span class="nf">is_regular_move</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="RegularMove.is_regular_move-140"><a href="#RegularMove.is_regular_move-140"><span class="linenos">140</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Is this Move a regular move (not a mariage or trump exchange)</p>

<p>:returns: a bool indicating whether this is a regular move</p>
</div>


                            </div>
                            <div id="RegularMove.as_regular_move" class="classattr">
                                        <input id="RegularMove.as_regular_move-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">as_regular_move</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#RegularMove">schnapsen.game.RegularMove</a></span>:</span></span>

                <label class="view-source-button" for="RegularMove.as_regular_move-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RegularMove.as_regular_move"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RegularMove.as_regular_move-142"><a href="#RegularMove.as_regular_move-142"><span class="linenos">142</span></a>    <span class="k">def</span> <span class="nf">as_regular_move</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;RegularMove&#39;</span><span class="p">:</span>
</span><span id="RegularMove.as_regular_move-143"><a href="#RegularMove.as_regular_move-143"><span class="linenos">143</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Returns this same move but as a Marriage.</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#Move">Move</a></dt>
                                <dd id="RegularMove.cards" class="variable"><a href="#Move.cards">cards</a></dd>
                <dd id="RegularMove.is_marriage" class="function"><a href="#Move.is_marriage">is_marriage</a></dd>
                <dd id="RegularMove.as_marriage" class="function"><a href="#Move.as_marriage">as_marriage</a></dd>
                <dd id="RegularMove.is_trump_exchange" class="function"><a href="#Move.is_trump_exchange">is_trump_exchange</a></dd>
                <dd id="RegularMove.as_trump_exchange" class="function"><a href="#Move.as_trump_exchange">as_trump_exchange</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="Marriage">
                            <input id="Marriage-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass(frozen=True)</div>

    <span class="def">class</span>
    <span class="name">Marriage</span><wbr>(<span class="base"><a href="#Move">Move</a></span>):

                <label class="view-source-button" for="Marriage-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Marriage"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Marriage-149"><a href="#Marriage-149"><span class="linenos">149</span></a><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Marriage-150"><a href="#Marriage-150"><span class="linenos">150</span></a><span class="k">class</span> <span class="nc">Marriage</span><span class="p">(</span><span class="n">Move</span><span class="p">):</span>
</span><span id="Marriage-151"><a href="#Marriage-151"><span class="linenos">151</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Marriage-152"><a href="#Marriage-152"><span class="linenos">152</span></a><span class="sd">    A Move representing a marriage in the game. This move has two cards, a king and a queen of the same suit.</span>
</span><span id="Marriage-153"><a href="#Marriage-153"><span class="linenos">153</span></a><span class="sd">    Right after the marriage is played, the player must play either the queen or the king.</span>
</span><span id="Marriage-154"><a href="#Marriage-154"><span class="linenos">154</span></a><span class="sd">    Because it can only be beneficial to play the queen, it is chosen automatically.</span>
</span><span id="Marriage-155"><a href="#Marriage-155"><span class="linenos">155</span></a><span class="sd">    This Regular move is part of this Move already and does not have to be played separatly.</span>
</span><span id="Marriage-156"><a href="#Marriage-156"><span class="linenos">156</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Marriage-157"><a href="#Marriage-157"><span class="linenos">157</span></a>    <span class="n">queen_card</span><span class="p">:</span> <span class="n">Card</span>
</span><span id="Marriage-158"><a href="#Marriage-158"><span class="linenos">158</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The queen card of this marriage&quot;&quot;&quot;</span>
</span><span id="Marriage-159"><a href="#Marriage-159"><span class="linenos">159</span></a>    <span class="n">king_card</span><span class="p">:</span> <span class="n">Card</span>
</span><span id="Marriage-160"><a href="#Marriage-160"><span class="linenos">160</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The king card of this marriage&quot;&quot;&quot;</span>
</span><span id="Marriage-161"><a href="#Marriage-161"><span class="linenos">161</span></a>    <span class="n">suit</span><span class="p">:</span> <span class="n">Suit</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="nb">repr</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="nb">hash</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="Marriage-162"><a href="#Marriage-162"><span class="linenos">162</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The suit of this marriage, gets derived from the suit of the queen and king.&quot;&quot;&quot;</span>
</span><span id="Marriage-163"><a href="#Marriage-163"><span class="linenos">163</span></a>
</span><span id="Marriage-164"><a href="#Marriage-164"><span class="linenos">164</span></a>    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Marriage-165"><a href="#Marriage-165"><span class="linenos">165</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Marriage-166"><a href="#Marriage-166"><span class="linenos">166</span></a><span class="sd">        Make sure that the suits of the fields all have the same suit and are a king and a queen.</span>
</span><span id="Marriage-167"><a href="#Marriage-167"><span class="linenos">167</span></a><span class="sd">        Finally, sets the suit field.</span>
</span><span id="Marriage-168"><a href="#Marriage-168"><span class="linenos">168</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Marriage-169"><a href="#Marriage-169"><span class="linenos">169</span></a>        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">queen_card</span><span class="o">.</span><span class="n">rank</span> <span class="ow">is</span> <span class="n">Rank</span><span class="o">.</span><span class="n">QUEEN</span>
</span><span id="Marriage-170"><a href="#Marriage-170"><span class="linenos">170</span></a>        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">king_card</span><span class="o">.</span><span class="n">rank</span> <span class="ow">is</span> <span class="n">Rank</span><span class="o">.</span><span class="n">KING</span>
</span><span id="Marriage-171"><a href="#Marriage-171"><span class="linenos">171</span></a>        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">queen_card</span><span class="o">.</span><span class="n">suit</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">king_card</span><span class="o">.</span><span class="n">suit</span>
</span><span id="Marriage-172"><a href="#Marriage-172"><span class="linenos">172</span></a>        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;suit&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queen_card</span><span class="o">.</span><span class="n">suit</span><span class="p">)</span>
</span><span id="Marriage-173"><a href="#Marriage-173"><span class="linenos">173</span></a>
</span><span id="Marriage-174"><a href="#Marriage-174"><span class="linenos">174</span></a>    <span class="k">def</span> <span class="nf">is_marriage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Marriage-175"><a href="#Marriage-175"><span class="linenos">175</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="Marriage-176"><a href="#Marriage-176"><span class="linenos">176</span></a>
</span><span id="Marriage-177"><a href="#Marriage-177"><span class="linenos">177</span></a>    <span class="k">def</span> <span class="nf">as_marriage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Marriage&#39;</span><span class="p">:</span>
</span><span id="Marriage-178"><a href="#Marriage-178"><span class="linenos">178</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Marriage-179"><a href="#Marriage-179"><span class="linenos">179</span></a>
</span><span id="Marriage-180"><a href="#Marriage-180"><span class="linenos">180</span></a>    <span class="k">def</span> <span class="nf">underlying_regular_move</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RegularMove</span><span class="p">:</span>
</span><span id="Marriage-181"><a href="#Marriage-181"><span class="linenos">181</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Marriage-182"><a href="#Marriage-182"><span class="linenos">182</span></a><span class="sd">        Get the regular move which was played because of the marriage. In this engine this is always the queen card.</span>
</span><span id="Marriage-183"><a href="#Marriage-183"><span class="linenos">183</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Marriage-184"><a href="#Marriage-184"><span class="linenos">184</span></a>        <span class="c1"># this limits you to only have the queen to play after a marriage, while in general you would have a choice.</span>
</span><span id="Marriage-185"><a href="#Marriage-185"><span class="linenos">185</span></a>        <span class="c1"># This is not an issue since playing the queen give you the highest score.</span>
</span><span id="Marriage-186"><a href="#Marriage-186"><span class="linenos">186</span></a>        <span class="k">return</span> <span class="n">RegularMove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">queen_card</span><span class="p">)</span>
</span><span id="Marriage-187"><a href="#Marriage-187"><span class="linenos">187</span></a>
</span><span id="Marriage-188"><a href="#Marriage-188"><span class="linenos">188</span></a>    <span class="k">def</span> <span class="nf">_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="Marriage-189"><a href="#Marriage-189"><span class="linenos">189</span></a>        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">queen_card</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">king_card</span><span class="p">]</span>
</span><span id="Marriage-190"><a href="#Marriage-190"><span class="linenos">190</span></a>
</span><span id="Marriage-191"><a href="#Marriage-191"><span class="linenos">191</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Marriage-192"><a href="#Marriage-192"><span class="linenos">192</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Marriage(queen_card=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">queen_card</span><span class="si">}</span><span class="s2">, king_card=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">king_card</span><span class="si">}</span><span class="s2">)&quot;</span>
</span></pre></div>


            <div class="docstring"><p>A Move representing a marriage in the game. This move has two cards, a king and a queen of the same suit.
Right after the marriage is played, the player must play either the queen or the king.
Because it can only be beneficial to play the queen, it is chosen automatically.
This Regular move is part of this Move already and does not have to be played separatly.</p>
</div>


                            <div id="Marriage.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">Marriage</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">queen_card</span><span class="p">:</span> <span class="n"><a href="deck.html#Card">schnapsen.deck.Card</a></span>, </span><span class="param"><span class="n">king_card</span><span class="p">:</span> <span class="n"><a href="deck.html#Card">schnapsen.deck.Card</a></span></span>)</span>

        
    </div>
    <a class="headerlink" href="#Marriage.__init__"></a>
    
    

                            </div>
                            <div id="Marriage.queen_card" class="classattr">
                                <div class="attr variable">
            <span class="name">queen_card</span><span class="annotation">: <a href="deck.html#Card">schnapsen.deck.Card</a></span>

        
    </div>
    <a class="headerlink" href="#Marriage.queen_card"></a>
    
            <div class="docstring"><p>The queen card of this marriage</p>
</div>


                            </div>
                            <div id="Marriage.king_card" class="classattr">
                                <div class="attr variable">
            <span class="name">king_card</span><span class="annotation">: <a href="deck.html#Card">schnapsen.deck.Card</a></span>

        
    </div>
    <a class="headerlink" href="#Marriage.king_card"></a>
    
            <div class="docstring"><p>The king card of this marriage</p>
</div>


                            </div>
                            <div id="Marriage.suit" class="classattr">
                                <div class="attr variable">
            <span class="name">suit</span><span class="annotation">: <a href="deck.html#Suit">schnapsen.deck.Suit</a></span>

        
    </div>
    <a class="headerlink" href="#Marriage.suit"></a>
    
            <div class="docstring"><p>The suit of this marriage, gets derived from the suit of the queen and king.</p>
</div>


                            </div>
                            <div id="Marriage.is_marriage" class="classattr">
                                        <input id="Marriage.is_marriage-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">is_marriage</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="Marriage.is_marriage-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Marriage.is_marriage"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Marriage.is_marriage-174"><a href="#Marriage.is_marriage-174"><span class="linenos">174</span></a>    <span class="k">def</span> <span class="nf">is_marriage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Marriage.is_marriage-175"><a href="#Marriage.is_marriage-175"><span class="linenos">175</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Is this Move a marriage?</p>

<p>:returns: a bool indicating whether this move is a marriage</p>
</div>


                            </div>
                            <div id="Marriage.as_marriage" class="classattr">
                                        <input id="Marriage.as_marriage-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">as_marriage</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#Marriage">schnapsen.game.Marriage</a></span>:</span></span>

                <label class="view-source-button" for="Marriage.as_marriage-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Marriage.as_marriage"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Marriage.as_marriage-177"><a href="#Marriage.as_marriage-177"><span class="linenos">177</span></a>    <span class="k">def</span> <span class="nf">as_marriage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Marriage&#39;</span><span class="p">:</span>
</span><span id="Marriage.as_marriage-178"><a href="#Marriage.as_marriage-178"><span class="linenos">178</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Returns this same move but as a Marriage.</p>
</div>


                            </div>
                            <div id="Marriage.underlying_regular_move" class="classattr">
                                        <input id="Marriage.underlying_regular_move-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">underlying_regular_move</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#RegularMove">schnapsen.game.RegularMove</a></span>:</span></span>

                <label class="view-source-button" for="Marriage.underlying_regular_move-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Marriage.underlying_regular_move"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Marriage.underlying_regular_move-180"><a href="#Marriage.underlying_regular_move-180"><span class="linenos">180</span></a>    <span class="k">def</span> <span class="nf">underlying_regular_move</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RegularMove</span><span class="p">:</span>
</span><span id="Marriage.underlying_regular_move-181"><a href="#Marriage.underlying_regular_move-181"><span class="linenos">181</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Marriage.underlying_regular_move-182"><a href="#Marriage.underlying_regular_move-182"><span class="linenos">182</span></a><span class="sd">        Get the regular move which was played because of the marriage. In this engine this is always the queen card.</span>
</span><span id="Marriage.underlying_regular_move-183"><a href="#Marriage.underlying_regular_move-183"><span class="linenos">183</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Marriage.underlying_regular_move-184"><a href="#Marriage.underlying_regular_move-184"><span class="linenos">184</span></a>        <span class="c1"># this limits you to only have the queen to play after a marriage, while in general you would have a choice.</span>
</span><span id="Marriage.underlying_regular_move-185"><a href="#Marriage.underlying_regular_move-185"><span class="linenos">185</span></a>        <span class="c1"># This is not an issue since playing the queen give you the highest score.</span>
</span><span id="Marriage.underlying_regular_move-186"><a href="#Marriage.underlying_regular_move-186"><span class="linenos">186</span></a>        <span class="k">return</span> <span class="n">RegularMove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">queen_card</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Get the regular move which was played because of the marriage. In this engine this is always the queen card.</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#Move">Move</a></dt>
                                <dd id="Marriage.cards" class="variable"><a href="#Move.cards">cards</a></dd>
                <dd id="Marriage.is_regular_move" class="function"><a href="#Move.is_regular_move">is_regular_move</a></dd>
                <dd id="Marriage.as_regular_move" class="function"><a href="#Move.as_regular_move">as_regular_move</a></dd>
                <dd id="Marriage.is_trump_exchange" class="function"><a href="#Move.is_trump_exchange">is_trump_exchange</a></dd>
                <dd id="Marriage.as_trump_exchange" class="function"><a href="#Move.as_trump_exchange">as_trump_exchange</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="Hand">
                            <input id="Hand-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Hand</span><wbr>(<span class="base"><a href="deck.html#CardCollection">schnapsen.deck.CardCollection</a></span>):

                <label class="view-source-button" for="Hand-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Hand"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Hand-195"><a href="#Hand-195"><span class="linenos">195</span></a><span class="k">class</span> <span class="nc">Hand</span><span class="p">(</span><span class="n">CardCollection</span><span class="p">):</span>
</span><span id="Hand-196"><a href="#Hand-196"><span class="linenos">196</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Representing the cards in the hand of a player. These are the cards which the player can see and which he can play with in the turn.&quot;&quot;&quot;</span>
</span><span id="Hand-197"><a href="#Hand-197"><span class="linenos">197</span></a>
</span><span id="Hand-198"><a href="#Hand-198"><span class="linenos">198</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cards</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Card</span><span class="p">],</span> <span class="n">max_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Hand-199"><a href="#Hand-199"><span class="linenos">199</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Hand-200"><a href="#Hand-200"><span class="linenos">200</span></a><span class="sd">        Create a hand containing the cards.</span>
</span><span id="Hand-201"><a href="#Hand-201"><span class="linenos">201</span></a>
</span><span id="Hand-202"><a href="#Hand-202"><span class="linenos">202</span></a><span class="sd">        :param cards: The cards to be added to the hand</span>
</span><span id="Hand-203"><a href="#Hand-203"><span class="linenos">203</span></a><span class="sd">        :param max_size: The maximum number of cards the hand can contain. If the number of cards goes beyond, an Exception is raised.</span>
</span><span id="Hand-204"><a href="#Hand-204"><span class="linenos">204</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Hand-205"><a href="#Hand-205"><span class="linenos">205</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">max_size</span> <span class="o">=</span> <span class="n">max_size</span>
</span><span id="Hand-206"><a href="#Hand-206"><span class="linenos">206</span></a>        <span class="n">cards</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">cards</span><span class="p">)</span>
</span><span id="Hand-207"><a href="#Hand-207"><span class="linenos">207</span></a>        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">cards</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">max_size</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;The number of cards </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">cards</span><span class="p">)</span><span class="si">}</span><span class="s2"> is larger than the maximum number fo allowed cards </span><span class="si">{</span><span class="n">max_size</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Hand-208"><a href="#Hand-208"><span class="linenos">208</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cards</span> <span class="o">=</span> <span class="n">cards</span>
</span><span id="Hand-209"><a href="#Hand-209"><span class="linenos">209</span></a>
</span><span id="Hand-210"><a href="#Hand-210"><span class="linenos">210</span></a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">card</span><span class="p">:</span> <span class="n">Card</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Hand-211"><a href="#Hand-211"><span class="linenos">211</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove one occurence of the card from this hand&quot;&quot;&quot;</span>
</span><span id="Hand-212"><a href="#Hand-212"><span class="linenos">212</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Hand-213"><a href="#Hand-213"><span class="linenos">213</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
</span><span id="Hand-214"><a href="#Hand-214"><span class="linenos">214</span></a>        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
</span><span id="Hand-215"><a href="#Hand-215"><span class="linenos">215</span></a>            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Trying to remove a card from the hand which is not in the hand. Hand is </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="si">}</span><span class="s2">, trying to remove </span><span class="si">{</span><span class="n">card</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">ve</span>
</span><span id="Hand-216"><a href="#Hand-216"><span class="linenos">216</span></a>
</span><span id="Hand-217"><a href="#Hand-217"><span class="linenos">217</span></a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">card</span><span class="p">:</span> <span class="n">Card</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Hand-218"><a href="#Hand-218"><span class="linenos">218</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Hand-219"><a href="#Hand-219"><span class="linenos">219</span></a><span class="sd">        Add a card to the Hand</span>
</span><span id="Hand-220"><a href="#Hand-220"><span class="linenos">220</span></a>
</span><span id="Hand-221"><a href="#Hand-221"><span class="linenos">221</span></a><span class="sd">        :param card:  The card to be added to the hand</span>
</span><span id="Hand-222"><a href="#Hand-222"><span class="linenos">222</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Hand-223"><a href="#Hand-223"><span class="linenos">223</span></a>        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_size</span><span class="p">,</span> <span class="s2">&quot;Adding one more card to the hand will cause a hand with too many cards&quot;</span>
</span><span id="Hand-224"><a href="#Hand-224"><span class="linenos">224</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
</span><span id="Hand-225"><a href="#Hand-225"><span class="linenos">225</span></a>
</span><span id="Hand-226"><a href="#Hand-226"><span class="linenos">226</span></a>    <span class="k">def</span> <span class="nf">has_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cards</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Card</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Hand-227"><a href="#Hand-227"><span class="linenos">227</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Hand-228"><a href="#Hand-228"><span class="linenos">228</span></a><span class="sd">        Are all the cards contained in this Hand?</span>
</span><span id="Hand-229"><a href="#Hand-229"><span class="linenos">229</span></a>
</span><span id="Hand-230"><a href="#Hand-230"><span class="linenos">230</span></a><span class="sd">        :param cards: An iterable of cards which need to be checked</span>
</span><span id="Hand-231"><a href="#Hand-231"><span class="linenos">231</span></a><span class="sd">        :returns: Whether all cards in the provided iterable are in this Hand</span>
</span><span id="Hand-232"><a href="#Hand-232"><span class="linenos">232</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Hand-233"><a href="#Hand-233"><span class="linenos">233</span></a>        <span class="k">return</span> <span class="nb">all</span><span class="p">(</span><span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cards</span> <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">cards</span><span class="p">)</span>
</span><span id="Hand-234"><a href="#Hand-234"><span class="linenos">234</span></a>
</span><span id="Hand-235"><a href="#Hand-235"><span class="linenos">235</span></a>    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Hand&#39;</span><span class="p">:</span>
</span><span id="Hand-236"><a href="#Hand-236"><span class="linenos">236</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Hand-237"><a href="#Hand-237"><span class="linenos">237</span></a><span class="sd">        Create a deep copy of this Hand</span>
</span><span id="Hand-238"><a href="#Hand-238"><span class="linenos">238</span></a>
</span><span id="Hand-239"><a href="#Hand-239"><span class="linenos">239</span></a><span class="sd">        :returns: A deep copy of this hand. Changes to the original will not affect the copy and vice versa.</span>
</span><span id="Hand-240"><a href="#Hand-240"><span class="linenos">240</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Hand-241"><a href="#Hand-241"><span class="linenos">241</span></a>        <span class="k">return</span> <span class="n">Hand</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="p">),</span> <span class="n">max_size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">max_size</span><span class="p">)</span>
</span><span id="Hand-242"><a href="#Hand-242"><span class="linenos">242</span></a>
</span><span id="Hand-243"><a href="#Hand-243"><span class="linenos">243</span></a>    <span class="k">def</span> <span class="nf">is_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Hand-244"><a href="#Hand-244"><span class="linenos">244</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Hand-245"><a href="#Hand-245"><span class="linenos">245</span></a><span class="sd">        Is the Hand emoty?</span>
</span><span id="Hand-246"><a href="#Hand-246"><span class="linenos">246</span></a>
</span><span id="Hand-247"><a href="#Hand-247"><span class="linenos">247</span></a><span class="sd">        :returns: A bool indicating whether the hand is empty</span>
</span><span id="Hand-248"><a href="#Hand-248"><span class="linenos">248</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Hand-249"><a href="#Hand-249"><span class="linenos">249</span></a>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
</span><span id="Hand-250"><a href="#Hand-250"><span class="linenos">250</span></a>
</span><span id="Hand-251"><a href="#Hand-251"><span class="linenos">251</span></a>    <span class="k">def</span> <span class="nf">get_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="Hand-252"><a href="#Hand-252"><span class="linenos">252</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="p">)</span>
</span><span id="Hand-253"><a href="#Hand-253"><span class="linenos">253</span></a>
</span><span id="Hand-254"><a href="#Hand-254"><span class="linenos">254</span></a>    <span class="k">def</span> <span class="nf">filter_suit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">suit</span><span class="p">:</span> <span class="n">Suit</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="Hand-255"><a href="#Hand-255"><span class="linenos">255</span></a>        <span class="n">results</span> <span class="o">=</span> <span class="p">[</span><span class="n">card</span> <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cards</span> <span class="k">if</span> <span class="n">card</span><span class="o">.</span><span class="n">suit</span> <span class="ow">is</span> <span class="n">suit</span><span class="p">]</span>
</span><span id="Hand-256"><a href="#Hand-256"><span class="linenos">256</span></a>        <span class="k">return</span> <span class="n">results</span>
</span><span id="Hand-257"><a href="#Hand-257"><span class="linenos">257</span></a>
</span><span id="Hand-258"><a href="#Hand-258"><span class="linenos">258</span></a>    <span class="k">def</span> <span class="nf">filter_rank</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rank</span><span class="p">:</span> <span class="n">Rank</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="Hand-259"><a href="#Hand-259"><span class="linenos">259</span></a>        <span class="n">results</span> <span class="o">=</span> <span class="p">[</span><span class="n">card</span> <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cards</span> <span class="k">if</span> <span class="n">card</span><span class="o">.</span><span class="n">rank</span> <span class="ow">is</span> <span class="n">rank</span><span class="p">]</span>
</span><span id="Hand-260"><a href="#Hand-260"><span class="linenos">260</span></a>        <span class="k">return</span> <span class="n">results</span>
</span><span id="Hand-261"><a href="#Hand-261"><span class="linenos">261</span></a>
</span><span id="Hand-262"><a href="#Hand-262"><span class="linenos">262</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Hand-263"><a href="#Hand-263"><span class="linenos">263</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Hand(cards=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="si">}</span><span class="s2">, max_size=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">max_size</span><span class="si">}</span><span class="s2">)&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Representing the cards in the hand of a player. These are the cards which the player can see and which he can play with in the turn.</p>
</div>


                            <div id="Hand.__init__" class="classattr">
                                        <input id="Hand.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Hand</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">cards</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n"><a href="deck.html#Card">schnapsen.deck.Card</a></span><span class="p">]</span>, </span><span class="param"><span class="n">max_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span></span>)</span>

                <label class="view-source-button" for="Hand.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Hand.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Hand.__init__-198"><a href="#Hand.__init__-198"><span class="linenos">198</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cards</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Card</span><span class="p">],</span> <span class="n">max_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Hand.__init__-199"><a href="#Hand.__init__-199"><span class="linenos">199</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Hand.__init__-200"><a href="#Hand.__init__-200"><span class="linenos">200</span></a><span class="sd">        Create a hand containing the cards.</span>
</span><span id="Hand.__init__-201"><a href="#Hand.__init__-201"><span class="linenos">201</span></a>
</span><span id="Hand.__init__-202"><a href="#Hand.__init__-202"><span class="linenos">202</span></a><span class="sd">        :param cards: The cards to be added to the hand</span>
</span><span id="Hand.__init__-203"><a href="#Hand.__init__-203"><span class="linenos">203</span></a><span class="sd">        :param max_size: The maximum number of cards the hand can contain. If the number of cards goes beyond, an Exception is raised.</span>
</span><span id="Hand.__init__-204"><a href="#Hand.__init__-204"><span class="linenos">204</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Hand.__init__-205"><a href="#Hand.__init__-205"><span class="linenos">205</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">max_size</span> <span class="o">=</span> <span class="n">max_size</span>
</span><span id="Hand.__init__-206"><a href="#Hand.__init__-206"><span class="linenos">206</span></a>        <span class="n">cards</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">cards</span><span class="p">)</span>
</span><span id="Hand.__init__-207"><a href="#Hand.__init__-207"><span class="linenos">207</span></a>        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">cards</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">max_size</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;The number of cards </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">cards</span><span class="p">)</span><span class="si">}</span><span class="s2"> is larger than the maximum number fo allowed cards </span><span class="si">{</span><span class="n">max_size</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Hand.__init__-208"><a href="#Hand.__init__-208"><span class="linenos">208</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cards</span> <span class="o">=</span> <span class="n">cards</span>
</span></pre></div>


            <div class="docstring"><p>Create a hand containing the cards.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>cards</strong>:  The cards to be added to the hand</li>
<li><strong>max_size</strong>:  The maximum number of cards the hand can contain. If the number of cards goes beyond, an Exception is raised.</li>
</ul>
</div>


                            </div>
                            <div id="Hand.remove" class="classattr">
                                        <input id="Hand.remove-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">remove</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">card</span><span class="p">:</span> <span class="n"><a href="deck.html#Card">schnapsen.deck.Card</a></span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Hand.remove-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Hand.remove"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Hand.remove-210"><a href="#Hand.remove-210"><span class="linenos">210</span></a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">card</span><span class="p">:</span> <span class="n">Card</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Hand.remove-211"><a href="#Hand.remove-211"><span class="linenos">211</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove one occurence of the card from this hand&quot;&quot;&quot;</span>
</span><span id="Hand.remove-212"><a href="#Hand.remove-212"><span class="linenos">212</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Hand.remove-213"><a href="#Hand.remove-213"><span class="linenos">213</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
</span><span id="Hand.remove-214"><a href="#Hand.remove-214"><span class="linenos">214</span></a>        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
</span><span id="Hand.remove-215"><a href="#Hand.remove-215"><span class="linenos">215</span></a>            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Trying to remove a card from the hand which is not in the hand. Hand is </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="si">}</span><span class="s2">, trying to remove </span><span class="si">{</span><span class="n">card</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">ve</span>
</span></pre></div>


            <div class="docstring"><p>Remove one occurence of the card from this hand</p>
</div>


                            </div>
                            <div id="Hand.add" class="classattr">
                                        <input id="Hand.add-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">card</span><span class="p">:</span> <span class="n"><a href="deck.html#Card">schnapsen.deck.Card</a></span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Hand.add-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Hand.add"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Hand.add-217"><a href="#Hand.add-217"><span class="linenos">217</span></a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">card</span><span class="p">:</span> <span class="n">Card</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Hand.add-218"><a href="#Hand.add-218"><span class="linenos">218</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Hand.add-219"><a href="#Hand.add-219"><span class="linenos">219</span></a><span class="sd">        Add a card to the Hand</span>
</span><span id="Hand.add-220"><a href="#Hand.add-220"><span class="linenos">220</span></a>
</span><span id="Hand.add-221"><a href="#Hand.add-221"><span class="linenos">221</span></a><span class="sd">        :param card:  The card to be added to the hand</span>
</span><span id="Hand.add-222"><a href="#Hand.add-222"><span class="linenos">222</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Hand.add-223"><a href="#Hand.add-223"><span class="linenos">223</span></a>        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_size</span><span class="p">,</span> <span class="s2">&quot;Adding one more card to the hand will cause a hand with too many cards&quot;</span>
</span><span id="Hand.add-224"><a href="#Hand.add-224"><span class="linenos">224</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Add a card to the Hand</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>card</strong>:   The card to be added to the hand</li>
</ul>
</div>


                            </div>
                            <div id="Hand.has_cards" class="classattr">
                                        <input id="Hand.has_cards-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">has_cards</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">cards</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n"><a href="deck.html#Card">schnapsen.deck.Card</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="Hand.has_cards-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Hand.has_cards"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Hand.has_cards-226"><a href="#Hand.has_cards-226"><span class="linenos">226</span></a>    <span class="k">def</span> <span class="nf">has_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cards</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Card</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Hand.has_cards-227"><a href="#Hand.has_cards-227"><span class="linenos">227</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Hand.has_cards-228"><a href="#Hand.has_cards-228"><span class="linenos">228</span></a><span class="sd">        Are all the cards contained in this Hand?</span>
</span><span id="Hand.has_cards-229"><a href="#Hand.has_cards-229"><span class="linenos">229</span></a>
</span><span id="Hand.has_cards-230"><a href="#Hand.has_cards-230"><span class="linenos">230</span></a><span class="sd">        :param cards: An iterable of cards which need to be checked</span>
</span><span id="Hand.has_cards-231"><a href="#Hand.has_cards-231"><span class="linenos">231</span></a><span class="sd">        :returns: Whether all cards in the provided iterable are in this Hand</span>
</span><span id="Hand.has_cards-232"><a href="#Hand.has_cards-232"><span class="linenos">232</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Hand.has_cards-233"><a href="#Hand.has_cards-233"><span class="linenos">233</span></a>        <span class="k">return</span> <span class="nb">all</span><span class="p">(</span><span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cards</span> <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">cards</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Are all the cards contained in this Hand?</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>cards</strong>:  An iterable of cards which need to be checked
:returns: Whether all cards in the provided iterable are in this Hand</li>
</ul>
</div>


                            </div>
                            <div id="Hand.copy" class="classattr">
                                        <input id="Hand.copy-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">copy</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#Hand">schnapsen.game.Hand</a></span>:</span></span>

                <label class="view-source-button" for="Hand.copy-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Hand.copy"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Hand.copy-235"><a href="#Hand.copy-235"><span class="linenos">235</span></a>    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Hand&#39;</span><span class="p">:</span>
</span><span id="Hand.copy-236"><a href="#Hand.copy-236"><span class="linenos">236</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Hand.copy-237"><a href="#Hand.copy-237"><span class="linenos">237</span></a><span class="sd">        Create a deep copy of this Hand</span>
</span><span id="Hand.copy-238"><a href="#Hand.copy-238"><span class="linenos">238</span></a>
</span><span id="Hand.copy-239"><a href="#Hand.copy-239"><span class="linenos">239</span></a><span class="sd">        :returns: A deep copy of this hand. Changes to the original will not affect the copy and vice versa.</span>
</span><span id="Hand.copy-240"><a href="#Hand.copy-240"><span class="linenos">240</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Hand.copy-241"><a href="#Hand.copy-241"><span class="linenos">241</span></a>        <span class="k">return</span> <span class="n">Hand</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="p">),</span> <span class="n">max_size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">max_size</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Create a deep copy of this Hand</p>

<p>:returns: A deep copy of this hand. Changes to the original will not affect the copy and vice versa.</p>
</div>


                            </div>
                            <div id="Hand.is_empty" class="classattr">
                                        <input id="Hand.is_empty-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">is_empty</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="Hand.is_empty-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Hand.is_empty"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Hand.is_empty-243"><a href="#Hand.is_empty-243"><span class="linenos">243</span></a>    <span class="k">def</span> <span class="nf">is_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Hand.is_empty-244"><a href="#Hand.is_empty-244"><span class="linenos">244</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Hand.is_empty-245"><a href="#Hand.is_empty-245"><span class="linenos">245</span></a><span class="sd">        Is the Hand emoty?</span>
</span><span id="Hand.is_empty-246"><a href="#Hand.is_empty-246"><span class="linenos">246</span></a>
</span><span id="Hand.is_empty-247"><a href="#Hand.is_empty-247"><span class="linenos">247</span></a><span class="sd">        :returns: A bool indicating whether the hand is empty</span>
</span><span id="Hand.is_empty-248"><a href="#Hand.is_empty-248"><span class="linenos">248</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Hand.is_empty-249"><a href="#Hand.is_empty-249"><span class="linenos">249</span></a>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
</span></pre></div>


            <div class="docstring"><p>Is the Hand emoty?</p>

<p>:returns: A bool indicating whether the hand is empty</p>
</div>


                            </div>
                            <div id="Hand.get_cards" class="classattr">
                                        <input id="Hand.get_cards-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_cards</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="n"><a href="deck.html#Card">schnapsen.deck.Card</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Hand.get_cards-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Hand.get_cards"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Hand.get_cards-251"><a href="#Hand.get_cards-251"><span class="linenos">251</span></a>    <span class="k">def</span> <span class="nf">get_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="Hand.get_cards-252"><a href="#Hand.get_cards-252"><span class="linenos">252</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Get an Iterable of the cards in this collection. Changes to this Iterable will not be reflected in this Collection</p>
</div>


                            </div>
                            <div id="Hand.filter_suit" class="classattr">
                                        <input id="Hand.filter_suit-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">filter_suit</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">suit</span><span class="p">:</span> <span class="n"><a href="deck.html#Suit">schnapsen.deck.Suit</a></span></span><span class="return-annotation">) -> <span class="n">Iterable</span><span class="p">[</span><span class="n"><a href="deck.html#Card">schnapsen.deck.Card</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Hand.filter_suit-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Hand.filter_suit"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Hand.filter_suit-254"><a href="#Hand.filter_suit-254"><span class="linenos">254</span></a>    <span class="k">def</span> <span class="nf">filter_suit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">suit</span><span class="p">:</span> <span class="n">Suit</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="Hand.filter_suit-255"><a href="#Hand.filter_suit-255"><span class="linenos">255</span></a>        <span class="n">results</span> <span class="o">=</span> <span class="p">[</span><span class="n">card</span> <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cards</span> <span class="k">if</span> <span class="n">card</span><span class="o">.</span><span class="n">suit</span> <span class="ow">is</span> <span class="n">suit</span><span class="p">]</span>
</span><span id="Hand.filter_suit-256"><a href="#Hand.filter_suit-256"><span class="linenos">256</span></a>        <span class="k">return</span> <span class="n">results</span>
</span></pre></div>


            <div class="docstring"><p>Returns an Iterable with in it all cards which have the provided suit</p>
</div>


                            </div>
                            <div id="Hand.filter_rank" class="classattr">
                                        <input id="Hand.filter_rank-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">filter_rank</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">rank</span><span class="p">:</span> <span class="n"><a href="deck.html#Rank">schnapsen.deck.Rank</a></span></span><span class="return-annotation">) -> <span class="n">Iterable</span><span class="p">[</span><span class="n"><a href="deck.html#Card">schnapsen.deck.Card</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Hand.filter_rank-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Hand.filter_rank"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Hand.filter_rank-258"><a href="#Hand.filter_rank-258"><span class="linenos">258</span></a>    <span class="k">def</span> <span class="nf">filter_rank</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rank</span><span class="p">:</span> <span class="n">Rank</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="Hand.filter_rank-259"><a href="#Hand.filter_rank-259"><span class="linenos">259</span></a>        <span class="n">results</span> <span class="o">=</span> <span class="p">[</span><span class="n">card</span> <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cards</span> <span class="k">if</span> <span class="n">card</span><span class="o">.</span><span class="n">rank</span> <span class="ow">is</span> <span class="n">rank</span><span class="p">]</span>
</span><span id="Hand.filter_rank-260"><a href="#Hand.filter_rank-260"><span class="linenos">260</span></a>        <span class="k">return</span> <span class="n">results</span>
</span></pre></div>


            <div class="docstring"><p>Returns an Iterable with in it all cards which have the provided rank</p>
</div>


                            </div>
                </section>
                <section id="Talon">
                            <input id="Talon-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Talon</span><wbr>(<span class="base"><a href="deck.html#OrderedCardCollection">schnapsen.deck.OrderedCardCollection</a></span>):

                <label class="view-source-button" for="Talon-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Talon"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Talon-266"><a href="#Talon-266"><span class="linenos">266</span></a><span class="k">class</span> <span class="nc">Talon</span><span class="p">(</span><span class="n">OrderedCardCollection</span><span class="p">):</span>
</span><span id="Talon-267"><a href="#Talon-267"><span class="linenos">267</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Talon-268"><a href="#Talon-268"><span class="linenos">268</span></a><span class="sd">    The Talon contains the cards which have not yet been given to the players.</span>
</span><span id="Talon-269"><a href="#Talon-269"><span class="linenos">269</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Talon-270"><a href="#Talon-270"><span class="linenos">270</span></a>
</span><span id="Talon-271"><a href="#Talon-271"><span class="linenos">271</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cards</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Card</span><span class="p">],</span> <span class="n">trump_suit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Suit</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Talon-272"><a href="#Talon-272"><span class="linenos">272</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Talon-273"><a href="#Talon-273"><span class="linenos">273</span></a><span class="sd">        The cards of the Talon. The last card of the iterable is the bottommost card.</span>
</span><span id="Talon-274"><a href="#Talon-274"><span class="linenos">274</span></a><span class="sd">        The first one is the top card (which will be taken is a card is drawn)</span>
</span><span id="Talon-275"><a href="#Talon-275"><span class="linenos">275</span></a><span class="sd">        The Trump card is at the bottom of the Talon.</span>
</span><span id="Talon-276"><a href="#Talon-276"><span class="linenos">276</span></a><span class="sd">        The trump_suit can also be specified explicitly, which is important when the Talon is empty.</span>
</span><span id="Talon-277"><a href="#Talon-277"><span class="linenos">277</span></a><span class="sd">        If the trump_suit is specified and there are cards, then the suit of the bottommost card must be the same.</span>
</span><span id="Talon-278"><a href="#Talon-278"><span class="linenos">278</span></a>
</span><span id="Talon-279"><a href="#Talon-279"><span class="linenos">279</span></a><span class="sd">        :param cards: The cards to be put on this talon, a defensive copy will be made.</span>
</span><span id="Talon-280"><a href="#Talon-280"><span class="linenos">280</span></a><span class="sd">        :param trump_suit: The trump suit of the Talon, important if there are no more cards to be taken.</span>
</span><span id="Talon-281"><a href="#Talon-281"><span class="linenos">281</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Talon-282"><a href="#Talon-282"><span class="linenos">282</span></a>        <span class="k">if</span> <span class="n">cards</span><span class="p">:</span>
</span><span id="Talon-283"><a href="#Talon-283"><span class="linenos">283</span></a>            <span class="n">trump_card_suit</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">cards</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">suit</span>
</span><span id="Talon-284"><a href="#Talon-284"><span class="linenos">284</span></a>            <span class="k">assert</span> <span class="ow">not</span> <span class="n">trump_suit</span> <span class="ow">or</span> <span class="n">trump_card_suit</span> <span class="o">==</span> <span class="n">trump_suit</span><span class="p">,</span> <span class="s2">&quot;If the trump suit is specified, and there are cards on the talon, the suit must be the same!&quot;</span>
</span><span id="Talon-285"><a href="#Talon-285"><span class="linenos">285</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__trump_suit</span> <span class="o">=</span> <span class="n">trump_card_suit</span>
</span><span id="Talon-286"><a href="#Talon-286"><span class="linenos">286</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Talon-287"><a href="#Talon-287"><span class="linenos">287</span></a>            <span class="k">assert</span> <span class="n">trump_suit</span>
</span><span id="Talon-288"><a href="#Talon-288"><span class="linenos">288</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__trump_suit</span> <span class="o">=</span> <span class="n">trump_suit</span>
</span><span id="Talon-289"><a href="#Talon-289"><span class="linenos">289</span></a>
</span><span id="Talon-290"><a href="#Talon-290"><span class="linenos">290</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">cards</span><span class="p">)</span>
</span><span id="Talon-291"><a href="#Talon-291"><span class="linenos">291</span></a>
</span><span id="Talon-292"><a href="#Talon-292"><span class="linenos">292</span></a>    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Talon&#39;</span><span class="p">:</span>
</span><span id="Talon-293"><a href="#Talon-293"><span class="linenos">293</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Talon-294"><a href="#Talon-294"><span class="linenos">294</span></a><span class="sd">        Create an independent copy of this talon.</span>
</span><span id="Talon-295"><a href="#Talon-295"><span class="linenos">295</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Talon-296"><a href="#Talon-296"><span class="linenos">296</span></a>        <span class="c1"># We do not need to make a copy of the cards as this happend in the constructor of Talon.</span>
</span><span id="Talon-297"><a href="#Talon-297"><span class="linenos">297</span></a>        <span class="k">return</span> <span class="n">Talon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__trump_suit</span><span class="p">)</span>
</span><span id="Talon-298"><a href="#Talon-298"><span class="linenos">298</span></a>
</span><span id="Talon-299"><a href="#Talon-299"><span class="linenos">299</span></a>    <span class="k">def</span> <span class="nf">trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_trump</span><span class="p">:</span> <span class="n">Card</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Card</span><span class="p">:</span>
</span><span id="Talon-300"><a href="#Talon-300"><span class="linenos">300</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Talon-301"><a href="#Talon-301"><span class="linenos">301</span></a><span class="sd">        perfom a trump-jack exchange. The card to be put as the trump card must be a Jack of the same suit.</span>
</span><span id="Talon-302"><a href="#Talon-302"><span class="linenos">302</span></a><span class="sd">        As a result, this Talon changed: the old trump is removed and the new_trump is at the bottom of the Talon</span>
</span><span id="Talon-303"><a href="#Talon-303"><span class="linenos">303</span></a>
</span><span id="Talon-304"><a href="#Talon-304"><span class="linenos">304</span></a><span class="sd">        We also require that there must be two cards on the Talon, which is always the case in a normal game of Schnapsen</span>
</span><span id="Talon-305"><a href="#Talon-305"><span class="linenos">305</span></a>
</span><span id="Talon-306"><a href="#Talon-306"><span class="linenos">306</span></a><span class="sd">        :param new_trump: The card to be put. It must be a Jack of the same suit as the card at the bottom</span>
</span><span id="Talon-307"><a href="#Talon-307"><span class="linenos">307</span></a>
</span><span id="Talon-308"><a href="#Talon-308"><span class="linenos">308</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Talon-309"><a href="#Talon-309"><span class="linenos">309</span></a>        <span class="k">assert</span> <span class="n">new_trump</span><span class="o">.</span><span class="n">rank</span> <span class="ow">is</span> <span class="n">Rank</span><span class="o">.</span><span class="n">JACK</span>
</span><span id="Talon-310"><a href="#Talon-310"><span class="linenos">310</span></a>        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span>
</span><span id="Talon-311"><a href="#Talon-311"><span class="linenos">311</span></a>        <span class="k">assert</span> <span class="n">new_trump</span><span class="o">.</span><span class="n">suit</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">suit</span>
</span><span id="Talon-312"><a href="#Talon-312"><span class="linenos">312</span></a>        <span class="n">old_trump</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="Talon-313"><a href="#Talon-313"><span class="linenos">313</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_trump</span><span class="p">)</span>
</span><span id="Talon-314"><a href="#Talon-314"><span class="linenos">314</span></a>        <span class="k">return</span> <span class="n">old_trump</span>
</span><span id="Talon-315"><a href="#Talon-315"><span class="linenos">315</span></a>
</span><span id="Talon-316"><a href="#Talon-316"><span class="linenos">316</span></a>    <span class="k">def</span> <span class="nf">draw_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="Talon-317"><a href="#Talon-317"><span class="linenos">317</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Draw a card from this Talon. This does not change the talon, btu rather returns a talon with the change applied and the card drawn&quot;&quot;&quot;</span>
</span><span id="Talon-318"><a href="#Talon-318"><span class="linenos">318</span></a>        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">amount</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;There are only </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">)</span><span class="si">}</span><span class="s2"> on the Talon, but </span><span class="si">{</span><span class="n">amount</span><span class="si">}</span><span class="s2"> cards are requested&quot;</span>
</span><span id="Talon-319"><a href="#Talon-319"><span class="linenos">319</span></a>        <span class="n">draw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">[:</span><span class="n">amount</span><span class="p">]</span>
</span><span id="Talon-320"><a href="#Talon-320"><span class="linenos">320</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_cards</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">[</span><span class="n">amount</span><span class="p">:]</span>
</span><span id="Talon-321"><a href="#Talon-321"><span class="linenos">321</span></a>        <span class="k">return</span> <span class="n">draw</span>
</span><span id="Talon-322"><a href="#Talon-322"><span class="linenos">322</span></a>
</span><span id="Talon-323"><a href="#Talon-323"><span class="linenos">323</span></a>    <span class="k">def</span> <span class="nf">trump_suit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Suit</span><span class="p">:</span>
</span><span id="Talon-324"><a href="#Talon-324"><span class="linenos">324</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the suit of the trump card, i.e., the bottommost card.</span>
</span><span id="Talon-325"><a href="#Talon-325"><span class="linenos">325</span></a><span class="sd">        This still works, even when the Talon has become empty.</span>
</span><span id="Talon-326"><a href="#Talon-326"><span class="linenos">326</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Talon-327"><a href="#Talon-327"><span class="linenos">327</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__trump_suit</span>
</span><span id="Talon-328"><a href="#Talon-328"><span class="linenos">328</span></a>
</span><span id="Talon-329"><a href="#Talon-329"><span class="linenos">329</span></a>    <span class="k">def</span> <span class="nf">trump_card</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="Talon-330"><a href="#Talon-330"><span class="linenos">330</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the current trump card, i.e., the bottommost card.</span>
</span><span id="Talon-331"><a href="#Talon-331"><span class="linenos">331</span></a><span class="sd">        Or None in case this Talon is empty</span>
</span><span id="Talon-332"><a href="#Talon-332"><span class="linenos">332</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Talon-333"><a href="#Talon-333"><span class="linenos">333</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Talon-334"><a href="#Talon-334"><span class="linenos">334</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="Talon-335"><a href="#Talon-335"><span class="linenos">335</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="Talon-336"><a href="#Talon-336"><span class="linenos">336</span></a>
</span><span id="Talon-337"><a href="#Talon-337"><span class="linenos">337</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Talon-338"><a href="#Talon-338"><span class="linenos">338</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Talon(cards=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="si">}</span><span class="s2">, trump_suit=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__trump_suit</span><span class="si">}</span><span class="s2">)&quot;</span>
</span></pre></div>


            <div class="docstring"><p>The Talon contains the cards which have not yet been given to the players.</p>
</div>


                            <div id="Talon.__init__" class="classattr">
                                        <input id="Talon.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Talon</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">cards</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n"><a href="deck.html#Card">schnapsen.deck.Card</a></span><span class="p">]</span>,</span><span class="param">	<span class="n">trump_suit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="deck.html#Suit">schnapsen.deck.Suit</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="Talon.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Talon.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Talon.__init__-271"><a href="#Talon.__init__-271"><span class="linenos">271</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cards</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Card</span><span class="p">],</span> <span class="n">trump_suit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Suit</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Talon.__init__-272"><a href="#Talon.__init__-272"><span class="linenos">272</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Talon.__init__-273"><a href="#Talon.__init__-273"><span class="linenos">273</span></a><span class="sd">        The cards of the Talon. The last card of the iterable is the bottommost card.</span>
</span><span id="Talon.__init__-274"><a href="#Talon.__init__-274"><span class="linenos">274</span></a><span class="sd">        The first one is the top card (which will be taken is a card is drawn)</span>
</span><span id="Talon.__init__-275"><a href="#Talon.__init__-275"><span class="linenos">275</span></a><span class="sd">        The Trump card is at the bottom of the Talon.</span>
</span><span id="Talon.__init__-276"><a href="#Talon.__init__-276"><span class="linenos">276</span></a><span class="sd">        The trump_suit can also be specified explicitly, which is important when the Talon is empty.</span>
</span><span id="Talon.__init__-277"><a href="#Talon.__init__-277"><span class="linenos">277</span></a><span class="sd">        If the trump_suit is specified and there are cards, then the suit of the bottommost card must be the same.</span>
</span><span id="Talon.__init__-278"><a href="#Talon.__init__-278"><span class="linenos">278</span></a>
</span><span id="Talon.__init__-279"><a href="#Talon.__init__-279"><span class="linenos">279</span></a><span class="sd">        :param cards: The cards to be put on this talon, a defensive copy will be made.</span>
</span><span id="Talon.__init__-280"><a href="#Talon.__init__-280"><span class="linenos">280</span></a><span class="sd">        :param trump_suit: The trump suit of the Talon, important if there are no more cards to be taken.</span>
</span><span id="Talon.__init__-281"><a href="#Talon.__init__-281"><span class="linenos">281</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Talon.__init__-282"><a href="#Talon.__init__-282"><span class="linenos">282</span></a>        <span class="k">if</span> <span class="n">cards</span><span class="p">:</span>
</span><span id="Talon.__init__-283"><a href="#Talon.__init__-283"><span class="linenos">283</span></a>            <span class="n">trump_card_suit</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">cards</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">suit</span>
</span><span id="Talon.__init__-284"><a href="#Talon.__init__-284"><span class="linenos">284</span></a>            <span class="k">assert</span> <span class="ow">not</span> <span class="n">trump_suit</span> <span class="ow">or</span> <span class="n">trump_card_suit</span> <span class="o">==</span> <span class="n">trump_suit</span><span class="p">,</span> <span class="s2">&quot;If the trump suit is specified, and there are cards on the talon, the suit must be the same!&quot;</span>
</span><span id="Talon.__init__-285"><a href="#Talon.__init__-285"><span class="linenos">285</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__trump_suit</span> <span class="o">=</span> <span class="n">trump_card_suit</span>
</span><span id="Talon.__init__-286"><a href="#Talon.__init__-286"><span class="linenos">286</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Talon.__init__-287"><a href="#Talon.__init__-287"><span class="linenos">287</span></a>            <span class="k">assert</span> <span class="n">trump_suit</span>
</span><span id="Talon.__init__-288"><a href="#Talon.__init__-288"><span class="linenos">288</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__trump_suit</span> <span class="o">=</span> <span class="n">trump_suit</span>
</span><span id="Talon.__init__-289"><a href="#Talon.__init__-289"><span class="linenos">289</span></a>
</span><span id="Talon.__init__-290"><a href="#Talon.__init__-290"><span class="linenos">290</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">cards</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The cards of the Talon. The last card of the iterable is the bottommost card.
The first one is the top card (which will be taken is a card is drawn)
The Trump card is at the bottom of the Talon.
The trump_suit can also be specified explicitly, which is important when the Talon is empty.
If the trump_suit is specified and there are cards, then the suit of the bottommost card must be the same.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>cards</strong>:  The cards to be put on this talon, a defensive copy will be made.</li>
<li><strong>trump_suit</strong>:  The trump suit of the Talon, important if there are no more cards to be taken.</li>
</ul>
</div>


                            </div>
                            <div id="Talon.copy" class="classattr">
                                        <input id="Talon.copy-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">copy</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#Talon">schnapsen.game.Talon</a></span>:</span></span>

                <label class="view-source-button" for="Talon.copy-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Talon.copy"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Talon.copy-292"><a href="#Talon.copy-292"><span class="linenos">292</span></a>    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Talon&#39;</span><span class="p">:</span>
</span><span id="Talon.copy-293"><a href="#Talon.copy-293"><span class="linenos">293</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Talon.copy-294"><a href="#Talon.copy-294"><span class="linenos">294</span></a><span class="sd">        Create an independent copy of this talon.</span>
</span><span id="Talon.copy-295"><a href="#Talon.copy-295"><span class="linenos">295</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Talon.copy-296"><a href="#Talon.copy-296"><span class="linenos">296</span></a>        <span class="c1"># We do not need to make a copy of the cards as this happend in the constructor of Talon.</span>
</span><span id="Talon.copy-297"><a href="#Talon.copy-297"><span class="linenos">297</span></a>        <span class="k">return</span> <span class="n">Talon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__trump_suit</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Create an independent copy of this talon.</p>
</div>


                            </div>
                            <div id="Talon.trump_exchange" class="classattr">
                                        <input id="Talon.trump_exchange-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">trump_exchange</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">new_trump</span><span class="p">:</span> <span class="n"><a href="deck.html#Card">schnapsen.deck.Card</a></span></span><span class="return-annotation">) -> <span class="n"><a href="deck.html#Card">schnapsen.deck.Card</a></span>:</span></span>

                <label class="view-source-button" for="Talon.trump_exchange-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Talon.trump_exchange"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Talon.trump_exchange-299"><a href="#Talon.trump_exchange-299"><span class="linenos">299</span></a>    <span class="k">def</span> <span class="nf">trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_trump</span><span class="p">:</span> <span class="n">Card</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Card</span><span class="p">:</span>
</span><span id="Talon.trump_exchange-300"><a href="#Talon.trump_exchange-300"><span class="linenos">300</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Talon.trump_exchange-301"><a href="#Talon.trump_exchange-301"><span class="linenos">301</span></a><span class="sd">        perfom a trump-jack exchange. The card to be put as the trump card must be a Jack of the same suit.</span>
</span><span id="Talon.trump_exchange-302"><a href="#Talon.trump_exchange-302"><span class="linenos">302</span></a><span class="sd">        As a result, this Talon changed: the old trump is removed and the new_trump is at the bottom of the Talon</span>
</span><span id="Talon.trump_exchange-303"><a href="#Talon.trump_exchange-303"><span class="linenos">303</span></a>
</span><span id="Talon.trump_exchange-304"><a href="#Talon.trump_exchange-304"><span class="linenos">304</span></a><span class="sd">        We also require that there must be two cards on the Talon, which is always the case in a normal game of Schnapsen</span>
</span><span id="Talon.trump_exchange-305"><a href="#Talon.trump_exchange-305"><span class="linenos">305</span></a>
</span><span id="Talon.trump_exchange-306"><a href="#Talon.trump_exchange-306"><span class="linenos">306</span></a><span class="sd">        :param new_trump: The card to be put. It must be a Jack of the same suit as the card at the bottom</span>
</span><span id="Talon.trump_exchange-307"><a href="#Talon.trump_exchange-307"><span class="linenos">307</span></a>
</span><span id="Talon.trump_exchange-308"><a href="#Talon.trump_exchange-308"><span class="linenos">308</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Talon.trump_exchange-309"><a href="#Talon.trump_exchange-309"><span class="linenos">309</span></a>        <span class="k">assert</span> <span class="n">new_trump</span><span class="o">.</span><span class="n">rank</span> <span class="ow">is</span> <span class="n">Rank</span><span class="o">.</span><span class="n">JACK</span>
</span><span id="Talon.trump_exchange-310"><a href="#Talon.trump_exchange-310"><span class="linenos">310</span></a>        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span>
</span><span id="Talon.trump_exchange-311"><a href="#Talon.trump_exchange-311"><span class="linenos">311</span></a>        <span class="k">assert</span> <span class="n">new_trump</span><span class="o">.</span><span class="n">suit</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">suit</span>
</span><span id="Talon.trump_exchange-312"><a href="#Talon.trump_exchange-312"><span class="linenos">312</span></a>        <span class="n">old_trump</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="Talon.trump_exchange-313"><a href="#Talon.trump_exchange-313"><span class="linenos">313</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_trump</span><span class="p">)</span>
</span><span id="Talon.trump_exchange-314"><a href="#Talon.trump_exchange-314"><span class="linenos">314</span></a>        <span class="k">return</span> <span class="n">old_trump</span>
</span></pre></div>


            <div class="docstring"><p>perfom a trump-jack exchange. The card to be put as the trump card must be a Jack of the same suit.
As a result, this Talon changed: the old trump is removed and the new_trump is at the bottom of the Talon</p>

<p>We also require that there must be two cards on the Talon, which is always the case in a normal game of Schnapsen</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>new_trump</strong>:  The card to be put. It must be a Jack of the same suit as the card at the bottom</li>
</ul>
</div>


                            </div>
                            <div id="Talon.draw_cards" class="classattr">
                                        <input id="Talon.draw_cards-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">draw_cards</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">amount</span><span class="p">:</span> <span class="nb">int</span></span><span class="return-annotation">) -> <span class="n">Iterable</span><span class="p">[</span><span class="n"><a href="deck.html#Card">schnapsen.deck.Card</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Talon.draw_cards-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Talon.draw_cards"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Talon.draw_cards-316"><a href="#Talon.draw_cards-316"><span class="linenos">316</span></a>    <span class="k">def</span> <span class="nf">draw_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="Talon.draw_cards-317"><a href="#Talon.draw_cards-317"><span class="linenos">317</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Draw a card from this Talon. This does not change the talon, btu rather returns a talon with the change applied and the card drawn&quot;&quot;&quot;</span>
</span><span id="Talon.draw_cards-318"><a href="#Talon.draw_cards-318"><span class="linenos">318</span></a>        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">amount</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;There are only </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">)</span><span class="si">}</span><span class="s2"> on the Talon, but </span><span class="si">{</span><span class="n">amount</span><span class="si">}</span><span class="s2"> cards are requested&quot;</span>
</span><span id="Talon.draw_cards-319"><a href="#Talon.draw_cards-319"><span class="linenos">319</span></a>        <span class="n">draw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">[:</span><span class="n">amount</span><span class="p">]</span>
</span><span id="Talon.draw_cards-320"><a href="#Talon.draw_cards-320"><span class="linenos">320</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_cards</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">[</span><span class="n">amount</span><span class="p">:]</span>
</span><span id="Talon.draw_cards-321"><a href="#Talon.draw_cards-321"><span class="linenos">321</span></a>        <span class="k">return</span> <span class="n">draw</span>
</span></pre></div>


            <div class="docstring"><p>Draw a card from this Talon. This does not change the talon, btu rather returns a talon with the change applied and the card drawn</p>
</div>


                            </div>
                            <div id="Talon.trump_suit" class="classattr">
                                        <input id="Talon.trump_suit-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">trump_suit</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="deck.html#Suit">schnapsen.deck.Suit</a></span>:</span></span>

                <label class="view-source-button" for="Talon.trump_suit-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Talon.trump_suit"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Talon.trump_suit-323"><a href="#Talon.trump_suit-323"><span class="linenos">323</span></a>    <span class="k">def</span> <span class="nf">trump_suit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Suit</span><span class="p">:</span>
</span><span id="Talon.trump_suit-324"><a href="#Talon.trump_suit-324"><span class="linenos">324</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the suit of the trump card, i.e., the bottommost card.</span>
</span><span id="Talon.trump_suit-325"><a href="#Talon.trump_suit-325"><span class="linenos">325</span></a><span class="sd">        This still works, even when the Talon has become empty.</span>
</span><span id="Talon.trump_suit-326"><a href="#Talon.trump_suit-326"><span class="linenos">326</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Talon.trump_suit-327"><a href="#Talon.trump_suit-327"><span class="linenos">327</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__trump_suit</span>
</span></pre></div>


            <div class="docstring"><p>Return the suit of the trump card, i.e., the bottommost card.
This still works, even when the Talon has become empty.</p>
</div>


                            </div>
                            <div id="Talon.trump_card" class="classattr">
                                        <input id="Talon.trump_card-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">trump_card</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="deck.html#Card">schnapsen.deck.Card</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Talon.trump_card-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Talon.trump_card"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Talon.trump_card-329"><a href="#Talon.trump_card-329"><span class="linenos">329</span></a>    <span class="k">def</span> <span class="nf">trump_card</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="Talon.trump_card-330"><a href="#Talon.trump_card-330"><span class="linenos">330</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the current trump card, i.e., the bottommost card.</span>
</span><span id="Talon.trump_card-331"><a href="#Talon.trump_card-331"><span class="linenos">331</span></a><span class="sd">        Or None in case this Talon is empty</span>
</span><span id="Talon.trump_card-332"><a href="#Talon.trump_card-332"><span class="linenos">332</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Talon.trump_card-333"><a href="#Talon.trump_card-333"><span class="linenos">333</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Talon.trump_card-334"><a href="#Talon.trump_card-334"><span class="linenos">334</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cards</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="Talon.trump_card-335"><a href="#Talon.trump_card-335"><span class="linenos">335</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>Returns the current trump card, i.e., the bottommost card.
Or None in case this Talon is empty</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="deck.html#OrderedCardCollection">schnapsen.deck.OrderedCardCollection</a></dt>
                                <dd id="Talon.is_empty" class="function"><a href="deck.html#OrderedCardCollection.is_empty">is_empty</a></dd>
                <dd id="Talon.get_cards" class="function"><a href="deck.html#OrderedCardCollection.get_cards">get_cards</a></dd>
                <dd id="Talon.filter_suit" class="function"><a href="deck.html#OrderedCardCollection.filter_suit">filter_suit</a></dd>
                <dd id="Talon.filter_rank" class="function"><a href="deck.html#OrderedCardCollection.filter_rank">filter_rank</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="Trick">
                            <input id="Trick-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass(frozen=True)</div>

    <span class="def">class</span>
    <span class="name">Trick</span><wbr>(<span class="base">abc.ABC</span>):

                <label class="view-source-button" for="Trick-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Trick"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Trick-341"><a href="#Trick-341"><span class="linenos">341</span></a><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Trick-342"><a href="#Trick-342"><span class="linenos">342</span></a><span class="k">class</span> <span class="nc">Trick</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="Trick-343"><a href="#Trick-343"><span class="linenos">343</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Trick-344"><a href="#Trick-344"><span class="linenos">344</span></a><span class="sd">    A complete trick. This is, the move of the leader and if that was not an exchange, the move of the follower.</span>
</span><span id="Trick-345"><a href="#Trick-345"><span class="linenos">345</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Trick-346"><a href="#Trick-346"><span class="linenos">346</span></a>
</span><span id="Trick-347"><a href="#Trick-347"><span class="linenos">347</span></a>    <span class="n">cards</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Card</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="nb">repr</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="nb">hash</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="Trick-348"><a href="#Trick-348"><span class="linenos">348</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;All cards used as part of this trick. This includes cards used in marriages&quot;&quot;&quot;</span>
</span><span id="Trick-349"><a href="#Trick-349"><span class="linenos">349</span></a>
</span><span id="Trick-350"><a href="#Trick-350"><span class="linenos">350</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="Trick-351"><a href="#Trick-351"><span class="linenos">351</span></a>    <span class="k">def</span> <span class="nf">is_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Trick-352"><a href="#Trick-352"><span class="linenos">352</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Trick-353"><a href="#Trick-353"><span class="linenos">353</span></a><span class="sd">        Returns True if this is a trump exchange</span>
</span><span id="Trick-354"><a href="#Trick-354"><span class="linenos">354</span></a>
</span><span id="Trick-355"><a href="#Trick-355"><span class="linenos">355</span></a><span class="sd">        :returns: True in case this was a trump exchange</span>
</span><span id="Trick-356"><a href="#Trick-356"><span class="linenos">356</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Trick-357"><a href="#Trick-357"><span class="linenos">357</span></a>
</span><span id="Trick-358"><a href="#Trick-358"><span class="linenos">358</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="Trick-359"><a href="#Trick-359"><span class="linenos">359</span></a>    <span class="k">def</span> <span class="nf">as_partial</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;PartialTrick&#39;</span><span class="p">:</span>
</span><span id="Trick-360"><a href="#Trick-360"><span class="linenos">360</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Trick-361"><a href="#Trick-361"><span class="linenos">361</span></a><span class="sd">        Returns the first part of this trick. Raises an Exceptption if this is not a Trick with two parts</span>
</span><span id="Trick-362"><a href="#Trick-362"><span class="linenos">362</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Trick-363"><a href="#Trick-363"><span class="linenos">363</span></a>
</span><span id="Trick-364"><a href="#Trick-364"><span class="linenos">364</span></a>    <span class="k">def</span> <span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">__name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="Trick-365"><a href="#Trick-365"><span class="linenos">365</span></a>        <span class="k">if</span> <span class="n">__name</span> <span class="o">==</span> <span class="s2">&quot;cards&quot;</span><span class="p">:</span>
</span><span id="Trick-366"><a href="#Trick-366"><span class="linenos">366</span></a>            <span class="c1"># We call the method to compute the card list</span>
</span><span id="Trick-367"><a href="#Trick-367"><span class="linenos">367</span></a>            <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_cards&quot;</span><span class="p">)()</span>
</span><span id="Trick-368"><a href="#Trick-368"><span class="linenos">368</span></a>        <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">__name</span><span class="p">)</span>
</span><span id="Trick-369"><a href="#Trick-369"><span class="linenos">369</span></a>
</span><span id="Trick-370"><a href="#Trick-370"><span class="linenos">370</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="Trick-371"><a href="#Trick-371"><span class="linenos">371</span></a>    <span class="k">def</span> <span class="nf">_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="Trick-372"><a href="#Trick-372"><span class="linenos">372</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Trick-373"><a href="#Trick-373"><span class="linenos">373</span></a><span class="sd">        Get all cards used in this tick. This method should not be called directly.</span>
</span><span id="Trick-374"><a href="#Trick-374"><span class="linenos">374</span></a><span class="sd">        Use the cards property instead.</span>
</span><span id="Trick-375"><a href="#Trick-375"><span class="linenos">375</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>A complete trick. This is, the move of the leader and if that was not an exchange, the move of the follower.</p>
</div>


                            <div id="Trick.cards" class="classattr">
                                <div class="attr variable">
            <span class="name">cards</span><span class="annotation">: Iterable[<a href="deck.html#Card">schnapsen.deck.Card</a>]</span>

        
    </div>
    <a class="headerlink" href="#Trick.cards"></a>
    
            <div class="docstring"><p>All cards used as part of this trick. This includes cards used in marriages</p>
</div>


                            </div>
                            <div id="Trick.is_trump_exchange" class="classattr">
                                        <input id="Trick.is_trump_exchange-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">is_trump_exchange</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="Trick.is_trump_exchange-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Trick.is_trump_exchange"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Trick.is_trump_exchange-350"><a href="#Trick.is_trump_exchange-350"><span class="linenos">350</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="Trick.is_trump_exchange-351"><a href="#Trick.is_trump_exchange-351"><span class="linenos">351</span></a>    <span class="k">def</span> <span class="nf">is_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Trick.is_trump_exchange-352"><a href="#Trick.is_trump_exchange-352"><span class="linenos">352</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Trick.is_trump_exchange-353"><a href="#Trick.is_trump_exchange-353"><span class="linenos">353</span></a><span class="sd">        Returns True if this is a trump exchange</span>
</span><span id="Trick.is_trump_exchange-354"><a href="#Trick.is_trump_exchange-354"><span class="linenos">354</span></a>
</span><span id="Trick.is_trump_exchange-355"><a href="#Trick.is_trump_exchange-355"><span class="linenos">355</span></a><span class="sd">        :returns: True in case this was a trump exchange</span>
</span><span id="Trick.is_trump_exchange-356"><a href="#Trick.is_trump_exchange-356"><span class="linenos">356</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Returns True if this is a trump exchange</p>

<p>:returns: True in case this was a trump exchange</p>
</div>


                            </div>
                            <div id="Trick.as_partial" class="classattr">
                                        <input id="Trick.as_partial-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">as_partial</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#PartialTrick">schnapsen.game.PartialTrick</a></span>:</span></span>

                <label class="view-source-button" for="Trick.as_partial-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Trick.as_partial"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Trick.as_partial-358"><a href="#Trick.as_partial-358"><span class="linenos">358</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="Trick.as_partial-359"><a href="#Trick.as_partial-359"><span class="linenos">359</span></a>    <span class="k">def</span> <span class="nf">as_partial</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;PartialTrick&#39;</span><span class="p">:</span>
</span><span id="Trick.as_partial-360"><a href="#Trick.as_partial-360"><span class="linenos">360</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Trick.as_partial-361"><a href="#Trick.as_partial-361"><span class="linenos">361</span></a><span class="sd">        Returns the first part of this trick. Raises an Exceptption if this is not a Trick with two parts</span>
</span><span id="Trick.as_partial-362"><a href="#Trick.as_partial-362"><span class="linenos">362</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Returns the first part of this trick. Raises an Exceptption if this is not a Trick with two parts</p>
</div>


                            </div>
                </section>
                <section id="ExchangeTrick">
                            <input id="ExchangeTrick-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass(frozen=True)</div>

    <span class="def">class</span>
    <span class="name">ExchangeTrick</span><wbr>(<span class="base"><a href="#Trick">Trick</a></span>):

                <label class="view-source-button" for="ExchangeTrick-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExchangeTrick"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExchangeTrick-378"><a href="#ExchangeTrick-378"><span class="linenos">378</span></a><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="ExchangeTrick-379"><a href="#ExchangeTrick-379"><span class="linenos">379</span></a><span class="k">class</span> <span class="nc">ExchangeTrick</span><span class="p">(</span><span class="n">Trick</span><span class="p">):</span>
</span><span id="ExchangeTrick-380"><a href="#ExchangeTrick-380"><span class="linenos">380</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExchangeTrick-381"><a href="#ExchangeTrick-381"><span class="linenos">381</span></a><span class="sd">    A Trick in which the player does a trump exchange.</span>
</span><span id="ExchangeTrick-382"><a href="#ExchangeTrick-382"><span class="linenos">382</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="ExchangeTrick-383"><a href="#ExchangeTrick-383"><span class="linenos">383</span></a>
</span><span id="ExchangeTrick-384"><a href="#ExchangeTrick-384"><span class="linenos">384</span></a>    <span class="n">exchange</span><span class="p">:</span> <span class="n">Trump_Exchange</span>
</span><span id="ExchangeTrick-385"><a href="#ExchangeTrick-385"><span class="linenos">385</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A trump exchange by the leading player&quot;&quot;&quot;</span>
</span><span id="ExchangeTrick-386"><a href="#ExchangeTrick-386"><span class="linenos">386</span></a>
</span><span id="ExchangeTrick-387"><a href="#ExchangeTrick-387"><span class="linenos">387</span></a>    <span class="n">trump_card</span><span class="p">:</span> <span class="n">Card</span>
</span><span id="ExchangeTrick-388"><a href="#ExchangeTrick-388"><span class="linenos">388</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The card at the bottom of the talon&quot;&quot;&quot;</span>
</span><span id="ExchangeTrick-389"><a href="#ExchangeTrick-389"><span class="linenos">389</span></a>
</span><span id="ExchangeTrick-390"><a href="#ExchangeTrick-390"><span class="linenos">390</span></a>    <span class="k">def</span> <span class="nf">is_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="ExchangeTrick-391"><a href="#ExchangeTrick-391"><span class="linenos">391</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="ExchangeTrick-392"><a href="#ExchangeTrick-392"><span class="linenos">392</span></a>
</span><span id="ExchangeTrick-393"><a href="#ExchangeTrick-393"><span class="linenos">393</span></a>    <span class="k">def</span> <span class="nf">as_partial</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;PartialTrick&#39;</span><span class="p">:</span>
</span><span id="ExchangeTrick-394"><a href="#ExchangeTrick-394"><span class="linenos">394</span></a>        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;An Exchange Trick does not have a first part&quot;</span><span class="p">)</span>
</span><span id="ExchangeTrick-395"><a href="#ExchangeTrick-395"><span class="linenos">395</span></a>
</span><span id="ExchangeTrick-396"><a href="#ExchangeTrick-396"><span class="linenos">396</span></a>    <span class="k">def</span> <span class="nf">_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="ExchangeTrick-397"><a href="#ExchangeTrick-397"><span class="linenos">397</span></a>        <span class="n">exchange</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exchange</span><span class="o">.</span><span class="n">cards</span>
</span><span id="ExchangeTrick-398"><a href="#ExchangeTrick-398"><span class="linenos">398</span></a>        <span class="n">exchange</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">trump_card</span><span class="p">)</span>
</span><span id="ExchangeTrick-399"><a href="#ExchangeTrick-399"><span class="linenos">399</span></a>        <span class="k">return</span> <span class="n">exchange</span>
</span></pre></div>


            <div class="docstring"><p>A Trick in which the player does a trump exchange.</p>
</div>


                            <div id="ExchangeTrick.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">ExchangeTrick</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">exchange</span><span class="p">:</span> <span class="n"><a href="#Trump_Exchange">schnapsen.game.Trump_Exchange</a></span>,</span><span class="param">	<span class="n">trump_card</span><span class="p">:</span> <span class="n"><a href="deck.html#Card">schnapsen.deck.Card</a></span></span>)</span>

        
    </div>
    <a class="headerlink" href="#ExchangeTrick.__init__"></a>
    
    

                            </div>
                            <div id="ExchangeTrick.exchange" class="classattr">
                                <div class="attr variable">
            <span class="name">exchange</span><span class="annotation">: <a href="#Trump_Exchange">schnapsen.game.Trump_Exchange</a></span>

        
    </div>
    <a class="headerlink" href="#ExchangeTrick.exchange"></a>
    
            <div class="docstring"><p>A trump exchange by the leading player</p>
</div>


                            </div>
                            <div id="ExchangeTrick.trump_card" class="classattr">
                                <div class="attr variable">
            <span class="name">trump_card</span><span class="annotation">: <a href="deck.html#Card">schnapsen.deck.Card</a></span>

        
    </div>
    <a class="headerlink" href="#ExchangeTrick.trump_card"></a>
    
            <div class="docstring"><p>The card at the bottom of the talon</p>
</div>


                            </div>
                            <div id="ExchangeTrick.is_trump_exchange" class="classattr">
                                        <input id="ExchangeTrick.is_trump_exchange-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">is_trump_exchange</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="ExchangeTrick.is_trump_exchange-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExchangeTrick.is_trump_exchange"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExchangeTrick.is_trump_exchange-390"><a href="#ExchangeTrick.is_trump_exchange-390"><span class="linenos">390</span></a>    <span class="k">def</span> <span class="nf">is_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="ExchangeTrick.is_trump_exchange-391"><a href="#ExchangeTrick.is_trump_exchange-391"><span class="linenos">391</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Returns True if this is a trump exchange</p>

<p>:returns: True in case this was a trump exchange</p>
</div>


                            </div>
                            <div id="ExchangeTrick.as_partial" class="classattr">
                                        <input id="ExchangeTrick.as_partial-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">as_partial</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#PartialTrick">schnapsen.game.PartialTrick</a></span>:</span></span>

                <label class="view-source-button" for="ExchangeTrick.as_partial-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExchangeTrick.as_partial"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExchangeTrick.as_partial-393"><a href="#ExchangeTrick.as_partial-393"><span class="linenos">393</span></a>    <span class="k">def</span> <span class="nf">as_partial</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;PartialTrick&#39;</span><span class="p">:</span>
</span><span id="ExchangeTrick.as_partial-394"><a href="#ExchangeTrick.as_partial-394"><span class="linenos">394</span></a>        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;An Exchange Trick does not have a first part&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns the first part of this trick. Raises an Exceptption if this is not a Trick with two parts</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#Trick">Trick</a></dt>
                                <dd id="ExchangeTrick.cards" class="variable"><a href="#Trick.cards">cards</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="PartialTrick">
                            <input id="PartialTrick-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass(frozen=True)</div>

    <span class="def">class</span>
    <span class="name">PartialTrick</span>:

                <label class="view-source-button" for="PartialTrick-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PartialTrick"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PartialTrick-402"><a href="#PartialTrick-402"><span class="linenos">402</span></a><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="PartialTrick-403"><a href="#PartialTrick-403"><span class="linenos">403</span></a><span class="k">class</span> <span class="nc">PartialTrick</span><span class="p">:</span>
</span><span id="PartialTrick-404"><a href="#PartialTrick-404"><span class="linenos">404</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PartialTrick-405"><a href="#PartialTrick-405"><span class="linenos">405</span></a><span class="sd">    A partial trick is the move(s) played by the leading player.</span>
</span><span id="PartialTrick-406"><a href="#PartialTrick-406"><span class="linenos">406</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="PartialTrick-407"><a href="#PartialTrick-407"><span class="linenos">407</span></a>    <span class="n">leader_move</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">RegularMove</span><span class="p">,</span> <span class="n">Marriage</span><span class="p">]</span>
</span><span id="PartialTrick-408"><a href="#PartialTrick-408"><span class="linenos">408</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The move played by the leader of the trick&quot;&quot;&quot;</span>
</span><span id="PartialTrick-409"><a href="#PartialTrick-409"><span class="linenos">409</span></a>
</span><span id="PartialTrick-410"><a href="#PartialTrick-410"><span class="linenos">410</span></a>    <span class="k">def</span> <span class="nf">is_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="PartialTrick-411"><a href="#PartialTrick-411"><span class="linenos">411</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PartialTrick-412"><a href="#PartialTrick-412"><span class="linenos">412</span></a><span class="sd">        is this PartialTrick a Trump exchange?</span>
</span><span id="PartialTrick-413"><a href="#PartialTrick-413"><span class="linenos">413</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PartialTrick-414"><a href="#PartialTrick-414"><span class="linenos">414</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="PartialTrick-415"><a href="#PartialTrick-415"><span class="linenos">415</span></a>
</span><span id="PartialTrick-416"><a href="#PartialTrick-416"><span class="linenos">416</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="PartialTrick-417"><a href="#PartialTrick-417"><span class="linenos">417</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;PartialTrick(leader_move=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">leader_move</span><span class="si">}</span><span class="s2">)&quot;</span>
</span></pre></div>


            <div class="docstring"><p>A partial trick is the move(s) played by the leading player.</p>
</div>


                            <div id="PartialTrick.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">PartialTrick</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">leader_move</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n"><a href="#RegularMove">schnapsen.game.RegularMove</a></span><span class="p">,</span> <span class="n"><a href="#Marriage">schnapsen.game.Marriage</a></span><span class="p">]</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#PartialTrick.__init__"></a>
    
    

                            </div>
                            <div id="PartialTrick.leader_move" class="classattr">
                                <div class="attr variable">
            <span class="name">leader_move</span><span class="annotation">: Union[<a href="#RegularMove">schnapsen.game.RegularMove</a>, <a href="#Marriage">schnapsen.game.Marriage</a>]</span>

        
    </div>
    <a class="headerlink" href="#PartialTrick.leader_move"></a>
    
            <div class="docstring"><p>The move played by the leader of the trick</p>
</div>


                            </div>
                            <div id="PartialTrick.is_trump_exchange" class="classattr">
                                        <input id="PartialTrick.is_trump_exchange-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">is_trump_exchange</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="PartialTrick.is_trump_exchange-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PartialTrick.is_trump_exchange"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PartialTrick.is_trump_exchange-410"><a href="#PartialTrick.is_trump_exchange-410"><span class="linenos">410</span></a>    <span class="k">def</span> <span class="nf">is_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="PartialTrick.is_trump_exchange-411"><a href="#PartialTrick.is_trump_exchange-411"><span class="linenos">411</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PartialTrick.is_trump_exchange-412"><a href="#PartialTrick.is_trump_exchange-412"><span class="linenos">412</span></a><span class="sd">        is this PartialTrick a Trump exchange?</span>
</span><span id="PartialTrick.is_trump_exchange-413"><a href="#PartialTrick.is_trump_exchange-413"><span class="linenos">413</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PartialTrick.is_trump_exchange-414"><a href="#PartialTrick.is_trump_exchange-414"><span class="linenos">414</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>is this PartialTrick a Trump exchange?</p>
</div>


                            </div>
                </section>
                <section id="RegularTrick">
                            <input id="RegularTrick-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass(frozen=True)</div>

    <span class="def">class</span>
    <span class="name">RegularTrick</span><wbr>(<span class="base"><a href="#Trick">Trick</a></span>, <span class="base"><a href="#PartialTrick">PartialTrick</a></span>):

                <label class="view-source-button" for="RegularTrick-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RegularTrick"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RegularTrick-420"><a href="#RegularTrick-420"><span class="linenos">420</span></a><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="RegularTrick-421"><a href="#RegularTrick-421"><span class="linenos">421</span></a><span class="k">class</span> <span class="nc">RegularTrick</span><span class="p">(</span><span class="n">Trick</span><span class="p">,</span> <span class="n">PartialTrick</span><span class="p">):</span>
</span><span id="RegularTrick-422"><a href="#RegularTrick-422"><span class="linenos">422</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RegularTrick-423"><a href="#RegularTrick-423"><span class="linenos">423</span></a><span class="sd">    A regular trick, with a move by the leader and a move by the follower</span>
</span><span id="RegularTrick-424"><a href="#RegularTrick-424"><span class="linenos">424</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="RegularTrick-425"><a href="#RegularTrick-425"><span class="linenos">425</span></a>    <span class="n">follower_move</span><span class="p">:</span> <span class="n">RegularMove</span>
</span><span id="RegularTrick-426"><a href="#RegularTrick-426"><span class="linenos">426</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The move played by the follower&quot;&quot;&quot;</span>
</span><span id="RegularTrick-427"><a href="#RegularTrick-427"><span class="linenos">427</span></a>
</span><span id="RegularTrick-428"><a href="#RegularTrick-428"><span class="linenos">428</span></a>    <span class="k">def</span> <span class="nf">is_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="RegularTrick-429"><a href="#RegularTrick-429"><span class="linenos">429</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="RegularTrick-430"><a href="#RegularTrick-430"><span class="linenos">430</span></a>
</span><span id="RegularTrick-431"><a href="#RegularTrick-431"><span class="linenos">431</span></a>    <span class="k">def</span> <span class="nf">as_partial</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartialTrick</span><span class="p">:</span>
</span><span id="RegularTrick-432"><a href="#RegularTrick-432"><span class="linenos">432</span></a>        <span class="k">return</span> <span class="n">PartialTrick</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="RegularTrick-433"><a href="#RegularTrick-433"><span class="linenos">433</span></a>
</span><span id="RegularTrick-434"><a href="#RegularTrick-434"><span class="linenos">434</span></a>    <span class="k">def</span> <span class="nf">_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="RegularTrick-435"><a href="#RegularTrick-435"><span class="linenos">435</span></a>        <span class="k">return</span> <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">leader_move</span><span class="o">.</span><span class="n">cards</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">follower_move</span><span class="o">.</span><span class="n">cards</span><span class="p">)</span>
</span><span id="RegularTrick-436"><a href="#RegularTrick-436"><span class="linenos">436</span></a>
</span><span id="RegularTrick-437"><a href="#RegularTrick-437"><span class="linenos">437</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="RegularTrick-438"><a href="#RegularTrick-438"><span class="linenos">438</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;RegularTrick(leader_move=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">leader_move</span><span class="si">}</span><span class="s2">, follower_move=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">follower_move</span><span class="si">}</span><span class="s2">)&quot;</span>
</span></pre></div>


            <div class="docstring"><p>A regular trick, with a move by the leader and a move by the follower</p>
</div>


                            <div id="RegularTrick.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">RegularTrick</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">leader_move</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n"><a href="#RegularMove">schnapsen.game.RegularMove</a></span><span class="p">,</span> <span class="n"><a href="#Marriage">schnapsen.game.Marriage</a></span><span class="p">]</span>,</span><span class="param">	<span class="n">follower_move</span><span class="p">:</span> <span class="n"><a href="#RegularMove">schnapsen.game.RegularMove</a></span></span>)</span>

        
    </div>
    <a class="headerlink" href="#RegularTrick.__init__"></a>
    
    

                            </div>
                            <div id="RegularTrick.follower_move" class="classattr">
                                <div class="attr variable">
            <span class="name">follower_move</span><span class="annotation">: <a href="#RegularMove">schnapsen.game.RegularMove</a></span>

        
    </div>
    <a class="headerlink" href="#RegularTrick.follower_move"></a>
    
            <div class="docstring"><p>The move played by the follower</p>
</div>


                            </div>
                            <div id="RegularTrick.is_trump_exchange" class="classattr">
                                        <input id="RegularTrick.is_trump_exchange-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">is_trump_exchange</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="RegularTrick.is_trump_exchange-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RegularTrick.is_trump_exchange"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RegularTrick.is_trump_exchange-428"><a href="#RegularTrick.is_trump_exchange-428"><span class="linenos">428</span></a>    <span class="k">def</span> <span class="nf">is_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="RegularTrick.is_trump_exchange-429"><a href="#RegularTrick.is_trump_exchange-429"><span class="linenos">429</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Returns True if this is a trump exchange</p>

<p>:returns: True in case this was a trump exchange</p>
</div>


                            </div>
                            <div id="RegularTrick.as_partial" class="classattr">
                                        <input id="RegularTrick.as_partial-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">as_partial</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#PartialTrick">schnapsen.game.PartialTrick</a></span>:</span></span>

                <label class="view-source-button" for="RegularTrick.as_partial-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RegularTrick.as_partial"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RegularTrick.as_partial-431"><a href="#RegularTrick.as_partial-431"><span class="linenos">431</span></a>    <span class="k">def</span> <span class="nf">as_partial</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartialTrick</span><span class="p">:</span>
</span><span id="RegularTrick.as_partial-432"><a href="#RegularTrick.as_partial-432"><span class="linenos">432</span></a>        <span class="k">return</span> <span class="n">PartialTrick</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">leader_move</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns the first part of this trick. Raises an Exceptption if this is not a Trick with two parts</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#Trick">Trick</a></dt>
                                <dd id="RegularTrick.cards" class="variable"><a href="#Trick.cards">cards</a></dd>

            </div>
            <div><dt><a href="#PartialTrick">PartialTrick</a></dt>
                                <dd id="RegularTrick.leader_move" class="variable"><a href="#PartialTrick.leader_move">leader_move</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="Score">
                            <input id="Score-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass(frozen=True)</div>

    <span class="def">class</span>
    <span class="name">Score</span>:

                <label class="view-source-button" for="Score-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Score"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Score-441"><a href="#Score-441"><span class="linenos">441</span></a><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Score-442"><a href="#Score-442"><span class="linenos">442</span></a><span class="k">class</span> <span class="nc">Score</span><span class="p">:</span>
</span><span id="Score-443"><a href="#Score-443"><span class="linenos">443</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Score-444"><a href="#Score-444"><span class="linenos">444</span></a><span class="sd">    The score of one of the bots. This consists of the current points and potential pending points because of an earlier played marriage.</span>
</span><span id="Score-445"><a href="#Score-445"><span class="linenos">445</span></a><span class="sd">    Note that the socre object is immutable and supports the `+` operator, so it can be used somewhat as a usual number.</span>
</span><span id="Score-446"><a href="#Score-446"><span class="linenos">446</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Score-447"><a href="#Score-447"><span class="linenos">447</span></a>    <span class="n">direct_points</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Score-448"><a href="#Score-448"><span class="linenos">448</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The current number of points&quot;&quot;&quot;</span>
</span><span id="Score-449"><a href="#Score-449"><span class="linenos">449</span></a>    <span class="n">pending_points</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Score-450"><a href="#Score-450"><span class="linenos">450</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Points to be applied in the future because of a past marriage&quot;&quot;&quot;</span>
</span><span id="Score-451"><a href="#Score-451"><span class="linenos">451</span></a>
</span><span id="Score-452"><a href="#Score-452"><span class="linenos">452</span></a>    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s1">&#39;Score&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Score&#39;</span><span class="p">:</span>
</span><span id="Score-453"><a href="#Score-453"><span class="linenos">453</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Score-454"><a href="#Score-454"><span class="linenos">454</span></a><span class="sd">        Adds two scores together. Direct points and pending points are added separately.</span>
</span><span id="Score-455"><a href="#Score-455"><span class="linenos">455</span></a>
</span><span id="Score-456"><a href="#Score-456"><span class="linenos">456</span></a><span class="sd">        :param other:  The score to be added to the current one.</span>
</span><span id="Score-457"><a href="#Score-457"><span class="linenos">457</span></a><span class="sd">        :returns: A new score object with the points of the current score and the other combined</span>
</span><span id="Score-458"><a href="#Score-458"><span class="linenos">458</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Score-459"><a href="#Score-459"><span class="linenos">459</span></a>        <span class="n">total_direct_points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">direct_points</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">direct_points</span>
</span><span id="Score-460"><a href="#Score-460"><span class="linenos">460</span></a>        <span class="n">total_pending_points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pending_points</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">pending_points</span>
</span><span id="Score-461"><a href="#Score-461"><span class="linenos">461</span></a>        <span class="k">return</span> <span class="n">Score</span><span class="p">(</span><span class="n">total_direct_points</span><span class="p">,</span> <span class="n">total_pending_points</span><span class="p">)</span>
</span><span id="Score-462"><a href="#Score-462"><span class="linenos">462</span></a>
</span><span id="Score-463"><a href="#Score-463"><span class="linenos">463</span></a>    <span class="k">def</span> <span class="nf">redeem_pending_points</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Score&#39;</span><span class="p">:</span>
</span><span id="Score-464"><a href="#Score-464"><span class="linenos">464</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Score-465"><a href="#Score-465"><span class="linenos">465</span></a><span class="sd">        Redeem the pending points</span>
</span><span id="Score-466"><a href="#Score-466"><span class="linenos">466</span></a>
</span><span id="Score-467"><a href="#Score-467"><span class="linenos">467</span></a><span class="sd">        :returns: A new score object with the pending points added to the direct points and the pending points set to zero.</span>
</span><span id="Score-468"><a href="#Score-468"><span class="linenos">468</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Score-469"><a href="#Score-469"><span class="linenos">469</span></a>        <span class="k">return</span> <span class="n">Score</span><span class="p">(</span><span class="n">direct_points</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">direct_points</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">pending_points</span><span class="p">,</span> <span class="n">pending_points</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="Score-470"><a href="#Score-470"><span class="linenos">470</span></a>
</span><span id="Score-471"><a href="#Score-471"><span class="linenos">471</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Score-472"><a href="#Score-472"><span class="linenos">472</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Score(direct_points=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">direct_points</span><span class="si">}</span><span class="s2">, pending_points=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pending_points</span><span class="si">}</span><span class="s2">)&quot;</span>
</span></pre></div>


            <div class="docstring"><p>The score of one of the bots. This consists of the current points and potential pending points because of an earlier played marriage.
Note that the socre object is immutable and supports the <code>+</code> operator, so it can be used somewhat as a usual number.</p>
</div>


                            <div id="Score.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">Score</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">direct_points</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>, </span><span class="param"><span class="n">pending_points</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#Score.__init__"></a>
    
    

                            </div>
                            <div id="Score.direct_points" class="classattr">
                                <div class="attr variable">
            <span class="name">direct_points</span><span class="annotation">: int</span><span class="default_value"> = 0</span>

        
    </div>
    <a class="headerlink" href="#Score.direct_points"></a>
    
            <div class="docstring"><p>The current number of points</p>
</div>


                            </div>
                            <div id="Score.pending_points" class="classattr">
                                <div class="attr variable">
            <span class="name">pending_points</span><span class="annotation">: int</span><span class="default_value"> = 0</span>

        
    </div>
    <a class="headerlink" href="#Score.pending_points"></a>
    
            <div class="docstring"><p>Points to be applied in the future because of a past marriage</p>
</div>


                            </div>
                            <div id="Score.redeem_pending_points" class="classattr">
                                        <input id="Score.redeem_pending_points-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">redeem_pending_points</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#Score">schnapsen.game.Score</a></span>:</span></span>

                <label class="view-source-button" for="Score.redeem_pending_points-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Score.redeem_pending_points"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Score.redeem_pending_points-463"><a href="#Score.redeem_pending_points-463"><span class="linenos">463</span></a>    <span class="k">def</span> <span class="nf">redeem_pending_points</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Score&#39;</span><span class="p">:</span>
</span><span id="Score.redeem_pending_points-464"><a href="#Score.redeem_pending_points-464"><span class="linenos">464</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Score.redeem_pending_points-465"><a href="#Score.redeem_pending_points-465"><span class="linenos">465</span></a><span class="sd">        Redeem the pending points</span>
</span><span id="Score.redeem_pending_points-466"><a href="#Score.redeem_pending_points-466"><span class="linenos">466</span></a>
</span><span id="Score.redeem_pending_points-467"><a href="#Score.redeem_pending_points-467"><span class="linenos">467</span></a><span class="sd">        :returns: A new score object with the pending points added to the direct points and the pending points set to zero.</span>
</span><span id="Score.redeem_pending_points-468"><a href="#Score.redeem_pending_points-468"><span class="linenos">468</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Score.redeem_pending_points-469"><a href="#Score.redeem_pending_points-469"><span class="linenos">469</span></a>        <span class="k">return</span> <span class="n">Score</span><span class="p">(</span><span class="n">direct_points</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">direct_points</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">pending_points</span><span class="p">,</span> <span class="n">pending_points</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Redeem the pending points</p>

<p>:returns: A new score object with the pending points added to the direct points and the pending points set to zero.</p>
</div>


                            </div>
                </section>
                <section id="GamePhase">
                            <input id="GamePhase-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">GamePhase</span><wbr>(<span class="base">enum.Enum</span>):

                <label class="view-source-button" for="GamePhase-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GamePhase"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GamePhase-475"><a href="#GamePhase-475"><span class="linenos">475</span></a><span class="k">class</span> <span class="nc">GamePhase</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
</span><span id="GamePhase-476"><a href="#GamePhase-476"><span class="linenos">476</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GamePhase-477"><a href="#GamePhase-477"><span class="linenos">477</span></a><span class="sd">    An indicator about the phase of the game. This is used because in Schnapsen, the rules change when the game enters the second phase.</span>
</span><span id="GamePhase-478"><a href="#GamePhase-478"><span class="linenos">478</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="GamePhase-479"><a href="#GamePhase-479"><span class="linenos">479</span></a>    <span class="n">ONE</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="GamePhase-480"><a href="#GamePhase-480"><span class="linenos">480</span></a>    <span class="n">TWO</span> <span class="o">=</span> <span class="mi">2</span>
</span></pre></div>


            <div class="docstring"><p>An indicator about the phase of the game. This is used because in Schnapsen, the rules change when the game enters the second phase.</p>
</div>


                            <div id="GamePhase.ONE" class="classattr">
                                <div class="attr variable">
            <span class="name">ONE</span><span class="default_value"> = &lt;<a href="#GamePhase.ONE">GamePhase.ONE</a>: 1&gt;</span>

        
    </div>
    <a class="headerlink" href="#GamePhase.ONE"></a>
    
    

                            </div>
                            <div id="GamePhase.TWO" class="classattr">
                                <div class="attr variable">
            <span class="name">TWO</span><span class="default_value"> = &lt;<a href="#GamePhase.TWO">GamePhase.TWO</a>: 2&gt;</span>

        
    </div>
    <a class="headerlink" href="#GamePhase.TWO"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>enum.Enum</dt>
                                <dd id="GamePhase.name" class="variable">name</dd>
                <dd id="GamePhase.value" class="variable">value</dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="BotState">
                            <input id="BotState-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass</div>

    <span class="def">class</span>
    <span class="name">BotState</span>:

                <label class="view-source-button" for="BotState-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BotState"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BotState-483"><a href="#BotState-483"><span class="linenos">483</span></a><span class="nd">@dataclass</span>
</span><span id="BotState-484"><a href="#BotState-484"><span class="linenos">484</span></a><span class="k">class</span> <span class="nc">BotState</span><span class="p">:</span>
</span><span id="BotState-485"><a href="#BotState-485"><span class="linenos">485</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A bot with its implementation and current state in a game&quot;&quot;&quot;</span>
</span><span id="BotState-486"><a href="#BotState-486"><span class="linenos">486</span></a>
</span><span id="BotState-487"><a href="#BotState-487"><span class="linenos">487</span></a>    <span class="n">implementation</span><span class="p">:</span> <span class="n">Bot</span>
</span><span id="BotState-488"><a href="#BotState-488"><span class="linenos">488</span></a>    <span class="n">hand</span><span class="p">:</span> <span class="n">Hand</span>
</span><span id="BotState-489"><a href="#BotState-489"><span class="linenos">489</span></a>    <span class="n">score</span><span class="p">:</span> <span class="n">Score</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">Score</span><span class="p">)</span>
</span><span id="BotState-490"><a href="#BotState-490"><span class="linenos">490</span></a>    <span class="n">won_cards</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Card</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
</span><span id="BotState-491"><a href="#BotState-491"><span class="linenos">491</span></a>
</span><span id="BotState-492"><a href="#BotState-492"><span class="linenos">492</span></a>    <span class="k">def</span> <span class="nf">get_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="s1">&#39;PlayerPerspective&#39;</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Move</span><span class="p">:</span>
</span><span id="BotState-493"><a href="#BotState-493"><span class="linenos">493</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="BotState-494"><a href="#BotState-494"><span class="linenos">494</span></a><span class="sd">        Gets the next move from the bot itself, passing it the state.</span>
</span><span id="BotState-495"><a href="#BotState-495"><span class="linenos">495</span></a><span class="sd">        Does a quick check to make sure that the hand has the cards which are played. More advanced checks are performed outside of this call.</span>
</span><span id="BotState-496"><a href="#BotState-496"><span class="linenos">496</span></a>
</span><span id="BotState-497"><a href="#BotState-497"><span class="linenos">497</span></a><span class="sd">        :param state: The PlayerGameState which contains the information on the current state of the game from the perspective of this player</span>
</span><span id="BotState-498"><a href="#BotState-498"><span class="linenos">498</span></a><span class="sd">        :returns: The move the both played</span>
</span><span id="BotState-499"><a href="#BotState-499"><span class="linenos">499</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BotState-500"><a href="#BotState-500"><span class="linenos">500</span></a>        <span class="n">move</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">implementation</span><span class="o">.</span><span class="n">get_move</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">leader_move</span><span class="o">=</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="BotState-501"><a href="#BotState-501"><span class="linenos">501</span></a>        <span class="k">assert</span> <span class="n">move</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;The bot </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">implementation</span><span class="si">}</span><span class="s2"> returned a move which is None&quot;</span>
</span><span id="BotState-502"><a href="#BotState-502"><span class="linenos">502</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">move</span><span class="p">,</span> <span class="n">Move</span><span class="p">):</span>
</span><span id="BotState-503"><a href="#BotState-503"><span class="linenos">503</span></a>            <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The bot </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">implementation</span><span class="si">}</span><span class="s2"> returned an object which is not a Move, got </span><span class="si">{</span><span class="n">move</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="BotState-504"><a href="#BotState-504"><span class="linenos">504</span></a>        <span class="k">return</span> <span class="n">move</span>
</span><span id="BotState-505"><a href="#BotState-505"><span class="linenos">505</span></a>
</span><span id="BotState-506"><a href="#BotState-506"><span class="linenos">506</span></a>    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;BotState&#39;</span><span class="p">:</span>
</span><span id="BotState-507"><a href="#BotState-507"><span class="linenos">507</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="BotState-508"><a href="#BotState-508"><span class="linenos">508</span></a><span class="sd">        Makes a deep copy of the current state.</span>
</span><span id="BotState-509"><a href="#BotState-509"><span class="linenos">509</span></a>
</span><span id="BotState-510"><a href="#BotState-510"><span class="linenos">510</span></a><span class="sd">        :returns: The deep copy.</span>
</span><span id="BotState-511"><a href="#BotState-511"><span class="linenos">511</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BotState-512"><a href="#BotState-512"><span class="linenos">512</span></a>        <span class="n">new_bot</span> <span class="o">=</span> <span class="n">BotState</span><span class="p">(</span>
</span><span id="BotState-513"><a href="#BotState-513"><span class="linenos">513</span></a>            <span class="n">implementation</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">implementation</span><span class="p">,</span>
</span><span id="BotState-514"><a href="#BotState-514"><span class="linenos">514</span></a>            <span class="n">hand</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
</span><span id="BotState-515"><a href="#BotState-515"><span class="linenos">515</span></a>            <span class="n">score</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">score</span><span class="p">,</span>  <span class="c1"># does not need a copy because it is not mutable</span>
</span><span id="BotState-516"><a href="#BotState-516"><span class="linenos">516</span></a>            <span class="n">won_cards</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">won_cards</span><span class="p">),</span>
</span><span id="BotState-517"><a href="#BotState-517"><span class="linenos">517</span></a>        <span class="p">)</span>
</span><span id="BotState-518"><a href="#BotState-518"><span class="linenos">518</span></a>        <span class="k">return</span> <span class="n">new_bot</span>
</span><span id="BotState-519"><a href="#BotState-519"><span class="linenos">519</span></a>
</span><span id="BotState-520"><a href="#BotState-520"><span class="linenos">520</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="BotState-521"><a href="#BotState-521"><span class="linenos">521</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;BotState(implementation=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">implementation</span><span class="si">}</span><span class="s2">, hand=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hand</span><span class="si">}</span><span class="s2">, &quot;</span>\
</span><span id="BotState-522"><a href="#BotState-522"><span class="linenos">522</span></a>               <span class="sa">f</span><span class="s2">&quot;score=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">score</span><span class="si">}</span><span class="s2">, won_cards=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">won_cards</span><span class="si">}</span><span class="s2">)&quot;</span>
</span></pre></div>


            <div class="docstring"><p>A bot with its implementation and current state in a game</p>
</div>


                            <div id="BotState.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">BotState</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">implementation</span><span class="p">:</span> <span class="n"><a href="#Bot">schnapsen.game.Bot</a></span>,</span><span class="param">	<span class="n">hand</span><span class="p">:</span> <span class="n"><a href="#Hand">schnapsen.game.Hand</a></span>,</span><span class="param">	<span class="n">score</span><span class="p">:</span> <span class="n"><a href="#Score">schnapsen.game.Score</a></span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">factory</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">won_cards</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n"><a href="deck.html#Card">schnapsen.deck.Card</a></span><span class="p">]</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">factory</span><span class="o">&gt;</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#BotState.__init__"></a>
    
    

                            </div>
                            <div id="BotState.get_move" class="classattr">
                                        <input id="BotState.get_move-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_move</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">state</span><span class="p">:</span> <span class="n"><a href="#PlayerPerspective">schnapsen.game.PlayerPerspective</a></span>,</span><span class="param">	<span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="#Move">schnapsen.game.Move</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n"><a href="#Move">schnapsen.game.Move</a></span>:</span></span>

                <label class="view-source-button" for="BotState.get_move-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BotState.get_move"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BotState.get_move-492"><a href="#BotState.get_move-492"><span class="linenos">492</span></a>    <span class="k">def</span> <span class="nf">get_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="s1">&#39;PlayerPerspective&#39;</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Move</span><span class="p">:</span>
</span><span id="BotState.get_move-493"><a href="#BotState.get_move-493"><span class="linenos">493</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="BotState.get_move-494"><a href="#BotState.get_move-494"><span class="linenos">494</span></a><span class="sd">        Gets the next move from the bot itself, passing it the state.</span>
</span><span id="BotState.get_move-495"><a href="#BotState.get_move-495"><span class="linenos">495</span></a><span class="sd">        Does a quick check to make sure that the hand has the cards which are played. More advanced checks are performed outside of this call.</span>
</span><span id="BotState.get_move-496"><a href="#BotState.get_move-496"><span class="linenos">496</span></a>
</span><span id="BotState.get_move-497"><a href="#BotState.get_move-497"><span class="linenos">497</span></a><span class="sd">        :param state: The PlayerGameState which contains the information on the current state of the game from the perspective of this player</span>
</span><span id="BotState.get_move-498"><a href="#BotState.get_move-498"><span class="linenos">498</span></a><span class="sd">        :returns: The move the both played</span>
</span><span id="BotState.get_move-499"><a href="#BotState.get_move-499"><span class="linenos">499</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BotState.get_move-500"><a href="#BotState.get_move-500"><span class="linenos">500</span></a>        <span class="n">move</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">implementation</span><span class="o">.</span><span class="n">get_move</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">leader_move</span><span class="o">=</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="BotState.get_move-501"><a href="#BotState.get_move-501"><span class="linenos">501</span></a>        <span class="k">assert</span> <span class="n">move</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;The bot </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">implementation</span><span class="si">}</span><span class="s2"> returned a move which is None&quot;</span>
</span><span id="BotState.get_move-502"><a href="#BotState.get_move-502"><span class="linenos">502</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">move</span><span class="p">,</span> <span class="n">Move</span><span class="p">):</span>
</span><span id="BotState.get_move-503"><a href="#BotState.get_move-503"><span class="linenos">503</span></a>            <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The bot </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">implementation</span><span class="si">}</span><span class="s2"> returned an object which is not a Move, got </span><span class="si">{</span><span class="n">move</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="BotState.get_move-504"><a href="#BotState.get_move-504"><span class="linenos">504</span></a>        <span class="k">return</span> <span class="n">move</span>
</span></pre></div>


            <div class="docstring"><p>Gets the next move from the bot itself, passing it the state.
Does a quick check to make sure that the hand has the cards which are played. More advanced checks are performed outside of this call.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>state</strong>:  The PlayerGameState which contains the information on the current state of the game from the perspective of this player
:returns: The move the both played</li>
</ul>
</div>


                            </div>
                            <div id="BotState.copy" class="classattr">
                                        <input id="BotState.copy-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">copy</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#BotState">schnapsen.game.BotState</a></span>:</span></span>

                <label class="view-source-button" for="BotState.copy-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BotState.copy"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BotState.copy-506"><a href="#BotState.copy-506"><span class="linenos">506</span></a>    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;BotState&#39;</span><span class="p">:</span>
</span><span id="BotState.copy-507"><a href="#BotState.copy-507"><span class="linenos">507</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="BotState.copy-508"><a href="#BotState.copy-508"><span class="linenos">508</span></a><span class="sd">        Makes a deep copy of the current state.</span>
</span><span id="BotState.copy-509"><a href="#BotState.copy-509"><span class="linenos">509</span></a>
</span><span id="BotState.copy-510"><a href="#BotState.copy-510"><span class="linenos">510</span></a><span class="sd">        :returns: The deep copy.</span>
</span><span id="BotState.copy-511"><a href="#BotState.copy-511"><span class="linenos">511</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BotState.copy-512"><a href="#BotState.copy-512"><span class="linenos">512</span></a>        <span class="n">new_bot</span> <span class="o">=</span> <span class="n">BotState</span><span class="p">(</span>
</span><span id="BotState.copy-513"><a href="#BotState.copy-513"><span class="linenos">513</span></a>            <span class="n">implementation</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">implementation</span><span class="p">,</span>
</span><span id="BotState.copy-514"><a href="#BotState.copy-514"><span class="linenos">514</span></a>            <span class="n">hand</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
</span><span id="BotState.copy-515"><a href="#BotState.copy-515"><span class="linenos">515</span></a>            <span class="n">score</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">score</span><span class="p">,</span>  <span class="c1"># does not need a copy because it is not mutable</span>
</span><span id="BotState.copy-516"><a href="#BotState.copy-516"><span class="linenos">516</span></a>            <span class="n">won_cards</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">won_cards</span><span class="p">),</span>
</span><span id="BotState.copy-517"><a href="#BotState.copy-517"><span class="linenos">517</span></a>        <span class="p">)</span>
</span><span id="BotState.copy-518"><a href="#BotState.copy-518"><span class="linenos">518</span></a>        <span class="k">return</span> <span class="n">new_bot</span>
</span></pre></div>


            <div class="docstring"><p>Makes a deep copy of the current state.</p>

<p>:returns: The deep copy.</p>
</div>


                            </div>
                </section>
                <section id="Previous">
                            <input id="Previous-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass(frozen=True)</div>

    <span class="def">class</span>
    <span class="name">Previous</span>:

                <label class="view-source-button" for="Previous-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Previous"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Previous-525"><a href="#Previous-525"><span class="linenos">525</span></a><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Previous-526"><a href="#Previous-526"><span class="linenos">526</span></a><span class="k">class</span> <span class="nc">Previous</span><span class="p">:</span>
</span><span id="Previous-527"><a href="#Previous-527"><span class="linenos">527</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Previous-528"><a href="#Previous-528"><span class="linenos">528</span></a><span class="sd">    Information about the previous GameState.</span>
</span><span id="Previous-529"><a href="#Previous-529"><span class="linenos">529</span></a><span class="sd">    This object can be used to access the history which lead to the current GameState</span>
</span><span id="Previous-530"><a href="#Previous-530"><span class="linenos">530</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Previous-531"><a href="#Previous-531"><span class="linenos">531</span></a>
</span><span id="Previous-532"><a href="#Previous-532"><span class="linenos">532</span></a>    <span class="n">state</span><span class="p">:</span> <span class="s1">&#39;GameState&#39;</span>
</span><span id="Previous-533"><a href="#Previous-533"><span class="linenos">533</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The previous state of the game. &quot;&quot;&quot;</span>
</span><span id="Previous-534"><a href="#Previous-534"><span class="linenos">534</span></a>    <span class="n">trick</span><span class="p">:</span> <span class="n">Trick</span>
</span><span id="Previous-535"><a href="#Previous-535"><span class="linenos">535</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The trick which led to the current Gamestate from the Previous state&quot;&quot;&quot;</span>
</span><span id="Previous-536"><a href="#Previous-536"><span class="linenos">536</span></a>    <span class="n">leader_remained_leader</span><span class="p">:</span> <span class="nb">bool</span>
</span><span id="Previous-537"><a href="#Previous-537"><span class="linenos">537</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Did the leader of remain the leader.&quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Information about the previous GameState.
This object can be used to access the history which lead to the current GameState</p>
</div>


                            <div id="Previous.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">Previous</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">state</span><span class="p">:</span> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span>,</span><span class="param">	<span class="n">trick</span><span class="p">:</span> <span class="n"><a href="#Trick">schnapsen.game.Trick</a></span>,</span><span class="param">	<span class="n">leader_remained_leader</span><span class="p">:</span> <span class="nb">bool</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#Previous.__init__"></a>
    
    

                            </div>
                            <div id="Previous.state" class="classattr">
                                <div class="attr variable">
            <span class="name">state</span><span class="annotation">: <a href="#GameState">schnapsen.game.GameState</a></span>

        
    </div>
    <a class="headerlink" href="#Previous.state"></a>
    
            <div class="docstring"><p>The previous state of the game.</p>
</div>


                            </div>
                            <div id="Previous.trick" class="classattr">
                                <div class="attr variable">
            <span class="name">trick</span><span class="annotation">: <a href="#Trick">schnapsen.game.Trick</a></span>

        
    </div>
    <a class="headerlink" href="#Previous.trick"></a>
    
            <div class="docstring"><p>The trick which led to the current Gamestate from the Previous state</p>
</div>


                            </div>
                            <div id="Previous.leader_remained_leader" class="classattr">
                                <div class="attr variable">
            <span class="name">leader_remained_leader</span><span class="annotation">: bool</span>

        
    </div>
    <a class="headerlink" href="#Previous.leader_remained_leader"></a>
    
            <div class="docstring"><p>Did the leader of remain the leader.</p>
</div>


                            </div>
                </section>
                <section id="GameState">
                            <input id="GameState-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass</div>

    <span class="def">class</span>
    <span class="name">GameState</span>:

                <label class="view-source-button" for="GameState-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GameState"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GameState-540"><a href="#GameState-540"><span class="linenos">540</span></a><span class="nd">@dataclass</span>
</span><span id="GameState-541"><a href="#GameState-541"><span class="linenos">541</span></a><span class="k">class</span> <span class="nc">GameState</span><span class="p">:</span>
</span><span id="GameState-542"><a href="#GameState-542"><span class="linenos">542</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GameState-543"><a href="#GameState-543"><span class="linenos">543</span></a><span class="sd">    The current state of the game, as seen by the game engine.</span>
</span><span id="GameState-544"><a href="#GameState-544"><span class="linenos">544</span></a><span class="sd">    This contains all information about the positions of the cards, bots, scores, etc.</span>
</span><span id="GameState-545"><a href="#GameState-545"><span class="linenos">545</span></a><span class="sd">    The bot must not get direct access to this information because it would allow it to cheat.</span>
</span><span id="GameState-546"><a href="#GameState-546"><span class="linenos">546</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="GameState-547"><a href="#GameState-547"><span class="linenos">547</span></a>    <span class="n">leader</span><span class="p">:</span> <span class="n">BotState</span>
</span><span id="GameState-548"><a href="#GameState-548"><span class="linenos">548</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The current leader, i.e., the one who will play the first move in the next trick&quot;&quot;&quot;</span>
</span><span id="GameState-549"><a href="#GameState-549"><span class="linenos">549</span></a>    <span class="n">follower</span><span class="p">:</span> <span class="n">BotState</span>
</span><span id="GameState-550"><a href="#GameState-550"><span class="linenos">550</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The current follower, i.e., the one who will play the second move in the next trick&quot;&quot;&quot;</span>
</span><span id="GameState-551"><a href="#GameState-551"><span class="linenos">551</span></a>    <span class="n">trump_suit</span><span class="p">:</span> <span class="n">Suit</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="GameState-552"><a href="#GameState-552"><span class="linenos">552</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The trump suit in this game. This information is also in the Talon.&quot;&quot;&quot;</span>
</span><span id="GameState-553"><a href="#GameState-553"><span class="linenos">553</span></a>    <span class="n">talon</span><span class="p">:</span> <span class="n">Talon</span>
</span><span id="GameState-554"><a href="#GameState-554"><span class="linenos">554</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The talon, containing the cards not yet in the hand of the player and the trump card at the bottom&quot;&quot;&quot;</span>
</span><span id="GameState-555"><a href="#GameState-555"><span class="linenos">555</span></a>    <span class="n">previous</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Previous</span><span class="p">]</span>
</span><span id="GameState-556"><a href="#GameState-556"><span class="linenos">556</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The events which led to this GameState, or None, if this is the initial GameState (or previous tricks and states are unknown)&quot;&quot;&quot;</span>
</span><span id="GameState-557"><a href="#GameState-557"><span class="linenos">557</span></a>
</span><span id="GameState-558"><a href="#GameState-558"><span class="linenos">558</span></a>    <span class="k">def</span> <span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">__name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="GameState-559"><a href="#GameState-559"><span class="linenos">559</span></a>        <span class="k">if</span> <span class="n">__name</span> <span class="o">==</span> <span class="s2">&quot;trump_suit&quot;</span><span class="p">:</span>
</span><span id="GameState-560"><a href="#GameState-560"><span class="linenos">560</span></a>            <span class="c1"># We get it from the talon</span>
</span><span id="GameState-561"><a href="#GameState-561"><span class="linenos">561</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">trump_suit</span><span class="p">()</span>
</span><span id="GameState-562"><a href="#GameState-562"><span class="linenos">562</span></a>        <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">__name</span><span class="p">)</span>
</span><span id="GameState-563"><a href="#GameState-563"><span class="linenos">563</span></a>
</span><span id="GameState-564"><a href="#GameState-564"><span class="linenos">564</span></a>    <span class="k">def</span> <span class="nf">copy_for_next</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;GameState&#39;</span><span class="p">:</span>
</span><span id="GameState-565"><a href="#GameState-565"><span class="linenos">565</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GameState-566"><a href="#GameState-566"><span class="linenos">566</span></a><span class="sd">        Make a copy of the gamestate, modified such that the previous state is this state, but the previous trick is not filled yet.</span>
</span><span id="GameState-567"><a href="#GameState-567"><span class="linenos">567</span></a><span class="sd">        This is used to create a GameState which will be modified to become the next gamestate.</span>
</span><span id="GameState-568"><a href="#GameState-568"><span class="linenos">568</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GameState-569"><a href="#GameState-569"><span class="linenos">569</span></a>        <span class="c1"># We intentionally do no initialize the previous information. It is not known yet</span>
</span><span id="GameState-570"><a href="#GameState-570"><span class="linenos">570</span></a>        <span class="n">new_state</span> <span class="o">=</span> <span class="n">GameState</span><span class="p">(</span>
</span><span id="GameState-571"><a href="#GameState-571"><span class="linenos">571</span></a>            <span class="n">leader</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
</span><span id="GameState-572"><a href="#GameState-572"><span class="linenos">572</span></a>            <span class="n">follower</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
</span><span id="GameState-573"><a href="#GameState-573"><span class="linenos">573</span></a>            <span class="n">talon</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
</span><span id="GameState-574"><a href="#GameState-574"><span class="linenos">574</span></a>            <span class="n">previous</span><span class="o">=</span><span class="kc">None</span>
</span><span id="GameState-575"><a href="#GameState-575"><span class="linenos">575</span></a>        <span class="p">)</span>
</span><span id="GameState-576"><a href="#GameState-576"><span class="linenos">576</span></a>        <span class="k">return</span> <span class="n">new_state</span>
</span><span id="GameState-577"><a href="#GameState-577"><span class="linenos">577</span></a>
</span><span id="GameState-578"><a href="#GameState-578"><span class="linenos">578</span></a>    <span class="k">def</span> <span class="nf">copy_with_other_bots</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_leader</span><span class="p">:</span> <span class="n">Bot</span><span class="p">,</span> <span class="n">new_follower</span><span class="p">:</span> <span class="n">Bot</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;GameState&#39;</span><span class="p">:</span>
</span><span id="GameState-579"><a href="#GameState-579"><span class="linenos">579</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GameState-580"><a href="#GameState-580"><span class="linenos">580</span></a><span class="sd">        Make a copy of the gamestate, modified such that the bots are replaced by the provided ones.</span>
</span><span id="GameState-581"><a href="#GameState-581"><span class="linenos">581</span></a><span class="sd">        This is used to continue playing an existing GameState with different bots.</span>
</span><span id="GameState-582"><a href="#GameState-582"><span class="linenos">582</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GameState-583"><a href="#GameState-583"><span class="linenos">583</span></a>        <span class="n">new_state</span> <span class="o">=</span> <span class="n">GameState</span><span class="p">(</span>
</span><span id="GameState-584"><a href="#GameState-584"><span class="linenos">584</span></a>            <span class="n">leader</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
</span><span id="GameState-585"><a href="#GameState-585"><span class="linenos">585</span></a>            <span class="n">follower</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
</span><span id="GameState-586"><a href="#GameState-586"><span class="linenos">586</span></a>            <span class="n">talon</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
</span><span id="GameState-587"><a href="#GameState-587"><span class="linenos">587</span></a>            <span class="n">previous</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">previous</span>
</span><span id="GameState-588"><a href="#GameState-588"><span class="linenos">588</span></a>        <span class="p">)</span>
</span><span id="GameState-589"><a href="#GameState-589"><span class="linenos">589</span></a>        <span class="n">new_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">implementation</span> <span class="o">=</span> <span class="n">new_leader</span>
</span><span id="GameState-590"><a href="#GameState-590"><span class="linenos">590</span></a>        <span class="n">new_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">implementation</span> <span class="o">=</span> <span class="n">new_follower</span>
</span><span id="GameState-591"><a href="#GameState-591"><span class="linenos">591</span></a>        <span class="k">return</span> <span class="n">new_state</span>
</span><span id="GameState-592"><a href="#GameState-592"><span class="linenos">592</span></a>
</span><span id="GameState-593"><a href="#GameState-593"><span class="linenos">593</span></a>    <span class="k">def</span> <span class="nf">game_phase</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GamePhase</span><span class="p">:</span>
</span><span id="GameState-594"><a href="#GameState-594"><span class="linenos">594</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;What is the current phase of the game</span>
</span><span id="GameState-595"><a href="#GameState-595"><span class="linenos">595</span></a>
</span><span id="GameState-596"><a href="#GameState-596"><span class="linenos">596</span></a><span class="sd">        :returns: GamePhase.ONE or GamePahse.TWO indicating the current phase</span>
</span><span id="GameState-597"><a href="#GameState-597"><span class="linenos">597</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GameState-598"><a href="#GameState-598"><span class="linenos">598</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
</span><span id="GameState-599"><a href="#GameState-599"><span class="linenos">599</span></a>            <span class="k">return</span> <span class="n">GamePhase</span><span class="o">.</span><span class="n">TWO</span>
</span><span id="GameState-600"><a href="#GameState-600"><span class="linenos">600</span></a>        <span class="k">return</span> <span class="n">GamePhase</span><span class="o">.</span><span class="n">ONE</span>
</span><span id="GameState-601"><a href="#GameState-601"><span class="linenos">601</span></a>
</span><span id="GameState-602"><a href="#GameState-602"><span class="linenos">602</span></a>    <span class="k">def</span> <span class="nf">are_all_cards_played</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="GameState-603"><a href="#GameState-603"><span class="linenos">603</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True in case the players have played all their cards and the game is has come to an end</span>
</span><span id="GameState-604"><a href="#GameState-604"><span class="linenos">604</span></a>
</span><span id="GameState-605"><a href="#GameState-605"><span class="linenos">605</span></a><span class="sd">        :returns: Wheter all cards have been played</span>
</span><span id="GameState-606"><a href="#GameState-606"><span class="linenos">606</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GameState-607"><a href="#GameState-607"><span class="linenos">607</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">is_empty</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">is_empty</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">is_empty</span><span class="p">()</span>
</span><span id="GameState-608"><a href="#GameState-608"><span class="linenos">608</span></a>
</span><span id="GameState-609"><a href="#GameState-609"><span class="linenos">609</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GameState-610"><a href="#GameState-610"><span class="linenos">610</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;GameState(leader=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">leader</span><span class="si">}</span><span class="s2">, follower=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">follower</span><span class="si">}</span><span class="s2">, &quot;</span>\
</span><span id="GameState-611"><a href="#GameState-611"><span class="linenos">611</span></a>               <span class="sa">f</span><span class="s2">&quot;talon=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">talon</span><span class="si">}</span><span class="s2">, previous=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">previous</span><span class="si">}</span><span class="s2">)&quot;</span>
</span></pre></div>


            <div class="docstring"><p>The current state of the game, as seen by the game engine.
This contains all information about the positions of the cards, bots, scores, etc.
The bot must not get direct access to this information because it would allow it to cheat.</p>
</div>


                            <div id="GameState.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">GameState</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">leader</span><span class="p">:</span> <span class="n"><a href="#BotState">schnapsen.game.BotState</a></span>,</span><span class="param">	<span class="n">follower</span><span class="p">:</span> <span class="n"><a href="#BotState">schnapsen.game.BotState</a></span>,</span><span class="param">	<span class="n">talon</span><span class="p">:</span> <span class="n"><a href="#Talon">schnapsen.game.Talon</a></span>,</span><span class="param">	<span class="n">previous</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="#Previous">schnapsen.game.Previous</a></span><span class="p">]</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#GameState.__init__"></a>
    
    

                            </div>
                            <div id="GameState.leader" class="classattr">
                                <div class="attr variable">
            <span class="name">leader</span><span class="annotation">: <a href="#BotState">schnapsen.game.BotState</a></span>

        
    </div>
    <a class="headerlink" href="#GameState.leader"></a>
    
            <div class="docstring"><p>The current leader, i.e., the one who will play the first move in the next trick</p>
</div>


                            </div>
                            <div id="GameState.follower" class="classattr">
                                <div class="attr variable">
            <span class="name">follower</span><span class="annotation">: <a href="#BotState">schnapsen.game.BotState</a></span>

        
    </div>
    <a class="headerlink" href="#GameState.follower"></a>
    
            <div class="docstring"><p>The current follower, i.e., the one who will play the second move in the next trick</p>
</div>


                            </div>
                            <div id="GameState.trump_suit" class="classattr">
                                <div class="attr variable">
            <span class="name">trump_suit</span><span class="annotation">: <a href="deck.html#Suit">schnapsen.deck.Suit</a></span>

        
    </div>
    <a class="headerlink" href="#GameState.trump_suit"></a>
    
            <div class="docstring"><p>The trump suit in this game. This information is also in the Talon.</p>
</div>


                            </div>
                            <div id="GameState.talon" class="classattr">
                                <div class="attr variable">
            <span class="name">talon</span><span class="annotation">: <a href="#Talon">schnapsen.game.Talon</a></span>

        
    </div>
    <a class="headerlink" href="#GameState.talon"></a>
    
            <div class="docstring"><p>The talon, containing the cards not yet in the hand of the player and the trump card at the bottom</p>
</div>


                            </div>
                            <div id="GameState.previous" class="classattr">
                                <div class="attr variable">
            <span class="name">previous</span><span class="annotation">: Optional[<a href="#Previous">schnapsen.game.Previous</a>]</span>

        
    </div>
    <a class="headerlink" href="#GameState.previous"></a>
    
            <div class="docstring"><p>The events which led to this GameState, or None, if this is the initial GameState (or previous tricks and states are unknown)</p>
</div>


                            </div>
                            <div id="GameState.copy_for_next" class="classattr">
                                        <input id="GameState.copy_for_next-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">copy_for_next</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span>:</span></span>

                <label class="view-source-button" for="GameState.copy_for_next-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GameState.copy_for_next"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GameState.copy_for_next-564"><a href="#GameState.copy_for_next-564"><span class="linenos">564</span></a>    <span class="k">def</span> <span class="nf">copy_for_next</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;GameState&#39;</span><span class="p">:</span>
</span><span id="GameState.copy_for_next-565"><a href="#GameState.copy_for_next-565"><span class="linenos">565</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GameState.copy_for_next-566"><a href="#GameState.copy_for_next-566"><span class="linenos">566</span></a><span class="sd">        Make a copy of the gamestate, modified such that the previous state is this state, but the previous trick is not filled yet.</span>
</span><span id="GameState.copy_for_next-567"><a href="#GameState.copy_for_next-567"><span class="linenos">567</span></a><span class="sd">        This is used to create a GameState which will be modified to become the next gamestate.</span>
</span><span id="GameState.copy_for_next-568"><a href="#GameState.copy_for_next-568"><span class="linenos">568</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GameState.copy_for_next-569"><a href="#GameState.copy_for_next-569"><span class="linenos">569</span></a>        <span class="c1"># We intentionally do no initialize the previous information. It is not known yet</span>
</span><span id="GameState.copy_for_next-570"><a href="#GameState.copy_for_next-570"><span class="linenos">570</span></a>        <span class="n">new_state</span> <span class="o">=</span> <span class="n">GameState</span><span class="p">(</span>
</span><span id="GameState.copy_for_next-571"><a href="#GameState.copy_for_next-571"><span class="linenos">571</span></a>            <span class="n">leader</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
</span><span id="GameState.copy_for_next-572"><a href="#GameState.copy_for_next-572"><span class="linenos">572</span></a>            <span class="n">follower</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
</span><span id="GameState.copy_for_next-573"><a href="#GameState.copy_for_next-573"><span class="linenos">573</span></a>            <span class="n">talon</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
</span><span id="GameState.copy_for_next-574"><a href="#GameState.copy_for_next-574"><span class="linenos">574</span></a>            <span class="n">previous</span><span class="o">=</span><span class="kc">None</span>
</span><span id="GameState.copy_for_next-575"><a href="#GameState.copy_for_next-575"><span class="linenos">575</span></a>        <span class="p">)</span>
</span><span id="GameState.copy_for_next-576"><a href="#GameState.copy_for_next-576"><span class="linenos">576</span></a>        <span class="k">return</span> <span class="n">new_state</span>
</span></pre></div>


            <div class="docstring"><p>Make a copy of the gamestate, modified such that the previous state is this state, but the previous trick is not filled yet.
This is used to create a GameState which will be modified to become the next gamestate.</p>
</div>


                            </div>
                            <div id="GameState.copy_with_other_bots" class="classattr">
                                        <input id="GameState.copy_with_other_bots-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">copy_with_other_bots</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">new_leader</span><span class="p">:</span> <span class="n"><a href="#Bot">schnapsen.game.Bot</a></span>,</span><span class="param">	<span class="n">new_follower</span><span class="p">:</span> <span class="n"><a href="#Bot">schnapsen.game.Bot</a></span></span><span class="return-annotation">) -> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span>:</span></span>

                <label class="view-source-button" for="GameState.copy_with_other_bots-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GameState.copy_with_other_bots"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GameState.copy_with_other_bots-578"><a href="#GameState.copy_with_other_bots-578"><span class="linenos">578</span></a>    <span class="k">def</span> <span class="nf">copy_with_other_bots</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_leader</span><span class="p">:</span> <span class="n">Bot</span><span class="p">,</span> <span class="n">new_follower</span><span class="p">:</span> <span class="n">Bot</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;GameState&#39;</span><span class="p">:</span>
</span><span id="GameState.copy_with_other_bots-579"><a href="#GameState.copy_with_other_bots-579"><span class="linenos">579</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GameState.copy_with_other_bots-580"><a href="#GameState.copy_with_other_bots-580"><span class="linenos">580</span></a><span class="sd">        Make a copy of the gamestate, modified such that the bots are replaced by the provided ones.</span>
</span><span id="GameState.copy_with_other_bots-581"><a href="#GameState.copy_with_other_bots-581"><span class="linenos">581</span></a><span class="sd">        This is used to continue playing an existing GameState with different bots.</span>
</span><span id="GameState.copy_with_other_bots-582"><a href="#GameState.copy_with_other_bots-582"><span class="linenos">582</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GameState.copy_with_other_bots-583"><a href="#GameState.copy_with_other_bots-583"><span class="linenos">583</span></a>        <span class="n">new_state</span> <span class="o">=</span> <span class="n">GameState</span><span class="p">(</span>
</span><span id="GameState.copy_with_other_bots-584"><a href="#GameState.copy_with_other_bots-584"><span class="linenos">584</span></a>            <span class="n">leader</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
</span><span id="GameState.copy_with_other_bots-585"><a href="#GameState.copy_with_other_bots-585"><span class="linenos">585</span></a>            <span class="n">follower</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
</span><span id="GameState.copy_with_other_bots-586"><a href="#GameState.copy_with_other_bots-586"><span class="linenos">586</span></a>            <span class="n">talon</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
</span><span id="GameState.copy_with_other_bots-587"><a href="#GameState.copy_with_other_bots-587"><span class="linenos">587</span></a>            <span class="n">previous</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">previous</span>
</span><span id="GameState.copy_with_other_bots-588"><a href="#GameState.copy_with_other_bots-588"><span class="linenos">588</span></a>        <span class="p">)</span>
</span><span id="GameState.copy_with_other_bots-589"><a href="#GameState.copy_with_other_bots-589"><span class="linenos">589</span></a>        <span class="n">new_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">implementation</span> <span class="o">=</span> <span class="n">new_leader</span>
</span><span id="GameState.copy_with_other_bots-590"><a href="#GameState.copy_with_other_bots-590"><span class="linenos">590</span></a>        <span class="n">new_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">implementation</span> <span class="o">=</span> <span class="n">new_follower</span>
</span><span id="GameState.copy_with_other_bots-591"><a href="#GameState.copy_with_other_bots-591"><span class="linenos">591</span></a>        <span class="k">return</span> <span class="n">new_state</span>
</span></pre></div>


            <div class="docstring"><p>Make a copy of the gamestate, modified such that the bots are replaced by the provided ones.
This is used to continue playing an existing GameState with different bots.</p>
</div>


                            </div>
                            <div id="GameState.game_phase" class="classattr">
                                        <input id="GameState.game_phase-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">game_phase</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#GamePhase">schnapsen.game.GamePhase</a></span>:</span></span>

                <label class="view-source-button" for="GameState.game_phase-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GameState.game_phase"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GameState.game_phase-593"><a href="#GameState.game_phase-593"><span class="linenos">593</span></a>    <span class="k">def</span> <span class="nf">game_phase</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GamePhase</span><span class="p">:</span>
</span><span id="GameState.game_phase-594"><a href="#GameState.game_phase-594"><span class="linenos">594</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;What is the current phase of the game</span>
</span><span id="GameState.game_phase-595"><a href="#GameState.game_phase-595"><span class="linenos">595</span></a>
</span><span id="GameState.game_phase-596"><a href="#GameState.game_phase-596"><span class="linenos">596</span></a><span class="sd">        :returns: GamePhase.ONE or GamePahse.TWO indicating the current phase</span>
</span><span id="GameState.game_phase-597"><a href="#GameState.game_phase-597"><span class="linenos">597</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GameState.game_phase-598"><a href="#GameState.game_phase-598"><span class="linenos">598</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
</span><span id="GameState.game_phase-599"><a href="#GameState.game_phase-599"><span class="linenos">599</span></a>            <span class="k">return</span> <span class="n">GamePhase</span><span class="o">.</span><span class="n">TWO</span>
</span><span id="GameState.game_phase-600"><a href="#GameState.game_phase-600"><span class="linenos">600</span></a>        <span class="k">return</span> <span class="n">GamePhase</span><span class="o">.</span><span class="n">ONE</span>
</span></pre></div>


            <div class="docstring"><p>What is the current phase of the game</p>

<p>:returns: <a href="#GamePhase.ONE">GamePhase.ONE</a> or GamePahse.TWO indicating the current phase</p>
</div>


                            </div>
                            <div id="GameState.are_all_cards_played" class="classattr">
                                        <input id="GameState.are_all_cards_played-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">are_all_cards_played</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="GameState.are_all_cards_played-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GameState.are_all_cards_played"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GameState.are_all_cards_played-602"><a href="#GameState.are_all_cards_played-602"><span class="linenos">602</span></a>    <span class="k">def</span> <span class="nf">are_all_cards_played</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="GameState.are_all_cards_played-603"><a href="#GameState.are_all_cards_played-603"><span class="linenos">603</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True in case the players have played all their cards and the game is has come to an end</span>
</span><span id="GameState.are_all_cards_played-604"><a href="#GameState.are_all_cards_played-604"><span class="linenos">604</span></a>
</span><span id="GameState.are_all_cards_played-605"><a href="#GameState.are_all_cards_played-605"><span class="linenos">605</span></a><span class="sd">        :returns: Wheter all cards have been played</span>
</span><span id="GameState.are_all_cards_played-606"><a href="#GameState.are_all_cards_played-606"><span class="linenos">606</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GameState.are_all_cards_played-607"><a href="#GameState.are_all_cards_played-607"><span class="linenos">607</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">is_empty</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">is_empty</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">is_empty</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Returns True in case the players have played all their cards and the game is has come to an end</p>

<p>:returns: Wheter all cards have been played</p>
</div>


                            </div>
                </section>
                <section id="PlayerPerspective">
                            <input id="PlayerPerspective-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">PlayerPerspective</span><wbr>(<span class="base">abc.ABC</span>):

                <label class="view-source-button" for="PlayerPerspective-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PlayerPerspective"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PlayerPerspective-614"><a href="#PlayerPerspective-614"><span class="linenos">614</span></a><span class="k">class</span> <span class="nc">PlayerPerspective</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="PlayerPerspective-615"><a href="#PlayerPerspective-615"><span class="linenos">615</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PlayerPerspective-616"><a href="#PlayerPerspective-616"><span class="linenos">616</span></a><span class="sd">    The perspective a player has on the state of the game. This only gives access to the partially observable information.</span>
</span><span id="PlayerPerspective-617"><a href="#PlayerPerspective-617"><span class="linenos">617</span></a><span class="sd">    The Bot gets passed an instance of this class when it gets requested a move by the GamePlayEngine</span>
</span><span id="PlayerPerspective-618"><a href="#PlayerPerspective-618"><span class="linenos">618</span></a>
</span><span id="PlayerPerspective-619"><a href="#PlayerPerspective-619"><span class="linenos">619</span></a><span class="sd">    This class has several convenience methods to get more information about the current state.</span>
</span><span id="PlayerPerspective-620"><a href="#PlayerPerspective-620"><span class="linenos">620</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="PlayerPerspective-621"><a href="#PlayerPerspective-621"><span class="linenos">621</span></a>
</span><span id="PlayerPerspective-622"><a href="#PlayerPerspective-622"><span class="linenos">622</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="s1">&#39;GameState&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PlayerPerspective-623"><a href="#PlayerPerspective-623"><span class="linenos">623</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span> <span class="o">=</span> <span class="n">state</span>
</span><span id="PlayerPerspective-624"><a href="#PlayerPerspective-624"><span class="linenos">624</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span> <span class="o">=</span> <span class="n">engine</span>
</span><span id="PlayerPerspective-625"><a href="#PlayerPerspective-625"><span class="linenos">625</span></a>
</span><span id="PlayerPerspective-626"><a href="#PlayerPerspective-626"><span class="linenos">626</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="PlayerPerspective-627"><a href="#PlayerPerspective-627"><span class="linenos">627</span></a>    <span class="k">def</span> <span class="nf">valid_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="PlayerPerspective-628"><a href="#PlayerPerspective-628"><span class="linenos">628</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PlayerPerspective-629"><a href="#PlayerPerspective-629"><span class="linenos">629</span></a><span class="sd">        Get a list of all valid moves the bot can play at this point in the game.</span>
</span><span id="PlayerPerspective-630"><a href="#PlayerPerspective-630"><span class="linenos">630</span></a>
</span><span id="PlayerPerspective-631"><a href="#PlayerPerspective-631"><span class="linenos">631</span></a><span class="sd">        Design note: this could also return an Iterable[Move], but list[Move] was chosen to make the API easier to use.</span>
</span><span id="PlayerPerspective-632"><a href="#PlayerPerspective-632"><span class="linenos">632</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PlayerPerspective-633"><a href="#PlayerPerspective-633"><span class="linenos">633</span></a>
</span><span id="PlayerPerspective-634"><a href="#PlayerPerspective-634"><span class="linenos">634</span></a>    <span class="k">def</span> <span class="nf">get_game_history</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="s1">&#39;PlayerPerspective&#39;</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Trick</span><span class="p">]]]:</span>
</span><span id="PlayerPerspective-635"><a href="#PlayerPerspective-635"><span class="linenos">635</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PlayerPerspective-636"><a href="#PlayerPerspective-636"><span class="linenos">636</span></a><span class="sd">        The game history from the perspective of the player. This means all the past PlayerPerspective this bot has seen, and the Tricks played.</span>
</span><span id="PlayerPerspective-637"><a href="#PlayerPerspective-637"><span class="linenos">637</span></a><span class="sd">        This only provides access to cards the Bot is allowed to see.</span>
</span><span id="PlayerPerspective-638"><a href="#PlayerPerspective-638"><span class="linenos">638</span></a>
</span><span id="PlayerPerspective-639"><a href="#PlayerPerspective-639"><span class="linenos">639</span></a><span class="sd">        :returns: The PlayerPerspective and Tricks in chronological order, index 0 is the first round played. Only the last Trick will be None.</span>
</span><span id="PlayerPerspective-640"><a href="#PlayerPerspective-640"><span class="linenos">640</span></a><span class="sd">        The last pair will contain the current PlayerGameState.</span>
</span><span id="PlayerPerspective-641"><a href="#PlayerPerspective-641"><span class="linenos">641</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PlayerPerspective-642"><a href="#PlayerPerspective-642"><span class="linenos">642</span></a>
</span><span id="PlayerPerspective-643"><a href="#PlayerPerspective-643"><span class="linenos">643</span></a>        <span class="c1"># We reconstruct the history backwards.</span>
</span><span id="PlayerPerspective-644"><a href="#PlayerPerspective-644"><span class="linenos">644</span></a>        <span class="n">game_state_history</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">PlayerPerspective</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Trick</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="PlayerPerspective-645"><a href="#PlayerPerspective-645"><span class="linenos">645</span></a>        <span class="c1"># We first push the current state to the end</span>
</span><span id="PlayerPerspective-646"><a href="#PlayerPerspective-646"><span class="linenos">646</span></a>        <span class="n">game_state_history</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
</span><span id="PlayerPerspective-647"><a href="#PlayerPerspective-647"><span class="linenos">647</span></a>
</span><span id="PlayerPerspective-648"><a href="#PlayerPerspective-648"><span class="linenos">648</span></a>        <span class="n">current_leader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">am_i_leader</span><span class="p">()</span>
</span><span id="PlayerPerspective-649"><a href="#PlayerPerspective-649"><span class="linenos">649</span></a>        <span class="n">current</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">previous</span>
</span><span id="PlayerPerspective-650"><a href="#PlayerPerspective-650"><span class="linenos">650</span></a>
</span><span id="PlayerPerspective-651"><a href="#PlayerPerspective-651"><span class="linenos">651</span></a>        <span class="k">while</span> <span class="n">current</span><span class="p">:</span>
</span><span id="PlayerPerspective-652"><a href="#PlayerPerspective-652"><span class="linenos">652</span></a>            <span class="c1"># If we were leader, and we remained, then we were leader before</span>
</span><span id="PlayerPerspective-653"><a href="#PlayerPerspective-653"><span class="linenos">653</span></a>            <span class="c1"># If we were follower, and we remained, then we were follower before</span>
</span><span id="PlayerPerspective-654"><a href="#PlayerPerspective-654"><span class="linenos">654</span></a>            <span class="c1"># If we were leader, and we did not remain, then we were follower before</span>
</span><span id="PlayerPerspective-655"><a href="#PlayerPerspective-655"><span class="linenos">655</span></a>            <span class="c1"># If we were follower, and we did not remain, then we were leader before</span>
</span><span id="PlayerPerspective-656"><a href="#PlayerPerspective-656"><span class="linenos">656</span></a>            <span class="c1"># This logic gets reflected by the negation of a xor</span>
</span><span id="PlayerPerspective-657"><a href="#PlayerPerspective-657"><span class="linenos">657</span></a>            <span class="n">current_leader</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">current_leader</span> <span class="o">^</span> <span class="n">current</span><span class="o">.</span><span class="n">leader_remained_leader</span>
</span><span id="PlayerPerspective-658"><a href="#PlayerPerspective-658"><span class="linenos">658</span></a>
</span><span id="PlayerPerspective-659"><a href="#PlayerPerspective-659"><span class="linenos">659</span></a>            <span class="n">current_player_state</span><span class="p">:</span> <span class="n">PlayerPerspective</span>
</span><span id="PlayerPerspective-660"><a href="#PlayerPerspective-660"><span class="linenos">660</span></a>            <span class="k">if</span> <span class="n">current_leader</span><span class="p">:</span>
</span><span id="PlayerPerspective-661"><a href="#PlayerPerspective-661"><span class="linenos">661</span></a>                <span class="n">current_player_state</span> <span class="o">=</span> <span class="n">LeaderPerspective</span><span class="p">(</span><span class="n">current</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="p">)</span>
</span><span id="PlayerPerspective-662"><a href="#PlayerPerspective-662"><span class="linenos">662</span></a>            <span class="k">else</span><span class="p">:</span>  <span class="c1"># We are following</span>
</span><span id="PlayerPerspective-663"><a href="#PlayerPerspective-663"><span class="linenos">663</span></a>                <span class="k">if</span> <span class="n">current</span><span class="o">.</span><span class="n">trick</span><span class="o">.</span><span class="n">is_trump_exchange</span><span class="p">():</span>
</span><span id="PlayerPerspective-664"><a href="#PlayerPerspective-664"><span class="linenos">664</span></a>                    <span class="n">current_player_state</span> <span class="o">=</span> <span class="n">ExchangeFollowerPerspective</span><span class="p">(</span><span class="n">current</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="p">)</span>
</span><span id="PlayerPerspective-665"><a href="#PlayerPerspective-665"><span class="linenos">665</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="PlayerPerspective-666"><a href="#PlayerPerspective-666"><span class="linenos">666</span></a>                    <span class="n">current_player_state</span> <span class="o">=</span> <span class="n">FollowerPerspective</span><span class="p">(</span><span class="n">current</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="p">,</span> <span class="n">current</span><span class="o">.</span><span class="n">trick</span><span class="o">.</span><span class="n">as_partial</span><span class="p">()</span><span class="o">.</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="PlayerPerspective-667"><a href="#PlayerPerspective-667"><span class="linenos">667</span></a>            <span class="n">history_record</span> <span class="o">=</span> <span class="p">(</span><span class="n">current_player_state</span><span class="p">,</span> <span class="n">current</span><span class="o">.</span><span class="n">trick</span><span class="p">)</span>
</span><span id="PlayerPerspective-668"><a href="#PlayerPerspective-668"><span class="linenos">668</span></a>            <span class="n">game_state_history</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">history_record</span><span class="p">)</span>
</span><span id="PlayerPerspective-669"><a href="#PlayerPerspective-669"><span class="linenos">669</span></a>
</span><span id="PlayerPerspective-670"><a href="#PlayerPerspective-670"><span class="linenos">670</span></a>            <span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">previous</span>
</span><span id="PlayerPerspective-671"><a href="#PlayerPerspective-671"><span class="linenos">671</span></a>        <span class="k">return</span> <span class="n">game_state_history</span>
</span><span id="PlayerPerspective-672"><a href="#PlayerPerspective-672"><span class="linenos">672</span></a>
</span><span id="PlayerPerspective-673"><a href="#PlayerPerspective-673"><span class="linenos">673</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="PlayerPerspective-674"><a href="#PlayerPerspective-674"><span class="linenos">674</span></a>    <span class="k">def</span> <span class="nf">get_hand</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hand</span><span class="p">:</span>
</span><span id="PlayerPerspective-675"><a href="#PlayerPerspective-675"><span class="linenos">675</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the cards in the hand of the current player&quot;&quot;&quot;</span>
</span><span id="PlayerPerspective-676"><a href="#PlayerPerspective-676"><span class="linenos">676</span></a>
</span><span id="PlayerPerspective-677"><a href="#PlayerPerspective-677"><span class="linenos">677</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="PlayerPerspective-678"><a href="#PlayerPerspective-678"><span class="linenos">678</span></a>    <span class="k">def</span> <span class="nf">get_my_score</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
</span><span id="PlayerPerspective-679"><a href="#PlayerPerspective-679"><span class="linenos">679</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the socre of the current player. The return Score object contains both the direct points and pending points from a marriage.&quot;&quot;&quot;</span>
</span><span id="PlayerPerspective-680"><a href="#PlayerPerspective-680"><span class="linenos">680</span></a>
</span><span id="PlayerPerspective-681"><a href="#PlayerPerspective-681"><span class="linenos">681</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="PlayerPerspective-682"><a href="#PlayerPerspective-682"><span class="linenos">682</span></a>    <span class="k">def</span> <span class="nf">get_opponent_score</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
</span><span id="PlayerPerspective-683"><a href="#PlayerPerspective-683"><span class="linenos">683</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the socre of the other player. The return Score object contains both the direct points and pending points from a marriage.&quot;&quot;&quot;</span>
</span><span id="PlayerPerspective-684"><a href="#PlayerPerspective-684"><span class="linenos">684</span></a>
</span><span id="PlayerPerspective-685"><a href="#PlayerPerspective-685"><span class="linenos">685</span></a>    <span class="k">def</span> <span class="nf">get_trump_suit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Suit</span><span class="p">:</span>
</span><span id="PlayerPerspective-686"><a href="#PlayerPerspective-686"><span class="linenos">686</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the suit of the trump&quot;&quot;&quot;</span>
</span><span id="PlayerPerspective-687"><a href="#PlayerPerspective-687"><span class="linenos">687</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">trump_suit</span>
</span><span id="PlayerPerspective-688"><a href="#PlayerPerspective-688"><span class="linenos">688</span></a>
</span><span id="PlayerPerspective-689"><a href="#PlayerPerspective-689"><span class="linenos">689</span></a>    <span class="k">def</span> <span class="nf">get_trump_card</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="PlayerPerspective-690"><a href="#PlayerPerspective-690"><span class="linenos">690</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the card which is at the bottom of the talon. Will be None if the talon is empty&quot;&quot;&quot;</span>
</span><span id="PlayerPerspective-691"><a href="#PlayerPerspective-691"><span class="linenos">691</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">trump_card</span><span class="p">()</span>
</span><span id="PlayerPerspective-692"><a href="#PlayerPerspective-692"><span class="linenos">692</span></a>
</span><span id="PlayerPerspective-693"><a href="#PlayerPerspective-693"><span class="linenos">693</span></a>    <span class="k">def</span> <span class="nf">get_talon_size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="PlayerPerspective-694"><a href="#PlayerPerspective-694"><span class="linenos">694</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;How many cards are still on the talon?&quot;&quot;&quot;</span>
</span><span id="PlayerPerspective-695"><a href="#PlayerPerspective-695"><span class="linenos">695</span></a>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">talon</span><span class="p">)</span>
</span><span id="PlayerPerspective-696"><a href="#PlayerPerspective-696"><span class="linenos">696</span></a>
</span><span id="PlayerPerspective-697"><a href="#PlayerPerspective-697"><span class="linenos">697</span></a>    <span class="k">def</span> <span class="nf">get_phase</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GamePhase</span><span class="p">:</span>
</span><span id="PlayerPerspective-698"><a href="#PlayerPerspective-698"><span class="linenos">698</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;What is the pahse of the game? This returns a GamePhase object.</span>
</span><span id="PlayerPerspective-699"><a href="#PlayerPerspective-699"><span class="linenos">699</span></a><span class="sd">        You can check the phase by checking state.get_phase == GamePhase.ONE</span>
</span><span id="PlayerPerspective-700"><a href="#PlayerPerspective-700"><span class="linenos">700</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PlayerPerspective-701"><a href="#PlayerPerspective-701"><span class="linenos">701</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">game_phase</span><span class="p">()</span>
</span><span id="PlayerPerspective-702"><a href="#PlayerPerspective-702"><span class="linenos">702</span></a>
</span><span id="PlayerPerspective-703"><a href="#PlayerPerspective-703"><span class="linenos">703</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="PlayerPerspective-704"><a href="#PlayerPerspective-704"><span class="linenos">704</span></a>    <span class="k">def</span> <span class="nf">get_opponent_hand_in_phase_two</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hand</span><span class="p">:</span>
</span><span id="PlayerPerspective-705"><a href="#PlayerPerspective-705"><span class="linenos">705</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;If the game is in the second phase, you can get the cards in the hand of the opponent.</span>
</span><span id="PlayerPerspective-706"><a href="#PlayerPerspective-706"><span class="linenos">706</span></a><span class="sd">        If this gets called, but the second pahse has not started yet, this will throw en Exception</span>
</span><span id="PlayerPerspective-707"><a href="#PlayerPerspective-707"><span class="linenos">707</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PlayerPerspective-708"><a href="#PlayerPerspective-708"><span class="linenos">708</span></a>
</span><span id="PlayerPerspective-709"><a href="#PlayerPerspective-709"><span class="linenos">709</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="PlayerPerspective-710"><a href="#PlayerPerspective-710"><span class="linenos">710</span></a>    <span class="k">def</span> <span class="nf">am_i_leader</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="PlayerPerspective-711"><a href="#PlayerPerspective-711"><span class="linenos">711</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if the bot is the leader of this trick, False if it is a follower.&quot;&quot;&quot;</span>
</span><span id="PlayerPerspective-712"><a href="#PlayerPerspective-712"><span class="linenos">712</span></a>
</span><span id="PlayerPerspective-713"><a href="#PlayerPerspective-713"><span class="linenos">713</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="PlayerPerspective-714"><a href="#PlayerPerspective-714"><span class="linenos">714</span></a>    <span class="k">def</span> <span class="nf">get_won_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="PlayerPerspective-715"><a href="#PlayerPerspective-715"><span class="linenos">715</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of all cards this Bot has won until now.&quot;&quot;&quot;</span>
</span><span id="PlayerPerspective-716"><a href="#PlayerPerspective-716"><span class="linenos">716</span></a>
</span><span id="PlayerPerspective-717"><a href="#PlayerPerspective-717"><span class="linenos">717</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="PlayerPerspective-718"><a href="#PlayerPerspective-718"><span class="linenos">718</span></a>    <span class="k">def</span> <span class="nf">get_opponent_won_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="PlayerPerspective-719"><a href="#PlayerPerspective-719"><span class="linenos">719</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the list of cards the opponent has won until now.&quot;&quot;&quot;</span>
</span><span id="PlayerPerspective-720"><a href="#PlayerPerspective-720"><span class="linenos">720</span></a>
</span><span id="PlayerPerspective-721"><a href="#PlayerPerspective-721"><span class="linenos">721</span></a>    <span class="k">def</span> <span class="nf">__get_own_bot_state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BotState</span><span class="p">:</span>
</span><span id="PlayerPerspective-722"><a href="#PlayerPerspective-722"><span class="linenos">722</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the internal state object of this bot. This should not be used by a bot.&quot;&quot;&quot;</span>
</span><span id="PlayerPerspective-723"><a href="#PlayerPerspective-723"><span class="linenos">723</span></a>        <span class="n">bot</span><span class="p">:</span> <span class="n">BotState</span>
</span><span id="PlayerPerspective-724"><a href="#PlayerPerspective-724"><span class="linenos">724</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">am_i_leader</span><span class="p">():</span>
</span><span id="PlayerPerspective-725"><a href="#PlayerPerspective-725"><span class="linenos">725</span></a>            <span class="n">bot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span>
</span><span id="PlayerPerspective-726"><a href="#PlayerPerspective-726"><span class="linenos">726</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="PlayerPerspective-727"><a href="#PlayerPerspective-727"><span class="linenos">727</span></a>            <span class="n">bot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span>
</span><span id="PlayerPerspective-728"><a href="#PlayerPerspective-728"><span class="linenos">728</span></a>        <span class="k">return</span> <span class="n">bot</span>
</span><span id="PlayerPerspective-729"><a href="#PlayerPerspective-729"><span class="linenos">729</span></a>
</span><span id="PlayerPerspective-730"><a href="#PlayerPerspective-730"><span class="linenos">730</span></a>    <span class="k">def</span> <span class="nf">__get_opponent_bot_state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BotState</span><span class="p">:</span>
</span><span id="PlayerPerspective-731"><a href="#PlayerPerspective-731"><span class="linenos">731</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the internal state object of the other bot. This should not be used by a bot.&quot;&quot;&quot;</span>
</span><span id="PlayerPerspective-732"><a href="#PlayerPerspective-732"><span class="linenos">732</span></a>        <span class="n">bot</span><span class="p">:</span> <span class="n">BotState</span>
</span><span id="PlayerPerspective-733"><a href="#PlayerPerspective-733"><span class="linenos">733</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">am_i_leader</span><span class="p">():</span>
</span><span id="PlayerPerspective-734"><a href="#PlayerPerspective-734"><span class="linenos">734</span></a>            <span class="n">bot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span>
</span><span id="PlayerPerspective-735"><a href="#PlayerPerspective-735"><span class="linenos">735</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="PlayerPerspective-736"><a href="#PlayerPerspective-736"><span class="linenos">736</span></a>            <span class="n">bot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span>
</span><span id="PlayerPerspective-737"><a href="#PlayerPerspective-737"><span class="linenos">737</span></a>        <span class="k">return</span> <span class="n">bot</span>
</span><span id="PlayerPerspective-738"><a href="#PlayerPerspective-738"><span class="linenos">738</span></a>
</span><span id="PlayerPerspective-739"><a href="#PlayerPerspective-739"><span class="linenos">739</span></a>    <span class="k">def</span> <span class="nf">seen_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="PlayerPerspective-740"><a href="#PlayerPerspective-740"><span class="linenos">740</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of all cards your bot has seen until now</span>
</span><span id="PlayerPerspective-741"><a href="#PlayerPerspective-741"><span class="linenos">741</span></a>
</span><span id="PlayerPerspective-742"><a href="#PlayerPerspective-742"><span class="linenos">742</span></a><span class="sd">        :param leader_move: The move made by the leader of the trick. These cards have also been seen until now.</span>
</span><span id="PlayerPerspective-743"><a href="#PlayerPerspective-743"><span class="linenos">743</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PlayerPerspective-744"><a href="#PlayerPerspective-744"><span class="linenos">744</span></a>        <span class="n">bot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_own_bot_state</span><span class="p">()</span>
</span><span id="PlayerPerspective-745"><a href="#PlayerPerspective-745"><span class="linenos">745</span></a>
</span><span id="PlayerPerspective-746"><a href="#PlayerPerspective-746"><span class="linenos">746</span></a>        <span class="n">seen_cards</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">Card</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>  <span class="c1"># We make it a set to remove duplicates</span>
</span><span id="PlayerPerspective-747"><a href="#PlayerPerspective-747"><span class="linenos">747</span></a>
</span><span id="PlayerPerspective-748"><a href="#PlayerPerspective-748"><span class="linenos">748</span></a>        <span class="c1"># in own hand</span>
</span><span id="PlayerPerspective-749"><a href="#PlayerPerspective-749"><span class="linenos">749</span></a>        <span class="n">seen_cards</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">hand</span><span class="p">)</span>
</span><span id="PlayerPerspective-750"><a href="#PlayerPerspective-750"><span class="linenos">750</span></a>
</span><span id="PlayerPerspective-751"><a href="#PlayerPerspective-751"><span class="linenos">751</span></a>        <span class="c1"># the trump card</span>
</span><span id="PlayerPerspective-752"><a href="#PlayerPerspective-752"><span class="linenos">752</span></a>        <span class="n">trump</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_trump_card</span><span class="p">()</span>
</span><span id="PlayerPerspective-753"><a href="#PlayerPerspective-753"><span class="linenos">753</span></a>        <span class="k">if</span> <span class="n">trump</span><span class="p">:</span>
</span><span id="PlayerPerspective-754"><a href="#PlayerPerspective-754"><span class="linenos">754</span></a>            <span class="n">seen_cards</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">trump</span><span class="p">)</span>
</span><span id="PlayerPerspective-755"><a href="#PlayerPerspective-755"><span class="linenos">755</span></a>
</span><span id="PlayerPerspective-756"><a href="#PlayerPerspective-756"><span class="linenos">756</span></a>        <span class="c1"># all cards which were played in Tricks (icludes marriages and Trump exchanges)</span>
</span><span id="PlayerPerspective-757"><a href="#PlayerPerspective-757"><span class="linenos">757</span></a>
</span><span id="PlayerPerspective-758"><a href="#PlayerPerspective-758"><span class="linenos">758</span></a>        <span class="n">seen_cards</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__past_tricks_cards</span><span class="p">())</span>
</span><span id="PlayerPerspective-759"><a href="#PlayerPerspective-759"><span class="linenos">759</span></a>        <span class="k">if</span> <span class="n">leader_move</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PlayerPerspective-760"><a href="#PlayerPerspective-760"><span class="linenos">760</span></a>            <span class="n">seen_cards</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">leader_move</span><span class="o">.</span><span class="n">cards</span><span class="p">)</span>
</span><span id="PlayerPerspective-761"><a href="#PlayerPerspective-761"><span class="linenos">761</span></a>
</span><span id="PlayerPerspective-762"><a href="#PlayerPerspective-762"><span class="linenos">762</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="n">seen_cards</span><span class="p">)</span>
</span><span id="PlayerPerspective-763"><a href="#PlayerPerspective-763"><span class="linenos">763</span></a>
</span><span id="PlayerPerspective-764"><a href="#PlayerPerspective-764"><span class="linenos">764</span></a>    <span class="k">def</span> <span class="nf">__past_tricks_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="PlayerPerspective-765"><a href="#PlayerPerspective-765"><span class="linenos">765</span></a>        <span class="n">past_cards</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">Card</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</span><span id="PlayerPerspective-766"><a href="#PlayerPerspective-766"><span class="linenos">766</span></a>        <span class="n">prev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">previous</span>
</span><span id="PlayerPerspective-767"><a href="#PlayerPerspective-767"><span class="linenos">767</span></a>        <span class="k">while</span> <span class="n">prev</span><span class="p">:</span>
</span><span id="PlayerPerspective-768"><a href="#PlayerPerspective-768"><span class="linenos">768</span></a>            <span class="n">past_cards</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">prev</span><span class="o">.</span><span class="n">trick</span><span class="o">.</span><span class="n">cards</span><span class="p">)</span>
</span><span id="PlayerPerspective-769"><a href="#PlayerPerspective-769"><span class="linenos">769</span></a>            <span class="n">prev</span> <span class="o">=</span> <span class="n">prev</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">previous</span>
</span><span id="PlayerPerspective-770"><a href="#PlayerPerspective-770"><span class="linenos">770</span></a>        <span class="k">return</span> <span class="n">past_cards</span>
</span><span id="PlayerPerspective-771"><a href="#PlayerPerspective-771"><span class="linenos">771</span></a>
</span><span id="PlayerPerspective-772"><a href="#PlayerPerspective-772"><span class="linenos">772</span></a>    <span class="k">def</span> <span class="nf">get_known_cards_of_opponent_hand</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="PlayerPerspective-773"><a href="#PlayerPerspective-773"><span class="linenos">773</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all cards which are in the opponents hand, but known to your Bot. This includes cards earlier used in marriages, or a trump exchange.</span>
</span><span id="PlayerPerspective-774"><a href="#PlayerPerspective-774"><span class="linenos">774</span></a><span class="sd">        All cards in the second pahse of the game.&quot;&quot;&quot;</span>
</span><span id="PlayerPerspective-775"><a href="#PlayerPerspective-775"><span class="linenos">775</span></a>        <span class="n">opponent_hand</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_opponent_bot_state</span><span class="p">()</span><span class="o">.</span><span class="n">hand</span>
</span><span id="PlayerPerspective-776"><a href="#PlayerPerspective-776"><span class="linenos">776</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_phase</span><span class="p">()</span> <span class="o">==</span> <span class="n">GamePhase</span><span class="o">.</span><span class="n">TWO</span><span class="p">:</span>
</span><span id="PlayerPerspective-777"><a href="#PlayerPerspective-777"><span class="linenos">777</span></a>            <span class="k">return</span> <span class="n">opponent_hand</span>
</span><span id="PlayerPerspective-778"><a href="#PlayerPerspective-778"><span class="linenos">778</span></a>        <span class="c1"># We only disclose cards which have been part of a move, i.e., an Exchange or a Marriage</span>
</span><span id="PlayerPerspective-779"><a href="#PlayerPerspective-779"><span class="linenos">779</span></a>        <span class="n">past_trick_cards</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__past_tricks_cards</span><span class="p">()</span>
</span><span id="PlayerPerspective-780"><a href="#PlayerPerspective-780"><span class="linenos">780</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">c</span><span class="p">:</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">past_trick_cards</span><span class="p">,</span> <span class="n">opponent_hand</span><span class="p">))</span>
</span><span id="PlayerPerspective-781"><a href="#PlayerPerspective-781"><span class="linenos">781</span></a>
</span><span id="PlayerPerspective-782"><a href="#PlayerPerspective-782"><span class="linenos">782</span></a>    <span class="k">def</span> <span class="nf">get_engine</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">:</span>
</span><span id="PlayerPerspective-783"><a href="#PlayerPerspective-783"><span class="linenos">783</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PlayerPerspective-784"><a href="#PlayerPerspective-784"><span class="linenos">784</span></a><span class="sd">        Get the GamePlayEngine in use for the current game.</span>
</span><span id="PlayerPerspective-785"><a href="#PlayerPerspective-785"><span class="linenos">785</span></a><span class="sd">        This engine can be used to retrieve all information about what kind of game we are playing,</span>
</span><span id="PlayerPerspective-786"><a href="#PlayerPerspective-786"><span class="linenos">786</span></a><span class="sd">        but can also be used to simulate alternative game rollouts.</span>
</span><span id="PlayerPerspective-787"><a href="#PlayerPerspective-787"><span class="linenos">787</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PlayerPerspective-788"><a href="#PlayerPerspective-788"><span class="linenos">788</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span>
</span><span id="PlayerPerspective-789"><a href="#PlayerPerspective-789"><span class="linenos">789</span></a>
</span><span id="PlayerPerspective-790"><a href="#PlayerPerspective-790"><span class="linenos">790</span></a>    <span class="k">def</span> <span class="nf">get_state_in_phase_two</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GameState</span><span class="p">:</span>
</span><span id="PlayerPerspective-791"><a href="#PlayerPerspective-791"><span class="linenos">791</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PlayerPerspective-792"><a href="#PlayerPerspective-792"><span class="linenos">792</span></a><span class="sd">        In phase TWO of the game, all information is known, so you can get the complete state</span>
</span><span id="PlayerPerspective-793"><a href="#PlayerPerspective-793"><span class="linenos">793</span></a>
</span><span id="PlayerPerspective-794"><a href="#PlayerPerspective-794"><span class="linenos">794</span></a><span class="sd">        This removes the real bots from the GameState. If you want to continue the game, provide new Bots. See copy_with_other_bots in the GameState class.</span>
</span><span id="PlayerPerspective-795"><a href="#PlayerPerspective-795"><span class="linenos">795</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PlayerPerspective-796"><a href="#PlayerPerspective-796"><span class="linenos">796</span></a>
</span><span id="PlayerPerspective-797"><a href="#PlayerPerspective-797"><span class="linenos">797</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_phase</span><span class="p">()</span> <span class="o">==</span> <span class="n">GamePhase</span><span class="o">.</span><span class="n">TWO</span><span class="p">:</span>
</span><span id="PlayerPerspective-798"><a href="#PlayerPerspective-798"><span class="linenos">798</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">copy_with_other_bots</span><span class="p">(</span><span class="n">_DummyBot</span><span class="p">(),</span> <span class="n">_DummyBot</span><span class="p">())</span>
</span><span id="PlayerPerspective-799"><a href="#PlayerPerspective-799"><span class="linenos">799</span></a>        <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;You cannot get the state in phase one&quot;</span><span class="p">)</span>
</span><span id="PlayerPerspective-800"><a href="#PlayerPerspective-800"><span class="linenos">800</span></a>
</span><span id="PlayerPerspective-801"><a href="#PlayerPerspective-801"><span class="linenos">801</span></a>    <span class="k">def</span> <span class="nf">make_assumption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">],</span> <span class="n">rand</span><span class="p">:</span> <span class="n">Random</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GameState</span><span class="p">:</span>
</span><span id="PlayerPerspective-802"><a href="#PlayerPerspective-802"><span class="linenos">802</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PlayerPerspective-803"><a href="#PlayerPerspective-803"><span class="linenos">803</span></a><span class="sd">        Takes the current imperfect information state and makes a random guess as to the position of the unknown cards.</span>
</span><span id="PlayerPerspective-804"><a href="#PlayerPerspective-804"><span class="linenos">804</span></a><span class="sd">        This also takes into account cards seen earlier during marriages played by the opponent, as well as potential trump jack exchanges</span>
</span><span id="PlayerPerspective-805"><a href="#PlayerPerspective-805"><span class="linenos">805</span></a>
</span><span id="PlayerPerspective-806"><a href="#PlayerPerspective-806"><span class="linenos">806</span></a><span class="sd">        This removes the real bots from the GameState. If you want to continue the game, provide new Bots. See copy_with_other_bots in the GameState class.</span>
</span><span id="PlayerPerspective-807"><a href="#PlayerPerspective-807"><span class="linenos">807</span></a>
</span><span id="PlayerPerspective-808"><a href="#PlayerPerspective-808"><span class="linenos">808</span></a><span class="sd">        :param leader_move: the optional already executed leader_move in the current trick. This card is guaranteed to be in the hand of the leader in the returned GameState.</span>
</span><span id="PlayerPerspective-809"><a href="#PlayerPerspective-809"><span class="linenos">809</span></a><span class="sd">        :param rand: the source of random numbers to do the random assignment of unknown cards</span>
</span><span id="PlayerPerspective-810"><a href="#PlayerPerspective-810"><span class="linenos">810</span></a>
</span><span id="PlayerPerspective-811"><a href="#PlayerPerspective-811"><span class="linenos">811</span></a><span class="sd">        :returns: A perfect information state object.</span>
</span><span id="PlayerPerspective-812"><a href="#PlayerPerspective-812"><span class="linenos">812</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PlayerPerspective-813"><a href="#PlayerPerspective-813"><span class="linenos">813</span></a>        <span class="n">opponent_hand</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_opponent_bot_state</span><span class="p">()</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="PlayerPerspective-814"><a href="#PlayerPerspective-814"><span class="linenos">814</span></a>
</span><span id="PlayerPerspective-815"><a href="#PlayerPerspective-815"><span class="linenos">815</span></a>        <span class="k">if</span> <span class="n">leader_move</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PlayerPerspective-816"><a href="#PlayerPerspective-816"><span class="linenos">816</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">get_cards</span><span class="p">()</span>
</span><span id="PlayerPerspective-817"><a href="#PlayerPerspective-817"><span class="linenos">817</span></a>            <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="n">card</span> <span class="ow">in</span> <span class="n">opponent_hand</span> <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">leader_move</span><span class="o">.</span><span class="n">cards</span><span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;The specified leader_move </span><span class="si">{</span><span class="n">leader_move</span><span class="si">}</span><span class="s2"> is not in the hand of the opponent </span><span class="si">{</span><span class="n">opponent_hand</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="PlayerPerspective-818"><a href="#PlayerPerspective-818"><span class="linenos">818</span></a>
</span><span id="PlayerPerspective-819"><a href="#PlayerPerspective-819"><span class="linenos">819</span></a>        <span class="n">full_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">copy_with_other_bots</span><span class="p">(</span><span class="n">_DummyBot</span><span class="p">(),</span> <span class="n">_DummyBot</span><span class="p">())</span>
</span><span id="PlayerPerspective-820"><a href="#PlayerPerspective-820"><span class="linenos">820</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_phase</span><span class="p">()</span> <span class="o">==</span> <span class="n">GamePhase</span><span class="o">.</span><span class="n">TWO</span><span class="p">:</span>
</span><span id="PlayerPerspective-821"><a href="#PlayerPerspective-821"><span class="linenos">821</span></a>            <span class="k">return</span> <span class="n">full_state</span>
</span><span id="PlayerPerspective-822"><a href="#PlayerPerspective-822"><span class="linenos">822</span></a>
</span><span id="PlayerPerspective-823"><a href="#PlayerPerspective-823"><span class="linenos">823</span></a>        <span class="n">seen_cards</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">seen_cards</span><span class="p">(</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="PlayerPerspective-824"><a href="#PlayerPerspective-824"><span class="linenos">824</span></a>        <span class="n">full_deck</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">deck_generator</span><span class="o">.</span><span class="n">get_initial_deck</span><span class="p">()</span>
</span><span id="PlayerPerspective-825"><a href="#PlayerPerspective-825"><span class="linenos">825</span></a>
</span><span id="PlayerPerspective-826"><a href="#PlayerPerspective-826"><span class="linenos">826</span></a>        <span class="n">opponent_hand</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_opponent_bot_state</span><span class="p">()</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="PlayerPerspective-827"><a href="#PlayerPerspective-827"><span class="linenos">827</span></a>        <span class="n">unseen_opponent_hand</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">card</span><span class="p">:</span> <span class="n">card</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_cards</span><span class="p">,</span> <span class="n">opponent_hand</span><span class="p">))</span>
</span><span id="PlayerPerspective-828"><a href="#PlayerPerspective-828"><span class="linenos">828</span></a>
</span><span id="PlayerPerspective-829"><a href="#PlayerPerspective-829"><span class="linenos">829</span></a>        <span class="n">talon</span> <span class="o">=</span> <span class="n">full_state</span><span class="o">.</span><span class="n">talon</span>
</span><span id="PlayerPerspective-830"><a href="#PlayerPerspective-830"><span class="linenos">830</span></a>        <span class="n">unseen_talon</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">card</span><span class="p">:</span> <span class="n">card</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_cards</span><span class="p">,</span> <span class="n">talon</span><span class="p">))</span>
</span><span id="PlayerPerspective-831"><a href="#PlayerPerspective-831"><span class="linenos">831</span></a>
</span><span id="PlayerPerspective-832"><a href="#PlayerPerspective-832"><span class="linenos">832</span></a>        <span class="n">unseen_cards</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">card</span><span class="p">:</span> <span class="n">card</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_cards</span><span class="p">,</span> <span class="n">full_deck</span><span class="p">))</span>
</span><span id="PlayerPerspective-833"><a href="#PlayerPerspective-833"><span class="linenos">833</span></a>        <span class="n">rand</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">unseen_cards</span><span class="p">)</span>
</span><span id="PlayerPerspective-834"><a href="#PlayerPerspective-834"><span class="linenos">834</span></a>
</span><span id="PlayerPerspective-835"><a href="#PlayerPerspective-835"><span class="linenos">835</span></a>        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">unseen_talon</span><span class="p">)</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">unseen_opponent_hand</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">unseen_cards</span><span class="p">),</span> <span class="s2">&quot;Logical error. The number of unseen cards in the opponents hand and in the talon must be equal to the number of unseen cards&quot;</span>
</span><span id="PlayerPerspective-836"><a href="#PlayerPerspective-836"><span class="linenos">836</span></a>
</span><span id="PlayerPerspective-837"><a href="#PlayerPerspective-837"><span class="linenos">837</span></a>        <span class="n">new_talon</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="PlayerPerspective-838"><a href="#PlayerPerspective-838"><span class="linenos">838</span></a>        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">talon</span><span class="p">:</span>
</span><span id="PlayerPerspective-839"><a href="#PlayerPerspective-839"><span class="linenos">839</span></a>            <span class="k">if</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">unseen_talon</span><span class="p">:</span>
</span><span id="PlayerPerspective-840"><a href="#PlayerPerspective-840"><span class="linenos">840</span></a>                <span class="c1"># take one of the random cards</span>
</span><span id="PlayerPerspective-841"><a href="#PlayerPerspective-841"><span class="linenos">841</span></a>                <span class="n">new_talon</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">unseen_cards</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span>
</span><span id="PlayerPerspective-842"><a href="#PlayerPerspective-842"><span class="linenos">842</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="PlayerPerspective-843"><a href="#PlayerPerspective-843"><span class="linenos">843</span></a>                <span class="n">new_talon</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
</span><span id="PlayerPerspective-844"><a href="#PlayerPerspective-844"><span class="linenos">844</span></a>
</span><span id="PlayerPerspective-845"><a href="#PlayerPerspective-845"><span class="linenos">845</span></a>        <span class="n">full_state</span><span class="o">.</span><span class="n">talon</span> <span class="o">=</span> <span class="n">Talon</span><span class="p">(</span><span class="n">new_talon</span><span class="p">)</span>
</span><span id="PlayerPerspective-846"><a href="#PlayerPerspective-846"><span class="linenos">846</span></a>
</span><span id="PlayerPerspective-847"><a href="#PlayerPerspective-847"><span class="linenos">847</span></a>        <span class="n">new_opponent_hand</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="PlayerPerspective-848"><a href="#PlayerPerspective-848"><span class="linenos">848</span></a>        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">opponent_hand</span><span class="p">:</span>
</span><span id="PlayerPerspective-849"><a href="#PlayerPerspective-849"><span class="linenos">849</span></a>            <span class="k">if</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">unseen_opponent_hand</span><span class="p">:</span>
</span><span id="PlayerPerspective-850"><a href="#PlayerPerspective-850"><span class="linenos">850</span></a>                <span class="n">new_opponent_hand</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">unseen_cards</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span>
</span><span id="PlayerPerspective-851"><a href="#PlayerPerspective-851"><span class="linenos">851</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="PlayerPerspective-852"><a href="#PlayerPerspective-852"><span class="linenos">852</span></a>                <span class="n">new_opponent_hand</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
</span><span id="PlayerPerspective-853"><a href="#PlayerPerspective-853"><span class="linenos">853</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">am_i_leader</span><span class="p">():</span>
</span><span id="PlayerPerspective-854"><a href="#PlayerPerspective-854"><span class="linenos">854</span></a>            <span class="n">full_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">hand</span> <span class="o">=</span> <span class="n">Hand</span><span class="p">(</span><span class="n">new_opponent_hand</span><span class="p">)</span>
</span><span id="PlayerPerspective-855"><a href="#PlayerPerspective-855"><span class="linenos">855</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="PlayerPerspective-856"><a href="#PlayerPerspective-856"><span class="linenos">856</span></a>            <span class="n">full_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span> <span class="o">=</span> <span class="n">Hand</span><span class="p">(</span><span class="n">new_opponent_hand</span><span class="p">)</span>
</span><span id="PlayerPerspective-857"><a href="#PlayerPerspective-857"><span class="linenos">857</span></a>
</span><span id="PlayerPerspective-858"><a href="#PlayerPerspective-858"><span class="linenos">858</span></a>        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">unseen_cards</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;All cards must be consumed by either the opponent hand or talon by now&quot;</span>
</span><span id="PlayerPerspective-859"><a href="#PlayerPerspective-859"><span class="linenos">859</span></a>
</span><span id="PlayerPerspective-860"><a href="#PlayerPerspective-860"><span class="linenos">860</span></a>        <span class="k">return</span> <span class="n">full_state</span>
</span></pre></div>


            <div class="docstring"><p>The perspective a player has on the state of the game. This only gives access to the partially observable information.
The Bot gets passed an instance of this class when it gets requested a move by the GamePlayEngine</p>

<p>This class has several convenience methods to get more information about the current state.</p>
</div>


                            <div id="PlayerPerspective.valid_moves" class="classattr">
                                        <input id="PlayerPerspective.valid_moves-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">valid_moves</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="n"><a href="#Move">schnapsen.game.Move</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="PlayerPerspective.valid_moves-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PlayerPerspective.valid_moves"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PlayerPerspective.valid_moves-626"><a href="#PlayerPerspective.valid_moves-626"><span class="linenos">626</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="PlayerPerspective.valid_moves-627"><a href="#PlayerPerspective.valid_moves-627"><span class="linenos">627</span></a>    <span class="k">def</span> <span class="nf">valid_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="PlayerPerspective.valid_moves-628"><a href="#PlayerPerspective.valid_moves-628"><span class="linenos">628</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PlayerPerspective.valid_moves-629"><a href="#PlayerPerspective.valid_moves-629"><span class="linenos">629</span></a><span class="sd">        Get a list of all valid moves the bot can play at this point in the game.</span>
</span><span id="PlayerPerspective.valid_moves-630"><a href="#PlayerPerspective.valid_moves-630"><span class="linenos">630</span></a>
</span><span id="PlayerPerspective.valid_moves-631"><a href="#PlayerPerspective.valid_moves-631"><span class="linenos">631</span></a><span class="sd">        Design note: this could also return an Iterable[Move], but list[Move] was chosen to make the API easier to use.</span>
</span><span id="PlayerPerspective.valid_moves-632"><a href="#PlayerPerspective.valid_moves-632"><span class="linenos">632</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Get a list of all valid moves the bot can play at this point in the game.</p>

<p>Design note: this could also return an Iterable[Move], but list[Move] was chosen to make the API easier to use.</p>
</div>


                            </div>
                            <div id="PlayerPerspective.get_game_history" class="classattr">
                                        <input id="PlayerPerspective.get_game_history-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_game_history</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n"><a href="#PlayerPerspective">schnapsen.game.PlayerPerspective</a></span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n"><a href="#Trick">schnapsen.game.Trick</a></span><span class="p">]]]</span>:</span></span>

                <label class="view-source-button" for="PlayerPerspective.get_game_history-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PlayerPerspective.get_game_history"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PlayerPerspective.get_game_history-634"><a href="#PlayerPerspective.get_game_history-634"><span class="linenos">634</span></a>    <span class="k">def</span> <span class="nf">get_game_history</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="s1">&#39;PlayerPerspective&#39;</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Trick</span><span class="p">]]]:</span>
</span><span id="PlayerPerspective.get_game_history-635"><a href="#PlayerPerspective.get_game_history-635"><span class="linenos">635</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PlayerPerspective.get_game_history-636"><a href="#PlayerPerspective.get_game_history-636"><span class="linenos">636</span></a><span class="sd">        The game history from the perspective of the player. This means all the past PlayerPerspective this bot has seen, and the Tricks played.</span>
</span><span id="PlayerPerspective.get_game_history-637"><a href="#PlayerPerspective.get_game_history-637"><span class="linenos">637</span></a><span class="sd">        This only provides access to cards the Bot is allowed to see.</span>
</span><span id="PlayerPerspective.get_game_history-638"><a href="#PlayerPerspective.get_game_history-638"><span class="linenos">638</span></a>
</span><span id="PlayerPerspective.get_game_history-639"><a href="#PlayerPerspective.get_game_history-639"><span class="linenos">639</span></a><span class="sd">        :returns: The PlayerPerspective and Tricks in chronological order, index 0 is the first round played. Only the last Trick will be None.</span>
</span><span id="PlayerPerspective.get_game_history-640"><a href="#PlayerPerspective.get_game_history-640"><span class="linenos">640</span></a><span class="sd">        The last pair will contain the current PlayerGameState.</span>
</span><span id="PlayerPerspective.get_game_history-641"><a href="#PlayerPerspective.get_game_history-641"><span class="linenos">641</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PlayerPerspective.get_game_history-642"><a href="#PlayerPerspective.get_game_history-642"><span class="linenos">642</span></a>
</span><span id="PlayerPerspective.get_game_history-643"><a href="#PlayerPerspective.get_game_history-643"><span class="linenos">643</span></a>        <span class="c1"># We reconstruct the history backwards.</span>
</span><span id="PlayerPerspective.get_game_history-644"><a href="#PlayerPerspective.get_game_history-644"><span class="linenos">644</span></a>        <span class="n">game_state_history</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">PlayerPerspective</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Trick</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="PlayerPerspective.get_game_history-645"><a href="#PlayerPerspective.get_game_history-645"><span class="linenos">645</span></a>        <span class="c1"># We first push the current state to the end</span>
</span><span id="PlayerPerspective.get_game_history-646"><a href="#PlayerPerspective.get_game_history-646"><span class="linenos">646</span></a>        <span class="n">game_state_history</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
</span><span id="PlayerPerspective.get_game_history-647"><a href="#PlayerPerspective.get_game_history-647"><span class="linenos">647</span></a>
</span><span id="PlayerPerspective.get_game_history-648"><a href="#PlayerPerspective.get_game_history-648"><span class="linenos">648</span></a>        <span class="n">current_leader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">am_i_leader</span><span class="p">()</span>
</span><span id="PlayerPerspective.get_game_history-649"><a href="#PlayerPerspective.get_game_history-649"><span class="linenos">649</span></a>        <span class="n">current</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">previous</span>
</span><span id="PlayerPerspective.get_game_history-650"><a href="#PlayerPerspective.get_game_history-650"><span class="linenos">650</span></a>
</span><span id="PlayerPerspective.get_game_history-651"><a href="#PlayerPerspective.get_game_history-651"><span class="linenos">651</span></a>        <span class="k">while</span> <span class="n">current</span><span class="p">:</span>
</span><span id="PlayerPerspective.get_game_history-652"><a href="#PlayerPerspective.get_game_history-652"><span class="linenos">652</span></a>            <span class="c1"># If we were leader, and we remained, then we were leader before</span>
</span><span id="PlayerPerspective.get_game_history-653"><a href="#PlayerPerspective.get_game_history-653"><span class="linenos">653</span></a>            <span class="c1"># If we were follower, and we remained, then we were follower before</span>
</span><span id="PlayerPerspective.get_game_history-654"><a href="#PlayerPerspective.get_game_history-654"><span class="linenos">654</span></a>            <span class="c1"># If we were leader, and we did not remain, then we were follower before</span>
</span><span id="PlayerPerspective.get_game_history-655"><a href="#PlayerPerspective.get_game_history-655"><span class="linenos">655</span></a>            <span class="c1"># If we were follower, and we did not remain, then we were leader before</span>
</span><span id="PlayerPerspective.get_game_history-656"><a href="#PlayerPerspective.get_game_history-656"><span class="linenos">656</span></a>            <span class="c1"># This logic gets reflected by the negation of a xor</span>
</span><span id="PlayerPerspective.get_game_history-657"><a href="#PlayerPerspective.get_game_history-657"><span class="linenos">657</span></a>            <span class="n">current_leader</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">current_leader</span> <span class="o">^</span> <span class="n">current</span><span class="o">.</span><span class="n">leader_remained_leader</span>
</span><span id="PlayerPerspective.get_game_history-658"><a href="#PlayerPerspective.get_game_history-658"><span class="linenos">658</span></a>
</span><span id="PlayerPerspective.get_game_history-659"><a href="#PlayerPerspective.get_game_history-659"><span class="linenos">659</span></a>            <span class="n">current_player_state</span><span class="p">:</span> <span class="n">PlayerPerspective</span>
</span><span id="PlayerPerspective.get_game_history-660"><a href="#PlayerPerspective.get_game_history-660"><span class="linenos">660</span></a>            <span class="k">if</span> <span class="n">current_leader</span><span class="p">:</span>
</span><span id="PlayerPerspective.get_game_history-661"><a href="#PlayerPerspective.get_game_history-661"><span class="linenos">661</span></a>                <span class="n">current_player_state</span> <span class="o">=</span> <span class="n">LeaderPerspective</span><span class="p">(</span><span class="n">current</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="p">)</span>
</span><span id="PlayerPerspective.get_game_history-662"><a href="#PlayerPerspective.get_game_history-662"><span class="linenos">662</span></a>            <span class="k">else</span><span class="p">:</span>  <span class="c1"># We are following</span>
</span><span id="PlayerPerspective.get_game_history-663"><a href="#PlayerPerspective.get_game_history-663"><span class="linenos">663</span></a>                <span class="k">if</span> <span class="n">current</span><span class="o">.</span><span class="n">trick</span><span class="o">.</span><span class="n">is_trump_exchange</span><span class="p">():</span>
</span><span id="PlayerPerspective.get_game_history-664"><a href="#PlayerPerspective.get_game_history-664"><span class="linenos">664</span></a>                    <span class="n">current_player_state</span> <span class="o">=</span> <span class="n">ExchangeFollowerPerspective</span><span class="p">(</span><span class="n">current</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="p">)</span>
</span><span id="PlayerPerspective.get_game_history-665"><a href="#PlayerPerspective.get_game_history-665"><span class="linenos">665</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="PlayerPerspective.get_game_history-666"><a href="#PlayerPerspective.get_game_history-666"><span class="linenos">666</span></a>                    <span class="n">current_player_state</span> <span class="o">=</span> <span class="n">FollowerPerspective</span><span class="p">(</span><span class="n">current</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="p">,</span> <span class="n">current</span><span class="o">.</span><span class="n">trick</span><span class="o">.</span><span class="n">as_partial</span><span class="p">()</span><span class="o">.</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="PlayerPerspective.get_game_history-667"><a href="#PlayerPerspective.get_game_history-667"><span class="linenos">667</span></a>            <span class="n">history_record</span> <span class="o">=</span> <span class="p">(</span><span class="n">current_player_state</span><span class="p">,</span> <span class="n">current</span><span class="o">.</span><span class="n">trick</span><span class="p">)</span>
</span><span id="PlayerPerspective.get_game_history-668"><a href="#PlayerPerspective.get_game_history-668"><span class="linenos">668</span></a>            <span class="n">game_state_history</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">history_record</span><span class="p">)</span>
</span><span id="PlayerPerspective.get_game_history-669"><a href="#PlayerPerspective.get_game_history-669"><span class="linenos">669</span></a>
</span><span id="PlayerPerspective.get_game_history-670"><a href="#PlayerPerspective.get_game_history-670"><span class="linenos">670</span></a>            <span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">previous</span>
</span><span id="PlayerPerspective.get_game_history-671"><a href="#PlayerPerspective.get_game_history-671"><span class="linenos">671</span></a>        <span class="k">return</span> <span class="n">game_state_history</span>
</span></pre></div>


            <div class="docstring"><p>The game history from the perspective of the player. This means all the past PlayerPerspective this bot has seen, and the Tricks played.
This only provides access to cards the Bot is allowed to see.</p>

<p>:returns: The PlayerPerspective and Tricks in chronological order, index 0 is the first round played. Only the last Trick will be None.
The last pair will contain the current PlayerGameState.</p>
</div>


                            </div>
                            <div id="PlayerPerspective.get_hand" class="classattr">
                                        <input id="PlayerPerspective.get_hand-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">get_hand</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#Hand">schnapsen.game.Hand</a></span>:</span></span>

                <label class="view-source-button" for="PlayerPerspective.get_hand-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PlayerPerspective.get_hand"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PlayerPerspective.get_hand-673"><a href="#PlayerPerspective.get_hand-673"><span class="linenos">673</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="PlayerPerspective.get_hand-674"><a href="#PlayerPerspective.get_hand-674"><span class="linenos">674</span></a>    <span class="k">def</span> <span class="nf">get_hand</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hand</span><span class="p">:</span>
</span><span id="PlayerPerspective.get_hand-675"><a href="#PlayerPerspective.get_hand-675"><span class="linenos">675</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the cards in the hand of the current player&quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Get the cards in the hand of the current player</p>
</div>


                            </div>
                            <div id="PlayerPerspective.get_my_score" class="classattr">
                                        <input id="PlayerPerspective.get_my_score-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">get_my_score</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#Score">schnapsen.game.Score</a></span>:</span></span>

                <label class="view-source-button" for="PlayerPerspective.get_my_score-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PlayerPerspective.get_my_score"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PlayerPerspective.get_my_score-677"><a href="#PlayerPerspective.get_my_score-677"><span class="linenos">677</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="PlayerPerspective.get_my_score-678"><a href="#PlayerPerspective.get_my_score-678"><span class="linenos">678</span></a>    <span class="k">def</span> <span class="nf">get_my_score</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
</span><span id="PlayerPerspective.get_my_score-679"><a href="#PlayerPerspective.get_my_score-679"><span class="linenos">679</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the socre of the current player. The return Score object contains both the direct points and pending points from a marriage.&quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Get the socre of the current player. The return Score object contains both the direct points and pending points from a marriage.</p>
</div>


                            </div>
                            <div id="PlayerPerspective.get_opponent_score" class="classattr">
                                        <input id="PlayerPerspective.get_opponent_score-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">get_opponent_score</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#Score">schnapsen.game.Score</a></span>:</span></span>

                <label class="view-source-button" for="PlayerPerspective.get_opponent_score-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PlayerPerspective.get_opponent_score"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PlayerPerspective.get_opponent_score-681"><a href="#PlayerPerspective.get_opponent_score-681"><span class="linenos">681</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="PlayerPerspective.get_opponent_score-682"><a href="#PlayerPerspective.get_opponent_score-682"><span class="linenos">682</span></a>    <span class="k">def</span> <span class="nf">get_opponent_score</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
</span><span id="PlayerPerspective.get_opponent_score-683"><a href="#PlayerPerspective.get_opponent_score-683"><span class="linenos">683</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the socre of the other player. The return Score object contains both the direct points and pending points from a marriage.&quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Get the socre of the other player. The return Score object contains both the direct points and pending points from a marriage.</p>
</div>


                            </div>
                            <div id="PlayerPerspective.get_trump_suit" class="classattr">
                                        <input id="PlayerPerspective.get_trump_suit-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_trump_suit</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="deck.html#Suit">schnapsen.deck.Suit</a></span>:</span></span>

                <label class="view-source-button" for="PlayerPerspective.get_trump_suit-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PlayerPerspective.get_trump_suit"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PlayerPerspective.get_trump_suit-685"><a href="#PlayerPerspective.get_trump_suit-685"><span class="linenos">685</span></a>    <span class="k">def</span> <span class="nf">get_trump_suit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Suit</span><span class="p">:</span>
</span><span id="PlayerPerspective.get_trump_suit-686"><a href="#PlayerPerspective.get_trump_suit-686"><span class="linenos">686</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the suit of the trump&quot;&quot;&quot;</span>
</span><span id="PlayerPerspective.get_trump_suit-687"><a href="#PlayerPerspective.get_trump_suit-687"><span class="linenos">687</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">trump_suit</span>
</span></pre></div>


            <div class="docstring"><p>Get the suit of the trump</p>
</div>


                            </div>
                            <div id="PlayerPerspective.get_trump_card" class="classattr">
                                        <input id="PlayerPerspective.get_trump_card-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_trump_card</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="deck.html#Card">schnapsen.deck.Card</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="PlayerPerspective.get_trump_card-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PlayerPerspective.get_trump_card"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PlayerPerspective.get_trump_card-689"><a href="#PlayerPerspective.get_trump_card-689"><span class="linenos">689</span></a>    <span class="k">def</span> <span class="nf">get_trump_card</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Card</span><span class="p">]:</span>
</span><span id="PlayerPerspective.get_trump_card-690"><a href="#PlayerPerspective.get_trump_card-690"><span class="linenos">690</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the card which is at the bottom of the talon. Will be None if the talon is empty&quot;&quot;&quot;</span>
</span><span id="PlayerPerspective.get_trump_card-691"><a href="#PlayerPerspective.get_trump_card-691"><span class="linenos">691</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">trump_card</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Get the card which is at the bottom of the talon. Will be None if the talon is empty</p>
</div>


                            </div>
                            <div id="PlayerPerspective.get_talon_size" class="classattr">
                                        <input id="PlayerPerspective.get_talon_size-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_talon_size</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">int</span>:</span></span>

                <label class="view-source-button" for="PlayerPerspective.get_talon_size-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PlayerPerspective.get_talon_size"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PlayerPerspective.get_talon_size-693"><a href="#PlayerPerspective.get_talon_size-693"><span class="linenos">693</span></a>    <span class="k">def</span> <span class="nf">get_talon_size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="PlayerPerspective.get_talon_size-694"><a href="#PlayerPerspective.get_talon_size-694"><span class="linenos">694</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;How many cards are still on the talon?&quot;&quot;&quot;</span>
</span><span id="PlayerPerspective.get_talon_size-695"><a href="#PlayerPerspective.get_talon_size-695"><span class="linenos">695</span></a>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">talon</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>How many cards are still on the talon?</p>
</div>


                            </div>
                            <div id="PlayerPerspective.get_phase" class="classattr">
                                        <input id="PlayerPerspective.get_phase-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_phase</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#GamePhase">schnapsen.game.GamePhase</a></span>:</span></span>

                <label class="view-source-button" for="PlayerPerspective.get_phase-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PlayerPerspective.get_phase"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PlayerPerspective.get_phase-697"><a href="#PlayerPerspective.get_phase-697"><span class="linenos">697</span></a>    <span class="k">def</span> <span class="nf">get_phase</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GamePhase</span><span class="p">:</span>
</span><span id="PlayerPerspective.get_phase-698"><a href="#PlayerPerspective.get_phase-698"><span class="linenos">698</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;What is the pahse of the game? This returns a GamePhase object.</span>
</span><span id="PlayerPerspective.get_phase-699"><a href="#PlayerPerspective.get_phase-699"><span class="linenos">699</span></a><span class="sd">        You can check the phase by checking state.get_phase == GamePhase.ONE</span>
</span><span id="PlayerPerspective.get_phase-700"><a href="#PlayerPerspective.get_phase-700"><span class="linenos">700</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PlayerPerspective.get_phase-701"><a href="#PlayerPerspective.get_phase-701"><span class="linenos">701</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">game_phase</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>What is the pahse of the game? This returns a GamePhase object.
You can check the phase by checking state.get_phase == <a href="#GamePhase.ONE">GamePhase.ONE</a></p>
</div>


                            </div>
                            <div id="PlayerPerspective.get_opponent_hand_in_phase_two" class="classattr">
                                        <input id="PlayerPerspective.get_opponent_hand_in_phase_two-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">get_opponent_hand_in_phase_two</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#Hand">schnapsen.game.Hand</a></span>:</span></span>

                <label class="view-source-button" for="PlayerPerspective.get_opponent_hand_in_phase_two-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PlayerPerspective.get_opponent_hand_in_phase_two"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PlayerPerspective.get_opponent_hand_in_phase_two-703"><a href="#PlayerPerspective.get_opponent_hand_in_phase_two-703"><span class="linenos">703</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="PlayerPerspective.get_opponent_hand_in_phase_two-704"><a href="#PlayerPerspective.get_opponent_hand_in_phase_two-704"><span class="linenos">704</span></a>    <span class="k">def</span> <span class="nf">get_opponent_hand_in_phase_two</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hand</span><span class="p">:</span>
</span><span id="PlayerPerspective.get_opponent_hand_in_phase_two-705"><a href="#PlayerPerspective.get_opponent_hand_in_phase_two-705"><span class="linenos">705</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;If the game is in the second phase, you can get the cards in the hand of the opponent.</span>
</span><span id="PlayerPerspective.get_opponent_hand_in_phase_two-706"><a href="#PlayerPerspective.get_opponent_hand_in_phase_two-706"><span class="linenos">706</span></a><span class="sd">        If this gets called, but the second pahse has not started yet, this will throw en Exception</span>
</span><span id="PlayerPerspective.get_opponent_hand_in_phase_two-707"><a href="#PlayerPerspective.get_opponent_hand_in_phase_two-707"><span class="linenos">707</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>If the game is in the second phase, you can get the cards in the hand of the opponent.
If this gets called, but the second pahse has not started yet, this will throw en Exception</p>
</div>


                            </div>
                            <div id="PlayerPerspective.am_i_leader" class="classattr">
                                        <input id="PlayerPerspective.am_i_leader-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">am_i_leader</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="PlayerPerspective.am_i_leader-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PlayerPerspective.am_i_leader"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PlayerPerspective.am_i_leader-709"><a href="#PlayerPerspective.am_i_leader-709"><span class="linenos">709</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="PlayerPerspective.am_i_leader-710"><a href="#PlayerPerspective.am_i_leader-710"><span class="linenos">710</span></a>    <span class="k">def</span> <span class="nf">am_i_leader</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="PlayerPerspective.am_i_leader-711"><a href="#PlayerPerspective.am_i_leader-711"><span class="linenos">711</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if the bot is the leader of this trick, False if it is a follower.&quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Returns True if the bot is the leader of this trick, False if it is a follower.</p>
</div>


                            </div>
                            <div id="PlayerPerspective.get_won_cards" class="classattr">
                                        <input id="PlayerPerspective.get_won_cards-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">get_won_cards</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="deck.html#CardCollection">schnapsen.deck.CardCollection</a></span>:</span></span>

                <label class="view-source-button" for="PlayerPerspective.get_won_cards-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PlayerPerspective.get_won_cards"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PlayerPerspective.get_won_cards-713"><a href="#PlayerPerspective.get_won_cards-713"><span class="linenos">713</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="PlayerPerspective.get_won_cards-714"><a href="#PlayerPerspective.get_won_cards-714"><span class="linenos">714</span></a>    <span class="k">def</span> <span class="nf">get_won_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="PlayerPerspective.get_won_cards-715"><a href="#PlayerPerspective.get_won_cards-715"><span class="linenos">715</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of all cards this Bot has won until now.&quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Get a list of all cards this Bot has won until now.</p>
</div>


                            </div>
                            <div id="PlayerPerspective.get_opponent_won_cards" class="classattr">
                                        <input id="PlayerPerspective.get_opponent_won_cards-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">get_opponent_won_cards</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="deck.html#CardCollection">schnapsen.deck.CardCollection</a></span>:</span></span>

                <label class="view-source-button" for="PlayerPerspective.get_opponent_won_cards-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PlayerPerspective.get_opponent_won_cards"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PlayerPerspective.get_opponent_won_cards-717"><a href="#PlayerPerspective.get_opponent_won_cards-717"><span class="linenos">717</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="PlayerPerspective.get_opponent_won_cards-718"><a href="#PlayerPerspective.get_opponent_won_cards-718"><span class="linenos">718</span></a>    <span class="k">def</span> <span class="nf">get_opponent_won_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="PlayerPerspective.get_opponent_won_cards-719"><a href="#PlayerPerspective.get_opponent_won_cards-719"><span class="linenos">719</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the list of cards the opponent has won until now.&quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Get the list of cards the opponent has won until now.</p>
</div>


                            </div>
                            <div id="PlayerPerspective.seen_cards" class="classattr">
                                        <input id="PlayerPerspective.seen_cards-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">seen_cards</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="#Move">schnapsen.game.Move</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n"><a href="deck.html#CardCollection">schnapsen.deck.CardCollection</a></span>:</span></span>

                <label class="view-source-button" for="PlayerPerspective.seen_cards-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PlayerPerspective.seen_cards"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PlayerPerspective.seen_cards-739"><a href="#PlayerPerspective.seen_cards-739"><span class="linenos">739</span></a>    <span class="k">def</span> <span class="nf">seen_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="PlayerPerspective.seen_cards-740"><a href="#PlayerPerspective.seen_cards-740"><span class="linenos">740</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of all cards your bot has seen until now</span>
</span><span id="PlayerPerspective.seen_cards-741"><a href="#PlayerPerspective.seen_cards-741"><span class="linenos">741</span></a>
</span><span id="PlayerPerspective.seen_cards-742"><a href="#PlayerPerspective.seen_cards-742"><span class="linenos">742</span></a><span class="sd">        :param leader_move: The move made by the leader of the trick. These cards have also been seen until now.</span>
</span><span id="PlayerPerspective.seen_cards-743"><a href="#PlayerPerspective.seen_cards-743"><span class="linenos">743</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PlayerPerspective.seen_cards-744"><a href="#PlayerPerspective.seen_cards-744"><span class="linenos">744</span></a>        <span class="n">bot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_own_bot_state</span><span class="p">()</span>
</span><span id="PlayerPerspective.seen_cards-745"><a href="#PlayerPerspective.seen_cards-745"><span class="linenos">745</span></a>
</span><span id="PlayerPerspective.seen_cards-746"><a href="#PlayerPerspective.seen_cards-746"><span class="linenos">746</span></a>        <span class="n">seen_cards</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">Card</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>  <span class="c1"># We make it a set to remove duplicates</span>
</span><span id="PlayerPerspective.seen_cards-747"><a href="#PlayerPerspective.seen_cards-747"><span class="linenos">747</span></a>
</span><span id="PlayerPerspective.seen_cards-748"><a href="#PlayerPerspective.seen_cards-748"><span class="linenos">748</span></a>        <span class="c1"># in own hand</span>
</span><span id="PlayerPerspective.seen_cards-749"><a href="#PlayerPerspective.seen_cards-749"><span class="linenos">749</span></a>        <span class="n">seen_cards</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">bot</span><span class="o">.</span><span class="n">hand</span><span class="p">)</span>
</span><span id="PlayerPerspective.seen_cards-750"><a href="#PlayerPerspective.seen_cards-750"><span class="linenos">750</span></a>
</span><span id="PlayerPerspective.seen_cards-751"><a href="#PlayerPerspective.seen_cards-751"><span class="linenos">751</span></a>        <span class="c1"># the trump card</span>
</span><span id="PlayerPerspective.seen_cards-752"><a href="#PlayerPerspective.seen_cards-752"><span class="linenos">752</span></a>        <span class="n">trump</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_trump_card</span><span class="p">()</span>
</span><span id="PlayerPerspective.seen_cards-753"><a href="#PlayerPerspective.seen_cards-753"><span class="linenos">753</span></a>        <span class="k">if</span> <span class="n">trump</span><span class="p">:</span>
</span><span id="PlayerPerspective.seen_cards-754"><a href="#PlayerPerspective.seen_cards-754"><span class="linenos">754</span></a>            <span class="n">seen_cards</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">trump</span><span class="p">)</span>
</span><span id="PlayerPerspective.seen_cards-755"><a href="#PlayerPerspective.seen_cards-755"><span class="linenos">755</span></a>
</span><span id="PlayerPerspective.seen_cards-756"><a href="#PlayerPerspective.seen_cards-756"><span class="linenos">756</span></a>        <span class="c1"># all cards which were played in Tricks (icludes marriages and Trump exchanges)</span>
</span><span id="PlayerPerspective.seen_cards-757"><a href="#PlayerPerspective.seen_cards-757"><span class="linenos">757</span></a>
</span><span id="PlayerPerspective.seen_cards-758"><a href="#PlayerPerspective.seen_cards-758"><span class="linenos">758</span></a>        <span class="n">seen_cards</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__past_tricks_cards</span><span class="p">())</span>
</span><span id="PlayerPerspective.seen_cards-759"><a href="#PlayerPerspective.seen_cards-759"><span class="linenos">759</span></a>        <span class="k">if</span> <span class="n">leader_move</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PlayerPerspective.seen_cards-760"><a href="#PlayerPerspective.seen_cards-760"><span class="linenos">760</span></a>            <span class="n">seen_cards</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">leader_move</span><span class="o">.</span><span class="n">cards</span><span class="p">)</span>
</span><span id="PlayerPerspective.seen_cards-761"><a href="#PlayerPerspective.seen_cards-761"><span class="linenos">761</span></a>
</span><span id="PlayerPerspective.seen_cards-762"><a href="#PlayerPerspective.seen_cards-762"><span class="linenos">762</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="n">seen_cards</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Get a list of all cards your bot has seen until now</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>leader_move</strong>:  The move made by the leader of the trick. These cards have also been seen until now.</li>
</ul>
</div>


                            </div>
                            <div id="PlayerPerspective.get_known_cards_of_opponent_hand" class="classattr">
                                        <input id="PlayerPerspective.get_known_cards_of_opponent_hand-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_known_cards_of_opponent_hand</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="deck.html#CardCollection">schnapsen.deck.CardCollection</a></span>:</span></span>

                <label class="view-source-button" for="PlayerPerspective.get_known_cards_of_opponent_hand-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PlayerPerspective.get_known_cards_of_opponent_hand"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PlayerPerspective.get_known_cards_of_opponent_hand-772"><a href="#PlayerPerspective.get_known_cards_of_opponent_hand-772"><span class="linenos">772</span></a>    <span class="k">def</span> <span class="nf">get_known_cards_of_opponent_hand</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="PlayerPerspective.get_known_cards_of_opponent_hand-773"><a href="#PlayerPerspective.get_known_cards_of_opponent_hand-773"><span class="linenos">773</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all cards which are in the opponents hand, but known to your Bot. This includes cards earlier used in marriages, or a trump exchange.</span>
</span><span id="PlayerPerspective.get_known_cards_of_opponent_hand-774"><a href="#PlayerPerspective.get_known_cards_of_opponent_hand-774"><span class="linenos">774</span></a><span class="sd">        All cards in the second pahse of the game.&quot;&quot;&quot;</span>
</span><span id="PlayerPerspective.get_known_cards_of_opponent_hand-775"><a href="#PlayerPerspective.get_known_cards_of_opponent_hand-775"><span class="linenos">775</span></a>        <span class="n">opponent_hand</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_opponent_bot_state</span><span class="p">()</span><span class="o">.</span><span class="n">hand</span>
</span><span id="PlayerPerspective.get_known_cards_of_opponent_hand-776"><a href="#PlayerPerspective.get_known_cards_of_opponent_hand-776"><span class="linenos">776</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_phase</span><span class="p">()</span> <span class="o">==</span> <span class="n">GamePhase</span><span class="o">.</span><span class="n">TWO</span><span class="p">:</span>
</span><span id="PlayerPerspective.get_known_cards_of_opponent_hand-777"><a href="#PlayerPerspective.get_known_cards_of_opponent_hand-777"><span class="linenos">777</span></a>            <span class="k">return</span> <span class="n">opponent_hand</span>
</span><span id="PlayerPerspective.get_known_cards_of_opponent_hand-778"><a href="#PlayerPerspective.get_known_cards_of_opponent_hand-778"><span class="linenos">778</span></a>        <span class="c1"># We only disclose cards which have been part of a move, i.e., an Exchange or a Marriage</span>
</span><span id="PlayerPerspective.get_known_cards_of_opponent_hand-779"><a href="#PlayerPerspective.get_known_cards_of_opponent_hand-779"><span class="linenos">779</span></a>        <span class="n">past_trick_cards</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__past_tricks_cards</span><span class="p">()</span>
</span><span id="PlayerPerspective.get_known_cards_of_opponent_hand-780"><a href="#PlayerPerspective.get_known_cards_of_opponent_hand-780"><span class="linenos">780</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">c</span><span class="p">:</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">past_trick_cards</span><span class="p">,</span> <span class="n">opponent_hand</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Get all cards which are in the opponents hand, but known to your Bot. This includes cards earlier used in marriages, or a trump exchange.
All cards in the second pahse of the game.</p>
</div>


                            </div>
                            <div id="PlayerPerspective.get_engine" class="classattr">
                                        <input id="PlayerPerspective.get_engine-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_engine</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#GamePlayEngine">schnapsen.game.GamePlayEngine</a></span>:</span></span>

                <label class="view-source-button" for="PlayerPerspective.get_engine-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PlayerPerspective.get_engine"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PlayerPerspective.get_engine-782"><a href="#PlayerPerspective.get_engine-782"><span class="linenos">782</span></a>    <span class="k">def</span> <span class="nf">get_engine</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">:</span>
</span><span id="PlayerPerspective.get_engine-783"><a href="#PlayerPerspective.get_engine-783"><span class="linenos">783</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PlayerPerspective.get_engine-784"><a href="#PlayerPerspective.get_engine-784"><span class="linenos">784</span></a><span class="sd">        Get the GamePlayEngine in use for the current game.</span>
</span><span id="PlayerPerspective.get_engine-785"><a href="#PlayerPerspective.get_engine-785"><span class="linenos">785</span></a><span class="sd">        This engine can be used to retrieve all information about what kind of game we are playing,</span>
</span><span id="PlayerPerspective.get_engine-786"><a href="#PlayerPerspective.get_engine-786"><span class="linenos">786</span></a><span class="sd">        but can also be used to simulate alternative game rollouts.</span>
</span><span id="PlayerPerspective.get_engine-787"><a href="#PlayerPerspective.get_engine-787"><span class="linenos">787</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PlayerPerspective.get_engine-788"><a href="#PlayerPerspective.get_engine-788"><span class="linenos">788</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span>
</span></pre></div>


            <div class="docstring"><p>Get the GamePlayEngine in use for the current game.
This engine can be used to retrieve all information about what kind of game we are playing,
but can also be used to simulate alternative game rollouts.</p>
</div>


                            </div>
                            <div id="PlayerPerspective.get_state_in_phase_two" class="classattr">
                                        <input id="PlayerPerspective.get_state_in_phase_two-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_state_in_phase_two</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span>:</span></span>

                <label class="view-source-button" for="PlayerPerspective.get_state_in_phase_two-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PlayerPerspective.get_state_in_phase_two"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PlayerPerspective.get_state_in_phase_two-790"><a href="#PlayerPerspective.get_state_in_phase_two-790"><span class="linenos">790</span></a>    <span class="k">def</span> <span class="nf">get_state_in_phase_two</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GameState</span><span class="p">:</span>
</span><span id="PlayerPerspective.get_state_in_phase_two-791"><a href="#PlayerPerspective.get_state_in_phase_two-791"><span class="linenos">791</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PlayerPerspective.get_state_in_phase_two-792"><a href="#PlayerPerspective.get_state_in_phase_two-792"><span class="linenos">792</span></a><span class="sd">        In phase TWO of the game, all information is known, so you can get the complete state</span>
</span><span id="PlayerPerspective.get_state_in_phase_two-793"><a href="#PlayerPerspective.get_state_in_phase_two-793"><span class="linenos">793</span></a>
</span><span id="PlayerPerspective.get_state_in_phase_two-794"><a href="#PlayerPerspective.get_state_in_phase_two-794"><span class="linenos">794</span></a><span class="sd">        This removes the real bots from the GameState. If you want to continue the game, provide new Bots. See copy_with_other_bots in the GameState class.</span>
</span><span id="PlayerPerspective.get_state_in_phase_two-795"><a href="#PlayerPerspective.get_state_in_phase_two-795"><span class="linenos">795</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PlayerPerspective.get_state_in_phase_two-796"><a href="#PlayerPerspective.get_state_in_phase_two-796"><span class="linenos">796</span></a>
</span><span id="PlayerPerspective.get_state_in_phase_two-797"><a href="#PlayerPerspective.get_state_in_phase_two-797"><span class="linenos">797</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_phase</span><span class="p">()</span> <span class="o">==</span> <span class="n">GamePhase</span><span class="o">.</span><span class="n">TWO</span><span class="p">:</span>
</span><span id="PlayerPerspective.get_state_in_phase_two-798"><a href="#PlayerPerspective.get_state_in_phase_two-798"><span class="linenos">798</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">copy_with_other_bots</span><span class="p">(</span><span class="n">_DummyBot</span><span class="p">(),</span> <span class="n">_DummyBot</span><span class="p">())</span>
</span><span id="PlayerPerspective.get_state_in_phase_two-799"><a href="#PlayerPerspective.get_state_in_phase_two-799"><span class="linenos">799</span></a>        <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;You cannot get the state in phase one&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>In phase TWO of the game, all information is known, so you can get the complete state</p>

<p>This removes the real bots from the GameState. If you want to continue the game, provide new Bots. See copy_with_other_bots in the GameState class.</p>
</div>


                            </div>
                            <div id="PlayerPerspective.make_assumption" class="classattr">
                                        <input id="PlayerPerspective.make_assumption-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">make_assumption</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="#Move">schnapsen.game.Move</a></span><span class="p">]</span>,</span><span class="param">	<span class="n">rand</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">Random</span></span><span class="return-annotation">) -> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span>:</span></span>

                <label class="view-source-button" for="PlayerPerspective.make_assumption-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PlayerPerspective.make_assumption"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PlayerPerspective.make_assumption-801"><a href="#PlayerPerspective.make_assumption-801"><span class="linenos">801</span></a>    <span class="k">def</span> <span class="nf">make_assumption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">],</span> <span class="n">rand</span><span class="p">:</span> <span class="n">Random</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GameState</span><span class="p">:</span>
</span><span id="PlayerPerspective.make_assumption-802"><a href="#PlayerPerspective.make_assumption-802"><span class="linenos">802</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PlayerPerspective.make_assumption-803"><a href="#PlayerPerspective.make_assumption-803"><span class="linenos">803</span></a><span class="sd">        Takes the current imperfect information state and makes a random guess as to the position of the unknown cards.</span>
</span><span id="PlayerPerspective.make_assumption-804"><a href="#PlayerPerspective.make_assumption-804"><span class="linenos">804</span></a><span class="sd">        This also takes into account cards seen earlier during marriages played by the opponent, as well as potential trump jack exchanges</span>
</span><span id="PlayerPerspective.make_assumption-805"><a href="#PlayerPerspective.make_assumption-805"><span class="linenos">805</span></a>
</span><span id="PlayerPerspective.make_assumption-806"><a href="#PlayerPerspective.make_assumption-806"><span class="linenos">806</span></a><span class="sd">        This removes the real bots from the GameState. If you want to continue the game, provide new Bots. See copy_with_other_bots in the GameState class.</span>
</span><span id="PlayerPerspective.make_assumption-807"><a href="#PlayerPerspective.make_assumption-807"><span class="linenos">807</span></a>
</span><span id="PlayerPerspective.make_assumption-808"><a href="#PlayerPerspective.make_assumption-808"><span class="linenos">808</span></a><span class="sd">        :param leader_move: the optional already executed leader_move in the current trick. This card is guaranteed to be in the hand of the leader in the returned GameState.</span>
</span><span id="PlayerPerspective.make_assumption-809"><a href="#PlayerPerspective.make_assumption-809"><span class="linenos">809</span></a><span class="sd">        :param rand: the source of random numbers to do the random assignment of unknown cards</span>
</span><span id="PlayerPerspective.make_assumption-810"><a href="#PlayerPerspective.make_assumption-810"><span class="linenos">810</span></a>
</span><span id="PlayerPerspective.make_assumption-811"><a href="#PlayerPerspective.make_assumption-811"><span class="linenos">811</span></a><span class="sd">        :returns: A perfect information state object.</span>
</span><span id="PlayerPerspective.make_assumption-812"><a href="#PlayerPerspective.make_assumption-812"><span class="linenos">812</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PlayerPerspective.make_assumption-813"><a href="#PlayerPerspective.make_assumption-813"><span class="linenos">813</span></a>        <span class="n">opponent_hand</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_opponent_bot_state</span><span class="p">()</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="PlayerPerspective.make_assumption-814"><a href="#PlayerPerspective.make_assumption-814"><span class="linenos">814</span></a>
</span><span id="PlayerPerspective.make_assumption-815"><a href="#PlayerPerspective.make_assumption-815"><span class="linenos">815</span></a>        <span class="k">if</span> <span class="n">leader_move</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PlayerPerspective.make_assumption-816"><a href="#PlayerPerspective.make_assumption-816"><span class="linenos">816</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">get_cards</span><span class="p">()</span>
</span><span id="PlayerPerspective.make_assumption-817"><a href="#PlayerPerspective.make_assumption-817"><span class="linenos">817</span></a>            <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="n">card</span> <span class="ow">in</span> <span class="n">opponent_hand</span> <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">leader_move</span><span class="o">.</span><span class="n">cards</span><span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;The specified leader_move </span><span class="si">{</span><span class="n">leader_move</span><span class="si">}</span><span class="s2"> is not in the hand of the opponent </span><span class="si">{</span><span class="n">opponent_hand</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="PlayerPerspective.make_assumption-818"><a href="#PlayerPerspective.make_assumption-818"><span class="linenos">818</span></a>
</span><span id="PlayerPerspective.make_assumption-819"><a href="#PlayerPerspective.make_assumption-819"><span class="linenos">819</span></a>        <span class="n">full_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">copy_with_other_bots</span><span class="p">(</span><span class="n">_DummyBot</span><span class="p">(),</span> <span class="n">_DummyBot</span><span class="p">())</span>
</span><span id="PlayerPerspective.make_assumption-820"><a href="#PlayerPerspective.make_assumption-820"><span class="linenos">820</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_phase</span><span class="p">()</span> <span class="o">==</span> <span class="n">GamePhase</span><span class="o">.</span><span class="n">TWO</span><span class="p">:</span>
</span><span id="PlayerPerspective.make_assumption-821"><a href="#PlayerPerspective.make_assumption-821"><span class="linenos">821</span></a>            <span class="k">return</span> <span class="n">full_state</span>
</span><span id="PlayerPerspective.make_assumption-822"><a href="#PlayerPerspective.make_assumption-822"><span class="linenos">822</span></a>
</span><span id="PlayerPerspective.make_assumption-823"><a href="#PlayerPerspective.make_assumption-823"><span class="linenos">823</span></a>        <span class="n">seen_cards</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">seen_cards</span><span class="p">(</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="PlayerPerspective.make_assumption-824"><a href="#PlayerPerspective.make_assumption-824"><span class="linenos">824</span></a>        <span class="n">full_deck</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">deck_generator</span><span class="o">.</span><span class="n">get_initial_deck</span><span class="p">()</span>
</span><span id="PlayerPerspective.make_assumption-825"><a href="#PlayerPerspective.make_assumption-825"><span class="linenos">825</span></a>
</span><span id="PlayerPerspective.make_assumption-826"><a href="#PlayerPerspective.make_assumption-826"><span class="linenos">826</span></a>        <span class="n">opponent_hand</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_opponent_bot_state</span><span class="p">()</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="PlayerPerspective.make_assumption-827"><a href="#PlayerPerspective.make_assumption-827"><span class="linenos">827</span></a>        <span class="n">unseen_opponent_hand</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">card</span><span class="p">:</span> <span class="n">card</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_cards</span><span class="p">,</span> <span class="n">opponent_hand</span><span class="p">))</span>
</span><span id="PlayerPerspective.make_assumption-828"><a href="#PlayerPerspective.make_assumption-828"><span class="linenos">828</span></a>
</span><span id="PlayerPerspective.make_assumption-829"><a href="#PlayerPerspective.make_assumption-829"><span class="linenos">829</span></a>        <span class="n">talon</span> <span class="o">=</span> <span class="n">full_state</span><span class="o">.</span><span class="n">talon</span>
</span><span id="PlayerPerspective.make_assumption-830"><a href="#PlayerPerspective.make_assumption-830"><span class="linenos">830</span></a>        <span class="n">unseen_talon</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">card</span><span class="p">:</span> <span class="n">card</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_cards</span><span class="p">,</span> <span class="n">talon</span><span class="p">))</span>
</span><span id="PlayerPerspective.make_assumption-831"><a href="#PlayerPerspective.make_assumption-831"><span class="linenos">831</span></a>
</span><span id="PlayerPerspective.make_assumption-832"><a href="#PlayerPerspective.make_assumption-832"><span class="linenos">832</span></a>        <span class="n">unseen_cards</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">card</span><span class="p">:</span> <span class="n">card</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_cards</span><span class="p">,</span> <span class="n">full_deck</span><span class="p">))</span>
</span><span id="PlayerPerspective.make_assumption-833"><a href="#PlayerPerspective.make_assumption-833"><span class="linenos">833</span></a>        <span class="n">rand</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">unseen_cards</span><span class="p">)</span>
</span><span id="PlayerPerspective.make_assumption-834"><a href="#PlayerPerspective.make_assumption-834"><span class="linenos">834</span></a>
</span><span id="PlayerPerspective.make_assumption-835"><a href="#PlayerPerspective.make_assumption-835"><span class="linenos">835</span></a>        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">unseen_talon</span><span class="p">)</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">unseen_opponent_hand</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">unseen_cards</span><span class="p">),</span> <span class="s2">&quot;Logical error. The number of unseen cards in the opponents hand and in the talon must be equal to the number of unseen cards&quot;</span>
</span><span id="PlayerPerspective.make_assumption-836"><a href="#PlayerPerspective.make_assumption-836"><span class="linenos">836</span></a>
</span><span id="PlayerPerspective.make_assumption-837"><a href="#PlayerPerspective.make_assumption-837"><span class="linenos">837</span></a>        <span class="n">new_talon</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="PlayerPerspective.make_assumption-838"><a href="#PlayerPerspective.make_assumption-838"><span class="linenos">838</span></a>        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">talon</span><span class="p">:</span>
</span><span id="PlayerPerspective.make_assumption-839"><a href="#PlayerPerspective.make_assumption-839"><span class="linenos">839</span></a>            <span class="k">if</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">unseen_talon</span><span class="p">:</span>
</span><span id="PlayerPerspective.make_assumption-840"><a href="#PlayerPerspective.make_assumption-840"><span class="linenos">840</span></a>                <span class="c1"># take one of the random cards</span>
</span><span id="PlayerPerspective.make_assumption-841"><a href="#PlayerPerspective.make_assumption-841"><span class="linenos">841</span></a>                <span class="n">new_talon</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">unseen_cards</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span>
</span><span id="PlayerPerspective.make_assumption-842"><a href="#PlayerPerspective.make_assumption-842"><span class="linenos">842</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="PlayerPerspective.make_assumption-843"><a href="#PlayerPerspective.make_assumption-843"><span class="linenos">843</span></a>                <span class="n">new_talon</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
</span><span id="PlayerPerspective.make_assumption-844"><a href="#PlayerPerspective.make_assumption-844"><span class="linenos">844</span></a>
</span><span id="PlayerPerspective.make_assumption-845"><a href="#PlayerPerspective.make_assumption-845"><span class="linenos">845</span></a>        <span class="n">full_state</span><span class="o">.</span><span class="n">talon</span> <span class="o">=</span> <span class="n">Talon</span><span class="p">(</span><span class="n">new_talon</span><span class="p">)</span>
</span><span id="PlayerPerspective.make_assumption-846"><a href="#PlayerPerspective.make_assumption-846"><span class="linenos">846</span></a>
</span><span id="PlayerPerspective.make_assumption-847"><a href="#PlayerPerspective.make_assumption-847"><span class="linenos">847</span></a>        <span class="n">new_opponent_hand</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="PlayerPerspective.make_assumption-848"><a href="#PlayerPerspective.make_assumption-848"><span class="linenos">848</span></a>        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">opponent_hand</span><span class="p">:</span>
</span><span id="PlayerPerspective.make_assumption-849"><a href="#PlayerPerspective.make_assumption-849"><span class="linenos">849</span></a>            <span class="k">if</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">unseen_opponent_hand</span><span class="p">:</span>
</span><span id="PlayerPerspective.make_assumption-850"><a href="#PlayerPerspective.make_assumption-850"><span class="linenos">850</span></a>                <span class="n">new_opponent_hand</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">unseen_cards</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span>
</span><span id="PlayerPerspective.make_assumption-851"><a href="#PlayerPerspective.make_assumption-851"><span class="linenos">851</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="PlayerPerspective.make_assumption-852"><a href="#PlayerPerspective.make_assumption-852"><span class="linenos">852</span></a>                <span class="n">new_opponent_hand</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
</span><span id="PlayerPerspective.make_assumption-853"><a href="#PlayerPerspective.make_assumption-853"><span class="linenos">853</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">am_i_leader</span><span class="p">():</span>
</span><span id="PlayerPerspective.make_assumption-854"><a href="#PlayerPerspective.make_assumption-854"><span class="linenos">854</span></a>            <span class="n">full_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">hand</span> <span class="o">=</span> <span class="n">Hand</span><span class="p">(</span><span class="n">new_opponent_hand</span><span class="p">)</span>
</span><span id="PlayerPerspective.make_assumption-855"><a href="#PlayerPerspective.make_assumption-855"><span class="linenos">855</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="PlayerPerspective.make_assumption-856"><a href="#PlayerPerspective.make_assumption-856"><span class="linenos">856</span></a>            <span class="n">full_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span> <span class="o">=</span> <span class="n">Hand</span><span class="p">(</span><span class="n">new_opponent_hand</span><span class="p">)</span>
</span><span id="PlayerPerspective.make_assumption-857"><a href="#PlayerPerspective.make_assumption-857"><span class="linenos">857</span></a>
</span><span id="PlayerPerspective.make_assumption-858"><a href="#PlayerPerspective.make_assumption-858"><span class="linenos">858</span></a>        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">unseen_cards</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;All cards must be consumed by either the opponent hand or talon by now&quot;</span>
</span><span id="PlayerPerspective.make_assumption-859"><a href="#PlayerPerspective.make_assumption-859"><span class="linenos">859</span></a>
</span><span id="PlayerPerspective.make_assumption-860"><a href="#PlayerPerspective.make_assumption-860"><span class="linenos">860</span></a>        <span class="k">return</span> <span class="n">full_state</span>
</span></pre></div>


            <div class="docstring"><p>Takes the current imperfect information state and makes a random guess as to the position of the unknown cards.
This also takes into account cards seen earlier during marriages played by the opponent, as well as potential trump jack exchanges</p>

<p>This removes the real bots from the GameState. If you want to continue the game, provide new Bots. See copy_with_other_bots in the GameState class.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>leader_move</strong>:  the optional already executed leader_move in the current trick. This card is guaranteed to be in the hand of the leader in the returned GameState.</li>
<li><strong>rand</strong>:  the source of random numbers to do the random assignment of unknown cards</li>
</ul>

<p>:returns: A perfect information state object.</p>
</div>


                            </div>
                </section>
                <section id="LeaderPerspective">
                            <input id="LeaderPerspective-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">LeaderPerspective</span><wbr>(<span class="base"><a href="#PlayerPerspective">PlayerPerspective</a></span>):

                <label class="view-source-button" for="LeaderPerspective-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LeaderPerspective"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LeaderPerspective-876"><a href="#LeaderPerspective-876"><span class="linenos">876</span></a><span class="k">class</span> <span class="nc">LeaderPerspective</span><span class="p">(</span><span class="n">PlayerPerspective</span><span class="p">):</span>
</span><span id="LeaderPerspective-877"><a href="#LeaderPerspective-877"><span class="linenos">877</span></a>
</span><span id="LeaderPerspective-878"><a href="#LeaderPerspective-878"><span class="linenos">878</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="s1">&#39;GameState&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LeaderPerspective-879"><a href="#LeaderPerspective-879"><span class="linenos">879</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>
</span><span id="LeaderPerspective-880"><a href="#LeaderPerspective-880"><span class="linenos">880</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span> <span class="o">=</span> <span class="n">state</span>
</span><span id="LeaderPerspective-881"><a href="#LeaderPerspective-881"><span class="linenos">881</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span> <span class="o">=</span> <span class="n">engine</span>
</span><span id="LeaderPerspective-882"><a href="#LeaderPerspective-882"><span class="linenos">882</span></a>
</span><span id="LeaderPerspective-883"><a href="#LeaderPerspective-883"><span class="linenos">883</span></a>    <span class="k">def</span> <span class="nf">valid_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="LeaderPerspective-884"><a href="#LeaderPerspective-884"><span class="linenos">884</span></a>        <span class="n">moves</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">move_validator</span><span class="o">.</span><span class="n">get_legal_leader_moves</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="p">)</span>
</span><span id="LeaderPerspective-885"><a href="#LeaderPerspective-885"><span class="linenos">885</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">moves</span><span class="p">)</span>
</span><span id="LeaderPerspective-886"><a href="#LeaderPerspective-886"><span class="linenos">886</span></a>
</span><span id="LeaderPerspective-887"><a href="#LeaderPerspective-887"><span class="linenos">887</span></a>    <span class="k">def</span> <span class="nf">get_hand</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hand</span><span class="p">:</span>
</span><span id="LeaderPerspective-888"><a href="#LeaderPerspective-888"><span class="linenos">888</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="LeaderPerspective-889"><a href="#LeaderPerspective-889"><span class="linenos">889</span></a>
</span><span id="LeaderPerspective-890"><a href="#LeaderPerspective-890"><span class="linenos">890</span></a>    <span class="k">def</span> <span class="nf">get_my_score</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
</span><span id="LeaderPerspective-891"><a href="#LeaderPerspective-891"><span class="linenos">891</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">score</span>
</span><span id="LeaderPerspective-892"><a href="#LeaderPerspective-892"><span class="linenos">892</span></a>
</span><span id="LeaderPerspective-893"><a href="#LeaderPerspective-893"><span class="linenos">893</span></a>    <span class="k">def</span> <span class="nf">get_opponent_score</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
</span><span id="LeaderPerspective-894"><a href="#LeaderPerspective-894"><span class="linenos">894</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">score</span>
</span><span id="LeaderPerspective-895"><a href="#LeaderPerspective-895"><span class="linenos">895</span></a>
</span><span id="LeaderPerspective-896"><a href="#LeaderPerspective-896"><span class="linenos">896</span></a>    <span class="k">def</span> <span class="nf">get_opponent_hand_in_phase_two</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hand</span><span class="p">:</span>
</span><span id="LeaderPerspective-897"><a href="#LeaderPerspective-897"><span class="linenos">897</span></a>        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_phase</span><span class="p">()</span> <span class="o">==</span> <span class="n">GamePhase</span><span class="o">.</span><span class="n">TWO</span>
</span><span id="LeaderPerspective-898"><a href="#LeaderPerspective-898"><span class="linenos">898</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="LeaderPerspective-899"><a href="#LeaderPerspective-899"><span class="linenos">899</span></a>
</span><span id="LeaderPerspective-900"><a href="#LeaderPerspective-900"><span class="linenos">900</span></a>    <span class="k">def</span> <span class="nf">am_i_leader</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="LeaderPerspective-901"><a href="#LeaderPerspective-901"><span class="linenos">901</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="LeaderPerspective-902"><a href="#LeaderPerspective-902"><span class="linenos">902</span></a>
</span><span id="LeaderPerspective-903"><a href="#LeaderPerspective-903"><span class="linenos">903</span></a>    <span class="k">def</span> <span class="nf">get_won_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="LeaderPerspective-904"><a href="#LeaderPerspective-904"><span class="linenos">904</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">won_cards</span><span class="p">)</span>
</span><span id="LeaderPerspective-905"><a href="#LeaderPerspective-905"><span class="linenos">905</span></a>
</span><span id="LeaderPerspective-906"><a href="#LeaderPerspective-906"><span class="linenos">906</span></a>    <span class="k">def</span> <span class="nf">get_opponent_won_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="LeaderPerspective-907"><a href="#LeaderPerspective-907"><span class="linenos">907</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">won_cards</span><span class="p">)</span>
</span><span id="LeaderPerspective-908"><a href="#LeaderPerspective-908"><span class="linenos">908</span></a>
</span><span id="LeaderPerspective-909"><a href="#LeaderPerspective-909"><span class="linenos">909</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="LeaderPerspective-910"><a href="#LeaderPerspective-910"><span class="linenos">910</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;LeaderPerspective(state=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="si">}</span><span class="s2">, engine=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="si">}</span><span class="s2">)&quot;</span>
</span></pre></div>


            <div class="docstring"><p>The perspective a player has on the state of the game. This only gives access to the partially observable information.
The Bot gets passed an instance of this class when it gets requested a move by the GamePlayEngine</p>

<p>This class has several convenience methods to get more information about the current state.</p>
</div>


                            <div id="LeaderPerspective.__init__" class="classattr">
                                        <input id="LeaderPerspective.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">LeaderPerspective</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">state</span><span class="p">:</span> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span>,</span><span class="param">	<span class="n">engine</span><span class="p">:</span> <span class="n"><a href="#GamePlayEngine">schnapsen.game.GamePlayEngine</a></span></span>)</span>

                <label class="view-source-button" for="LeaderPerspective.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LeaderPerspective.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LeaderPerspective.__init__-878"><a href="#LeaderPerspective.__init__-878"><span class="linenos">878</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="s1">&#39;GameState&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LeaderPerspective.__init__-879"><a href="#LeaderPerspective.__init__-879"><span class="linenos">879</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>
</span><span id="LeaderPerspective.__init__-880"><a href="#LeaderPerspective.__init__-880"><span class="linenos">880</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span> <span class="o">=</span> <span class="n">state</span>
</span><span id="LeaderPerspective.__init__-881"><a href="#LeaderPerspective.__init__-881"><span class="linenos">881</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span> <span class="o">=</span> <span class="n">engine</span>
</span></pre></div>


    

                            </div>
                            <div id="LeaderPerspective.valid_moves" class="classattr">
                                        <input id="LeaderPerspective.valid_moves-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">valid_moves</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="n"><a href="#Move">schnapsen.game.Move</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="LeaderPerspective.valid_moves-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LeaderPerspective.valid_moves"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LeaderPerspective.valid_moves-883"><a href="#LeaderPerspective.valid_moves-883"><span class="linenos">883</span></a>    <span class="k">def</span> <span class="nf">valid_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="LeaderPerspective.valid_moves-884"><a href="#LeaderPerspective.valid_moves-884"><span class="linenos">884</span></a>        <span class="n">moves</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">move_validator</span><span class="o">.</span><span class="n">get_legal_leader_moves</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="p">)</span>
</span><span id="LeaderPerspective.valid_moves-885"><a href="#LeaderPerspective.valid_moves-885"><span class="linenos">885</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">moves</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Get a list of all valid moves the bot can play at this point in the game.</p>

<p>Design note: this could also return an Iterable[Move], but list[Move] was chosen to make the API easier to use.</p>
</div>


                            </div>
                            <div id="LeaderPerspective.get_hand" class="classattr">
                                        <input id="LeaderPerspective.get_hand-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_hand</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#Hand">schnapsen.game.Hand</a></span>:</span></span>

                <label class="view-source-button" for="LeaderPerspective.get_hand-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LeaderPerspective.get_hand"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LeaderPerspective.get_hand-887"><a href="#LeaderPerspective.get_hand-887"><span class="linenos">887</span></a>    <span class="k">def</span> <span class="nf">get_hand</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hand</span><span class="p">:</span>
</span><span id="LeaderPerspective.get_hand-888"><a href="#LeaderPerspective.get_hand-888"><span class="linenos">888</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Get the cards in the hand of the current player</p>
</div>


                            </div>
                            <div id="LeaderPerspective.get_my_score" class="classattr">
                                        <input id="LeaderPerspective.get_my_score-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_my_score</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#Score">schnapsen.game.Score</a></span>:</span></span>

                <label class="view-source-button" for="LeaderPerspective.get_my_score-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LeaderPerspective.get_my_score"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LeaderPerspective.get_my_score-890"><a href="#LeaderPerspective.get_my_score-890"><span class="linenos">890</span></a>    <span class="k">def</span> <span class="nf">get_my_score</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
</span><span id="LeaderPerspective.get_my_score-891"><a href="#LeaderPerspective.get_my_score-891"><span class="linenos">891</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">score</span>
</span></pre></div>


            <div class="docstring"><p>Get the socre of the current player. The return Score object contains both the direct points and pending points from a marriage.</p>
</div>


                            </div>
                            <div id="LeaderPerspective.get_opponent_score" class="classattr">
                                        <input id="LeaderPerspective.get_opponent_score-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_opponent_score</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#Score">schnapsen.game.Score</a></span>:</span></span>

                <label class="view-source-button" for="LeaderPerspective.get_opponent_score-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LeaderPerspective.get_opponent_score"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LeaderPerspective.get_opponent_score-893"><a href="#LeaderPerspective.get_opponent_score-893"><span class="linenos">893</span></a>    <span class="k">def</span> <span class="nf">get_opponent_score</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
</span><span id="LeaderPerspective.get_opponent_score-894"><a href="#LeaderPerspective.get_opponent_score-894"><span class="linenos">894</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">score</span>
</span></pre></div>


            <div class="docstring"><p>Get the socre of the other player. The return Score object contains both the direct points and pending points from a marriage.</p>
</div>


                            </div>
                            <div id="LeaderPerspective.get_opponent_hand_in_phase_two" class="classattr">
                                        <input id="LeaderPerspective.get_opponent_hand_in_phase_two-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_opponent_hand_in_phase_two</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#Hand">schnapsen.game.Hand</a></span>:</span></span>

                <label class="view-source-button" for="LeaderPerspective.get_opponent_hand_in_phase_two-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LeaderPerspective.get_opponent_hand_in_phase_two"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LeaderPerspective.get_opponent_hand_in_phase_two-896"><a href="#LeaderPerspective.get_opponent_hand_in_phase_two-896"><span class="linenos">896</span></a>    <span class="k">def</span> <span class="nf">get_opponent_hand_in_phase_two</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hand</span><span class="p">:</span>
</span><span id="LeaderPerspective.get_opponent_hand_in_phase_two-897"><a href="#LeaderPerspective.get_opponent_hand_in_phase_two-897"><span class="linenos">897</span></a>        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_phase</span><span class="p">()</span> <span class="o">==</span> <span class="n">GamePhase</span><span class="o">.</span><span class="n">TWO</span>
</span><span id="LeaderPerspective.get_opponent_hand_in_phase_two-898"><a href="#LeaderPerspective.get_opponent_hand_in_phase_two-898"><span class="linenos">898</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>If the game is in the second phase, you can get the cards in the hand of the opponent.
If this gets called, but the second pahse has not started yet, this will throw en Exception</p>
</div>


                            </div>
                            <div id="LeaderPerspective.am_i_leader" class="classattr">
                                        <input id="LeaderPerspective.am_i_leader-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">am_i_leader</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="LeaderPerspective.am_i_leader-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LeaderPerspective.am_i_leader"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LeaderPerspective.am_i_leader-900"><a href="#LeaderPerspective.am_i_leader-900"><span class="linenos">900</span></a>    <span class="k">def</span> <span class="nf">am_i_leader</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="LeaderPerspective.am_i_leader-901"><a href="#LeaderPerspective.am_i_leader-901"><span class="linenos">901</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Returns True if the bot is the leader of this trick, False if it is a follower.</p>
</div>


                            </div>
                            <div id="LeaderPerspective.get_won_cards" class="classattr">
                                        <input id="LeaderPerspective.get_won_cards-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_won_cards</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="deck.html#CardCollection">schnapsen.deck.CardCollection</a></span>:</span></span>

                <label class="view-source-button" for="LeaderPerspective.get_won_cards-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LeaderPerspective.get_won_cards"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LeaderPerspective.get_won_cards-903"><a href="#LeaderPerspective.get_won_cards-903"><span class="linenos">903</span></a>    <span class="k">def</span> <span class="nf">get_won_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="LeaderPerspective.get_won_cards-904"><a href="#LeaderPerspective.get_won_cards-904"><span class="linenos">904</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">won_cards</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Get a list of all cards this Bot has won until now.</p>
</div>


                            </div>
                            <div id="LeaderPerspective.get_opponent_won_cards" class="classattr">
                                        <input id="LeaderPerspective.get_opponent_won_cards-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_opponent_won_cards</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="deck.html#CardCollection">schnapsen.deck.CardCollection</a></span>:</span></span>

                <label class="view-source-button" for="LeaderPerspective.get_opponent_won_cards-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LeaderPerspective.get_opponent_won_cards"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LeaderPerspective.get_opponent_won_cards-906"><a href="#LeaderPerspective.get_opponent_won_cards-906"><span class="linenos">906</span></a>    <span class="k">def</span> <span class="nf">get_opponent_won_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="LeaderPerspective.get_opponent_won_cards-907"><a href="#LeaderPerspective.get_opponent_won_cards-907"><span class="linenos">907</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">won_cards</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Get the list of cards the opponent has won until now.</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#PlayerPerspective">PlayerPerspective</a></dt>
                                <dd id="LeaderPerspective.get_game_history" class="function"><a href="#PlayerPerspective.get_game_history">get_game_history</a></dd>
                <dd id="LeaderPerspective.get_trump_suit" class="function"><a href="#PlayerPerspective.get_trump_suit">get_trump_suit</a></dd>
                <dd id="LeaderPerspective.get_trump_card" class="function"><a href="#PlayerPerspective.get_trump_card">get_trump_card</a></dd>
                <dd id="LeaderPerspective.get_talon_size" class="function"><a href="#PlayerPerspective.get_talon_size">get_talon_size</a></dd>
                <dd id="LeaderPerspective.get_phase" class="function"><a href="#PlayerPerspective.get_phase">get_phase</a></dd>
                <dd id="LeaderPerspective.seen_cards" class="function"><a href="#PlayerPerspective.seen_cards">seen_cards</a></dd>
                <dd id="LeaderPerspective.get_known_cards_of_opponent_hand" class="function"><a href="#PlayerPerspective.get_known_cards_of_opponent_hand">get_known_cards_of_opponent_hand</a></dd>
                <dd id="LeaderPerspective.get_engine" class="function"><a href="#PlayerPerspective.get_engine">get_engine</a></dd>
                <dd id="LeaderPerspective.get_state_in_phase_two" class="function"><a href="#PlayerPerspective.get_state_in_phase_two">get_state_in_phase_two</a></dd>
                <dd id="LeaderPerspective.make_assumption" class="function"><a href="#PlayerPerspective.make_assumption">make_assumption</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="FollowerPerspective">
                            <input id="FollowerPerspective-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">FollowerPerspective</span><wbr>(<span class="base"><a href="#PlayerPerspective">PlayerPerspective</a></span>):

                <label class="view-source-button" for="FollowerPerspective-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FollowerPerspective"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FollowerPerspective-913"><a href="#FollowerPerspective-913"><span class="linenos">913</span></a><span class="k">class</span> <span class="nc">FollowerPerspective</span><span class="p">(</span><span class="n">PlayerPerspective</span><span class="p">):</span>
</span><span id="FollowerPerspective-914"><a href="#FollowerPerspective-914"><span class="linenos">914</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="s1">&#39;GameState&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FollowerPerspective-915"><a href="#FollowerPerspective-915"><span class="linenos">915</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>
</span><span id="FollowerPerspective-916"><a href="#FollowerPerspective-916"><span class="linenos">916</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span> <span class="o">=</span> <span class="n">state</span>
</span><span id="FollowerPerspective-917"><a href="#FollowerPerspective-917"><span class="linenos">917</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span> <span class="o">=</span> <span class="n">engine</span>
</span><span id="FollowerPerspective-918"><a href="#FollowerPerspective-918"><span class="linenos">918</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__partial_trick</span> <span class="o">=</span> <span class="n">partial_trick</span>
</span><span id="FollowerPerspective-919"><a href="#FollowerPerspective-919"><span class="linenos">919</span></a>
</span><span id="FollowerPerspective-920"><a href="#FollowerPerspective-920"><span class="linenos">920</span></a>    <span class="k">def</span> <span class="nf">valid_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="FollowerPerspective-921"><a href="#FollowerPerspective-921"><span class="linenos">921</span></a>        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">__partial_trick</span><span class="p">,</span> <span class="s2">&quot;There is no partial trick for this follower, so no valid moves.&quot;</span>
</span><span id="FollowerPerspective-922"><a href="#FollowerPerspective-922"><span class="linenos">922</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">move_validator</span><span class="o">.</span><span class="n">get_legal_follower_moves</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__partial_trick</span><span class="p">))</span>
</span><span id="FollowerPerspective-923"><a href="#FollowerPerspective-923"><span class="linenos">923</span></a>
</span><span id="FollowerPerspective-924"><a href="#FollowerPerspective-924"><span class="linenos">924</span></a>    <span class="k">def</span> <span class="nf">get_hand</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hand</span><span class="p">:</span>
</span><span id="FollowerPerspective-925"><a href="#FollowerPerspective-925"><span class="linenos">925</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="FollowerPerspective-926"><a href="#FollowerPerspective-926"><span class="linenos">926</span></a>
</span><span id="FollowerPerspective-927"><a href="#FollowerPerspective-927"><span class="linenos">927</span></a>    <span class="k">def</span> <span class="nf">get_my_score</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
</span><span id="FollowerPerspective-928"><a href="#FollowerPerspective-928"><span class="linenos">928</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">score</span>
</span><span id="FollowerPerspective-929"><a href="#FollowerPerspective-929"><span class="linenos">929</span></a>
</span><span id="FollowerPerspective-930"><a href="#FollowerPerspective-930"><span class="linenos">930</span></a>    <span class="k">def</span> <span class="nf">get_opponent_score</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
</span><span id="FollowerPerspective-931"><a href="#FollowerPerspective-931"><span class="linenos">931</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">score</span>
</span><span id="FollowerPerspective-932"><a href="#FollowerPerspective-932"><span class="linenos">932</span></a>
</span><span id="FollowerPerspective-933"><a href="#FollowerPerspective-933"><span class="linenos">933</span></a>    <span class="k">def</span> <span class="nf">get_opponent_hand_in_phase_two</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hand</span><span class="p">:</span>
</span><span id="FollowerPerspective-934"><a href="#FollowerPerspective-934"><span class="linenos">934</span></a>        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_phase</span><span class="p">()</span> <span class="o">==</span> <span class="n">GamePhase</span><span class="o">.</span><span class="n">TWO</span>
</span><span id="FollowerPerspective-935"><a href="#FollowerPerspective-935"><span class="linenos">935</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="FollowerPerspective-936"><a href="#FollowerPerspective-936"><span class="linenos">936</span></a>
</span><span id="FollowerPerspective-937"><a href="#FollowerPerspective-937"><span class="linenos">937</span></a>    <span class="k">def</span> <span class="nf">am_i_leader</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="FollowerPerspective-938"><a href="#FollowerPerspective-938"><span class="linenos">938</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="FollowerPerspective-939"><a href="#FollowerPerspective-939"><span class="linenos">939</span></a>
</span><span id="FollowerPerspective-940"><a href="#FollowerPerspective-940"><span class="linenos">940</span></a>    <span class="k">def</span> <span class="nf">get_won_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="FollowerPerspective-941"><a href="#FollowerPerspective-941"><span class="linenos">941</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">won_cards</span><span class="p">)</span>
</span><span id="FollowerPerspective-942"><a href="#FollowerPerspective-942"><span class="linenos">942</span></a>
</span><span id="FollowerPerspective-943"><a href="#FollowerPerspective-943"><span class="linenos">943</span></a>    <span class="k">def</span> <span class="nf">get_opponent_won_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="FollowerPerspective-944"><a href="#FollowerPerspective-944"><span class="linenos">944</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">won_cards</span><span class="p">)</span>
</span><span id="FollowerPerspective-945"><a href="#FollowerPerspective-945"><span class="linenos">945</span></a>
</span><span id="FollowerPerspective-946"><a href="#FollowerPerspective-946"><span class="linenos">946</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="FollowerPerspective-947"><a href="#FollowerPerspective-947"><span class="linenos">947</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;FollowerPerspective(state=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="si">}</span><span class="s2">, engine=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="si">}</span><span class="s2">, partial_trick=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__partial_trick</span><span class="si">}</span><span class="s2">)&quot;</span>
</span></pre></div>


            <div class="docstring"><p>The perspective a player has on the state of the game. This only gives access to the partially observable information.
The Bot gets passed an instance of this class when it gets requested a move by the GamePlayEngine</p>

<p>This class has several convenience methods to get more information about the current state.</p>
</div>


                            <div id="FollowerPerspective.__init__" class="classattr">
                                        <input id="FollowerPerspective.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">FollowerPerspective</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">state</span><span class="p">:</span> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span>,</span><span class="param">	<span class="n">engine</span><span class="p">:</span> <span class="n"><a href="#GamePlayEngine">schnapsen.game.GamePlayEngine</a></span>,</span><span class="param">	<span class="n">partial_trick</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="#Move">schnapsen.game.Move</a></span><span class="p">]</span></span>)</span>

                <label class="view-source-button" for="FollowerPerspective.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FollowerPerspective.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FollowerPerspective.__init__-914"><a href="#FollowerPerspective.__init__-914"><span class="linenos">914</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="s1">&#39;GameState&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FollowerPerspective.__init__-915"><a href="#FollowerPerspective.__init__-915"><span class="linenos">915</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>
</span><span id="FollowerPerspective.__init__-916"><a href="#FollowerPerspective.__init__-916"><span class="linenos">916</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span> <span class="o">=</span> <span class="n">state</span>
</span><span id="FollowerPerspective.__init__-917"><a href="#FollowerPerspective.__init__-917"><span class="linenos">917</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span> <span class="o">=</span> <span class="n">engine</span>
</span><span id="FollowerPerspective.__init__-918"><a href="#FollowerPerspective.__init__-918"><span class="linenos">918</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__partial_trick</span> <span class="o">=</span> <span class="n">partial_trick</span>
</span></pre></div>


    

                            </div>
                            <div id="FollowerPerspective.valid_moves" class="classattr">
                                        <input id="FollowerPerspective.valid_moves-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">valid_moves</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="n"><a href="#Move">schnapsen.game.Move</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="FollowerPerspective.valid_moves-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FollowerPerspective.valid_moves"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FollowerPerspective.valid_moves-920"><a href="#FollowerPerspective.valid_moves-920"><span class="linenos">920</span></a>    <span class="k">def</span> <span class="nf">valid_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="FollowerPerspective.valid_moves-921"><a href="#FollowerPerspective.valid_moves-921"><span class="linenos">921</span></a>        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">__partial_trick</span><span class="p">,</span> <span class="s2">&quot;There is no partial trick for this follower, so no valid moves.&quot;</span>
</span><span id="FollowerPerspective.valid_moves-922"><a href="#FollowerPerspective.valid_moves-922"><span class="linenos">922</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="o">.</span><span class="n">move_validator</span><span class="o">.</span><span class="n">get_legal_follower_moves</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__partial_trick</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Get a list of all valid moves the bot can play at this point in the game.</p>

<p>Design note: this could also return an Iterable[Move], but list[Move] was chosen to make the API easier to use.</p>
</div>


                            </div>
                            <div id="FollowerPerspective.get_hand" class="classattr">
                                        <input id="FollowerPerspective.get_hand-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_hand</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#Hand">schnapsen.game.Hand</a></span>:</span></span>

                <label class="view-source-button" for="FollowerPerspective.get_hand-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FollowerPerspective.get_hand"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FollowerPerspective.get_hand-924"><a href="#FollowerPerspective.get_hand-924"><span class="linenos">924</span></a>    <span class="k">def</span> <span class="nf">get_hand</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hand</span><span class="p">:</span>
</span><span id="FollowerPerspective.get_hand-925"><a href="#FollowerPerspective.get_hand-925"><span class="linenos">925</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Get the cards in the hand of the current player</p>
</div>


                            </div>
                            <div id="FollowerPerspective.get_my_score" class="classattr">
                                        <input id="FollowerPerspective.get_my_score-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_my_score</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#Score">schnapsen.game.Score</a></span>:</span></span>

                <label class="view-source-button" for="FollowerPerspective.get_my_score-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FollowerPerspective.get_my_score"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FollowerPerspective.get_my_score-927"><a href="#FollowerPerspective.get_my_score-927"><span class="linenos">927</span></a>    <span class="k">def</span> <span class="nf">get_my_score</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
</span><span id="FollowerPerspective.get_my_score-928"><a href="#FollowerPerspective.get_my_score-928"><span class="linenos">928</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">score</span>
</span></pre></div>


            <div class="docstring"><p>Get the socre of the current player. The return Score object contains both the direct points and pending points from a marriage.</p>
</div>


                            </div>
                            <div id="FollowerPerspective.get_opponent_score" class="classattr">
                                        <input id="FollowerPerspective.get_opponent_score-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_opponent_score</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#Score">schnapsen.game.Score</a></span>:</span></span>

                <label class="view-source-button" for="FollowerPerspective.get_opponent_score-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FollowerPerspective.get_opponent_score"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FollowerPerspective.get_opponent_score-930"><a href="#FollowerPerspective.get_opponent_score-930"><span class="linenos">930</span></a>    <span class="k">def</span> <span class="nf">get_opponent_score</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
</span><span id="FollowerPerspective.get_opponent_score-931"><a href="#FollowerPerspective.get_opponent_score-931"><span class="linenos">931</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">score</span>
</span></pre></div>


            <div class="docstring"><p>Get the socre of the other player. The return Score object contains both the direct points and pending points from a marriage.</p>
</div>


                            </div>
                            <div id="FollowerPerspective.get_opponent_hand_in_phase_two" class="classattr">
                                        <input id="FollowerPerspective.get_opponent_hand_in_phase_two-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_opponent_hand_in_phase_two</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#Hand">schnapsen.game.Hand</a></span>:</span></span>

                <label class="view-source-button" for="FollowerPerspective.get_opponent_hand_in_phase_two-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FollowerPerspective.get_opponent_hand_in_phase_two"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FollowerPerspective.get_opponent_hand_in_phase_two-933"><a href="#FollowerPerspective.get_opponent_hand_in_phase_two-933"><span class="linenos">933</span></a>    <span class="k">def</span> <span class="nf">get_opponent_hand_in_phase_two</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hand</span><span class="p">:</span>
</span><span id="FollowerPerspective.get_opponent_hand_in_phase_two-934"><a href="#FollowerPerspective.get_opponent_hand_in_phase_two-934"><span class="linenos">934</span></a>        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_phase</span><span class="p">()</span> <span class="o">==</span> <span class="n">GamePhase</span><span class="o">.</span><span class="n">TWO</span>
</span><span id="FollowerPerspective.get_opponent_hand_in_phase_two-935"><a href="#FollowerPerspective.get_opponent_hand_in_phase_two-935"><span class="linenos">935</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>If the game is in the second phase, you can get the cards in the hand of the opponent.
If this gets called, but the second pahse has not started yet, this will throw en Exception</p>
</div>


                            </div>
                            <div id="FollowerPerspective.am_i_leader" class="classattr">
                                        <input id="FollowerPerspective.am_i_leader-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">am_i_leader</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="FollowerPerspective.am_i_leader-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FollowerPerspective.am_i_leader"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FollowerPerspective.am_i_leader-937"><a href="#FollowerPerspective.am_i_leader-937"><span class="linenos">937</span></a>    <span class="k">def</span> <span class="nf">am_i_leader</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="FollowerPerspective.am_i_leader-938"><a href="#FollowerPerspective.am_i_leader-938"><span class="linenos">938</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Returns True if the bot is the leader of this trick, False if it is a follower.</p>
</div>


                            </div>
                            <div id="FollowerPerspective.get_won_cards" class="classattr">
                                        <input id="FollowerPerspective.get_won_cards-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_won_cards</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="deck.html#CardCollection">schnapsen.deck.CardCollection</a></span>:</span></span>

                <label class="view-source-button" for="FollowerPerspective.get_won_cards-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FollowerPerspective.get_won_cards"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FollowerPerspective.get_won_cards-940"><a href="#FollowerPerspective.get_won_cards-940"><span class="linenos">940</span></a>    <span class="k">def</span> <span class="nf">get_won_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="FollowerPerspective.get_won_cards-941"><a href="#FollowerPerspective.get_won_cards-941"><span class="linenos">941</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">won_cards</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Get a list of all cards this Bot has won until now.</p>
</div>


                            </div>
                            <div id="FollowerPerspective.get_opponent_won_cards" class="classattr">
                                        <input id="FollowerPerspective.get_opponent_won_cards-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_opponent_won_cards</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="deck.html#CardCollection">schnapsen.deck.CardCollection</a></span>:</span></span>

                <label class="view-source-button" for="FollowerPerspective.get_opponent_won_cards-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FollowerPerspective.get_opponent_won_cards"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FollowerPerspective.get_opponent_won_cards-943"><a href="#FollowerPerspective.get_opponent_won_cards-943"><span class="linenos">943</span></a>    <span class="k">def</span> <span class="nf">get_opponent_won_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="FollowerPerspective.get_opponent_won_cards-944"><a href="#FollowerPerspective.get_opponent_won_cards-944"><span class="linenos">944</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">won_cards</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Get the list of cards the opponent has won until now.</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#PlayerPerspective">PlayerPerspective</a></dt>
                                <dd id="FollowerPerspective.get_game_history" class="function"><a href="#PlayerPerspective.get_game_history">get_game_history</a></dd>
                <dd id="FollowerPerspective.get_trump_suit" class="function"><a href="#PlayerPerspective.get_trump_suit">get_trump_suit</a></dd>
                <dd id="FollowerPerspective.get_trump_card" class="function"><a href="#PlayerPerspective.get_trump_card">get_trump_card</a></dd>
                <dd id="FollowerPerspective.get_talon_size" class="function"><a href="#PlayerPerspective.get_talon_size">get_talon_size</a></dd>
                <dd id="FollowerPerspective.get_phase" class="function"><a href="#PlayerPerspective.get_phase">get_phase</a></dd>
                <dd id="FollowerPerspective.seen_cards" class="function"><a href="#PlayerPerspective.seen_cards">seen_cards</a></dd>
                <dd id="FollowerPerspective.get_known_cards_of_opponent_hand" class="function"><a href="#PlayerPerspective.get_known_cards_of_opponent_hand">get_known_cards_of_opponent_hand</a></dd>
                <dd id="FollowerPerspective.get_engine" class="function"><a href="#PlayerPerspective.get_engine">get_engine</a></dd>
                <dd id="FollowerPerspective.get_state_in_phase_two" class="function"><a href="#PlayerPerspective.get_state_in_phase_two">get_state_in_phase_two</a></dd>
                <dd id="FollowerPerspective.make_assumption" class="function"><a href="#PlayerPerspective.make_assumption">make_assumption</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="ExchangeFollowerPerspective">
                            <input id="ExchangeFollowerPerspective-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">ExchangeFollowerPerspective</span><wbr>(<span class="base"><a href="#PlayerPerspective">PlayerPerspective</a></span>):

                <label class="view-source-button" for="ExchangeFollowerPerspective-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExchangeFollowerPerspective"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExchangeFollowerPerspective-950"><a href="#ExchangeFollowerPerspective-950"><span class="linenos">950</span></a><span class="k">class</span> <span class="nc">ExchangeFollowerPerspective</span><span class="p">(</span><span class="n">PlayerPerspective</span><span class="p">):</span>
</span><span id="ExchangeFollowerPerspective-951"><a href="#ExchangeFollowerPerspective-951"><span class="linenos">951</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExchangeFollowerPerspective-952"><a href="#ExchangeFollowerPerspective-952"><span class="linenos">952</span></a><span class="sd">    A special PlayerGameState only used for the history of a game in which a Trump Exchange happened.</span>
</span><span id="ExchangeFollowerPerspective-953"><a href="#ExchangeFollowerPerspective-953"><span class="linenos">953</span></a><span class="sd">    This state is does not allow any moves.</span>
</span><span id="ExchangeFollowerPerspective-954"><a href="#ExchangeFollowerPerspective-954"><span class="linenos">954</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="ExchangeFollowerPerspective-955"><a href="#ExchangeFollowerPerspective-955"><span class="linenos">955</span></a>
</span><span id="ExchangeFollowerPerspective-956"><a href="#ExchangeFollowerPerspective-956"><span class="linenos">956</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="s1">&#39;GameState&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ExchangeFollowerPerspective-957"><a href="#ExchangeFollowerPerspective-957"><span class="linenos">957</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span> <span class="o">=</span> <span class="n">state</span>
</span><span id="ExchangeFollowerPerspective-958"><a href="#ExchangeFollowerPerspective-958"><span class="linenos">958</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>
</span><span id="ExchangeFollowerPerspective-959"><a href="#ExchangeFollowerPerspective-959"><span class="linenos">959</span></a>
</span><span id="ExchangeFollowerPerspective-960"><a href="#ExchangeFollowerPerspective-960"><span class="linenos">960</span></a>    <span class="k">def</span> <span class="nf">valid_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="ExchangeFollowerPerspective-961"><a href="#ExchangeFollowerPerspective-961"><span class="linenos">961</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExchangeFollowerPerspective-962"><a href="#ExchangeFollowerPerspective-962"><span class="linenos">962</span></a><span class="sd">        Get a list of all valid moves the bot can play at this point in the game.</span>
</span><span id="ExchangeFollowerPerspective-963"><a href="#ExchangeFollowerPerspective-963"><span class="linenos">963</span></a>
</span><span id="ExchangeFollowerPerspective-964"><a href="#ExchangeFollowerPerspective-964"><span class="linenos">964</span></a><span class="sd">        Design note: this could also return an Iterable[Move], but list[Move] was chosen to make the API easier to use.</span>
</span><span id="ExchangeFollowerPerspective-965"><a href="#ExchangeFollowerPerspective-965"><span class="linenos">965</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExchangeFollowerPerspective-966"><a href="#ExchangeFollowerPerspective-966"><span class="linenos">966</span></a>        <span class="k">return</span> <span class="p">[]</span>
</span><span id="ExchangeFollowerPerspective-967"><a href="#ExchangeFollowerPerspective-967"><span class="linenos">967</span></a>
</span><span id="ExchangeFollowerPerspective-968"><a href="#ExchangeFollowerPerspective-968"><span class="linenos">968</span></a>    <span class="k">def</span> <span class="nf">get_hand</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hand</span><span class="p">:</span>
</span><span id="ExchangeFollowerPerspective-969"><a href="#ExchangeFollowerPerspective-969"><span class="linenos">969</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="ExchangeFollowerPerspective-970"><a href="#ExchangeFollowerPerspective-970"><span class="linenos">970</span></a>
</span><span id="ExchangeFollowerPerspective-971"><a href="#ExchangeFollowerPerspective-971"><span class="linenos">971</span></a>    <span class="k">def</span> <span class="nf">get_my_score</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
</span><span id="ExchangeFollowerPerspective-972"><a href="#ExchangeFollowerPerspective-972"><span class="linenos">972</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">score</span>
</span><span id="ExchangeFollowerPerspective-973"><a href="#ExchangeFollowerPerspective-973"><span class="linenos">973</span></a>
</span><span id="ExchangeFollowerPerspective-974"><a href="#ExchangeFollowerPerspective-974"><span class="linenos">974</span></a>    <span class="k">def</span> <span class="nf">get_opponent_score</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
</span><span id="ExchangeFollowerPerspective-975"><a href="#ExchangeFollowerPerspective-975"><span class="linenos">975</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">score</span>
</span><span id="ExchangeFollowerPerspective-976"><a href="#ExchangeFollowerPerspective-976"><span class="linenos">976</span></a>
</span><span id="ExchangeFollowerPerspective-977"><a href="#ExchangeFollowerPerspective-977"><span class="linenos">977</span></a>    <span class="k">def</span> <span class="nf">get_trump_suit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Suit</span><span class="p">:</span>
</span><span id="ExchangeFollowerPerspective-978"><a href="#ExchangeFollowerPerspective-978"><span class="linenos">978</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">trump_suit</span>
</span><span id="ExchangeFollowerPerspective-979"><a href="#ExchangeFollowerPerspective-979"><span class="linenos">979</span></a>
</span><span id="ExchangeFollowerPerspective-980"><a href="#ExchangeFollowerPerspective-980"><span class="linenos">980</span></a>    <span class="k">def</span> <span class="nf">get_opponent_hand_in_phase_two</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hand</span><span class="p">:</span>
</span><span id="ExchangeFollowerPerspective-981"><a href="#ExchangeFollowerPerspective-981"><span class="linenos">981</span></a>        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_phase</span><span class="p">()</span> <span class="o">==</span> <span class="n">GamePhase</span><span class="o">.</span><span class="n">TWO</span>
</span><span id="ExchangeFollowerPerspective-982"><a href="#ExchangeFollowerPerspective-982"><span class="linenos">982</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="ExchangeFollowerPerspective-983"><a href="#ExchangeFollowerPerspective-983"><span class="linenos">983</span></a>
</span><span id="ExchangeFollowerPerspective-984"><a href="#ExchangeFollowerPerspective-984"><span class="linenos">984</span></a>    <span class="k">def</span> <span class="nf">get_opponent_won_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="ExchangeFollowerPerspective-985"><a href="#ExchangeFollowerPerspective-985"><span class="linenos">985</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">won_cards</span><span class="p">)</span>
</span><span id="ExchangeFollowerPerspective-986"><a href="#ExchangeFollowerPerspective-986"><span class="linenos">986</span></a>
</span><span id="ExchangeFollowerPerspective-987"><a href="#ExchangeFollowerPerspective-987"><span class="linenos">987</span></a>    <span class="k">def</span> <span class="nf">get_won_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="ExchangeFollowerPerspective-988"><a href="#ExchangeFollowerPerspective-988"><span class="linenos">988</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">won_cards</span><span class="p">)</span>
</span><span id="ExchangeFollowerPerspective-989"><a href="#ExchangeFollowerPerspective-989"><span class="linenos">989</span></a>
</span><span id="ExchangeFollowerPerspective-990"><a href="#ExchangeFollowerPerspective-990"><span class="linenos">990</span></a>    <span class="k">def</span> <span class="nf">am_i_leader</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="ExchangeFollowerPerspective-991"><a href="#ExchangeFollowerPerspective-991"><span class="linenos">991</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>A special PlayerGameState only used for the history of a game in which a Trump Exchange happened.
This state is does not allow any moves.</p>
</div>


                            <div id="ExchangeFollowerPerspective.__init__" class="classattr">
                                        <input id="ExchangeFollowerPerspective.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">ExchangeFollowerPerspective</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">state</span><span class="p">:</span> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span>,</span><span class="param">	<span class="n">engine</span><span class="p">:</span> <span class="n"><a href="#GamePlayEngine">schnapsen.game.GamePlayEngine</a></span></span>)</span>

                <label class="view-source-button" for="ExchangeFollowerPerspective.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExchangeFollowerPerspective.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExchangeFollowerPerspective.__init__-956"><a href="#ExchangeFollowerPerspective.__init__-956"><span class="linenos">956</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="s1">&#39;GameState&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ExchangeFollowerPerspective.__init__-957"><a href="#ExchangeFollowerPerspective.__init__-957"><span class="linenos">957</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span> <span class="o">=</span> <span class="n">state</span>
</span><span id="ExchangeFollowerPerspective.__init__-958"><a href="#ExchangeFollowerPerspective.__init__-958"><span class="linenos">958</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="ExchangeFollowerPerspective.valid_moves" class="classattr">
                                        <input id="ExchangeFollowerPerspective.valid_moves-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">valid_moves</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="n"><a href="#Move">schnapsen.game.Move</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="ExchangeFollowerPerspective.valid_moves-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExchangeFollowerPerspective.valid_moves"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExchangeFollowerPerspective.valid_moves-960"><a href="#ExchangeFollowerPerspective.valid_moves-960"><span class="linenos">960</span></a>    <span class="k">def</span> <span class="nf">valid_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="ExchangeFollowerPerspective.valid_moves-961"><a href="#ExchangeFollowerPerspective.valid_moves-961"><span class="linenos">961</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ExchangeFollowerPerspective.valid_moves-962"><a href="#ExchangeFollowerPerspective.valid_moves-962"><span class="linenos">962</span></a><span class="sd">        Get a list of all valid moves the bot can play at this point in the game.</span>
</span><span id="ExchangeFollowerPerspective.valid_moves-963"><a href="#ExchangeFollowerPerspective.valid_moves-963"><span class="linenos">963</span></a>
</span><span id="ExchangeFollowerPerspective.valid_moves-964"><a href="#ExchangeFollowerPerspective.valid_moves-964"><span class="linenos">964</span></a><span class="sd">        Design note: this could also return an Iterable[Move], but list[Move] was chosen to make the API easier to use.</span>
</span><span id="ExchangeFollowerPerspective.valid_moves-965"><a href="#ExchangeFollowerPerspective.valid_moves-965"><span class="linenos">965</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ExchangeFollowerPerspective.valid_moves-966"><a href="#ExchangeFollowerPerspective.valid_moves-966"><span class="linenos">966</span></a>        <span class="k">return</span> <span class="p">[]</span>
</span></pre></div>


            <div class="docstring"><p>Get a list of all valid moves the bot can play at this point in the game.</p>

<p>Design note: this could also return an Iterable[Move], but list[Move] was chosen to make the API easier to use.</p>
</div>


                            </div>
                            <div id="ExchangeFollowerPerspective.get_hand" class="classattr">
                                        <input id="ExchangeFollowerPerspective.get_hand-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_hand</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#Hand">schnapsen.game.Hand</a></span>:</span></span>

                <label class="view-source-button" for="ExchangeFollowerPerspective.get_hand-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExchangeFollowerPerspective.get_hand"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExchangeFollowerPerspective.get_hand-968"><a href="#ExchangeFollowerPerspective.get_hand-968"><span class="linenos">968</span></a>    <span class="k">def</span> <span class="nf">get_hand</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hand</span><span class="p">:</span>
</span><span id="ExchangeFollowerPerspective.get_hand-969"><a href="#ExchangeFollowerPerspective.get_hand-969"><span class="linenos">969</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Get the cards in the hand of the current player</p>
</div>


                            </div>
                            <div id="ExchangeFollowerPerspective.get_my_score" class="classattr">
                                        <input id="ExchangeFollowerPerspective.get_my_score-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_my_score</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#Score">schnapsen.game.Score</a></span>:</span></span>

                <label class="view-source-button" for="ExchangeFollowerPerspective.get_my_score-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExchangeFollowerPerspective.get_my_score"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExchangeFollowerPerspective.get_my_score-971"><a href="#ExchangeFollowerPerspective.get_my_score-971"><span class="linenos">971</span></a>    <span class="k">def</span> <span class="nf">get_my_score</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
</span><span id="ExchangeFollowerPerspective.get_my_score-972"><a href="#ExchangeFollowerPerspective.get_my_score-972"><span class="linenos">972</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">score</span>
</span></pre></div>


            <div class="docstring"><p>Get the socre of the current player. The return Score object contains both the direct points and pending points from a marriage.</p>
</div>


                            </div>
                            <div id="ExchangeFollowerPerspective.get_opponent_score" class="classattr">
                                        <input id="ExchangeFollowerPerspective.get_opponent_score-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_opponent_score</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#Score">schnapsen.game.Score</a></span>:</span></span>

                <label class="view-source-button" for="ExchangeFollowerPerspective.get_opponent_score-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExchangeFollowerPerspective.get_opponent_score"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExchangeFollowerPerspective.get_opponent_score-974"><a href="#ExchangeFollowerPerspective.get_opponent_score-974"><span class="linenos">974</span></a>    <span class="k">def</span> <span class="nf">get_opponent_score</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
</span><span id="ExchangeFollowerPerspective.get_opponent_score-975"><a href="#ExchangeFollowerPerspective.get_opponent_score-975"><span class="linenos">975</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">score</span>
</span></pre></div>


            <div class="docstring"><p>Get the socre of the other player. The return Score object contains both the direct points and pending points from a marriage.</p>
</div>


                            </div>
                            <div id="ExchangeFollowerPerspective.get_trump_suit" class="classattr">
                                        <input id="ExchangeFollowerPerspective.get_trump_suit-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_trump_suit</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="deck.html#Suit">schnapsen.deck.Suit</a></span>:</span></span>

                <label class="view-source-button" for="ExchangeFollowerPerspective.get_trump_suit-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExchangeFollowerPerspective.get_trump_suit"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExchangeFollowerPerspective.get_trump_suit-977"><a href="#ExchangeFollowerPerspective.get_trump_suit-977"><span class="linenos">977</span></a>    <span class="k">def</span> <span class="nf">get_trump_suit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Suit</span><span class="p">:</span>
</span><span id="ExchangeFollowerPerspective.get_trump_suit-978"><a href="#ExchangeFollowerPerspective.get_trump_suit-978"><span class="linenos">978</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">trump_suit</span>
</span></pre></div>


            <div class="docstring"><p>Get the suit of the trump</p>
</div>


                            </div>
                            <div id="ExchangeFollowerPerspective.get_opponent_hand_in_phase_two" class="classattr">
                                        <input id="ExchangeFollowerPerspective.get_opponent_hand_in_phase_two-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_opponent_hand_in_phase_two</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#Hand">schnapsen.game.Hand</a></span>:</span></span>

                <label class="view-source-button" for="ExchangeFollowerPerspective.get_opponent_hand_in_phase_two-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExchangeFollowerPerspective.get_opponent_hand_in_phase_two"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExchangeFollowerPerspective.get_opponent_hand_in_phase_two-980"><a href="#ExchangeFollowerPerspective.get_opponent_hand_in_phase_two-980"><span class="linenos">980</span></a>    <span class="k">def</span> <span class="nf">get_opponent_hand_in_phase_two</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hand</span><span class="p">:</span>
</span><span id="ExchangeFollowerPerspective.get_opponent_hand_in_phase_two-981"><a href="#ExchangeFollowerPerspective.get_opponent_hand_in_phase_two-981"><span class="linenos">981</span></a>        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_phase</span><span class="p">()</span> <span class="o">==</span> <span class="n">GamePhase</span><span class="o">.</span><span class="n">TWO</span>
</span><span id="ExchangeFollowerPerspective.get_opponent_hand_in_phase_two-982"><a href="#ExchangeFollowerPerspective.get_opponent_hand_in_phase_two-982"><span class="linenos">982</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>If the game is in the second phase, you can get the cards in the hand of the opponent.
If this gets called, but the second pahse has not started yet, this will throw en Exception</p>
</div>


                            </div>
                            <div id="ExchangeFollowerPerspective.get_opponent_won_cards" class="classattr">
                                        <input id="ExchangeFollowerPerspective.get_opponent_won_cards-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_opponent_won_cards</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="deck.html#CardCollection">schnapsen.deck.CardCollection</a></span>:</span></span>

                <label class="view-source-button" for="ExchangeFollowerPerspective.get_opponent_won_cards-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExchangeFollowerPerspective.get_opponent_won_cards"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExchangeFollowerPerspective.get_opponent_won_cards-984"><a href="#ExchangeFollowerPerspective.get_opponent_won_cards-984"><span class="linenos">984</span></a>    <span class="k">def</span> <span class="nf">get_opponent_won_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="ExchangeFollowerPerspective.get_opponent_won_cards-985"><a href="#ExchangeFollowerPerspective.get_opponent_won_cards-985"><span class="linenos">985</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">won_cards</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Get the list of cards the opponent has won until now.</p>
</div>


                            </div>
                            <div id="ExchangeFollowerPerspective.get_won_cards" class="classattr">
                                        <input id="ExchangeFollowerPerspective.get_won_cards-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_won_cards</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="deck.html#CardCollection">schnapsen.deck.CardCollection</a></span>:</span></span>

                <label class="view-source-button" for="ExchangeFollowerPerspective.get_won_cards-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExchangeFollowerPerspective.get_won_cards"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExchangeFollowerPerspective.get_won_cards-987"><a href="#ExchangeFollowerPerspective.get_won_cards-987"><span class="linenos">987</span></a>    <span class="k">def</span> <span class="nf">get_won_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CardCollection</span><span class="p">:</span>
</span><span id="ExchangeFollowerPerspective.get_won_cards-988"><a href="#ExchangeFollowerPerspective.get_won_cards-988"><span class="linenos">988</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">won_cards</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Get a list of all cards this Bot has won until now.</p>
</div>


                            </div>
                            <div id="ExchangeFollowerPerspective.am_i_leader" class="classattr">
                                        <input id="ExchangeFollowerPerspective.am_i_leader-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">am_i_leader</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="ExchangeFollowerPerspective.am_i_leader-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExchangeFollowerPerspective.am_i_leader"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExchangeFollowerPerspective.am_i_leader-990"><a href="#ExchangeFollowerPerspective.am_i_leader-990"><span class="linenos">990</span></a>    <span class="k">def</span> <span class="nf">am_i_leader</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="ExchangeFollowerPerspective.am_i_leader-991"><a href="#ExchangeFollowerPerspective.am_i_leader-991"><span class="linenos">991</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Returns True if the bot is the leader of this trick, False if it is a follower.</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#PlayerPerspective">PlayerPerspective</a></dt>
                                <dd id="ExchangeFollowerPerspective.get_game_history" class="function"><a href="#PlayerPerspective.get_game_history">get_game_history</a></dd>
                <dd id="ExchangeFollowerPerspective.get_trump_card" class="function"><a href="#PlayerPerspective.get_trump_card">get_trump_card</a></dd>
                <dd id="ExchangeFollowerPerspective.get_talon_size" class="function"><a href="#PlayerPerspective.get_talon_size">get_talon_size</a></dd>
                <dd id="ExchangeFollowerPerspective.get_phase" class="function"><a href="#PlayerPerspective.get_phase">get_phase</a></dd>
                <dd id="ExchangeFollowerPerspective.seen_cards" class="function"><a href="#PlayerPerspective.seen_cards">seen_cards</a></dd>
                <dd id="ExchangeFollowerPerspective.get_known_cards_of_opponent_hand" class="function"><a href="#PlayerPerspective.get_known_cards_of_opponent_hand">get_known_cards_of_opponent_hand</a></dd>
                <dd id="ExchangeFollowerPerspective.get_engine" class="function"><a href="#PlayerPerspective.get_engine">get_engine</a></dd>
                <dd id="ExchangeFollowerPerspective.get_state_in_phase_two" class="function"><a href="#PlayerPerspective.get_state_in_phase_two">get_state_in_phase_two</a></dd>
                <dd id="ExchangeFollowerPerspective.make_assumption" class="function"><a href="#PlayerPerspective.make_assumption">make_assumption</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="WinnerPerspective">
                            <input id="WinnerPerspective-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">WinnerPerspective</span><wbr>(<span class="base"><a href="#LeaderPerspective">LeaderPerspective</a></span>):

                <label class="view-source-button" for="WinnerPerspective-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#WinnerPerspective"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="WinnerPerspective-994"><a href="#WinnerPerspective-994"><span class="linenos"> 994</span></a><span class="k">class</span> <span class="nc">WinnerPerspective</span><span class="p">(</span><span class="n">LeaderPerspective</span><span class="p">):</span>
</span><span id="WinnerPerspective-995"><a href="#WinnerPerspective-995"><span class="linenos"> 995</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The gamestate given to the winner of the game at the very end&quot;&quot;&quot;</span>
</span><span id="WinnerPerspective-996"><a href="#WinnerPerspective-996"><span class="linenos"> 996</span></a>
</span><span id="WinnerPerspective-997"><a href="#WinnerPerspective-997"><span class="linenos"> 997</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="s1">&#39;GameState&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="WinnerPerspective-998"><a href="#WinnerPerspective-998"><span class="linenos"> 998</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span> <span class="o">=</span> <span class="n">state</span>
</span><span id="WinnerPerspective-999"><a href="#WinnerPerspective-999"><span class="linenos"> 999</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span> <span class="o">=</span> <span class="n">engine</span>
</span><span id="WinnerPerspective-1000"><a href="#WinnerPerspective-1000"><span class="linenos">1000</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>
</span><span id="WinnerPerspective-1001"><a href="#WinnerPerspective-1001"><span class="linenos">1001</span></a>
</span><span id="WinnerPerspective-1002"><a href="#WinnerPerspective-1002"><span class="linenos">1002</span></a>    <span class="k">def</span> <span class="nf">valid_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="WinnerPerspective-1003"><a href="#WinnerPerspective-1003"><span class="linenos">1003</span></a>        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Cannot request valid moves from the final PlayerGameState because the game is over&quot;</span><span class="p">)</span>
</span><span id="WinnerPerspective-1004"><a href="#WinnerPerspective-1004"><span class="linenos">1004</span></a>
</span><span id="WinnerPerspective-1005"><a href="#WinnerPerspective-1005"><span class="linenos">1005</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="WinnerPerspective-1006"><a href="#WinnerPerspective-1006"><span class="linenos">1006</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;WinnerGameState(state=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="si">}</span><span class="s2">, engine=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="si">}</span><span class="s2">)&quot;</span>
</span></pre></div>


            <div class="docstring"><p>The gamestate given to the winner of the game at the very end</p>
</div>


                            <div id="WinnerPerspective.__init__" class="classattr">
                                        <input id="WinnerPerspective.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">WinnerPerspective</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">state</span><span class="p">:</span> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span>,</span><span class="param">	<span class="n">engine</span><span class="p">:</span> <span class="n"><a href="#GamePlayEngine">schnapsen.game.GamePlayEngine</a></span></span>)</span>

                <label class="view-source-button" for="WinnerPerspective.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#WinnerPerspective.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="WinnerPerspective.__init__-997"><a href="#WinnerPerspective.__init__-997"><span class="linenos"> 997</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="s1">&#39;GameState&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="WinnerPerspective.__init__-998"><a href="#WinnerPerspective.__init__-998"><span class="linenos"> 998</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span> <span class="o">=</span> <span class="n">state</span>
</span><span id="WinnerPerspective.__init__-999"><a href="#WinnerPerspective.__init__-999"><span class="linenos"> 999</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span> <span class="o">=</span> <span class="n">engine</span>
</span><span id="WinnerPerspective.__init__-1000"><a href="#WinnerPerspective.__init__-1000"><span class="linenos">1000</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="WinnerPerspective.valid_moves" class="classattr">
                                        <input id="WinnerPerspective.valid_moves-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">valid_moves</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="n"><a href="#Move">schnapsen.game.Move</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="WinnerPerspective.valid_moves-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#WinnerPerspective.valid_moves"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="WinnerPerspective.valid_moves-1002"><a href="#WinnerPerspective.valid_moves-1002"><span class="linenos">1002</span></a>    <span class="k">def</span> <span class="nf">valid_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="WinnerPerspective.valid_moves-1003"><a href="#WinnerPerspective.valid_moves-1003"><span class="linenos">1003</span></a>        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Cannot request valid moves from the final PlayerGameState because the game is over&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Get a list of all valid moves the bot can play at this point in the game.</p>

<p>Design note: this could also return an Iterable[Move], but list[Move] was chosen to make the API easier to use.</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#LeaderPerspective">LeaderPerspective</a></dt>
                                <dd id="WinnerPerspective.get_hand" class="function"><a href="#LeaderPerspective.get_hand">get_hand</a></dd>
                <dd id="WinnerPerspective.get_my_score" class="function"><a href="#LeaderPerspective.get_my_score">get_my_score</a></dd>
                <dd id="WinnerPerspective.get_opponent_score" class="function"><a href="#LeaderPerspective.get_opponent_score">get_opponent_score</a></dd>
                <dd id="WinnerPerspective.get_opponent_hand_in_phase_two" class="function"><a href="#LeaderPerspective.get_opponent_hand_in_phase_two">get_opponent_hand_in_phase_two</a></dd>
                <dd id="WinnerPerspective.am_i_leader" class="function"><a href="#LeaderPerspective.am_i_leader">am_i_leader</a></dd>
                <dd id="WinnerPerspective.get_won_cards" class="function"><a href="#LeaderPerspective.get_won_cards">get_won_cards</a></dd>
                <dd id="WinnerPerspective.get_opponent_won_cards" class="function"><a href="#LeaderPerspective.get_opponent_won_cards">get_opponent_won_cards</a></dd>

            </div>
            <div><dt><a href="#PlayerPerspective">PlayerPerspective</a></dt>
                                <dd id="WinnerPerspective.get_game_history" class="function"><a href="#PlayerPerspective.get_game_history">get_game_history</a></dd>
                <dd id="WinnerPerspective.get_trump_suit" class="function"><a href="#PlayerPerspective.get_trump_suit">get_trump_suit</a></dd>
                <dd id="WinnerPerspective.get_trump_card" class="function"><a href="#PlayerPerspective.get_trump_card">get_trump_card</a></dd>
                <dd id="WinnerPerspective.get_talon_size" class="function"><a href="#PlayerPerspective.get_talon_size">get_talon_size</a></dd>
                <dd id="WinnerPerspective.get_phase" class="function"><a href="#PlayerPerspective.get_phase">get_phase</a></dd>
                <dd id="WinnerPerspective.seen_cards" class="function"><a href="#PlayerPerspective.seen_cards">seen_cards</a></dd>
                <dd id="WinnerPerspective.get_known_cards_of_opponent_hand" class="function"><a href="#PlayerPerspective.get_known_cards_of_opponent_hand">get_known_cards_of_opponent_hand</a></dd>
                <dd id="WinnerPerspective.get_engine" class="function"><a href="#PlayerPerspective.get_engine">get_engine</a></dd>
                <dd id="WinnerPerspective.get_state_in_phase_two" class="function"><a href="#PlayerPerspective.get_state_in_phase_two">get_state_in_phase_two</a></dd>
                <dd id="WinnerPerspective.make_assumption" class="function"><a href="#PlayerPerspective.make_assumption">make_assumption</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="LoserPerspective">
                            <input id="LoserPerspective-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">LoserPerspective</span><wbr>(<span class="base"><a href="#FollowerPerspective">FollowerPerspective</a></span>):

                <label class="view-source-button" for="LoserPerspective-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LoserPerspective"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LoserPerspective-1009"><a href="#LoserPerspective-1009"><span class="linenos">1009</span></a><span class="k">class</span> <span class="nc">LoserPerspective</span><span class="p">(</span><span class="n">FollowerPerspective</span><span class="p">):</span>
</span><span id="LoserPerspective-1010"><a href="#LoserPerspective-1010"><span class="linenos">1010</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The gamestate given to the loser of the game at the very end&quot;&quot;&quot;</span>
</span><span id="LoserPerspective-1011"><a href="#LoserPerspective-1011"><span class="linenos">1011</span></a>
</span><span id="LoserPerspective-1012"><a href="#LoserPerspective-1012"><span class="linenos">1012</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="s1">&#39;GameState&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LoserPerspective-1013"><a href="#LoserPerspective-1013"><span class="linenos">1013</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span> <span class="o">=</span> <span class="n">state</span>
</span><span id="LoserPerspective-1014"><a href="#LoserPerspective-1014"><span class="linenos">1014</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span> <span class="o">=</span> <span class="n">engine</span>
</span><span id="LoserPerspective-1015"><a href="#LoserPerspective-1015"><span class="linenos">1015</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="LoserPerspective-1016"><a href="#LoserPerspective-1016"><span class="linenos">1016</span></a>
</span><span id="LoserPerspective-1017"><a href="#LoserPerspective-1017"><span class="linenos">1017</span></a>    <span class="k">def</span> <span class="nf">valid_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="LoserPerspective-1018"><a href="#LoserPerspective-1018"><span class="linenos">1018</span></a>        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Cannot request valid moves from the final PlayerGameState because the game is over&quot;</span><span class="p">)</span>
</span><span id="LoserPerspective-1019"><a href="#LoserPerspective-1019"><span class="linenos">1019</span></a>
</span><span id="LoserPerspective-1020"><a href="#LoserPerspective-1020"><span class="linenos">1020</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="LoserPerspective-1021"><a href="#LoserPerspective-1021"><span class="linenos">1021</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;LoserGameState(state=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span><span class="si">}</span><span class="s2">, engine=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__engine</span><span class="si">}</span><span class="s2">)&quot;</span>
</span></pre></div>


            <div class="docstring"><p>The gamestate given to the loser of the game at the very end</p>
</div>


                            <div id="LoserPerspective.__init__" class="classattr">
                                        <input id="LoserPerspective.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">LoserPerspective</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">state</span><span class="p">:</span> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span>,</span><span class="param">	<span class="n">engine</span><span class="p">:</span> <span class="n"><a href="#GamePlayEngine">schnapsen.game.GamePlayEngine</a></span></span>)</span>

                <label class="view-source-button" for="LoserPerspective.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LoserPerspective.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LoserPerspective.__init__-1012"><a href="#LoserPerspective.__init__-1012"><span class="linenos">1012</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="s1">&#39;GameState&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LoserPerspective.__init__-1013"><a href="#LoserPerspective.__init__-1013"><span class="linenos">1013</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__game_state</span> <span class="o">=</span> <span class="n">state</span>
</span><span id="LoserPerspective.__init__-1014"><a href="#LoserPerspective.__init__-1014"><span class="linenos">1014</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__engine</span> <span class="o">=</span> <span class="n">engine</span>
</span><span id="LoserPerspective.__init__-1015"><a href="#LoserPerspective.__init__-1015"><span class="linenos">1015</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="LoserPerspective.valid_moves" class="classattr">
                                        <input id="LoserPerspective.valid_moves-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">valid_moves</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="n"><a href="#Move">schnapsen.game.Move</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="LoserPerspective.valid_moves-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LoserPerspective.valid_moves"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LoserPerspective.valid_moves-1017"><a href="#LoserPerspective.valid_moves-1017"><span class="linenos">1017</span></a>    <span class="k">def</span> <span class="nf">valid_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="LoserPerspective.valid_moves-1018"><a href="#LoserPerspective.valid_moves-1018"><span class="linenos">1018</span></a>        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Cannot request valid moves from the final PlayerGameState because the game is over&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Get a list of all valid moves the bot can play at this point in the game.</p>

<p>Design note: this could also return an Iterable[Move], but list[Move] was chosen to make the API easier to use.</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#FollowerPerspective">FollowerPerspective</a></dt>
                                <dd id="LoserPerspective.get_hand" class="function"><a href="#FollowerPerspective.get_hand">get_hand</a></dd>
                <dd id="LoserPerspective.get_my_score" class="function"><a href="#FollowerPerspective.get_my_score">get_my_score</a></dd>
                <dd id="LoserPerspective.get_opponent_score" class="function"><a href="#FollowerPerspective.get_opponent_score">get_opponent_score</a></dd>
                <dd id="LoserPerspective.get_opponent_hand_in_phase_two" class="function"><a href="#FollowerPerspective.get_opponent_hand_in_phase_two">get_opponent_hand_in_phase_two</a></dd>
                <dd id="LoserPerspective.am_i_leader" class="function"><a href="#FollowerPerspective.am_i_leader">am_i_leader</a></dd>
                <dd id="LoserPerspective.get_won_cards" class="function"><a href="#FollowerPerspective.get_won_cards">get_won_cards</a></dd>
                <dd id="LoserPerspective.get_opponent_won_cards" class="function"><a href="#FollowerPerspective.get_opponent_won_cards">get_opponent_won_cards</a></dd>

            </div>
            <div><dt><a href="#PlayerPerspective">PlayerPerspective</a></dt>
                                <dd id="LoserPerspective.get_game_history" class="function"><a href="#PlayerPerspective.get_game_history">get_game_history</a></dd>
                <dd id="LoserPerspective.get_trump_suit" class="function"><a href="#PlayerPerspective.get_trump_suit">get_trump_suit</a></dd>
                <dd id="LoserPerspective.get_trump_card" class="function"><a href="#PlayerPerspective.get_trump_card">get_trump_card</a></dd>
                <dd id="LoserPerspective.get_talon_size" class="function"><a href="#PlayerPerspective.get_talon_size">get_talon_size</a></dd>
                <dd id="LoserPerspective.get_phase" class="function"><a href="#PlayerPerspective.get_phase">get_phase</a></dd>
                <dd id="LoserPerspective.seen_cards" class="function"><a href="#PlayerPerspective.seen_cards">seen_cards</a></dd>
                <dd id="LoserPerspective.get_known_cards_of_opponent_hand" class="function"><a href="#PlayerPerspective.get_known_cards_of_opponent_hand">get_known_cards_of_opponent_hand</a></dd>
                <dd id="LoserPerspective.get_engine" class="function"><a href="#PlayerPerspective.get_engine">get_engine</a></dd>
                <dd id="LoserPerspective.get_state_in_phase_two" class="function"><a href="#PlayerPerspective.get_state_in_phase_two">get_state_in_phase_two</a></dd>
                <dd id="LoserPerspective.make_assumption" class="function"><a href="#PlayerPerspective.make_assumption">make_assumption</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="DeckGenerator">
                            <input id="DeckGenerator-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">DeckGenerator</span><wbr>(<span class="base">abc.ABC</span>):

                <label class="view-source-button" for="DeckGenerator-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DeckGenerator"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DeckGenerator-1024"><a href="#DeckGenerator-1024"><span class="linenos">1024</span></a><span class="k">class</span> <span class="nc">DeckGenerator</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="DeckGenerator-1025"><a href="#DeckGenerator-1025"><span class="linenos">1025</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="DeckGenerator-1026"><a href="#DeckGenerator-1026"><span class="linenos">1026</span></a><span class="sd">    A Deckgenerator specifies how what the cards for a game are.</span>
</span><span id="DeckGenerator-1027"><a href="#DeckGenerator-1027"><span class="linenos">1027</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="DeckGenerator-1028"><a href="#DeckGenerator-1028"><span class="linenos">1028</span></a>
</span><span id="DeckGenerator-1029"><a href="#DeckGenerator-1029"><span class="linenos">1029</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="DeckGenerator-1030"><a href="#DeckGenerator-1030"><span class="linenos">1030</span></a>    <span class="k">def</span> <span class="nf">get_initial_deck</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OrderedCardCollection</span><span class="p">:</span>
</span><span id="DeckGenerator-1031"><a href="#DeckGenerator-1031"><span class="linenos">1031</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="DeckGenerator-1032"><a href="#DeckGenerator-1032"><span class="linenos">1032</span></a><span class="sd">        Get the intial deck of cards which are used in the game.</span>
</span><span id="DeckGenerator-1033"><a href="#DeckGenerator-1033"><span class="linenos">1033</span></a><span class="sd">        This method must always return the same set of cards in the same order.</span>
</span><span id="DeckGenerator-1034"><a href="#DeckGenerator-1034"><span class="linenos">1034</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="DeckGenerator-1035"><a href="#DeckGenerator-1035"><span class="linenos">1035</span></a>
</span><span id="DeckGenerator-1036"><a href="#DeckGenerator-1036"><span class="linenos">1036</span></a>    <span class="nd">@classmethod</span>
</span><span id="DeckGenerator-1037"><a href="#DeckGenerator-1037"><span class="linenos">1037</span></a>    <span class="k">def</span> <span class="nf">shuffle_deck</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">deck</span><span class="p">:</span> <span class="n">OrderedCardCollection</span><span class="p">,</span> <span class="n">rng</span><span class="p">:</span> <span class="n">Random</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OrderedCardCollection</span><span class="p">:</span>
</span><span id="DeckGenerator-1038"><a href="#DeckGenerator-1038"><span class="linenos">1038</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="DeckGenerator-1039"><a href="#DeckGenerator-1039"><span class="linenos">1039</span></a><span class="sd">        Shuffle the given deck of cards, using the random number generator as a source of randomness.</span>
</span><span id="DeckGenerator-1040"><a href="#DeckGenerator-1040"><span class="linenos">1040</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="DeckGenerator-1041"><a href="#DeckGenerator-1041"><span class="linenos">1041</span></a>        <span class="n">the_cards</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">deck</span><span class="o">.</span><span class="n">get_cards</span><span class="p">())</span>
</span><span id="DeckGenerator-1042"><a href="#DeckGenerator-1042"><span class="linenos">1042</span></a>        <span class="n">rng</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">the_cards</span><span class="p">)</span>
</span><span id="DeckGenerator-1043"><a href="#DeckGenerator-1043"><span class="linenos">1043</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="n">the_cards</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>A Deckgenerator specifies how what the cards for a game are.</p>
</div>


                            <div id="DeckGenerator.get_initial_deck" class="classattr">
                                        <input id="DeckGenerator.get_initial_deck-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">get_initial_deck</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="deck.html#OrderedCardCollection">schnapsen.deck.OrderedCardCollection</a></span>:</span></span>

                <label class="view-source-button" for="DeckGenerator.get_initial_deck-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DeckGenerator.get_initial_deck"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DeckGenerator.get_initial_deck-1029"><a href="#DeckGenerator.get_initial_deck-1029"><span class="linenos">1029</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="DeckGenerator.get_initial_deck-1030"><a href="#DeckGenerator.get_initial_deck-1030"><span class="linenos">1030</span></a>    <span class="k">def</span> <span class="nf">get_initial_deck</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OrderedCardCollection</span><span class="p">:</span>
</span><span id="DeckGenerator.get_initial_deck-1031"><a href="#DeckGenerator.get_initial_deck-1031"><span class="linenos">1031</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="DeckGenerator.get_initial_deck-1032"><a href="#DeckGenerator.get_initial_deck-1032"><span class="linenos">1032</span></a><span class="sd">        Get the intial deck of cards which are used in the game.</span>
</span><span id="DeckGenerator.get_initial_deck-1033"><a href="#DeckGenerator.get_initial_deck-1033"><span class="linenos">1033</span></a><span class="sd">        This method must always return the same set of cards in the same order.</span>
</span><span id="DeckGenerator.get_initial_deck-1034"><a href="#DeckGenerator.get_initial_deck-1034"><span class="linenos">1034</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Get the intial deck of cards which are used in the game.
This method must always return the same set of cards in the same order.</p>
</div>


                            </div>
                            <div id="DeckGenerator.shuffle_deck" class="classattr">
                                        <input id="DeckGenerator.shuffle_deck-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@classmethod</div>

        <span class="def">def</span>
        <span class="name">shuffle_deck</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">deck</span><span class="p">:</span> <span class="n"><a href="deck.html#OrderedCardCollection">schnapsen.deck.OrderedCardCollection</a></span>,</span><span class="param">	<span class="n">rng</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">Random</span></span><span class="return-annotation">) -> <span class="n"><a href="deck.html#OrderedCardCollection">schnapsen.deck.OrderedCardCollection</a></span>:</span></span>

                <label class="view-source-button" for="DeckGenerator.shuffle_deck-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DeckGenerator.shuffle_deck"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DeckGenerator.shuffle_deck-1036"><a href="#DeckGenerator.shuffle_deck-1036"><span class="linenos">1036</span></a>    <span class="nd">@classmethod</span>
</span><span id="DeckGenerator.shuffle_deck-1037"><a href="#DeckGenerator.shuffle_deck-1037"><span class="linenos">1037</span></a>    <span class="k">def</span> <span class="nf">shuffle_deck</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">deck</span><span class="p">:</span> <span class="n">OrderedCardCollection</span><span class="p">,</span> <span class="n">rng</span><span class="p">:</span> <span class="n">Random</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OrderedCardCollection</span><span class="p">:</span>
</span><span id="DeckGenerator.shuffle_deck-1038"><a href="#DeckGenerator.shuffle_deck-1038"><span class="linenos">1038</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="DeckGenerator.shuffle_deck-1039"><a href="#DeckGenerator.shuffle_deck-1039"><span class="linenos">1039</span></a><span class="sd">        Shuffle the given deck of cards, using the random number generator as a source of randomness.</span>
</span><span id="DeckGenerator.shuffle_deck-1040"><a href="#DeckGenerator.shuffle_deck-1040"><span class="linenos">1040</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="DeckGenerator.shuffle_deck-1041"><a href="#DeckGenerator.shuffle_deck-1041"><span class="linenos">1041</span></a>        <span class="n">the_cards</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">deck</span><span class="o">.</span><span class="n">get_cards</span><span class="p">())</span>
</span><span id="DeckGenerator.shuffle_deck-1042"><a href="#DeckGenerator.shuffle_deck-1042"><span class="linenos">1042</span></a>        <span class="n">rng</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">the_cards</span><span class="p">)</span>
</span><span id="DeckGenerator.shuffle_deck-1043"><a href="#DeckGenerator.shuffle_deck-1043"><span class="linenos">1043</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="n">the_cards</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Shuffle the given deck of cards, using the random number generator as a source of randomness.</p>
</div>


                            </div>
                </section>
                <section id="SchnapsenDeckGenerator">
                            <input id="SchnapsenDeckGenerator-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">SchnapsenDeckGenerator</span><wbr>(<span class="base"><a href="#DeckGenerator">DeckGenerator</a></span>):

                <label class="view-source-button" for="SchnapsenDeckGenerator-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SchnapsenDeckGenerator"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SchnapsenDeckGenerator-1046"><a href="#SchnapsenDeckGenerator-1046"><span class="linenos">1046</span></a><span class="k">class</span> <span class="nc">SchnapsenDeckGenerator</span><span class="p">(</span><span class="n">DeckGenerator</span><span class="p">):</span>
</span><span id="SchnapsenDeckGenerator-1047"><a href="#SchnapsenDeckGenerator-1047"><span class="linenos">1047</span></a>
</span><span id="SchnapsenDeckGenerator-1048"><a href="#SchnapsenDeckGenerator-1048"><span class="linenos">1048</span></a>    <span class="k">def</span> <span class="nf">get_initial_deck</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OrderedCardCollection</span><span class="p">:</span>
</span><span id="SchnapsenDeckGenerator-1049"><a href="#SchnapsenDeckGenerator-1049"><span class="linenos">1049</span></a>        <span class="n">deck</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="SchnapsenDeckGenerator-1050"><a href="#SchnapsenDeckGenerator-1050"><span class="linenos">1050</span></a>        <span class="k">for</span> <span class="n">suit</span> <span class="ow">in</span> <span class="n">Suit</span><span class="p">:</span>
</span><span id="SchnapsenDeckGenerator-1051"><a href="#SchnapsenDeckGenerator-1051"><span class="linenos">1051</span></a>            <span class="k">for</span> <span class="n">rank</span> <span class="ow">in</span> <span class="p">[</span><span class="n">Rank</span><span class="o">.</span><span class="n">JACK</span><span class="p">,</span> <span class="n">Rank</span><span class="o">.</span><span class="n">QUEEN</span><span class="p">,</span> <span class="n">Rank</span><span class="o">.</span><span class="n">KING</span><span class="p">,</span> <span class="n">Rank</span><span class="o">.</span><span class="n">TEN</span><span class="p">,</span> <span class="n">Rank</span><span class="o">.</span><span class="n">ACE</span><span class="p">]:</span>
</span><span id="SchnapsenDeckGenerator-1052"><a href="#SchnapsenDeckGenerator-1052"><span class="linenos">1052</span></a>                <span class="n">deck</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Card</span><span class="o">.</span><span class="n">get_card</span><span class="p">(</span><span class="n">rank</span><span class="p">,</span> <span class="n">suit</span><span class="p">))</span>
</span><span id="SchnapsenDeckGenerator-1053"><a href="#SchnapsenDeckGenerator-1053"><span class="linenos">1053</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="n">deck</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>A Deckgenerator specifies how what the cards for a game are.</p>
</div>


                            <div id="SchnapsenDeckGenerator.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">SchnapsenDeckGenerator</span><span class="signature pdoc-code condensed">()</span>

        
    </div>
    <a class="headerlink" href="#SchnapsenDeckGenerator.__init__"></a>
    
    

                            </div>
                            <div id="SchnapsenDeckGenerator.get_initial_deck" class="classattr">
                                        <input id="SchnapsenDeckGenerator.get_initial_deck-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_initial_deck</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="deck.html#OrderedCardCollection">schnapsen.deck.OrderedCardCollection</a></span>:</span></span>

                <label class="view-source-button" for="SchnapsenDeckGenerator.get_initial_deck-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SchnapsenDeckGenerator.get_initial_deck"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SchnapsenDeckGenerator.get_initial_deck-1048"><a href="#SchnapsenDeckGenerator.get_initial_deck-1048"><span class="linenos">1048</span></a>    <span class="k">def</span> <span class="nf">get_initial_deck</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OrderedCardCollection</span><span class="p">:</span>
</span><span id="SchnapsenDeckGenerator.get_initial_deck-1049"><a href="#SchnapsenDeckGenerator.get_initial_deck-1049"><span class="linenos">1049</span></a>        <span class="n">deck</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="SchnapsenDeckGenerator.get_initial_deck-1050"><a href="#SchnapsenDeckGenerator.get_initial_deck-1050"><span class="linenos">1050</span></a>        <span class="k">for</span> <span class="n">suit</span> <span class="ow">in</span> <span class="n">Suit</span><span class="p">:</span>
</span><span id="SchnapsenDeckGenerator.get_initial_deck-1051"><a href="#SchnapsenDeckGenerator.get_initial_deck-1051"><span class="linenos">1051</span></a>            <span class="k">for</span> <span class="n">rank</span> <span class="ow">in</span> <span class="p">[</span><span class="n">Rank</span><span class="o">.</span><span class="n">JACK</span><span class="p">,</span> <span class="n">Rank</span><span class="o">.</span><span class="n">QUEEN</span><span class="p">,</span> <span class="n">Rank</span><span class="o">.</span><span class="n">KING</span><span class="p">,</span> <span class="n">Rank</span><span class="o">.</span><span class="n">TEN</span><span class="p">,</span> <span class="n">Rank</span><span class="o">.</span><span class="n">ACE</span><span class="p">]:</span>
</span><span id="SchnapsenDeckGenerator.get_initial_deck-1052"><a href="#SchnapsenDeckGenerator.get_initial_deck-1052"><span class="linenos">1052</span></a>                <span class="n">deck</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Card</span><span class="o">.</span><span class="n">get_card</span><span class="p">(</span><span class="n">rank</span><span class="p">,</span> <span class="n">suit</span><span class="p">))</span>
</span><span id="SchnapsenDeckGenerator.get_initial_deck-1053"><a href="#SchnapsenDeckGenerator.get_initial_deck-1053"><span class="linenos">1053</span></a>        <span class="k">return</span> <span class="n">OrderedCardCollection</span><span class="p">(</span><span class="n">deck</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Get the intial deck of cards which are used in the game.
This method must always return the same set of cards in the same order.</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#DeckGenerator">DeckGenerator</a></dt>
                                <dd id="SchnapsenDeckGenerator.shuffle_deck" class="function"><a href="#DeckGenerator.shuffle_deck">shuffle_deck</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="HandGenerator">
                            <input id="HandGenerator-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">HandGenerator</span><wbr>(<span class="base">abc.ABC</span>):

                <label class="view-source-button" for="HandGenerator-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HandGenerator"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HandGenerator-1056"><a href="#HandGenerator-1056"><span class="linenos">1056</span></a><span class="k">class</span> <span class="nc">HandGenerator</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="HandGenerator-1057"><a href="#HandGenerator-1057"><span class="linenos">1057</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HandGenerator-1058"><a href="#HandGenerator-1058"><span class="linenos">1058</span></a><span class="sd">    The HandGenerator specifies how the intial set of cards gets divided over the two player&#39;s hands and the talon</span>
</span><span id="HandGenerator-1059"><a href="#HandGenerator-1059"><span class="linenos">1059</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="HandGenerator-1060"><a href="#HandGenerator-1060"><span class="linenos">1060</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="HandGenerator-1061"><a href="#HandGenerator-1061"><span class="linenos">1061</span></a>    <span class="k">def</span> <span class="nf">generateHands</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cards</span><span class="p">:</span> <span class="n">OrderedCardCollection</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Hand</span><span class="p">,</span> <span class="n">Hand</span><span class="p">,</span> <span class="n">Talon</span><span class="p">]:</span>
</span><span id="HandGenerator-1062"><a href="#HandGenerator-1062"><span class="linenos">1062</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HandGenerator-1063"><a href="#HandGenerator-1063"><span class="linenos">1063</span></a><span class="sd">        Divide the collection of cards over the two hands and the Talon</span>
</span><span id="HandGenerator-1064"><a href="#HandGenerator-1064"><span class="linenos">1064</span></a>
</span><span id="HandGenerator-1065"><a href="#HandGenerator-1065"><span class="linenos">1065</span></a><span class="sd">        :param cards: The cards to be dealt</span>
</span><span id="HandGenerator-1066"><a href="#HandGenerator-1066"><span class="linenos">1066</span></a><span class="sd">        :returns: Two hands of cards and the talon. The first hand is for the first player, i.e, the one who will lead the first trick.</span>
</span><span id="HandGenerator-1067"><a href="#HandGenerator-1067"><span class="linenos">1067</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>The HandGenerator specifies how the intial set of cards gets divided over the two player's hands and the talon</p>
</div>


                            <div id="HandGenerator.generateHands" class="classattr">
                                        <input id="HandGenerator.generateHands-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">generateHands</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">cards</span><span class="p">:</span> <span class="n"><a href="deck.html#OrderedCardCollection">schnapsen.deck.OrderedCardCollection</a></span></span><span class="return-annotation">) -> <span class="n">Tuple</span><span class="p">[</span><span class="n"><a href="#Hand">schnapsen.game.Hand</a></span><span class="p">,</span> <span class="n"><a href="#Hand">schnapsen.game.Hand</a></span><span class="p">,</span> <span class="n"><a href="#Talon">schnapsen.game.Talon</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="HandGenerator.generateHands-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HandGenerator.generateHands"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HandGenerator.generateHands-1060"><a href="#HandGenerator.generateHands-1060"><span class="linenos">1060</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="HandGenerator.generateHands-1061"><a href="#HandGenerator.generateHands-1061"><span class="linenos">1061</span></a>    <span class="k">def</span> <span class="nf">generateHands</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cards</span><span class="p">:</span> <span class="n">OrderedCardCollection</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Hand</span><span class="p">,</span> <span class="n">Hand</span><span class="p">,</span> <span class="n">Talon</span><span class="p">]:</span>
</span><span id="HandGenerator.generateHands-1062"><a href="#HandGenerator.generateHands-1062"><span class="linenos">1062</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HandGenerator.generateHands-1063"><a href="#HandGenerator.generateHands-1063"><span class="linenos">1063</span></a><span class="sd">        Divide the collection of cards over the two hands and the Talon</span>
</span><span id="HandGenerator.generateHands-1064"><a href="#HandGenerator.generateHands-1064"><span class="linenos">1064</span></a>
</span><span id="HandGenerator.generateHands-1065"><a href="#HandGenerator.generateHands-1065"><span class="linenos">1065</span></a><span class="sd">        :param cards: The cards to be dealt</span>
</span><span id="HandGenerator.generateHands-1066"><a href="#HandGenerator.generateHands-1066"><span class="linenos">1066</span></a><span class="sd">        :returns: Two hands of cards and the talon. The first hand is for the first player, i.e, the one who will lead the first trick.</span>
</span><span id="HandGenerator.generateHands-1067"><a href="#HandGenerator.generateHands-1067"><span class="linenos">1067</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Divide the collection of cards over the two hands and the Talon</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>cards</strong>:  The cards to be dealt
:returns: Two hands of cards and the talon. The first hand is for the first player, i.e, the one who will lead the first trick.</li>
</ul>
</div>


                            </div>
                </section>
                <section id="SchnapsenHandGenerator">
                            <input id="SchnapsenHandGenerator-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">SchnapsenHandGenerator</span><wbr>(<span class="base"><a href="#HandGenerator">HandGenerator</a></span>):

                <label class="view-source-button" for="SchnapsenHandGenerator-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SchnapsenHandGenerator"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SchnapsenHandGenerator-1070"><a href="#SchnapsenHandGenerator-1070"><span class="linenos">1070</span></a><span class="k">class</span> <span class="nc">SchnapsenHandGenerator</span><span class="p">(</span><span class="n">HandGenerator</span><span class="p">):</span>
</span><span id="SchnapsenHandGenerator-1071"><a href="#SchnapsenHandGenerator-1071"><span class="linenos">1071</span></a>    <span class="nd">@classmethod</span>
</span><span id="SchnapsenHandGenerator-1072"><a href="#SchnapsenHandGenerator-1072"><span class="linenos">1072</span></a>    <span class="k">def</span> <span class="nf">generateHands</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cards</span><span class="p">:</span> <span class="n">OrderedCardCollection</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Hand</span><span class="p">,</span> <span class="n">Hand</span><span class="p">,</span> <span class="n">Talon</span><span class="p">]:</span>
</span><span id="SchnapsenHandGenerator-1073"><a href="#SchnapsenHandGenerator-1073"><span class="linenos">1073</span></a>        <span class="n">the_cards</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">cards</span><span class="o">.</span><span class="n">get_cards</span><span class="p">())</span>
</span><span id="SchnapsenHandGenerator-1074"><a href="#SchnapsenHandGenerator-1074"><span class="linenos">1074</span></a>        <span class="n">hand1</span> <span class="o">=</span> <span class="n">Hand</span><span class="p">([</span><span class="n">the_cards</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)],</span> <span class="n">max_size</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</span><span id="SchnapsenHandGenerator-1075"><a href="#SchnapsenHandGenerator-1075"><span class="linenos">1075</span></a>        <span class="n">hand2</span> <span class="o">=</span> <span class="n">Hand</span><span class="p">([</span><span class="n">the_cards</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">2</span><span class="p">)],</span> <span class="n">max_size</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</span><span id="SchnapsenHandGenerator-1076"><a href="#SchnapsenHandGenerator-1076"><span class="linenos">1076</span></a>        <span class="n">rest</span> <span class="o">=</span> <span class="n">Talon</span><span class="p">(</span><span class="n">the_cards</span><span class="p">[</span><span class="mi">10</span><span class="p">:])</span>
</span><span id="SchnapsenHandGenerator-1077"><a href="#SchnapsenHandGenerator-1077"><span class="linenos">1077</span></a>        <span class="k">return</span> <span class="p">(</span><span class="n">hand1</span><span class="p">,</span> <span class="n">hand2</span><span class="p">,</span> <span class="n">rest</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The HandGenerator specifies how the intial set of cards gets divided over the two player's hands and the talon</p>
</div>


                            <div id="SchnapsenHandGenerator.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">SchnapsenHandGenerator</span><span class="signature pdoc-code condensed">()</span>

        
    </div>
    <a class="headerlink" href="#SchnapsenHandGenerator.__init__"></a>
    
    

                            </div>
                            <div id="SchnapsenHandGenerator.generateHands" class="classattr">
                                        <input id="SchnapsenHandGenerator.generateHands-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@classmethod</div>

        <span class="def">def</span>
        <span class="name">generateHands</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">cards</span><span class="p">:</span> <span class="n"><a href="deck.html#OrderedCardCollection">schnapsen.deck.OrderedCardCollection</a></span></span><span class="return-annotation">) -> <span class="n">Tuple</span><span class="p">[</span><span class="n"><a href="#Hand">schnapsen.game.Hand</a></span><span class="p">,</span> <span class="n"><a href="#Hand">schnapsen.game.Hand</a></span><span class="p">,</span> <span class="n"><a href="#Talon">schnapsen.game.Talon</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="SchnapsenHandGenerator.generateHands-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SchnapsenHandGenerator.generateHands"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SchnapsenHandGenerator.generateHands-1071"><a href="#SchnapsenHandGenerator.generateHands-1071"><span class="linenos">1071</span></a>    <span class="nd">@classmethod</span>
</span><span id="SchnapsenHandGenerator.generateHands-1072"><a href="#SchnapsenHandGenerator.generateHands-1072"><span class="linenos">1072</span></a>    <span class="k">def</span> <span class="nf">generateHands</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cards</span><span class="p">:</span> <span class="n">OrderedCardCollection</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Hand</span><span class="p">,</span> <span class="n">Hand</span><span class="p">,</span> <span class="n">Talon</span><span class="p">]:</span>
</span><span id="SchnapsenHandGenerator.generateHands-1073"><a href="#SchnapsenHandGenerator.generateHands-1073"><span class="linenos">1073</span></a>        <span class="n">the_cards</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">cards</span><span class="o">.</span><span class="n">get_cards</span><span class="p">())</span>
</span><span id="SchnapsenHandGenerator.generateHands-1074"><a href="#SchnapsenHandGenerator.generateHands-1074"><span class="linenos">1074</span></a>        <span class="n">hand1</span> <span class="o">=</span> <span class="n">Hand</span><span class="p">([</span><span class="n">the_cards</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)],</span> <span class="n">max_size</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</span><span id="SchnapsenHandGenerator.generateHands-1075"><a href="#SchnapsenHandGenerator.generateHands-1075"><span class="linenos">1075</span></a>        <span class="n">hand2</span> <span class="o">=</span> <span class="n">Hand</span><span class="p">([</span><span class="n">the_cards</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">2</span><span class="p">)],</span> <span class="n">max_size</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</span><span id="SchnapsenHandGenerator.generateHands-1076"><a href="#SchnapsenHandGenerator.generateHands-1076"><span class="linenos">1076</span></a>        <span class="n">rest</span> <span class="o">=</span> <span class="n">Talon</span><span class="p">(</span><span class="n">the_cards</span><span class="p">[</span><span class="mi">10</span><span class="p">:])</span>
</span><span id="SchnapsenHandGenerator.generateHands-1077"><a href="#SchnapsenHandGenerator.generateHands-1077"><span class="linenos">1077</span></a>        <span class="k">return</span> <span class="p">(</span><span class="n">hand1</span><span class="p">,</span> <span class="n">hand2</span><span class="p">,</span> <span class="n">rest</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Divide the collection of cards over the two hands and the Talon</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>cards</strong>:  The cards to be dealt
:returns: Two hands of cards and the talon. The first hand is for the first player, i.e, the one who will lead the first trick.</li>
</ul>
</div>


                            </div>
                </section>
                <section id="TrickImplementer">
                            <input id="TrickImplementer-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">TrickImplementer</span><wbr>(<span class="base">abc.ABC</span>):

                <label class="view-source-button" for="TrickImplementer-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TrickImplementer"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TrickImplementer-1080"><a href="#TrickImplementer-1080"><span class="linenos">1080</span></a><span class="k">class</span> <span class="nc">TrickImplementer</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="TrickImplementer-1081"><a href="#TrickImplementer-1081"><span class="linenos">1081</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TrickImplementer-1082"><a href="#TrickImplementer-1082"><span class="linenos">1082</span></a><span class="sd">    The TrickImplementer specifies how tricks are palyed in the game.</span>
</span><span id="TrickImplementer-1083"><a href="#TrickImplementer-1083"><span class="linenos">1083</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="TrickImplementer-1084"><a href="#TrickImplementer-1084"><span class="linenos">1084</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="TrickImplementer-1085"><a href="#TrickImplementer-1085"><span class="linenos">1085</span></a>    <span class="k">def</span> <span class="nf">play_trick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GameState</span><span class="p">:</span>
</span><span id="TrickImplementer-1086"><a href="#TrickImplementer-1086"><span class="linenos">1086</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TrickImplementer-1087"><a href="#TrickImplementer-1087"><span class="linenos">1087</span></a><span class="sd">        Plays a single Trick the game by asking the bots in the game_state for their Moves,</span>
</span><span id="TrickImplementer-1088"><a href="#TrickImplementer-1088"><span class="linenos">1088</span></a><span class="sd">        using the MoveRequester from the game_engine.</span>
</span><span id="TrickImplementer-1089"><a href="#TrickImplementer-1089"><span class="linenos">1089</span></a><span class="sd">        These moves are then also validated using the MoveValidator of the game_engine.</span>
</span><span id="TrickImplementer-1090"><a href="#TrickImplementer-1090"><span class="linenos">1090</span></a><span class="sd">        Finally, the trick is recorder in the history (previous field) of the returned GameState.</span>
</span><span id="TrickImplementer-1091"><a href="#TrickImplementer-1091"><span class="linenos">1091</span></a>
</span><span id="TrickImplementer-1092"><a href="#TrickImplementer-1092"><span class="linenos">1092</span></a><span class="sd">        Note, the provided GameState does not get modified by this method.</span>
</span><span id="TrickImplementer-1093"><a href="#TrickImplementer-1093"><span class="linenos">1093</span></a>
</span><span id="TrickImplementer-1094"><a href="#TrickImplementer-1094"><span class="linenos">1094</span></a><span class="sd">        :param game_engine: The engine used to preform the underlying actions of the Trick.</span>
</span><span id="TrickImplementer-1095"><a href="#TrickImplementer-1095"><span class="linenos">1095</span></a><span class="sd">        :param game_state: The state of the game before the trick is played. Thi state will not be modified.</span>
</span><span id="TrickImplementer-1096"><a href="#TrickImplementer-1096"><span class="linenos">1096</span></a><span class="sd">        :returns: The GameState after the trick is completed.</span>
</span><span id="TrickImplementer-1097"><a href="#TrickImplementer-1097"><span class="linenos">1097</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TrickImplementer-1098"><a href="#TrickImplementer-1098"><span class="linenos">1098</span></a>
</span><span id="TrickImplementer-1099"><a href="#TrickImplementer-1099"><span class="linenos">1099</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="TrickImplementer-1100"><a href="#TrickImplementer-1100"><span class="linenos">1100</span></a>    <span class="k">def</span> <span class="nf">play_trick_with_fixed_leader_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span>
</span><span id="TrickImplementer-1101"><a href="#TrickImplementer-1101"><span class="linenos">1101</span></a>                                          <span class="n">leader_move</span><span class="p">:</span> <span class="n">Move</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GameState</span><span class="p">:</span>
</span><span id="TrickImplementer-1102"><a href="#TrickImplementer-1102"><span class="linenos">1102</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TrickImplementer-1103"><a href="#TrickImplementer-1103"><span class="linenos">1103</span></a><span class="sd">        The same as play_trick, but also takes the leader_move to start with as an argument.</span>
</span><span id="TrickImplementer-1104"><a href="#TrickImplementer-1104"><span class="linenos">1104</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>The TrickImplementer specifies how tricks are palyed in the game.</p>
</div>


                            <div id="TrickImplementer.play_trick" class="classattr">
                                        <input id="TrickImplementer.play_trick-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">play_trick</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">game_engine</span><span class="p">:</span> <span class="n"><a href="#GamePlayEngine">schnapsen.game.GamePlayEngine</a></span>,</span><span class="param">	<span class="n">game_state</span><span class="p">:</span> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span></span><span class="return-annotation">) -> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span>:</span></span>

                <label class="view-source-button" for="TrickImplementer.play_trick-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TrickImplementer.play_trick"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TrickImplementer.play_trick-1084"><a href="#TrickImplementer.play_trick-1084"><span class="linenos">1084</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="TrickImplementer.play_trick-1085"><a href="#TrickImplementer.play_trick-1085"><span class="linenos">1085</span></a>    <span class="k">def</span> <span class="nf">play_trick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GameState</span><span class="p">:</span>
</span><span id="TrickImplementer.play_trick-1086"><a href="#TrickImplementer.play_trick-1086"><span class="linenos">1086</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TrickImplementer.play_trick-1087"><a href="#TrickImplementer.play_trick-1087"><span class="linenos">1087</span></a><span class="sd">        Plays a single Trick the game by asking the bots in the game_state for their Moves,</span>
</span><span id="TrickImplementer.play_trick-1088"><a href="#TrickImplementer.play_trick-1088"><span class="linenos">1088</span></a><span class="sd">        using the MoveRequester from the game_engine.</span>
</span><span id="TrickImplementer.play_trick-1089"><a href="#TrickImplementer.play_trick-1089"><span class="linenos">1089</span></a><span class="sd">        These moves are then also validated using the MoveValidator of the game_engine.</span>
</span><span id="TrickImplementer.play_trick-1090"><a href="#TrickImplementer.play_trick-1090"><span class="linenos">1090</span></a><span class="sd">        Finally, the trick is recorder in the history (previous field) of the returned GameState.</span>
</span><span id="TrickImplementer.play_trick-1091"><a href="#TrickImplementer.play_trick-1091"><span class="linenos">1091</span></a>
</span><span id="TrickImplementer.play_trick-1092"><a href="#TrickImplementer.play_trick-1092"><span class="linenos">1092</span></a><span class="sd">        Note, the provided GameState does not get modified by this method.</span>
</span><span id="TrickImplementer.play_trick-1093"><a href="#TrickImplementer.play_trick-1093"><span class="linenos">1093</span></a>
</span><span id="TrickImplementer.play_trick-1094"><a href="#TrickImplementer.play_trick-1094"><span class="linenos">1094</span></a><span class="sd">        :param game_engine: The engine used to preform the underlying actions of the Trick.</span>
</span><span id="TrickImplementer.play_trick-1095"><a href="#TrickImplementer.play_trick-1095"><span class="linenos">1095</span></a><span class="sd">        :param game_state: The state of the game before the trick is played. Thi state will not be modified.</span>
</span><span id="TrickImplementer.play_trick-1096"><a href="#TrickImplementer.play_trick-1096"><span class="linenos">1096</span></a><span class="sd">        :returns: The GameState after the trick is completed.</span>
</span><span id="TrickImplementer.play_trick-1097"><a href="#TrickImplementer.play_trick-1097"><span class="linenos">1097</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Plays a single Trick the game by asking the bots in the game_state for their Moves,
using the MoveRequester from the game_engine.
These moves are then also validated using the MoveValidator of the game_engine.
Finally, the trick is recorder in the history (previous field) of the returned GameState.</p>

<p>Note, the provided GameState does not get modified by this method.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>game_engine</strong>:  The engine used to preform the underlying actions of the Trick.</li>
<li><strong>game_state</strong>:  The state of the game before the trick is played. Thi state will not be modified.
:returns: The GameState after the trick is completed.</li>
</ul>
</div>


                            </div>
                            <div id="TrickImplementer.play_trick_with_fixed_leader_move" class="classattr">
                                        <input id="TrickImplementer.play_trick_with_fixed_leader_move-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">play_trick_with_fixed_leader_move</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">game_engine</span><span class="p">:</span> <span class="n"><a href="#GamePlayEngine">schnapsen.game.GamePlayEngine</a></span>,</span><span class="param">	<span class="n">game_state</span><span class="p">:</span> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span>,</span><span class="param">	<span class="n">leader_move</span><span class="p">:</span> <span class="n"><a href="#Move">schnapsen.game.Move</a></span></span><span class="return-annotation">) -> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span>:</span></span>

                <label class="view-source-button" for="TrickImplementer.play_trick_with_fixed_leader_move-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TrickImplementer.play_trick_with_fixed_leader_move"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TrickImplementer.play_trick_with_fixed_leader_move-1099"><a href="#TrickImplementer.play_trick_with_fixed_leader_move-1099"><span class="linenos">1099</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="TrickImplementer.play_trick_with_fixed_leader_move-1100"><a href="#TrickImplementer.play_trick_with_fixed_leader_move-1100"><span class="linenos">1100</span></a>    <span class="k">def</span> <span class="nf">play_trick_with_fixed_leader_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span>
</span><span id="TrickImplementer.play_trick_with_fixed_leader_move-1101"><a href="#TrickImplementer.play_trick_with_fixed_leader_move-1101"><span class="linenos">1101</span></a>                                          <span class="n">leader_move</span><span class="p">:</span> <span class="n">Move</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GameState</span><span class="p">:</span>
</span><span id="TrickImplementer.play_trick_with_fixed_leader_move-1102"><a href="#TrickImplementer.play_trick_with_fixed_leader_move-1102"><span class="linenos">1102</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TrickImplementer.play_trick_with_fixed_leader_move-1103"><a href="#TrickImplementer.play_trick_with_fixed_leader_move-1103"><span class="linenos">1103</span></a><span class="sd">        The same as play_trick, but also takes the leader_move to start with as an argument.</span>
</span><span id="TrickImplementer.play_trick_with_fixed_leader_move-1104"><a href="#TrickImplementer.play_trick_with_fixed_leader_move-1104"><span class="linenos">1104</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>The same as play_trick, but also takes the leader_move to start with as an argument.</p>
</div>


                            </div>
                </section>
                <section id="SchnapsenTrickImplementer">
                            <input id="SchnapsenTrickImplementer-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">SchnapsenTrickImplementer</span><wbr>(<span class="base"><a href="#TrickImplementer">TrickImplementer</a></span>):

                <label class="view-source-button" for="SchnapsenTrickImplementer-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SchnapsenTrickImplementer"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SchnapsenTrickImplementer-1107"><a href="#SchnapsenTrickImplementer-1107"><span class="linenos">1107</span></a><span class="k">class</span> <span class="nc">SchnapsenTrickImplementer</span><span class="p">(</span><span class="n">TrickImplementer</span><span class="p">):</span>
</span><span id="SchnapsenTrickImplementer-1108"><a href="#SchnapsenTrickImplementer-1108"><span class="linenos">1108</span></a>
</span><span id="SchnapsenTrickImplementer-1109"><a href="#SchnapsenTrickImplementer-1109"><span class="linenos">1109</span></a>    <span class="k">def</span> <span class="nf">play_trick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GameState</span><span class="p">:</span>
</span><span id="SchnapsenTrickImplementer-1110"><a href="#SchnapsenTrickImplementer-1110"><span class="linenos">1110</span></a>        <span class="n">leader_move</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_leader_move</span><span class="p">(</span><span class="n">game_engine</span><span class="p">,</span> <span class="n">game_state</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer-1111"><a href="#SchnapsenTrickImplementer-1111"><span class="linenos">1111</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">play_trick_with_fixed_leader_move</span><span class="p">(</span><span class="n">game_engine</span><span class="o">=</span><span class="n">game_engine</span><span class="p">,</span> <span class="n">game_state</span><span class="o">=</span><span class="n">game_state</span><span class="p">,</span> <span class="n">leader_move</span><span class="o">=</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer-1112"><a href="#SchnapsenTrickImplementer-1112"><span class="linenos">1112</span></a>
</span><span id="SchnapsenTrickImplementer-1113"><a href="#SchnapsenTrickImplementer-1113"><span class="linenos">1113</span></a>    <span class="k">def</span> <span class="nf">play_trick_with_fixed_leader_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span>
</span><span id="SchnapsenTrickImplementer-1114"><a href="#SchnapsenTrickImplementer-1114"><span class="linenos">1114</span></a>                                          <span class="n">leader_move</span><span class="p">:</span> <span class="n">Move</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GameState</span><span class="p">:</span>
</span><span id="SchnapsenTrickImplementer-1115"><a href="#SchnapsenTrickImplementer-1115"><span class="linenos">1115</span></a>        <span class="k">if</span> <span class="n">leader_move</span><span class="o">.</span><span class="n">is_trump_exchange</span><span class="p">():</span>
</span><span id="SchnapsenTrickImplementer-1116"><a href="#SchnapsenTrickImplementer-1116"><span class="linenos">1116</span></a>            <span class="n">next_game_state</span> <span class="o">=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">copy_for_next</span><span class="p">()</span>
</span><span id="SchnapsenTrickImplementer-1117"><a href="#SchnapsenTrickImplementer-1117"><span class="linenos">1117</span></a>            <span class="n">exchange</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Trump_Exchange</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer-1118"><a href="#SchnapsenTrickImplementer-1118"><span class="linenos">1118</span></a>            <span class="n">old_trump_card</span> <span class="o">=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">trump_card</span><span class="p">()</span>
</span><span id="SchnapsenTrickImplementer-1119"><a href="#SchnapsenTrickImplementer-1119"><span class="linenos">1119</span></a>            <span class="k">assert</span> <span class="n">old_trump_card</span>
</span><span id="SchnapsenTrickImplementer-1120"><a href="#SchnapsenTrickImplementer-1120"><span class="linenos">1120</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">play_trump_exchange</span><span class="p">(</span><span class="n">next_game_state</span><span class="p">,</span> <span class="n">exchange</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer-1121"><a href="#SchnapsenTrickImplementer-1121"><span class="linenos">1121</span></a>            <span class="c1"># remember the previous state</span>
</span><span id="SchnapsenTrickImplementer-1122"><a href="#SchnapsenTrickImplementer-1122"><span class="linenos">1122</span></a>            <span class="n">next_game_state</span><span class="o">.</span><span class="n">previous</span> <span class="o">=</span> <span class="n">Previous</span><span class="p">(</span><span class="n">game_state</span><span class="p">,</span> <span class="n">ExchangeTrick</span><span class="p">(</span><span class="n">exchange</span><span class="p">,</span> <span class="n">old_trump_card</span><span class="p">),</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer-1123"><a href="#SchnapsenTrickImplementer-1123"><span class="linenos">1123</span></a>            <span class="c1"># The whole trick ends here.</span>
</span><span id="SchnapsenTrickImplementer-1124"><a href="#SchnapsenTrickImplementer-1124"><span class="linenos">1124</span></a>            <span class="k">return</span> <span class="n">next_game_state</span>
</span><span id="SchnapsenTrickImplementer-1125"><a href="#SchnapsenTrickImplementer-1125"><span class="linenos">1125</span></a>
</span><span id="SchnapsenTrickImplementer-1126"><a href="#SchnapsenTrickImplementer-1126"><span class="linenos">1126</span></a>        <span class="c1"># We have a PartialTrick, ask the follower for its move</span>
</span><span id="SchnapsenTrickImplementer-1127"><a href="#SchnapsenTrickImplementer-1127"><span class="linenos">1127</span></a>        <span class="n">partial_trick</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Union</span><span class="p">[</span><span class="n">Marriage</span><span class="p">,</span> <span class="n">RegularMove</span><span class="p">],</span> <span class="n">leader_move</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer-1128"><a href="#SchnapsenTrickImplementer-1128"><span class="linenos">1128</span></a>        <span class="n">follower_move</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_follower_move</span><span class="p">(</span><span class="n">game_engine</span><span class="p">,</span> <span class="n">game_state</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer-1129"><a href="#SchnapsenTrickImplementer-1129"><span class="linenos">1129</span></a>
</span><span id="SchnapsenTrickImplementer-1130"><a href="#SchnapsenTrickImplementer-1130"><span class="linenos">1130</span></a>        <span class="n">trick</span> <span class="o">=</span> <span class="n">RegularTrick</span><span class="p">(</span><span class="n">leader_move</span><span class="o">=</span><span class="n">partial_trick</span><span class="p">,</span> <span class="n">follower_move</span><span class="o">=</span><span class="n">follower_move</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer-1131"><a href="#SchnapsenTrickImplementer-1131"><span class="linenos">1131</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_apply_regular_trick</span><span class="p">(</span><span class="n">game_engine</span><span class="o">=</span><span class="n">game_engine</span><span class="p">,</span> <span class="n">game_state</span><span class="o">=</span><span class="n">game_state</span><span class="p">,</span> <span class="n">trick</span><span class="o">=</span><span class="n">trick</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer-1132"><a href="#SchnapsenTrickImplementer-1132"><span class="linenos">1132</span></a>
</span><span id="SchnapsenTrickImplementer-1133"><a href="#SchnapsenTrickImplementer-1133"><span class="linenos">1133</span></a>    <span class="k">def</span> <span class="nf">_apply_regular_trick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">trick</span><span class="p">:</span> <span class="n">RegularTrick</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GameState</span><span class="p">:</span>
</span><span id="SchnapsenTrickImplementer-1134"><a href="#SchnapsenTrickImplementer-1134"><span class="linenos">1134</span></a>
</span><span id="SchnapsenTrickImplementer-1135"><a href="#SchnapsenTrickImplementer-1135"><span class="linenos">1135</span></a>        <span class="c1"># apply the trick to the next_game_state</span>
</span><span id="SchnapsenTrickImplementer-1136"><a href="#SchnapsenTrickImplementer-1136"><span class="linenos">1136</span></a>        <span class="c1"># The next game state will be modified during this trick. We start from the previous state</span>
</span><span id="SchnapsenTrickImplementer-1137"><a href="#SchnapsenTrickImplementer-1137"><span class="linenos">1137</span></a>        <span class="n">next_game_state</span> <span class="o">=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">copy_for_next</span><span class="p">()</span>
</span><span id="SchnapsenTrickImplementer-1138"><a href="#SchnapsenTrickImplementer-1138"><span class="linenos">1138</span></a>
</span><span id="SchnapsenTrickImplementer-1139"><a href="#SchnapsenTrickImplementer-1139"><span class="linenos">1139</span></a>        <span class="k">if</span> <span class="n">trick</span><span class="o">.</span><span class="n">leader_move</span><span class="o">.</span><span class="n">is_marriage</span><span class="p">():</span>
</span><span id="SchnapsenTrickImplementer-1140"><a href="#SchnapsenTrickImplementer-1140"><span class="linenos">1140</span></a>            <span class="n">marriage_move</span><span class="p">:</span> <span class="n">Marriage</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Marriage</span><span class="p">,</span> <span class="n">trick</span><span class="o">.</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer-1141"><a href="#SchnapsenTrickImplementer-1141"><span class="linenos">1141</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_play_marriage</span><span class="p">(</span><span class="n">game_engine</span><span class="p">,</span> <span class="n">next_game_state</span><span class="p">,</span> <span class="n">marriage_move</span><span class="o">=</span><span class="n">marriage_move</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer-1142"><a href="#SchnapsenTrickImplementer-1142"><span class="linenos">1142</span></a>            <span class="n">regular_leader_move</span><span class="p">:</span> <span class="n">RegularMove</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Marriage</span><span class="p">,</span> <span class="n">trick</span><span class="o">.</span><span class="n">leader_move</span><span class="p">)</span><span class="o">.</span><span class="n">underlying_regular_move</span><span class="p">()</span>
</span><span id="SchnapsenTrickImplementer-1143"><a href="#SchnapsenTrickImplementer-1143"><span class="linenos">1143</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="SchnapsenTrickImplementer-1144"><a href="#SchnapsenTrickImplementer-1144"><span class="linenos">1144</span></a>            <span class="n">regular_leader_move</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">RegularMove</span><span class="p">,</span> <span class="n">trick</span><span class="o">.</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer-1145"><a href="#SchnapsenTrickImplementer-1145"><span class="linenos">1145</span></a>
</span><span id="SchnapsenTrickImplementer-1146"><a href="#SchnapsenTrickImplementer-1146"><span class="linenos">1146</span></a>        <span class="c1"># # apply changes in the hand and talon</span>
</span><span id="SchnapsenTrickImplementer-1147"><a href="#SchnapsenTrickImplementer-1147"><span class="linenos">1147</span></a>        <span class="n">next_game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">regular_leader_move</span><span class="o">.</span><span class="n">card</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer-1148"><a href="#SchnapsenTrickImplementer-1148"><span class="linenos">1148</span></a>        <span class="n">next_game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">trick</span><span class="o">.</span><span class="n">follower_move</span><span class="o">.</span><span class="n">card</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer-1149"><a href="#SchnapsenTrickImplementer-1149"><span class="linenos">1149</span></a>
</span><span id="SchnapsenTrickImplementer-1150"><a href="#SchnapsenTrickImplementer-1150"><span class="linenos">1150</span></a>        <span class="c1"># We set the leader for the next state based on what the scorer decides</span>
</span><span id="SchnapsenTrickImplementer-1151"><a href="#SchnapsenTrickImplementer-1151"><span class="linenos">1151</span></a>        <span class="n">next_game_state</span><span class="o">.</span><span class="n">leader</span><span class="p">,</span> <span class="n">next_game_state</span><span class="o">.</span><span class="n">follower</span><span class="p">,</span> <span class="n">leader_remained_leader</span> <span class="o">=</span> <span class="n">game_engine</span><span class="o">.</span><span class="n">trick_scorer</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">trick</span><span class="p">,</span> <span class="n">next_game_state</span><span class="o">.</span><span class="n">leader</span><span class="p">,</span> <span class="n">next_game_state</span><span class="o">.</span><span class="n">follower</span><span class="p">,</span> <span class="n">next_game_state</span><span class="o">.</span><span class="n">trump_suit</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer-1152"><a href="#SchnapsenTrickImplementer-1152"><span class="linenos">1152</span></a>
</span><span id="SchnapsenTrickImplementer-1153"><a href="#SchnapsenTrickImplementer-1153"><span class="linenos">1153</span></a>        <span class="c1"># important: the winner takes the first card of the talon, the loser the second one.</span>
</span><span id="SchnapsenTrickImplementer-1154"><a href="#SchnapsenTrickImplementer-1154"><span class="linenos">1154</span></a>        <span class="c1"># this also ensures that the loser of the last trick of the first phase gets the face up trump</span>
</span><span id="SchnapsenTrickImplementer-1155"><a href="#SchnapsenTrickImplementer-1155"><span class="linenos">1155</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">next_game_state</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
</span><span id="SchnapsenTrickImplementer-1156"><a href="#SchnapsenTrickImplementer-1156"><span class="linenos">1156</span></a>            <span class="n">drawn</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">next_game_state</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">draw_cards</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
</span><span id="SchnapsenTrickImplementer-1157"><a href="#SchnapsenTrickImplementer-1157"><span class="linenos">1157</span></a>            <span class="n">next_game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">drawn</span><span class="p">))</span>
</span><span id="SchnapsenTrickImplementer-1158"><a href="#SchnapsenTrickImplementer-1158"><span class="linenos">1158</span></a>            <span class="n">next_game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">drawn</span><span class="p">))</span>
</span><span id="SchnapsenTrickImplementer-1159"><a href="#SchnapsenTrickImplementer-1159"><span class="linenos">1159</span></a>
</span><span id="SchnapsenTrickImplementer-1160"><a href="#SchnapsenTrickImplementer-1160"><span class="linenos">1160</span></a>        <span class="n">next_game_state</span><span class="o">.</span><span class="n">previous</span> <span class="o">=</span> <span class="n">Previous</span><span class="p">(</span><span class="n">game_state</span><span class="p">,</span> <span class="n">trick</span><span class="o">=</span><span class="n">trick</span><span class="p">,</span> <span class="n">leader_remained_leader</span><span class="o">=</span><span class="n">leader_remained_leader</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer-1161"><a href="#SchnapsenTrickImplementer-1161"><span class="linenos">1161</span></a>
</span><span id="SchnapsenTrickImplementer-1162"><a href="#SchnapsenTrickImplementer-1162"><span class="linenos">1162</span></a>        <span class="k">return</span> <span class="n">next_game_state</span>
</span><span id="SchnapsenTrickImplementer-1163"><a href="#SchnapsenTrickImplementer-1163"><span class="linenos">1163</span></a>
</span><span id="SchnapsenTrickImplementer-1164"><a href="#SchnapsenTrickImplementer-1164"><span class="linenos">1164</span></a>    <span class="k">def</span> <span class="nf">get_leader_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="s1">&#39;GameState&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Move</span><span class="p">:</span>
</span><span id="SchnapsenTrickImplementer-1165"><a href="#SchnapsenTrickImplementer-1165"><span class="linenos">1165</span></a>        <span class="c1"># ask first players move trough the requester</span>
</span><span id="SchnapsenTrickImplementer-1166"><a href="#SchnapsenTrickImplementer-1166"><span class="linenos">1166</span></a>        <span class="n">leader_game_state</span> <span class="o">=</span> <span class="n">LeaderPerspective</span><span class="p">(</span><span class="n">game_state</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer-1167"><a href="#SchnapsenTrickImplementer-1167"><span class="linenos">1167</span></a>        <span class="n">leader_move</span> <span class="o">=</span> <span class="n">game_engine</span><span class="o">.</span><span class="n">move_requester</span><span class="o">.</span><span class="n">get_move</span><span class="p">(</span><span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="p">,</span> <span class="n">leader_game_state</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer-1168"><a href="#SchnapsenTrickImplementer-1168"><span class="linenos">1168</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">game_engine</span><span class="o">.</span><span class="n">move_validator</span><span class="o">.</span><span class="n">is_legal_leader_move</span><span class="p">(</span><span class="n">game_engine</span><span class="p">,</span> <span class="n">game_state</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">):</span>
</span><span id="SchnapsenTrickImplementer-1169"><a href="#SchnapsenTrickImplementer-1169"><span class="linenos">1169</span></a>            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Leader </span><span class="si">{</span><span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">implementation</span><span class="si">}</span><span class="s2"> played an illegal move&quot;</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer-1170"><a href="#SchnapsenTrickImplementer-1170"><span class="linenos">1170</span></a>
</span><span id="SchnapsenTrickImplementer-1171"><a href="#SchnapsenTrickImplementer-1171"><span class="linenos">1171</span></a>        <span class="k">return</span> <span class="n">leader_move</span>
</span><span id="SchnapsenTrickImplementer-1172"><a href="#SchnapsenTrickImplementer-1172"><span class="linenos">1172</span></a>
</span><span id="SchnapsenTrickImplementer-1173"><a href="#SchnapsenTrickImplementer-1173"><span class="linenos">1173</span></a>    <span class="k">def</span> <span class="nf">play_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">trump_exchange</span><span class="p">:</span> <span class="n">Trump_Exchange</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SchnapsenTrickImplementer-1174"><a href="#SchnapsenTrickImplementer-1174"><span class="linenos">1174</span></a>        <span class="k">assert</span> <span class="n">trump_exchange</span><span class="o">.</span><span class="n">jack</span><span class="o">.</span><span class="n">suit</span> <span class="ow">is</span> <span class="n">game_state</span><span class="o">.</span><span class="n">trump_suit</span><span class="p">,</span> \
</span><span id="SchnapsenTrickImplementer-1175"><a href="#SchnapsenTrickImplementer-1175"><span class="linenos">1175</span></a>            <span class="sa">f</span><span class="s2">&quot;A trump exchange can only be done with a Jack of the same suit as the current trump. Got a </span><span class="si">{</span><span class="n">trump_exchange</span><span class="o">.</span><span class="n">jack</span><span class="si">}</span><span class="s2"> while the  Trump card is a </span><span class="si">{</span><span class="n">game_state</span><span class="o">.</span><span class="n">trump_suit</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="SchnapsenTrickImplementer-1176"><a href="#SchnapsenTrickImplementer-1176"><span class="linenos">1176</span></a>        <span class="c1"># apply the changes in the gamestate</span>
</span><span id="SchnapsenTrickImplementer-1177"><a href="#SchnapsenTrickImplementer-1177"><span class="linenos">1177</span></a>        <span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">trump_exchange</span><span class="o">.</span><span class="n">jack</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer-1178"><a href="#SchnapsenTrickImplementer-1178"><span class="linenos">1178</span></a>        <span class="n">old_trump</span> <span class="o">=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">trump_exchange</span><span class="p">(</span><span class="n">trump_exchange</span><span class="o">.</span><span class="n">jack</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer-1179"><a href="#SchnapsenTrickImplementer-1179"><span class="linenos">1179</span></a>        <span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">old_trump</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer-1180"><a href="#SchnapsenTrickImplementer-1180"><span class="linenos">1180</span></a>        <span class="c1"># We notify the other bot that an exchange happened</span>
</span><span id="SchnapsenTrickImplementer-1181"><a href="#SchnapsenTrickImplementer-1181"><span class="linenos">1181</span></a>        <span class="n">game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">implementation</span><span class="o">.</span><span class="n">notify_trump_exchange</span><span class="p">(</span><span class="n">trump_exchange</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer-1182"><a href="#SchnapsenTrickImplementer-1182"><span class="linenos">1182</span></a>
</span><span id="SchnapsenTrickImplementer-1183"><a href="#SchnapsenTrickImplementer-1183"><span class="linenos">1183</span></a>    <span class="k">def</span> <span class="nf">_play_marriage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">marriage_move</span><span class="p">:</span> <span class="n">Marriage</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SchnapsenTrickImplementer-1184"><a href="#SchnapsenTrickImplementer-1184"><span class="linenos">1184</span></a>        <span class="n">score</span> <span class="o">=</span> <span class="n">game_engine</span><span class="o">.</span><span class="n">trick_scorer</span><span class="o">.</span><span class="n">marriage</span><span class="p">(</span><span class="n">marriage_move</span><span class="p">,</span> <span class="n">game_state</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer-1185"><a href="#SchnapsenTrickImplementer-1185"><span class="linenos">1185</span></a>        <span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">score</span> <span class="o">+=</span> <span class="n">score</span>
</span><span id="SchnapsenTrickImplementer-1186"><a href="#SchnapsenTrickImplementer-1186"><span class="linenos">1186</span></a>
</span><span id="SchnapsenTrickImplementer-1187"><a href="#SchnapsenTrickImplementer-1187"><span class="linenos">1187</span></a>    <span class="k">def</span> <span class="nf">get_follower_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="s1">&#39;GameState&#39;</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">:</span> <span class="n">Move</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RegularMove</span><span class="p">:</span>
</span><span id="SchnapsenTrickImplementer-1188"><a href="#SchnapsenTrickImplementer-1188"><span class="linenos">1188</span></a>        <span class="n">follower_game_state</span> <span class="o">=</span> <span class="n">FollowerPerspective</span><span class="p">(</span><span class="n">game_state</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer-1189"><a href="#SchnapsenTrickImplementer-1189"><span class="linenos">1189</span></a>
</span><span id="SchnapsenTrickImplementer-1190"><a href="#SchnapsenTrickImplementer-1190"><span class="linenos">1190</span></a>        <span class="n">follower_move</span> <span class="o">=</span> <span class="n">game_engine</span><span class="o">.</span><span class="n">move_requester</span><span class="o">.</span><span class="n">get_move</span><span class="p">(</span><span class="n">game_state</span><span class="o">.</span><span class="n">follower</span><span class="p">,</span> <span class="n">follower_game_state</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer-1191"><a href="#SchnapsenTrickImplementer-1191"><span class="linenos">1191</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">game_engine</span><span class="o">.</span><span class="n">move_validator</span><span class="o">.</span><span class="n">is_legal_follower_move</span><span class="p">(</span><span class="n">game_engine</span><span class="p">,</span> <span class="n">game_state</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">,</span> <span class="n">follower_move</span><span class="p">):</span>
</span><span id="SchnapsenTrickImplementer-1192"><a href="#SchnapsenTrickImplementer-1192"><span class="linenos">1192</span></a>            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Follower </span><span class="si">{</span><span class="n">game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">implementation</span><span class="si">}</span><span class="s2"> played an illegal move&quot;</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer-1193"><a href="#SchnapsenTrickImplementer-1193"><span class="linenos">1193</span></a>        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">RegularMove</span><span class="p">,</span> <span class="n">follower_move</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The TrickImplementer specifies how tricks are palyed in the game.</p>
</div>


                            <div id="SchnapsenTrickImplementer.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">SchnapsenTrickImplementer</span><span class="signature pdoc-code condensed">()</span>

        
    </div>
    <a class="headerlink" href="#SchnapsenTrickImplementer.__init__"></a>
    
    

                            </div>
                            <div id="SchnapsenTrickImplementer.play_trick" class="classattr">
                                        <input id="SchnapsenTrickImplementer.play_trick-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">play_trick</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">game_engine</span><span class="p">:</span> <span class="n"><a href="#GamePlayEngine">schnapsen.game.GamePlayEngine</a></span>,</span><span class="param">	<span class="n">game_state</span><span class="p">:</span> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span></span><span class="return-annotation">) -> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span>:</span></span>

                <label class="view-source-button" for="SchnapsenTrickImplementer.play_trick-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SchnapsenTrickImplementer.play_trick"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SchnapsenTrickImplementer.play_trick-1109"><a href="#SchnapsenTrickImplementer.play_trick-1109"><span class="linenos">1109</span></a>    <span class="k">def</span> <span class="nf">play_trick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GameState</span><span class="p">:</span>
</span><span id="SchnapsenTrickImplementer.play_trick-1110"><a href="#SchnapsenTrickImplementer.play_trick-1110"><span class="linenos">1110</span></a>        <span class="n">leader_move</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_leader_move</span><span class="p">(</span><span class="n">game_engine</span><span class="p">,</span> <span class="n">game_state</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer.play_trick-1111"><a href="#SchnapsenTrickImplementer.play_trick-1111"><span class="linenos">1111</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">play_trick_with_fixed_leader_move</span><span class="p">(</span><span class="n">game_engine</span><span class="o">=</span><span class="n">game_engine</span><span class="p">,</span> <span class="n">game_state</span><span class="o">=</span><span class="n">game_state</span><span class="p">,</span> <span class="n">leader_move</span><span class="o">=</span><span class="n">leader_move</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Plays a single Trick the game by asking the bots in the game_state for their Moves,
using the MoveRequester from the game_engine.
These moves are then also validated using the MoveValidator of the game_engine.
Finally, the trick is recorder in the history (previous field) of the returned GameState.</p>

<p>Note, the provided GameState does not get modified by this method.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>game_engine</strong>:  The engine used to preform the underlying actions of the Trick.</li>
<li><strong>game_state</strong>:  The state of the game before the trick is played. Thi state will not be modified.
:returns: The GameState after the trick is completed.</li>
</ul>
</div>


                            </div>
                            <div id="SchnapsenTrickImplementer.play_trick_with_fixed_leader_move" class="classattr">
                                        <input id="SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">play_trick_with_fixed_leader_move</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">game_engine</span><span class="p">:</span> <span class="n"><a href="#GamePlayEngine">schnapsen.game.GamePlayEngine</a></span>,</span><span class="param">	<span class="n">game_state</span><span class="p">:</span> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span>,</span><span class="param">	<span class="n">leader_move</span><span class="p">:</span> <span class="n"><a href="#Move">schnapsen.game.Move</a></span></span><span class="return-annotation">) -> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span>:</span></span>

                <label class="view-source-button" for="SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SchnapsenTrickImplementer.play_trick_with_fixed_leader_move"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1113"><a href="#SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1113"><span class="linenos">1113</span></a>    <span class="k">def</span> <span class="nf">play_trick_with_fixed_leader_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span>
</span><span id="SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1114"><a href="#SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1114"><span class="linenos">1114</span></a>                                          <span class="n">leader_move</span><span class="p">:</span> <span class="n">Move</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GameState</span><span class="p">:</span>
</span><span id="SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1115"><a href="#SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1115"><span class="linenos">1115</span></a>        <span class="k">if</span> <span class="n">leader_move</span><span class="o">.</span><span class="n">is_trump_exchange</span><span class="p">():</span>
</span><span id="SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1116"><a href="#SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1116"><span class="linenos">1116</span></a>            <span class="n">next_game_state</span> <span class="o">=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">copy_for_next</span><span class="p">()</span>
</span><span id="SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1117"><a href="#SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1117"><span class="linenos">1117</span></a>            <span class="n">exchange</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Trump_Exchange</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1118"><a href="#SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1118"><span class="linenos">1118</span></a>            <span class="n">old_trump_card</span> <span class="o">=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">trump_card</span><span class="p">()</span>
</span><span id="SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1119"><a href="#SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1119"><span class="linenos">1119</span></a>            <span class="k">assert</span> <span class="n">old_trump_card</span>
</span><span id="SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1120"><a href="#SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1120"><span class="linenos">1120</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">play_trump_exchange</span><span class="p">(</span><span class="n">next_game_state</span><span class="p">,</span> <span class="n">exchange</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1121"><a href="#SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1121"><span class="linenos">1121</span></a>            <span class="c1"># remember the previous state</span>
</span><span id="SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1122"><a href="#SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1122"><span class="linenos">1122</span></a>            <span class="n">next_game_state</span><span class="o">.</span><span class="n">previous</span> <span class="o">=</span> <span class="n">Previous</span><span class="p">(</span><span class="n">game_state</span><span class="p">,</span> <span class="n">ExchangeTrick</span><span class="p">(</span><span class="n">exchange</span><span class="p">,</span> <span class="n">old_trump_card</span><span class="p">),</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1123"><a href="#SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1123"><span class="linenos">1123</span></a>            <span class="c1"># The whole trick ends here.</span>
</span><span id="SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1124"><a href="#SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1124"><span class="linenos">1124</span></a>            <span class="k">return</span> <span class="n">next_game_state</span>
</span><span id="SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1125"><a href="#SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1125"><span class="linenos">1125</span></a>
</span><span id="SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1126"><a href="#SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1126"><span class="linenos">1126</span></a>        <span class="c1"># We have a PartialTrick, ask the follower for its move</span>
</span><span id="SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1127"><a href="#SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1127"><span class="linenos">1127</span></a>        <span class="n">partial_trick</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Union</span><span class="p">[</span><span class="n">Marriage</span><span class="p">,</span> <span class="n">RegularMove</span><span class="p">],</span> <span class="n">leader_move</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1128"><a href="#SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1128"><span class="linenos">1128</span></a>        <span class="n">follower_move</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_follower_move</span><span class="p">(</span><span class="n">game_engine</span><span class="p">,</span> <span class="n">game_state</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1129"><a href="#SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1129"><span class="linenos">1129</span></a>
</span><span id="SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1130"><a href="#SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1130"><span class="linenos">1130</span></a>        <span class="n">trick</span> <span class="o">=</span> <span class="n">RegularTrick</span><span class="p">(</span><span class="n">leader_move</span><span class="o">=</span><span class="n">partial_trick</span><span class="p">,</span> <span class="n">follower_move</span><span class="o">=</span><span class="n">follower_move</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1131"><a href="#SchnapsenTrickImplementer.play_trick_with_fixed_leader_move-1131"><span class="linenos">1131</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_apply_regular_trick</span><span class="p">(</span><span class="n">game_engine</span><span class="o">=</span><span class="n">game_engine</span><span class="p">,</span> <span class="n">game_state</span><span class="o">=</span><span class="n">game_state</span><span class="p">,</span> <span class="n">trick</span><span class="o">=</span><span class="n">trick</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The same as play_trick, but also takes the leader_move to start with as an argument.</p>
</div>


                            </div>
                            <div id="SchnapsenTrickImplementer.get_leader_move" class="classattr">
                                        <input id="SchnapsenTrickImplementer.get_leader_move-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_leader_move</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">game_engine</span><span class="p">:</span> <span class="n"><a href="#GamePlayEngine">schnapsen.game.GamePlayEngine</a></span>,</span><span class="param">	<span class="n">game_state</span><span class="p">:</span> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span></span><span class="return-annotation">) -> <span class="n"><a href="#Move">schnapsen.game.Move</a></span>:</span></span>

                <label class="view-source-button" for="SchnapsenTrickImplementer.get_leader_move-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SchnapsenTrickImplementer.get_leader_move"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SchnapsenTrickImplementer.get_leader_move-1164"><a href="#SchnapsenTrickImplementer.get_leader_move-1164"><span class="linenos">1164</span></a>    <span class="k">def</span> <span class="nf">get_leader_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="s1">&#39;GameState&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Move</span><span class="p">:</span>
</span><span id="SchnapsenTrickImplementer.get_leader_move-1165"><a href="#SchnapsenTrickImplementer.get_leader_move-1165"><span class="linenos">1165</span></a>        <span class="c1"># ask first players move trough the requester</span>
</span><span id="SchnapsenTrickImplementer.get_leader_move-1166"><a href="#SchnapsenTrickImplementer.get_leader_move-1166"><span class="linenos">1166</span></a>        <span class="n">leader_game_state</span> <span class="o">=</span> <span class="n">LeaderPerspective</span><span class="p">(</span><span class="n">game_state</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer.get_leader_move-1167"><a href="#SchnapsenTrickImplementer.get_leader_move-1167"><span class="linenos">1167</span></a>        <span class="n">leader_move</span> <span class="o">=</span> <span class="n">game_engine</span><span class="o">.</span><span class="n">move_requester</span><span class="o">.</span><span class="n">get_move</span><span class="p">(</span><span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="p">,</span> <span class="n">leader_game_state</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer.get_leader_move-1168"><a href="#SchnapsenTrickImplementer.get_leader_move-1168"><span class="linenos">1168</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">game_engine</span><span class="o">.</span><span class="n">move_validator</span><span class="o">.</span><span class="n">is_legal_leader_move</span><span class="p">(</span><span class="n">game_engine</span><span class="p">,</span> <span class="n">game_state</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">):</span>
</span><span id="SchnapsenTrickImplementer.get_leader_move-1169"><a href="#SchnapsenTrickImplementer.get_leader_move-1169"><span class="linenos">1169</span></a>            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Leader </span><span class="si">{</span><span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">implementation</span><span class="si">}</span><span class="s2"> played an illegal move&quot;</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer.get_leader_move-1170"><a href="#SchnapsenTrickImplementer.get_leader_move-1170"><span class="linenos">1170</span></a>
</span><span id="SchnapsenTrickImplementer.get_leader_move-1171"><a href="#SchnapsenTrickImplementer.get_leader_move-1171"><span class="linenos">1171</span></a>        <span class="k">return</span> <span class="n">leader_move</span>
</span></pre></div>


    

                            </div>
                            <div id="SchnapsenTrickImplementer.play_trump_exchange" class="classattr">
                                        <input id="SchnapsenTrickImplementer.play_trump_exchange-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">play_trump_exchange</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">game_state</span><span class="p">:</span> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span>,</span><span class="param">	<span class="n">trump_exchange</span><span class="p">:</span> <span class="n"><a href="#Trump_Exchange">schnapsen.game.Trump_Exchange</a></span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="SchnapsenTrickImplementer.play_trump_exchange-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SchnapsenTrickImplementer.play_trump_exchange"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SchnapsenTrickImplementer.play_trump_exchange-1173"><a href="#SchnapsenTrickImplementer.play_trump_exchange-1173"><span class="linenos">1173</span></a>    <span class="k">def</span> <span class="nf">play_trump_exchange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">trump_exchange</span><span class="p">:</span> <span class="n">Trump_Exchange</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SchnapsenTrickImplementer.play_trump_exchange-1174"><a href="#SchnapsenTrickImplementer.play_trump_exchange-1174"><span class="linenos">1174</span></a>        <span class="k">assert</span> <span class="n">trump_exchange</span><span class="o">.</span><span class="n">jack</span><span class="o">.</span><span class="n">suit</span> <span class="ow">is</span> <span class="n">game_state</span><span class="o">.</span><span class="n">trump_suit</span><span class="p">,</span> \
</span><span id="SchnapsenTrickImplementer.play_trump_exchange-1175"><a href="#SchnapsenTrickImplementer.play_trump_exchange-1175"><span class="linenos">1175</span></a>            <span class="sa">f</span><span class="s2">&quot;A trump exchange can only be done with a Jack of the same suit as the current trump. Got a </span><span class="si">{</span><span class="n">trump_exchange</span><span class="o">.</span><span class="n">jack</span><span class="si">}</span><span class="s2"> while the  Trump card is a </span><span class="si">{</span><span class="n">game_state</span><span class="o">.</span><span class="n">trump_suit</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="SchnapsenTrickImplementer.play_trump_exchange-1176"><a href="#SchnapsenTrickImplementer.play_trump_exchange-1176"><span class="linenos">1176</span></a>        <span class="c1"># apply the changes in the gamestate</span>
</span><span id="SchnapsenTrickImplementer.play_trump_exchange-1177"><a href="#SchnapsenTrickImplementer.play_trump_exchange-1177"><span class="linenos">1177</span></a>        <span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">trump_exchange</span><span class="o">.</span><span class="n">jack</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer.play_trump_exchange-1178"><a href="#SchnapsenTrickImplementer.play_trump_exchange-1178"><span class="linenos">1178</span></a>        <span class="n">old_trump</span> <span class="o">=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">trump_exchange</span><span class="p">(</span><span class="n">trump_exchange</span><span class="o">.</span><span class="n">jack</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer.play_trump_exchange-1179"><a href="#SchnapsenTrickImplementer.play_trump_exchange-1179"><span class="linenos">1179</span></a>        <span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">old_trump</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer.play_trump_exchange-1180"><a href="#SchnapsenTrickImplementer.play_trump_exchange-1180"><span class="linenos">1180</span></a>        <span class="c1"># We notify the other bot that an exchange happened</span>
</span><span id="SchnapsenTrickImplementer.play_trump_exchange-1181"><a href="#SchnapsenTrickImplementer.play_trump_exchange-1181"><span class="linenos">1181</span></a>        <span class="n">game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">implementation</span><span class="o">.</span><span class="n">notify_trump_exchange</span><span class="p">(</span><span class="n">trump_exchange</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="SchnapsenTrickImplementer.get_follower_move" class="classattr">
                                        <input id="SchnapsenTrickImplementer.get_follower_move-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_follower_move</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">game_engine</span><span class="p">:</span> <span class="n"><a href="#GamePlayEngine">schnapsen.game.GamePlayEngine</a></span>,</span><span class="param">	<span class="n">game_state</span><span class="p">:</span> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span>,</span><span class="param">	<span class="n">partial_trick</span><span class="p">:</span> <span class="n"><a href="#Move">schnapsen.game.Move</a></span></span><span class="return-annotation">) -> <span class="n"><a href="#RegularMove">schnapsen.game.RegularMove</a></span>:</span></span>

                <label class="view-source-button" for="SchnapsenTrickImplementer.get_follower_move-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SchnapsenTrickImplementer.get_follower_move"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SchnapsenTrickImplementer.get_follower_move-1187"><a href="#SchnapsenTrickImplementer.get_follower_move-1187"><span class="linenos">1187</span></a>    <span class="k">def</span> <span class="nf">get_follower_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="s1">&#39;GameState&#39;</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">:</span> <span class="n">Move</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RegularMove</span><span class="p">:</span>
</span><span id="SchnapsenTrickImplementer.get_follower_move-1188"><a href="#SchnapsenTrickImplementer.get_follower_move-1188"><span class="linenos">1188</span></a>        <span class="n">follower_game_state</span> <span class="o">=</span> <span class="n">FollowerPerspective</span><span class="p">(</span><span class="n">game_state</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer.get_follower_move-1189"><a href="#SchnapsenTrickImplementer.get_follower_move-1189"><span class="linenos">1189</span></a>
</span><span id="SchnapsenTrickImplementer.get_follower_move-1190"><a href="#SchnapsenTrickImplementer.get_follower_move-1190"><span class="linenos">1190</span></a>        <span class="n">follower_move</span> <span class="o">=</span> <span class="n">game_engine</span><span class="o">.</span><span class="n">move_requester</span><span class="o">.</span><span class="n">get_move</span><span class="p">(</span><span class="n">game_state</span><span class="o">.</span><span class="n">follower</span><span class="p">,</span> <span class="n">follower_game_state</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer.get_follower_move-1191"><a href="#SchnapsenTrickImplementer.get_follower_move-1191"><span class="linenos">1191</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">game_engine</span><span class="o">.</span><span class="n">move_validator</span><span class="o">.</span><span class="n">is_legal_follower_move</span><span class="p">(</span><span class="n">game_engine</span><span class="p">,</span> <span class="n">game_state</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">,</span> <span class="n">follower_move</span><span class="p">):</span>
</span><span id="SchnapsenTrickImplementer.get_follower_move-1192"><a href="#SchnapsenTrickImplementer.get_follower_move-1192"><span class="linenos">1192</span></a>            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Follower </span><span class="si">{</span><span class="n">game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">implementation</span><span class="si">}</span><span class="s2"> played an illegal move&quot;</span><span class="p">)</span>
</span><span id="SchnapsenTrickImplementer.get_follower_move-1193"><a href="#SchnapsenTrickImplementer.get_follower_move-1193"><span class="linenos">1193</span></a>        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">RegularMove</span><span class="p">,</span> <span class="n">follower_move</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="MoveRequester">
                            <input id="MoveRequester-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">MoveRequester</span>:

                <label class="view-source-button" for="MoveRequester-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MoveRequester"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MoveRequester-1196"><a href="#MoveRequester-1196"><span class="linenos">1196</span></a><span class="k">class</span> <span class="nc">MoveRequester</span><span class="p">:</span>
</span><span id="MoveRequester-1197"><a href="#MoveRequester-1197"><span class="linenos">1197</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MoveRequester-1198"><a href="#MoveRequester-1198"><span class="linenos">1198</span></a><span class="sd">    An moveRequester captures the logic of requesting a move from a bot.</span>
</span><span id="MoveRequester-1199"><a href="#MoveRequester-1199"><span class="linenos">1199</span></a><span class="sd">    This logic also determines what happens in case the bot is to slow, throws an exception during operation, etc</span>
</span><span id="MoveRequester-1200"><a href="#MoveRequester-1200"><span class="linenos">1200</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="MoveRequester-1201"><a href="#MoveRequester-1201"><span class="linenos">1201</span></a>
</span><span id="MoveRequester-1202"><a href="#MoveRequester-1202"><span class="linenos">1202</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="MoveRequester-1203"><a href="#MoveRequester-1203"><span class="linenos">1203</span></a>    <span class="k">def</span> <span class="nf">get_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bot</span><span class="p">:</span> <span class="n">BotState</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">PlayerPerspective</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Move</span><span class="p">:</span>
</span><span id="MoveRequester-1204"><a href="#MoveRequester-1204"><span class="linenos">1204</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MoveRequester-1205"><a href="#MoveRequester-1205"><span class="linenos">1205</span></a><span class="sd">        Get a move from the bot, potentially applying timeout logic.</span>
</span><span id="MoveRequester-1206"><a href="#MoveRequester-1206"><span class="linenos">1206</span></a>
</span><span id="MoveRequester-1207"><a href="#MoveRequester-1207"><span class="linenos">1207</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>An moveRequester captures the logic of requesting a move from a bot.
This logic also determines what happens in case the bot is to slow, throws an exception during operation, etc</p>
</div>


                            <div id="MoveRequester.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">MoveRequester</span><span class="signature pdoc-code condensed">()</span>

        
    </div>
    <a class="headerlink" href="#MoveRequester.__init__"></a>
    
    

                            </div>
                            <div id="MoveRequester.get_move" class="classattr">
                                        <input id="MoveRequester.get_move-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">get_move</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">bot</span><span class="p">:</span> <span class="n"><a href="#BotState">schnapsen.game.BotState</a></span>,</span><span class="param">	<span class="n">state</span><span class="p">:</span> <span class="n"><a href="#PlayerPerspective">schnapsen.game.PlayerPerspective</a></span>,</span><span class="param">	<span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="#Move">schnapsen.game.Move</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n"><a href="#Move">schnapsen.game.Move</a></span>:</span></span>

                <label class="view-source-button" for="MoveRequester.get_move-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MoveRequester.get_move"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MoveRequester.get_move-1202"><a href="#MoveRequester.get_move-1202"><span class="linenos">1202</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="MoveRequester.get_move-1203"><a href="#MoveRequester.get_move-1203"><span class="linenos">1203</span></a>    <span class="k">def</span> <span class="nf">get_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bot</span><span class="p">:</span> <span class="n">BotState</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">PlayerPerspective</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Move</span><span class="p">:</span>
</span><span id="MoveRequester.get_move-1204"><a href="#MoveRequester.get_move-1204"><span class="linenos">1204</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MoveRequester.get_move-1205"><a href="#MoveRequester.get_move-1205"><span class="linenos">1205</span></a><span class="sd">        Get a move from the bot, potentially applying timeout logic.</span>
</span><span id="MoveRequester.get_move-1206"><a href="#MoveRequester.get_move-1206"><span class="linenos">1206</span></a>
</span><span id="MoveRequester.get_move-1207"><a href="#MoveRequester.get_move-1207"><span class="linenos">1207</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Get a move from the bot, potentially applying timeout logic.</p>
</div>


                            </div>
                </section>
                <section id="SimpleMoveRequester">
                            <input id="SimpleMoveRequester-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">SimpleMoveRequester</span><wbr>(<span class="base"><a href="#MoveRequester">MoveRequester</a></span>):

                <label class="view-source-button" for="SimpleMoveRequester-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SimpleMoveRequester"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SimpleMoveRequester-1210"><a href="#SimpleMoveRequester-1210"><span class="linenos">1210</span></a><span class="k">class</span> <span class="nc">SimpleMoveRequester</span><span class="p">(</span><span class="n">MoveRequester</span><span class="p">):</span>
</span><span id="SimpleMoveRequester-1211"><a href="#SimpleMoveRequester-1211"><span class="linenos">1211</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The SimplemoveRquester just asks the move, and does nto time out&quot;&quot;&quot;</span>
</span><span id="SimpleMoveRequester-1212"><a href="#SimpleMoveRequester-1212"><span class="linenos">1212</span></a>
</span><span id="SimpleMoveRequester-1213"><a href="#SimpleMoveRequester-1213"><span class="linenos">1213</span></a>    <span class="k">def</span> <span class="nf">get_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bot</span><span class="p">:</span> <span class="n">BotState</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">PlayerPerspective</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Move</span><span class="p">:</span>
</span><span id="SimpleMoveRequester-1214"><a href="#SimpleMoveRequester-1214"><span class="linenos">1214</span></a>        <span class="k">return</span> <span class="n">bot</span><span class="o">.</span><span class="n">get_move</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">leader_move</span><span class="o">=</span><span class="n">leader_move</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The SimplemoveRquester just asks the move, and does nto time out</p>
</div>


                            <div id="SimpleMoveRequester.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">SimpleMoveRequester</span><span class="signature pdoc-code condensed">()</span>

        
    </div>
    <a class="headerlink" href="#SimpleMoveRequester.__init__"></a>
    
    

                            </div>
                            <div id="SimpleMoveRequester.get_move" class="classattr">
                                        <input id="SimpleMoveRequester.get_move-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_move</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">bot</span><span class="p">:</span> <span class="n"><a href="#BotState">schnapsen.game.BotState</a></span>,</span><span class="param">	<span class="n">state</span><span class="p">:</span> <span class="n"><a href="#PlayerPerspective">schnapsen.game.PlayerPerspective</a></span>,</span><span class="param">	<span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="#Move">schnapsen.game.Move</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n"><a href="#Move">schnapsen.game.Move</a></span>:</span></span>

                <label class="view-source-button" for="SimpleMoveRequester.get_move-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SimpleMoveRequester.get_move"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SimpleMoveRequester.get_move-1213"><a href="#SimpleMoveRequester.get_move-1213"><span class="linenos">1213</span></a>    <span class="k">def</span> <span class="nf">get_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bot</span><span class="p">:</span> <span class="n">BotState</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">PlayerPerspective</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Move</span><span class="p">:</span>
</span><span id="SimpleMoveRequester.get_move-1214"><a href="#SimpleMoveRequester.get_move-1214"><span class="linenos">1214</span></a>        <span class="k">return</span> <span class="n">bot</span><span class="o">.</span><span class="n">get_move</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">leader_move</span><span class="o">=</span><span class="n">leader_move</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Get a move from the bot, potentially applying timeout logic.</p>
</div>


                            </div>
                </section>
                <section id="MoveValidator">
                            <input id="MoveValidator-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">MoveValidator</span><wbr>(<span class="base">abc.ABC</span>):

                <label class="view-source-button" for="MoveValidator-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MoveValidator"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MoveValidator-1217"><a href="#MoveValidator-1217"><span class="linenos">1217</span></a><span class="k">class</span> <span class="nc">MoveValidator</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="MoveValidator-1218"><a href="#MoveValidator-1218"><span class="linenos">1218</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MoveValidator-1219"><a href="#MoveValidator-1219"><span class="linenos">1219</span></a><span class="sd">    An object of this class can be used to check whether a move is valid.</span>
</span><span id="MoveValidator-1220"><a href="#MoveValidator-1220"><span class="linenos">1220</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="MoveValidator-1221"><a href="#MoveValidator-1221"><span class="linenos">1221</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="MoveValidator-1222"><a href="#MoveValidator-1222"><span class="linenos">1222</span></a>    <span class="k">def</span> <span class="nf">get_legal_leader_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="MoveValidator-1223"><a href="#MoveValidator-1223"><span class="linenos">1223</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MoveValidator-1224"><a href="#MoveValidator-1224"><span class="linenos">1224</span></a><span class="sd">        Get all legal moves for the current leader of the game.</span>
</span><span id="MoveValidator-1225"><a href="#MoveValidator-1225"><span class="linenos">1225</span></a>
</span><span id="MoveValidator-1226"><a href="#MoveValidator-1226"><span class="linenos">1226</span></a><span class="sd">        :param game_engine: The engine which is playing the game</span>
</span><span id="MoveValidator-1227"><a href="#MoveValidator-1227"><span class="linenos">1227</span></a><span class="sd">        :param game_state: The current state of the game</span>
</span><span id="MoveValidator-1228"><a href="#MoveValidator-1228"><span class="linenos">1228</span></a>
</span><span id="MoveValidator-1229"><a href="#MoveValidator-1229"><span class="linenos">1229</span></a><span class="sd">        :returns: An iterable containing the current legal moves.</span>
</span><span id="MoveValidator-1230"><a href="#MoveValidator-1230"><span class="linenos">1230</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MoveValidator-1231"><a href="#MoveValidator-1231"><span class="linenos">1231</span></a>
</span><span id="MoveValidator-1232"><a href="#MoveValidator-1232"><span class="linenos">1232</span></a>    <span class="k">def</span> <span class="nf">is_legal_leader_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">move</span><span class="p">:</span> <span class="n">Move</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="MoveValidator-1233"><a href="#MoveValidator-1233"><span class="linenos">1233</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MoveValidator-1234"><a href="#MoveValidator-1234"><span class="linenos">1234</span></a><span class="sd">        Whether the provided move is legal for the leader to play.</span>
</span><span id="MoveValidator-1235"><a href="#MoveValidator-1235"><span class="linenos">1235</span></a><span class="sd">        The basic implementation checks whether the move is in the legal leader moves.</span>
</span><span id="MoveValidator-1236"><a href="#MoveValidator-1236"><span class="linenos">1236</span></a><span class="sd">        Derived classes might implement this more performantly.</span>
</span><span id="MoveValidator-1237"><a href="#MoveValidator-1237"><span class="linenos">1237</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MoveValidator-1238"><a href="#MoveValidator-1238"><span class="linenos">1238</span></a>        <span class="k">assert</span> <span class="n">move</span><span class="p">,</span> <span class="s1">&#39;The move played by the leader cannot be None&#39;</span>
</span><span id="MoveValidator-1239"><a href="#MoveValidator-1239"><span class="linenos">1239</span></a>        <span class="k">return</span> <span class="n">move</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_legal_leader_moves</span><span class="p">(</span><span class="n">game_engine</span><span class="p">,</span> <span class="n">game_state</span><span class="p">)</span>
</span><span id="MoveValidator-1240"><a href="#MoveValidator-1240"><span class="linenos">1240</span></a>
</span><span id="MoveValidator-1241"><a href="#MoveValidator-1241"><span class="linenos">1241</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="MoveValidator-1242"><a href="#MoveValidator-1242"><span class="linenos">1242</span></a>    <span class="k">def</span> <span class="nf">get_legal_follower_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">:</span> <span class="n">Move</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="MoveValidator-1243"><a href="#MoveValidator-1243"><span class="linenos">1243</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MoveValidator-1244"><a href="#MoveValidator-1244"><span class="linenos">1244</span></a><span class="sd">        Get all legal moves for the current follower of the game.</span>
</span><span id="MoveValidator-1245"><a href="#MoveValidator-1245"><span class="linenos">1245</span></a>
</span><span id="MoveValidator-1246"><a href="#MoveValidator-1246"><span class="linenos">1246</span></a><span class="sd">        :param game_engine: The engine which is playing the game</span>
</span><span id="MoveValidator-1247"><a href="#MoveValidator-1247"><span class="linenos">1247</span></a><span class="sd">        :param game_state: The current state of the game</span>
</span><span id="MoveValidator-1248"><a href="#MoveValidator-1248"><span class="linenos">1248</span></a><span class="sd">        :param partial_trick: The move played by the leader of the trick.</span>
</span><span id="MoveValidator-1249"><a href="#MoveValidator-1249"><span class="linenos">1249</span></a>
</span><span id="MoveValidator-1250"><a href="#MoveValidator-1250"><span class="linenos">1250</span></a><span class="sd">        :returns: An iterable containing the current legal moves.</span>
</span><span id="MoveValidator-1251"><a href="#MoveValidator-1251"><span class="linenos">1251</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MoveValidator-1252"><a href="#MoveValidator-1252"><span class="linenos">1252</span></a>
</span><span id="MoveValidator-1253"><a href="#MoveValidator-1253"><span class="linenos">1253</span></a>    <span class="k">def</span> <span class="nf">is_legal_follower_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Move</span><span class="p">,</span> <span class="n">move</span><span class="p">:</span> <span class="n">Move</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="MoveValidator-1254"><a href="#MoveValidator-1254"><span class="linenos">1254</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MoveValidator-1255"><a href="#MoveValidator-1255"><span class="linenos">1255</span></a><span class="sd">        Whether the provided move is legal for the follower to play.</span>
</span><span id="MoveValidator-1256"><a href="#MoveValidator-1256"><span class="linenos">1256</span></a><span class="sd">        The basic implementation checks whether the move is in the legal fllower moves.</span>
</span><span id="MoveValidator-1257"><a href="#MoveValidator-1257"><span class="linenos">1257</span></a><span class="sd">        Derived classes might implement this more performantly.</span>
</span><span id="MoveValidator-1258"><a href="#MoveValidator-1258"><span class="linenos">1258</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MoveValidator-1259"><a href="#MoveValidator-1259"><span class="linenos">1259</span></a>        <span class="k">assert</span> <span class="n">move</span><span class="p">,</span> <span class="s1">&#39;The move played by the follower cannot be None&#39;</span>
</span><span id="MoveValidator-1260"><a href="#MoveValidator-1260"><span class="linenos">1260</span></a>        <span class="k">assert</span> <span class="n">leader_move</span><span class="p">,</span> <span class="s1">&#39;The move played by the leader cannot be None&#39;</span>
</span><span id="MoveValidator-1261"><a href="#MoveValidator-1261"><span class="linenos">1261</span></a>        <span class="k">return</span> <span class="n">move</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_legal_follower_moves</span><span class="p">(</span><span class="n">game_engine</span><span class="o">=</span><span class="n">game_engine</span><span class="p">,</span> <span class="n">game_state</span><span class="o">=</span><span class="n">game_state</span><span class="p">,</span> <span class="n">partial_trick</span><span class="o">=</span><span class="n">leader_move</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>An object of this class can be used to check whether a move is valid.</p>
</div>


                            <div id="MoveValidator.get_legal_leader_moves" class="classattr">
                                        <input id="MoveValidator.get_legal_leader_moves-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">get_legal_leader_moves</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">game_engine</span><span class="p">:</span> <span class="n"><a href="#GamePlayEngine">schnapsen.game.GamePlayEngine</a></span>,</span><span class="param">	<span class="n">game_state</span><span class="p">:</span> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span></span><span class="return-annotation">) -> <span class="n">Iterable</span><span class="p">[</span><span class="n"><a href="#Move">schnapsen.game.Move</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="MoveValidator.get_legal_leader_moves-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MoveValidator.get_legal_leader_moves"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MoveValidator.get_legal_leader_moves-1221"><a href="#MoveValidator.get_legal_leader_moves-1221"><span class="linenos">1221</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="MoveValidator.get_legal_leader_moves-1222"><a href="#MoveValidator.get_legal_leader_moves-1222"><span class="linenos">1222</span></a>    <span class="k">def</span> <span class="nf">get_legal_leader_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="MoveValidator.get_legal_leader_moves-1223"><a href="#MoveValidator.get_legal_leader_moves-1223"><span class="linenos">1223</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MoveValidator.get_legal_leader_moves-1224"><a href="#MoveValidator.get_legal_leader_moves-1224"><span class="linenos">1224</span></a><span class="sd">        Get all legal moves for the current leader of the game.</span>
</span><span id="MoveValidator.get_legal_leader_moves-1225"><a href="#MoveValidator.get_legal_leader_moves-1225"><span class="linenos">1225</span></a>
</span><span id="MoveValidator.get_legal_leader_moves-1226"><a href="#MoveValidator.get_legal_leader_moves-1226"><span class="linenos">1226</span></a><span class="sd">        :param game_engine: The engine which is playing the game</span>
</span><span id="MoveValidator.get_legal_leader_moves-1227"><a href="#MoveValidator.get_legal_leader_moves-1227"><span class="linenos">1227</span></a><span class="sd">        :param game_state: The current state of the game</span>
</span><span id="MoveValidator.get_legal_leader_moves-1228"><a href="#MoveValidator.get_legal_leader_moves-1228"><span class="linenos">1228</span></a>
</span><span id="MoveValidator.get_legal_leader_moves-1229"><a href="#MoveValidator.get_legal_leader_moves-1229"><span class="linenos">1229</span></a><span class="sd">        :returns: An iterable containing the current legal moves.</span>
</span><span id="MoveValidator.get_legal_leader_moves-1230"><a href="#MoveValidator.get_legal_leader_moves-1230"><span class="linenos">1230</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Get all legal moves for the current leader of the game.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>game_engine</strong>:  The engine which is playing the game</li>
<li><strong>game_state</strong>:  The current state of the game</li>
</ul>

<p>:returns: An iterable containing the current legal moves.</p>
</div>


                            </div>
                            <div id="MoveValidator.is_legal_leader_move" class="classattr">
                                        <input id="MoveValidator.is_legal_leader_move-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">is_legal_leader_move</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">game_engine</span><span class="p">:</span> <span class="n"><a href="#GamePlayEngine">schnapsen.game.GamePlayEngine</a></span>,</span><span class="param">	<span class="n">game_state</span><span class="p">:</span> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span>,</span><span class="param">	<span class="n">move</span><span class="p">:</span> <span class="n"><a href="#Move">schnapsen.game.Move</a></span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="MoveValidator.is_legal_leader_move-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MoveValidator.is_legal_leader_move"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MoveValidator.is_legal_leader_move-1232"><a href="#MoveValidator.is_legal_leader_move-1232"><span class="linenos">1232</span></a>    <span class="k">def</span> <span class="nf">is_legal_leader_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">move</span><span class="p">:</span> <span class="n">Move</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="MoveValidator.is_legal_leader_move-1233"><a href="#MoveValidator.is_legal_leader_move-1233"><span class="linenos">1233</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MoveValidator.is_legal_leader_move-1234"><a href="#MoveValidator.is_legal_leader_move-1234"><span class="linenos">1234</span></a><span class="sd">        Whether the provided move is legal for the leader to play.</span>
</span><span id="MoveValidator.is_legal_leader_move-1235"><a href="#MoveValidator.is_legal_leader_move-1235"><span class="linenos">1235</span></a><span class="sd">        The basic implementation checks whether the move is in the legal leader moves.</span>
</span><span id="MoveValidator.is_legal_leader_move-1236"><a href="#MoveValidator.is_legal_leader_move-1236"><span class="linenos">1236</span></a><span class="sd">        Derived classes might implement this more performantly.</span>
</span><span id="MoveValidator.is_legal_leader_move-1237"><a href="#MoveValidator.is_legal_leader_move-1237"><span class="linenos">1237</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MoveValidator.is_legal_leader_move-1238"><a href="#MoveValidator.is_legal_leader_move-1238"><span class="linenos">1238</span></a>        <span class="k">assert</span> <span class="n">move</span><span class="p">,</span> <span class="s1">&#39;The move played by the leader cannot be None&#39;</span>
</span><span id="MoveValidator.is_legal_leader_move-1239"><a href="#MoveValidator.is_legal_leader_move-1239"><span class="linenos">1239</span></a>        <span class="k">return</span> <span class="n">move</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_legal_leader_moves</span><span class="p">(</span><span class="n">game_engine</span><span class="p">,</span> <span class="n">game_state</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Whether the provided move is legal for the leader to play.
The basic implementation checks whether the move is in the legal leader moves.
Derived classes might implement this more performantly.</p>
</div>


                            </div>
                            <div id="MoveValidator.get_legal_follower_moves" class="classattr">
                                        <input id="MoveValidator.get_legal_follower_moves-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">get_legal_follower_moves</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">game_engine</span><span class="p">:</span> <span class="n"><a href="#GamePlayEngine">schnapsen.game.GamePlayEngine</a></span>,</span><span class="param">	<span class="n">game_state</span><span class="p">:</span> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span>,</span><span class="param">	<span class="n">partial_trick</span><span class="p">:</span> <span class="n"><a href="#Move">schnapsen.game.Move</a></span></span><span class="return-annotation">) -> <span class="n">Iterable</span><span class="p">[</span><span class="n"><a href="#Move">schnapsen.game.Move</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="MoveValidator.get_legal_follower_moves-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MoveValidator.get_legal_follower_moves"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MoveValidator.get_legal_follower_moves-1241"><a href="#MoveValidator.get_legal_follower_moves-1241"><span class="linenos">1241</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="MoveValidator.get_legal_follower_moves-1242"><a href="#MoveValidator.get_legal_follower_moves-1242"><span class="linenos">1242</span></a>    <span class="k">def</span> <span class="nf">get_legal_follower_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">:</span> <span class="n">Move</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="MoveValidator.get_legal_follower_moves-1243"><a href="#MoveValidator.get_legal_follower_moves-1243"><span class="linenos">1243</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MoveValidator.get_legal_follower_moves-1244"><a href="#MoveValidator.get_legal_follower_moves-1244"><span class="linenos">1244</span></a><span class="sd">        Get all legal moves for the current follower of the game.</span>
</span><span id="MoveValidator.get_legal_follower_moves-1245"><a href="#MoveValidator.get_legal_follower_moves-1245"><span class="linenos">1245</span></a>
</span><span id="MoveValidator.get_legal_follower_moves-1246"><a href="#MoveValidator.get_legal_follower_moves-1246"><span class="linenos">1246</span></a><span class="sd">        :param game_engine: The engine which is playing the game</span>
</span><span id="MoveValidator.get_legal_follower_moves-1247"><a href="#MoveValidator.get_legal_follower_moves-1247"><span class="linenos">1247</span></a><span class="sd">        :param game_state: The current state of the game</span>
</span><span id="MoveValidator.get_legal_follower_moves-1248"><a href="#MoveValidator.get_legal_follower_moves-1248"><span class="linenos">1248</span></a><span class="sd">        :param partial_trick: The move played by the leader of the trick.</span>
</span><span id="MoveValidator.get_legal_follower_moves-1249"><a href="#MoveValidator.get_legal_follower_moves-1249"><span class="linenos">1249</span></a>
</span><span id="MoveValidator.get_legal_follower_moves-1250"><a href="#MoveValidator.get_legal_follower_moves-1250"><span class="linenos">1250</span></a><span class="sd">        :returns: An iterable containing the current legal moves.</span>
</span><span id="MoveValidator.get_legal_follower_moves-1251"><a href="#MoveValidator.get_legal_follower_moves-1251"><span class="linenos">1251</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Get all legal moves for the current follower of the game.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>game_engine</strong>:  The engine which is playing the game</li>
<li><strong>game_state</strong>:  The current state of the game</li>
<li><strong>partial_trick</strong>:  The move played by the leader of the trick.</li>
</ul>

<p>:returns: An iterable containing the current legal moves.</p>
</div>


                            </div>
                            <div id="MoveValidator.is_legal_follower_move" class="classattr">
                                        <input id="MoveValidator.is_legal_follower_move-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">is_legal_follower_move</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">game_engine</span><span class="p">:</span> <span class="n"><a href="#GamePlayEngine">schnapsen.game.GamePlayEngine</a></span>,</span><span class="param">	<span class="n">game_state</span><span class="p">:</span> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span>,</span><span class="param">	<span class="n">leader_move</span><span class="p">:</span> <span class="n"><a href="#Move">schnapsen.game.Move</a></span>,</span><span class="param">	<span class="n">move</span><span class="p">:</span> <span class="n"><a href="#Move">schnapsen.game.Move</a></span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="MoveValidator.is_legal_follower_move-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MoveValidator.is_legal_follower_move"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MoveValidator.is_legal_follower_move-1253"><a href="#MoveValidator.is_legal_follower_move-1253"><span class="linenos">1253</span></a>    <span class="k">def</span> <span class="nf">is_legal_follower_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Move</span><span class="p">,</span> <span class="n">move</span><span class="p">:</span> <span class="n">Move</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="MoveValidator.is_legal_follower_move-1254"><a href="#MoveValidator.is_legal_follower_move-1254"><span class="linenos">1254</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MoveValidator.is_legal_follower_move-1255"><a href="#MoveValidator.is_legal_follower_move-1255"><span class="linenos">1255</span></a><span class="sd">        Whether the provided move is legal for the follower to play.</span>
</span><span id="MoveValidator.is_legal_follower_move-1256"><a href="#MoveValidator.is_legal_follower_move-1256"><span class="linenos">1256</span></a><span class="sd">        The basic implementation checks whether the move is in the legal fllower moves.</span>
</span><span id="MoveValidator.is_legal_follower_move-1257"><a href="#MoveValidator.is_legal_follower_move-1257"><span class="linenos">1257</span></a><span class="sd">        Derived classes might implement this more performantly.</span>
</span><span id="MoveValidator.is_legal_follower_move-1258"><a href="#MoveValidator.is_legal_follower_move-1258"><span class="linenos">1258</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MoveValidator.is_legal_follower_move-1259"><a href="#MoveValidator.is_legal_follower_move-1259"><span class="linenos">1259</span></a>        <span class="k">assert</span> <span class="n">move</span><span class="p">,</span> <span class="s1">&#39;The move played by the follower cannot be None&#39;</span>
</span><span id="MoveValidator.is_legal_follower_move-1260"><a href="#MoveValidator.is_legal_follower_move-1260"><span class="linenos">1260</span></a>        <span class="k">assert</span> <span class="n">leader_move</span><span class="p">,</span> <span class="s1">&#39;The move played by the leader cannot be None&#39;</span>
</span><span id="MoveValidator.is_legal_follower_move-1261"><a href="#MoveValidator.is_legal_follower_move-1261"><span class="linenos">1261</span></a>        <span class="k">return</span> <span class="n">move</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_legal_follower_moves</span><span class="p">(</span><span class="n">game_engine</span><span class="o">=</span><span class="n">game_engine</span><span class="p">,</span> <span class="n">game_state</span><span class="o">=</span><span class="n">game_state</span><span class="p">,</span> <span class="n">partial_trick</span><span class="o">=</span><span class="n">leader_move</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Whether the provided move is legal for the follower to play.
The basic implementation checks whether the move is in the legal fllower moves.
Derived classes might implement this more performantly.</p>
</div>


                            </div>
                </section>
                <section id="SchnapsenMoveValidator">
                            <input id="SchnapsenMoveValidator-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">SchnapsenMoveValidator</span><wbr>(<span class="base"><a href="#MoveValidator">MoveValidator</a></span>):

                <label class="view-source-button" for="SchnapsenMoveValidator-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SchnapsenMoveValidator"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SchnapsenMoveValidator-1264"><a href="#SchnapsenMoveValidator-1264"><span class="linenos">1264</span></a><span class="k">class</span> <span class="nc">SchnapsenMoveValidator</span><span class="p">(</span><span class="n">MoveValidator</span><span class="p">):</span>
</span><span id="SchnapsenMoveValidator-1265"><a href="#SchnapsenMoveValidator-1265"><span class="linenos">1265</span></a>
</span><span id="SchnapsenMoveValidator-1266"><a href="#SchnapsenMoveValidator-1266"><span class="linenos">1266</span></a>    <span class="k">def</span> <span class="nf">get_legal_leader_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="SchnapsenMoveValidator-1267"><a href="#SchnapsenMoveValidator-1267"><span class="linenos">1267</span></a>        <span class="c1"># all cards in the hand can be played</span>
</span><span id="SchnapsenMoveValidator-1268"><a href="#SchnapsenMoveValidator-1268"><span class="linenos">1268</span></a>        <span class="n">cards_in_hand</span> <span class="o">=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span>
</span><span id="SchnapsenMoveValidator-1269"><a href="#SchnapsenMoveValidator-1269"><span class="linenos">1269</span></a>        <span class="n">valid_moves</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Move</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">RegularMove</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">cards_in_hand</span><span class="p">]</span>
</span><span id="SchnapsenMoveValidator-1270"><a href="#SchnapsenMoveValidator-1270"><span class="linenos">1270</span></a>        <span class="c1"># trump exchanges</span>
</span><span id="SchnapsenMoveValidator-1271"><a href="#SchnapsenMoveValidator-1271"><span class="linenos">1271</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">game_state</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
</span><span id="SchnapsenMoveValidator-1272"><a href="#SchnapsenMoveValidator-1272"><span class="linenos">1272</span></a>            <span class="n">trump_jack</span> <span class="o">=</span> <span class="n">Card</span><span class="o">.</span><span class="n">get_card</span><span class="p">(</span><span class="n">Rank</span><span class="o">.</span><span class="n">JACK</span><span class="p">,</span> <span class="n">game_state</span><span class="o">.</span><span class="n">trump_suit</span><span class="p">)</span>
</span><span id="SchnapsenMoveValidator-1273"><a href="#SchnapsenMoveValidator-1273"><span class="linenos">1273</span></a>            <span class="k">if</span> <span class="n">trump_jack</span> <span class="ow">in</span> <span class="n">cards_in_hand</span><span class="p">:</span>
</span><span id="SchnapsenMoveValidator-1274"><a href="#SchnapsenMoveValidator-1274"><span class="linenos">1274</span></a>                <span class="n">valid_moves</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Trump_Exchange</span><span class="p">(</span><span class="n">trump_jack</span><span class="p">))</span>
</span><span id="SchnapsenMoveValidator-1275"><a href="#SchnapsenMoveValidator-1275"><span class="linenos">1275</span></a>        <span class="c1"># mariages</span>
</span><span id="SchnapsenMoveValidator-1276"><a href="#SchnapsenMoveValidator-1276"><span class="linenos">1276</span></a>        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">cards_in_hand</span><span class="o">.</span><span class="n">filter_rank</span><span class="p">(</span><span class="n">Rank</span><span class="o">.</span><span class="n">QUEEN</span><span class="p">):</span>
</span><span id="SchnapsenMoveValidator-1277"><a href="#SchnapsenMoveValidator-1277"><span class="linenos">1277</span></a>            <span class="n">king_card</span> <span class="o">=</span> <span class="n">Card</span><span class="o">.</span><span class="n">get_card</span><span class="p">(</span><span class="n">Rank</span><span class="o">.</span><span class="n">KING</span><span class="p">,</span> <span class="n">card</span><span class="o">.</span><span class="n">suit</span><span class="p">)</span>
</span><span id="SchnapsenMoveValidator-1278"><a href="#SchnapsenMoveValidator-1278"><span class="linenos">1278</span></a>            <span class="k">if</span> <span class="n">king_card</span> <span class="ow">in</span> <span class="n">cards_in_hand</span><span class="p">:</span>
</span><span id="SchnapsenMoveValidator-1279"><a href="#SchnapsenMoveValidator-1279"><span class="linenos">1279</span></a>                <span class="n">valid_moves</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Marriage</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="n">king_card</span><span class="p">))</span>
</span><span id="SchnapsenMoveValidator-1280"><a href="#SchnapsenMoveValidator-1280"><span class="linenos">1280</span></a>        <span class="k">return</span> <span class="n">valid_moves</span>
</span><span id="SchnapsenMoveValidator-1281"><a href="#SchnapsenMoveValidator-1281"><span class="linenos">1281</span></a>
</span><span id="SchnapsenMoveValidator-1282"><a href="#SchnapsenMoveValidator-1282"><span class="linenos">1282</span></a>    <span class="k">def</span> <span class="nf">is_legal_leader_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">move</span><span class="p">:</span> <span class="n">Move</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="SchnapsenMoveValidator-1283"><a href="#SchnapsenMoveValidator-1283"><span class="linenos">1283</span></a>        <span class="n">cards_in_hand</span> <span class="o">=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span>
</span><span id="SchnapsenMoveValidator-1284"><a href="#SchnapsenMoveValidator-1284"><span class="linenos">1284</span></a>        <span class="k">if</span> <span class="n">move</span><span class="o">.</span><span class="n">is_marriage</span><span class="p">():</span>
</span><span id="SchnapsenMoveValidator-1285"><a href="#SchnapsenMoveValidator-1285"><span class="linenos">1285</span></a>            <span class="n">marriage_move</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Marriage</span><span class="p">,</span> <span class="n">move</span><span class="p">)</span>
</span><span id="SchnapsenMoveValidator-1286"><a href="#SchnapsenMoveValidator-1286"><span class="linenos">1286</span></a>            <span class="c1"># we do not have to check whether they are the same suit because of the implementation of Marriage</span>
</span><span id="SchnapsenMoveValidator-1287"><a href="#SchnapsenMoveValidator-1287"><span class="linenos">1287</span></a>            <span class="k">return</span> <span class="n">marriage_move</span><span class="o">.</span><span class="n">queen_card</span> <span class="ow">in</span> <span class="n">cards_in_hand</span> <span class="ow">and</span> <span class="n">marriage_move</span><span class="o">.</span><span class="n">king_card</span> <span class="ow">in</span> <span class="n">cards_in_hand</span>
</span><span id="SchnapsenMoveValidator-1288"><a href="#SchnapsenMoveValidator-1288"><span class="linenos">1288</span></a>        <span class="k">if</span> <span class="n">move</span><span class="o">.</span><span class="n">is_trump_exchange</span><span class="p">():</span>
</span><span id="SchnapsenMoveValidator-1289"><a href="#SchnapsenMoveValidator-1289"><span class="linenos">1289</span></a>            <span class="k">if</span> <span class="n">game_state</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
</span><span id="SchnapsenMoveValidator-1290"><a href="#SchnapsenMoveValidator-1290"><span class="linenos">1290</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="SchnapsenMoveValidator-1291"><a href="#SchnapsenMoveValidator-1291"><span class="linenos">1291</span></a>            <span class="n">trump_move</span><span class="p">:</span> <span class="n">Trump_Exchange</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Trump_Exchange</span><span class="p">,</span> <span class="n">move</span><span class="p">)</span>
</span><span id="SchnapsenMoveValidator-1292"><a href="#SchnapsenMoveValidator-1292"><span class="linenos">1292</span></a>            <span class="k">return</span> <span class="n">trump_move</span><span class="o">.</span><span class="n">jack</span> <span class="ow">in</span> <span class="n">cards_in_hand</span>
</span><span id="SchnapsenMoveValidator-1293"><a href="#SchnapsenMoveValidator-1293"><span class="linenos">1293</span></a>        <span class="c1"># it has to be a regular move</span>
</span><span id="SchnapsenMoveValidator-1294"><a href="#SchnapsenMoveValidator-1294"><span class="linenos">1294</span></a>        <span class="n">regular_move</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">RegularMove</span><span class="p">,</span> <span class="n">move</span><span class="p">)</span>
</span><span id="SchnapsenMoveValidator-1295"><a href="#SchnapsenMoveValidator-1295"><span class="linenos">1295</span></a>        <span class="k">return</span> <span class="n">regular_move</span><span class="o">.</span><span class="n">card</span> <span class="ow">in</span> <span class="n">cards_in_hand</span>
</span><span id="SchnapsenMoveValidator-1296"><a href="#SchnapsenMoveValidator-1296"><span class="linenos">1296</span></a>
</span><span id="SchnapsenMoveValidator-1297"><a href="#SchnapsenMoveValidator-1297"><span class="linenos">1297</span></a>    <span class="k">def</span> <span class="nf">get_legal_follower_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">:</span> <span class="n">Move</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="SchnapsenMoveValidator-1298"><a href="#SchnapsenMoveValidator-1298"><span class="linenos">1298</span></a>        <span class="n">hand</span> <span class="o">=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">hand</span>
</span><span id="SchnapsenMoveValidator-1299"><a href="#SchnapsenMoveValidator-1299"><span class="linenos">1299</span></a>        <span class="k">if</span> <span class="n">partial_trick</span><span class="o">.</span><span class="n">is_marriage</span><span class="p">():</span>
</span><span id="SchnapsenMoveValidator-1300"><a href="#SchnapsenMoveValidator-1300"><span class="linenos">1300</span></a>            <span class="n">leader_card</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Marriage</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">)</span><span class="o">.</span><span class="n">queen_card</span>
</span><span id="SchnapsenMoveValidator-1301"><a href="#SchnapsenMoveValidator-1301"><span class="linenos">1301</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="SchnapsenMoveValidator-1302"><a href="#SchnapsenMoveValidator-1302"><span class="linenos">1302</span></a>            <span class="n">leader_card</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">RegularMove</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">)</span><span class="o">.</span><span class="n">card</span>
</span><span id="SchnapsenMoveValidator-1303"><a href="#SchnapsenMoveValidator-1303"><span class="linenos">1303</span></a>        <span class="k">if</span> <span class="n">game_state</span><span class="o">.</span><span class="n">game_phase</span><span class="p">()</span> <span class="ow">is</span> <span class="n">GamePhase</span><span class="o">.</span><span class="n">ONE</span><span class="p">:</span>
</span><span id="SchnapsenMoveValidator-1304"><a href="#SchnapsenMoveValidator-1304"><span class="linenos">1304</span></a>            <span class="c1"># no need to follow, any card in the hand is a legal move</span>
</span><span id="SchnapsenMoveValidator-1305"><a href="#SchnapsenMoveValidator-1305"><span class="linenos">1305</span></a>            <span class="k">return</span> <span class="n">RegularMove</span><span class="o">.</span><span class="n">from_cards</span><span class="p">(</span><span class="n">hand</span><span class="o">.</span><span class="n">get_cards</span><span class="p">())</span>
</span><span id="SchnapsenMoveValidator-1306"><a href="#SchnapsenMoveValidator-1306"><span class="linenos">1306</span></a>        <span class="c1"># information from https://www.pagat.com/marriage/schnaps.html</span>
</span><span id="SchnapsenMoveValidator-1307"><a href="#SchnapsenMoveValidator-1307"><span class="linenos">1307</span></a>        <span class="c1"># ## original formulation ##</span>
</span><span id="SchnapsenMoveValidator-1308"><a href="#SchnapsenMoveValidator-1308"><span class="linenos">1308</span></a>        <span class="c1"># if your opponent leads a non-trump:</span>
</span><span id="SchnapsenMoveValidator-1309"><a href="#SchnapsenMoveValidator-1309"><span class="linenos">1309</span></a>        <span class="c1">#     you must play a higher card of the same suit if you can;</span>
</span><span id="SchnapsenMoveValidator-1310"><a href="#SchnapsenMoveValidator-1310"><span class="linenos">1310</span></a>        <span class="c1">#     failing this you must play a lower card of the same suit;</span>
</span><span id="SchnapsenMoveValidator-1311"><a href="#SchnapsenMoveValidator-1311"><span class="linenos">1311</span></a>        <span class="c1">#     if you have no card of the suit that was led you must play a trump;</span>
</span><span id="SchnapsenMoveValidator-1312"><a href="#SchnapsenMoveValidator-1312"><span class="linenos">1312</span></a>        <span class="c1">#     if you have no trumps either you may play anything.</span>
</span><span id="SchnapsenMoveValidator-1313"><a href="#SchnapsenMoveValidator-1313"><span class="linenos">1313</span></a>        <span class="c1"># If your opponent leads a trump:</span>
</span><span id="SchnapsenMoveValidator-1314"><a href="#SchnapsenMoveValidator-1314"><span class="linenos">1314</span></a>        <span class="c1">#     you must play a higher trump if possible;</span>
</span><span id="SchnapsenMoveValidator-1315"><a href="#SchnapsenMoveValidator-1315"><span class="linenos">1315</span></a>        <span class="c1">#     if you have no higher trump you must play a lower trump;</span>
</span><span id="SchnapsenMoveValidator-1316"><a href="#SchnapsenMoveValidator-1316"><span class="linenos">1316</span></a>        <span class="c1">#     if you have no trumps at all you may play anything.</span>
</span><span id="SchnapsenMoveValidator-1317"><a href="#SchnapsenMoveValidator-1317"><span class="linenos">1317</span></a>        <span class="c1"># ## implemented version, realizing that the rules for trump are overlapping with the normal case ##</span>
</span><span id="SchnapsenMoveValidator-1318"><a href="#SchnapsenMoveValidator-1318"><span class="linenos">1318</span></a>        <span class="c1"># you must play a higher card of the same suit if you can</span>
</span><span id="SchnapsenMoveValidator-1319"><a href="#SchnapsenMoveValidator-1319"><span class="linenos">1319</span></a>        <span class="c1"># failing this, you must play a lower card of the same suit;</span>
</span><span id="SchnapsenMoveValidator-1320"><a href="#SchnapsenMoveValidator-1320"><span class="linenos">1320</span></a>        <span class="c1"># --new--&gt; failing this, if the opponen did not play a trump, you must play a trump</span>
</span><span id="SchnapsenMoveValidator-1321"><a href="#SchnapsenMoveValidator-1321"><span class="linenos">1321</span></a>        <span class="c1"># failing this, you can play anything</span>
</span><span id="SchnapsenMoveValidator-1322"><a href="#SchnapsenMoveValidator-1322"><span class="linenos">1322</span></a>        <span class="n">leader_card_score</span> <span class="o">=</span> <span class="n">game_engine</span><span class="o">.</span><span class="n">trick_scorer</span><span class="o">.</span><span class="n">rank_to_points</span><span class="p">(</span><span class="n">leader_card</span><span class="o">.</span><span class="n">rank</span><span class="p">)</span>
</span><span id="SchnapsenMoveValidator-1323"><a href="#SchnapsenMoveValidator-1323"><span class="linenos">1323</span></a>        <span class="c1"># you must play a higher card of the same suit if you can;</span>
</span><span id="SchnapsenMoveValidator-1324"><a href="#SchnapsenMoveValidator-1324"><span class="linenos">1324</span></a>        <span class="n">same_suit_cards</span> <span class="o">=</span> <span class="n">hand</span><span class="o">.</span><span class="n">filter_suit</span><span class="p">(</span><span class="n">leader_card</span><span class="o">.</span><span class="n">suit</span><span class="p">)</span>
</span><span id="SchnapsenMoveValidator-1325"><a href="#SchnapsenMoveValidator-1325"><span class="linenos">1325</span></a>        <span class="k">if</span> <span class="n">same_suit_cards</span><span class="p">:</span>
</span><span id="SchnapsenMoveValidator-1326"><a href="#SchnapsenMoveValidator-1326"><span class="linenos">1326</span></a>            <span class="n">higher_same_suit</span><span class="p">,</span> <span class="n">lower_same_suit</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
</span><span id="SchnapsenMoveValidator-1327"><a href="#SchnapsenMoveValidator-1327"><span class="linenos">1327</span></a>            <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">same_suit_cards</span><span class="p">:</span>
</span><span id="SchnapsenMoveValidator-1328"><a href="#SchnapsenMoveValidator-1328"><span class="linenos">1328</span></a>                <span class="c1"># TODO this is slightly ambigousm should this be &gt;= ??</span>
</span><span id="SchnapsenMoveValidator-1329"><a href="#SchnapsenMoveValidator-1329"><span class="linenos">1329</span></a>                <span class="n">higher_same_suit</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="k">if</span> <span class="n">game_engine</span><span class="o">.</span><span class="n">trick_scorer</span><span class="o">.</span><span class="n">rank_to_points</span><span class="p">(</span><span class="n">card</span><span class="o">.</span><span class="n">rank</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">leader_card_score</span> <span class="k">else</span> <span class="n">lower_same_suit</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
</span><span id="SchnapsenMoveValidator-1330"><a href="#SchnapsenMoveValidator-1330"><span class="linenos">1330</span></a>            <span class="k">if</span> <span class="n">higher_same_suit</span><span class="p">:</span>
</span><span id="SchnapsenMoveValidator-1331"><a href="#SchnapsenMoveValidator-1331"><span class="linenos">1331</span></a>                <span class="k">return</span> <span class="n">RegularMove</span><span class="o">.</span><span class="n">from_cards</span><span class="p">(</span><span class="n">higher_same_suit</span><span class="p">)</span>
</span><span id="SchnapsenMoveValidator-1332"><a href="#SchnapsenMoveValidator-1332"><span class="linenos">1332</span></a>        <span class="c1"># failing this, you must play a lower card of the same suit;</span>
</span><span id="SchnapsenMoveValidator-1333"><a href="#SchnapsenMoveValidator-1333"><span class="linenos">1333</span></a>            <span class="k">elif</span> <span class="n">lower_same_suit</span><span class="p">:</span>
</span><span id="SchnapsenMoveValidator-1334"><a href="#SchnapsenMoveValidator-1334"><span class="linenos">1334</span></a>                <span class="k">return</span> <span class="n">RegularMove</span><span class="o">.</span><span class="n">from_cards</span><span class="p">(</span><span class="n">lower_same_suit</span><span class="p">)</span>
</span><span id="SchnapsenMoveValidator-1335"><a href="#SchnapsenMoveValidator-1335"><span class="linenos">1335</span></a>            <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;Somethign is wrong in the logic here. There should be cards, but they are neither placed in the low, nor higher list&quot;</span><span class="p">)</span>
</span><span id="SchnapsenMoveValidator-1336"><a href="#SchnapsenMoveValidator-1336"><span class="linenos">1336</span></a>        <span class="c1"># failing this, if the opponen did not play a trump, you must play a trump</span>
</span><span id="SchnapsenMoveValidator-1337"><a href="#SchnapsenMoveValidator-1337"><span class="linenos">1337</span></a>        <span class="n">trump_cards</span> <span class="o">=</span> <span class="n">hand</span><span class="o">.</span><span class="n">filter_suit</span><span class="p">(</span><span class="n">game_state</span><span class="o">.</span><span class="n">trump_suit</span><span class="p">)</span>
</span><span id="SchnapsenMoveValidator-1338"><a href="#SchnapsenMoveValidator-1338"><span class="linenos">1338</span></a>        <span class="k">if</span> <span class="n">leader_card</span><span class="o">.</span><span class="n">suit</span> <span class="o">!=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">trump_suit</span> <span class="ow">and</span> <span class="n">trump_cards</span><span class="p">:</span>
</span><span id="SchnapsenMoveValidator-1339"><a href="#SchnapsenMoveValidator-1339"><span class="linenos">1339</span></a>            <span class="k">return</span> <span class="n">RegularMove</span><span class="o">.</span><span class="n">from_cards</span><span class="p">(</span><span class="n">trump_cards</span><span class="p">)</span>
</span><span id="SchnapsenMoveValidator-1340"><a href="#SchnapsenMoveValidator-1340"><span class="linenos">1340</span></a>        <span class="c1"># failing this, you can play anything</span>
</span><span id="SchnapsenMoveValidator-1341"><a href="#SchnapsenMoveValidator-1341"><span class="linenos">1341</span></a>        <span class="k">return</span> <span class="n">RegularMove</span><span class="o">.</span><span class="n">from_cards</span><span class="p">(</span><span class="n">hand</span><span class="o">.</span><span class="n">get_cards</span><span class="p">())</span>
</span></pre></div>


            <div class="docstring"><p>An object of this class can be used to check whether a move is valid.</p>
</div>


                            <div id="SchnapsenMoveValidator.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">SchnapsenMoveValidator</span><span class="signature pdoc-code condensed">()</span>

        
    </div>
    <a class="headerlink" href="#SchnapsenMoveValidator.__init__"></a>
    
    

                            </div>
                            <div id="SchnapsenMoveValidator.get_legal_leader_moves" class="classattr">
                                        <input id="SchnapsenMoveValidator.get_legal_leader_moves-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_legal_leader_moves</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">game_engine</span><span class="p">:</span> <span class="n"><a href="#GamePlayEngine">schnapsen.game.GamePlayEngine</a></span>,</span><span class="param">	<span class="n">game_state</span><span class="p">:</span> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span></span><span class="return-annotation">) -> <span class="n">Iterable</span><span class="p">[</span><span class="n"><a href="#Move">schnapsen.game.Move</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="SchnapsenMoveValidator.get_legal_leader_moves-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SchnapsenMoveValidator.get_legal_leader_moves"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SchnapsenMoveValidator.get_legal_leader_moves-1266"><a href="#SchnapsenMoveValidator.get_legal_leader_moves-1266"><span class="linenos">1266</span></a>    <span class="k">def</span> <span class="nf">get_legal_leader_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="SchnapsenMoveValidator.get_legal_leader_moves-1267"><a href="#SchnapsenMoveValidator.get_legal_leader_moves-1267"><span class="linenos">1267</span></a>        <span class="c1"># all cards in the hand can be played</span>
</span><span id="SchnapsenMoveValidator.get_legal_leader_moves-1268"><a href="#SchnapsenMoveValidator.get_legal_leader_moves-1268"><span class="linenos">1268</span></a>        <span class="n">cards_in_hand</span> <span class="o">=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span>
</span><span id="SchnapsenMoveValidator.get_legal_leader_moves-1269"><a href="#SchnapsenMoveValidator.get_legal_leader_moves-1269"><span class="linenos">1269</span></a>        <span class="n">valid_moves</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Move</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">RegularMove</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">cards_in_hand</span><span class="p">]</span>
</span><span id="SchnapsenMoveValidator.get_legal_leader_moves-1270"><a href="#SchnapsenMoveValidator.get_legal_leader_moves-1270"><span class="linenos">1270</span></a>        <span class="c1"># trump exchanges</span>
</span><span id="SchnapsenMoveValidator.get_legal_leader_moves-1271"><a href="#SchnapsenMoveValidator.get_legal_leader_moves-1271"><span class="linenos">1271</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">game_state</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
</span><span id="SchnapsenMoveValidator.get_legal_leader_moves-1272"><a href="#SchnapsenMoveValidator.get_legal_leader_moves-1272"><span class="linenos">1272</span></a>            <span class="n">trump_jack</span> <span class="o">=</span> <span class="n">Card</span><span class="o">.</span><span class="n">get_card</span><span class="p">(</span><span class="n">Rank</span><span class="o">.</span><span class="n">JACK</span><span class="p">,</span> <span class="n">game_state</span><span class="o">.</span><span class="n">trump_suit</span><span class="p">)</span>
</span><span id="SchnapsenMoveValidator.get_legal_leader_moves-1273"><a href="#SchnapsenMoveValidator.get_legal_leader_moves-1273"><span class="linenos">1273</span></a>            <span class="k">if</span> <span class="n">trump_jack</span> <span class="ow">in</span> <span class="n">cards_in_hand</span><span class="p">:</span>
</span><span id="SchnapsenMoveValidator.get_legal_leader_moves-1274"><a href="#SchnapsenMoveValidator.get_legal_leader_moves-1274"><span class="linenos">1274</span></a>                <span class="n">valid_moves</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Trump_Exchange</span><span class="p">(</span><span class="n">trump_jack</span><span class="p">))</span>
</span><span id="SchnapsenMoveValidator.get_legal_leader_moves-1275"><a href="#SchnapsenMoveValidator.get_legal_leader_moves-1275"><span class="linenos">1275</span></a>        <span class="c1"># mariages</span>
</span><span id="SchnapsenMoveValidator.get_legal_leader_moves-1276"><a href="#SchnapsenMoveValidator.get_legal_leader_moves-1276"><span class="linenos">1276</span></a>        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">cards_in_hand</span><span class="o">.</span><span class="n">filter_rank</span><span class="p">(</span><span class="n">Rank</span><span class="o">.</span><span class="n">QUEEN</span><span class="p">):</span>
</span><span id="SchnapsenMoveValidator.get_legal_leader_moves-1277"><a href="#SchnapsenMoveValidator.get_legal_leader_moves-1277"><span class="linenos">1277</span></a>            <span class="n">king_card</span> <span class="o">=</span> <span class="n">Card</span><span class="o">.</span><span class="n">get_card</span><span class="p">(</span><span class="n">Rank</span><span class="o">.</span><span class="n">KING</span><span class="p">,</span> <span class="n">card</span><span class="o">.</span><span class="n">suit</span><span class="p">)</span>
</span><span id="SchnapsenMoveValidator.get_legal_leader_moves-1278"><a href="#SchnapsenMoveValidator.get_legal_leader_moves-1278"><span class="linenos">1278</span></a>            <span class="k">if</span> <span class="n">king_card</span> <span class="ow">in</span> <span class="n">cards_in_hand</span><span class="p">:</span>
</span><span id="SchnapsenMoveValidator.get_legal_leader_moves-1279"><a href="#SchnapsenMoveValidator.get_legal_leader_moves-1279"><span class="linenos">1279</span></a>                <span class="n">valid_moves</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Marriage</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="n">king_card</span><span class="p">))</span>
</span><span id="SchnapsenMoveValidator.get_legal_leader_moves-1280"><a href="#SchnapsenMoveValidator.get_legal_leader_moves-1280"><span class="linenos">1280</span></a>        <span class="k">return</span> <span class="n">valid_moves</span>
</span></pre></div>


            <div class="docstring"><p>Get all legal moves for the current leader of the game.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>game_engine</strong>:  The engine which is playing the game</li>
<li><strong>game_state</strong>:  The current state of the game</li>
</ul>

<p>:returns: An iterable containing the current legal moves.</p>
</div>


                            </div>
                            <div id="SchnapsenMoveValidator.is_legal_leader_move" class="classattr">
                                        <input id="SchnapsenMoveValidator.is_legal_leader_move-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">is_legal_leader_move</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">game_engine</span><span class="p">:</span> <span class="n"><a href="#GamePlayEngine">schnapsen.game.GamePlayEngine</a></span>,</span><span class="param">	<span class="n">game_state</span><span class="p">:</span> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span>,</span><span class="param">	<span class="n">move</span><span class="p">:</span> <span class="n"><a href="#Move">schnapsen.game.Move</a></span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="SchnapsenMoveValidator.is_legal_leader_move-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SchnapsenMoveValidator.is_legal_leader_move"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SchnapsenMoveValidator.is_legal_leader_move-1282"><a href="#SchnapsenMoveValidator.is_legal_leader_move-1282"><span class="linenos">1282</span></a>    <span class="k">def</span> <span class="nf">is_legal_leader_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">move</span><span class="p">:</span> <span class="n">Move</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="SchnapsenMoveValidator.is_legal_leader_move-1283"><a href="#SchnapsenMoveValidator.is_legal_leader_move-1283"><span class="linenos">1283</span></a>        <span class="n">cards_in_hand</span> <span class="o">=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">hand</span>
</span><span id="SchnapsenMoveValidator.is_legal_leader_move-1284"><a href="#SchnapsenMoveValidator.is_legal_leader_move-1284"><span class="linenos">1284</span></a>        <span class="k">if</span> <span class="n">move</span><span class="o">.</span><span class="n">is_marriage</span><span class="p">():</span>
</span><span id="SchnapsenMoveValidator.is_legal_leader_move-1285"><a href="#SchnapsenMoveValidator.is_legal_leader_move-1285"><span class="linenos">1285</span></a>            <span class="n">marriage_move</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Marriage</span><span class="p">,</span> <span class="n">move</span><span class="p">)</span>
</span><span id="SchnapsenMoveValidator.is_legal_leader_move-1286"><a href="#SchnapsenMoveValidator.is_legal_leader_move-1286"><span class="linenos">1286</span></a>            <span class="c1"># we do not have to check whether they are the same suit because of the implementation of Marriage</span>
</span><span id="SchnapsenMoveValidator.is_legal_leader_move-1287"><a href="#SchnapsenMoveValidator.is_legal_leader_move-1287"><span class="linenos">1287</span></a>            <span class="k">return</span> <span class="n">marriage_move</span><span class="o">.</span><span class="n">queen_card</span> <span class="ow">in</span> <span class="n">cards_in_hand</span> <span class="ow">and</span> <span class="n">marriage_move</span><span class="o">.</span><span class="n">king_card</span> <span class="ow">in</span> <span class="n">cards_in_hand</span>
</span><span id="SchnapsenMoveValidator.is_legal_leader_move-1288"><a href="#SchnapsenMoveValidator.is_legal_leader_move-1288"><span class="linenos">1288</span></a>        <span class="k">if</span> <span class="n">move</span><span class="o">.</span><span class="n">is_trump_exchange</span><span class="p">():</span>
</span><span id="SchnapsenMoveValidator.is_legal_leader_move-1289"><a href="#SchnapsenMoveValidator.is_legal_leader_move-1289"><span class="linenos">1289</span></a>            <span class="k">if</span> <span class="n">game_state</span><span class="o">.</span><span class="n">talon</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
</span><span id="SchnapsenMoveValidator.is_legal_leader_move-1290"><a href="#SchnapsenMoveValidator.is_legal_leader_move-1290"><span class="linenos">1290</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="SchnapsenMoveValidator.is_legal_leader_move-1291"><a href="#SchnapsenMoveValidator.is_legal_leader_move-1291"><span class="linenos">1291</span></a>            <span class="n">trump_move</span><span class="p">:</span> <span class="n">Trump_Exchange</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Trump_Exchange</span><span class="p">,</span> <span class="n">move</span><span class="p">)</span>
</span><span id="SchnapsenMoveValidator.is_legal_leader_move-1292"><a href="#SchnapsenMoveValidator.is_legal_leader_move-1292"><span class="linenos">1292</span></a>            <span class="k">return</span> <span class="n">trump_move</span><span class="o">.</span><span class="n">jack</span> <span class="ow">in</span> <span class="n">cards_in_hand</span>
</span><span id="SchnapsenMoveValidator.is_legal_leader_move-1293"><a href="#SchnapsenMoveValidator.is_legal_leader_move-1293"><span class="linenos">1293</span></a>        <span class="c1"># it has to be a regular move</span>
</span><span id="SchnapsenMoveValidator.is_legal_leader_move-1294"><a href="#SchnapsenMoveValidator.is_legal_leader_move-1294"><span class="linenos">1294</span></a>        <span class="n">regular_move</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">RegularMove</span><span class="p">,</span> <span class="n">move</span><span class="p">)</span>
</span><span id="SchnapsenMoveValidator.is_legal_leader_move-1295"><a href="#SchnapsenMoveValidator.is_legal_leader_move-1295"><span class="linenos">1295</span></a>        <span class="k">return</span> <span class="n">regular_move</span><span class="o">.</span><span class="n">card</span> <span class="ow">in</span> <span class="n">cards_in_hand</span>
</span></pre></div>


            <div class="docstring"><p>Whether the provided move is legal for the leader to play.
The basic implementation checks whether the move is in the legal leader moves.
Derived classes might implement this more performantly.</p>
</div>


                            </div>
                            <div id="SchnapsenMoveValidator.get_legal_follower_moves" class="classattr">
                                        <input id="SchnapsenMoveValidator.get_legal_follower_moves-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_legal_follower_moves</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">game_engine</span><span class="p">:</span> <span class="n"><a href="#GamePlayEngine">schnapsen.game.GamePlayEngine</a></span>,</span><span class="param">	<span class="n">game_state</span><span class="p">:</span> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span>,</span><span class="param">	<span class="n">partial_trick</span><span class="p">:</span> <span class="n"><a href="#Move">schnapsen.game.Move</a></span></span><span class="return-annotation">) -> <span class="n">Iterable</span><span class="p">[</span><span class="n"><a href="#Move">schnapsen.game.Move</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="SchnapsenMoveValidator.get_legal_follower_moves-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SchnapsenMoveValidator.get_legal_follower_moves"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1297"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1297"><span class="linenos">1297</span></a>    <span class="k">def</span> <span class="nf">get_legal_follower_moves</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_engine</span><span class="p">:</span> <span class="s1">&#39;GamePlayEngine&#39;</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">:</span> <span class="n">Move</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Move</span><span class="p">]:</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1298"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1298"><span class="linenos">1298</span></a>        <span class="n">hand</span> <span class="o">=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">hand</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1299"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1299"><span class="linenos">1299</span></a>        <span class="k">if</span> <span class="n">partial_trick</span><span class="o">.</span><span class="n">is_marriage</span><span class="p">():</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1300"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1300"><span class="linenos">1300</span></a>            <span class="n">leader_card</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Marriage</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">)</span><span class="o">.</span><span class="n">queen_card</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1301"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1301"><span class="linenos">1301</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1302"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1302"><span class="linenos">1302</span></a>            <span class="n">leader_card</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">RegularMove</span><span class="p">,</span> <span class="n">partial_trick</span><span class="p">)</span><span class="o">.</span><span class="n">card</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1303"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1303"><span class="linenos">1303</span></a>        <span class="k">if</span> <span class="n">game_state</span><span class="o">.</span><span class="n">game_phase</span><span class="p">()</span> <span class="ow">is</span> <span class="n">GamePhase</span><span class="o">.</span><span class="n">ONE</span><span class="p">:</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1304"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1304"><span class="linenos">1304</span></a>            <span class="c1"># no need to follow, any card in the hand is a legal move</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1305"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1305"><span class="linenos">1305</span></a>            <span class="k">return</span> <span class="n">RegularMove</span><span class="o">.</span><span class="n">from_cards</span><span class="p">(</span><span class="n">hand</span><span class="o">.</span><span class="n">get_cards</span><span class="p">())</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1306"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1306"><span class="linenos">1306</span></a>        <span class="c1"># information from https://www.pagat.com/marriage/schnaps.html</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1307"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1307"><span class="linenos">1307</span></a>        <span class="c1"># ## original formulation ##</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1308"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1308"><span class="linenos">1308</span></a>        <span class="c1"># if your opponent leads a non-trump:</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1309"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1309"><span class="linenos">1309</span></a>        <span class="c1">#     you must play a higher card of the same suit if you can;</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1310"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1310"><span class="linenos">1310</span></a>        <span class="c1">#     failing this you must play a lower card of the same suit;</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1311"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1311"><span class="linenos">1311</span></a>        <span class="c1">#     if you have no card of the suit that was led you must play a trump;</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1312"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1312"><span class="linenos">1312</span></a>        <span class="c1">#     if you have no trumps either you may play anything.</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1313"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1313"><span class="linenos">1313</span></a>        <span class="c1"># If your opponent leads a trump:</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1314"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1314"><span class="linenos">1314</span></a>        <span class="c1">#     you must play a higher trump if possible;</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1315"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1315"><span class="linenos">1315</span></a>        <span class="c1">#     if you have no higher trump you must play a lower trump;</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1316"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1316"><span class="linenos">1316</span></a>        <span class="c1">#     if you have no trumps at all you may play anything.</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1317"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1317"><span class="linenos">1317</span></a>        <span class="c1"># ## implemented version, realizing that the rules for trump are overlapping with the normal case ##</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1318"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1318"><span class="linenos">1318</span></a>        <span class="c1"># you must play a higher card of the same suit if you can</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1319"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1319"><span class="linenos">1319</span></a>        <span class="c1"># failing this, you must play a lower card of the same suit;</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1320"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1320"><span class="linenos">1320</span></a>        <span class="c1"># --new--&gt; failing this, if the opponen did not play a trump, you must play a trump</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1321"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1321"><span class="linenos">1321</span></a>        <span class="c1"># failing this, you can play anything</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1322"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1322"><span class="linenos">1322</span></a>        <span class="n">leader_card_score</span> <span class="o">=</span> <span class="n">game_engine</span><span class="o">.</span><span class="n">trick_scorer</span><span class="o">.</span><span class="n">rank_to_points</span><span class="p">(</span><span class="n">leader_card</span><span class="o">.</span><span class="n">rank</span><span class="p">)</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1323"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1323"><span class="linenos">1323</span></a>        <span class="c1"># you must play a higher card of the same suit if you can;</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1324"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1324"><span class="linenos">1324</span></a>        <span class="n">same_suit_cards</span> <span class="o">=</span> <span class="n">hand</span><span class="o">.</span><span class="n">filter_suit</span><span class="p">(</span><span class="n">leader_card</span><span class="o">.</span><span class="n">suit</span><span class="p">)</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1325"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1325"><span class="linenos">1325</span></a>        <span class="k">if</span> <span class="n">same_suit_cards</span><span class="p">:</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1326"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1326"><span class="linenos">1326</span></a>            <span class="n">higher_same_suit</span><span class="p">,</span> <span class="n">lower_same_suit</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1327"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1327"><span class="linenos">1327</span></a>            <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">same_suit_cards</span><span class="p">:</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1328"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1328"><span class="linenos">1328</span></a>                <span class="c1"># TODO this is slightly ambigousm should this be &gt;= ??</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1329"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1329"><span class="linenos">1329</span></a>                <span class="n">higher_same_suit</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="k">if</span> <span class="n">game_engine</span><span class="o">.</span><span class="n">trick_scorer</span><span class="o">.</span><span class="n">rank_to_points</span><span class="p">(</span><span class="n">card</span><span class="o">.</span><span class="n">rank</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">leader_card_score</span> <span class="k">else</span> <span class="n">lower_same_suit</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1330"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1330"><span class="linenos">1330</span></a>            <span class="k">if</span> <span class="n">higher_same_suit</span><span class="p">:</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1331"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1331"><span class="linenos">1331</span></a>                <span class="k">return</span> <span class="n">RegularMove</span><span class="o">.</span><span class="n">from_cards</span><span class="p">(</span><span class="n">higher_same_suit</span><span class="p">)</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1332"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1332"><span class="linenos">1332</span></a>        <span class="c1"># failing this, you must play a lower card of the same suit;</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1333"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1333"><span class="linenos">1333</span></a>            <span class="k">elif</span> <span class="n">lower_same_suit</span><span class="p">:</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1334"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1334"><span class="linenos">1334</span></a>                <span class="k">return</span> <span class="n">RegularMove</span><span class="o">.</span><span class="n">from_cards</span><span class="p">(</span><span class="n">lower_same_suit</span><span class="p">)</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1335"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1335"><span class="linenos">1335</span></a>            <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;Somethign is wrong in the logic here. There should be cards, but they are neither placed in the low, nor higher list&quot;</span><span class="p">)</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1336"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1336"><span class="linenos">1336</span></a>        <span class="c1"># failing this, if the opponen did not play a trump, you must play a trump</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1337"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1337"><span class="linenos">1337</span></a>        <span class="n">trump_cards</span> <span class="o">=</span> <span class="n">hand</span><span class="o">.</span><span class="n">filter_suit</span><span class="p">(</span><span class="n">game_state</span><span class="o">.</span><span class="n">trump_suit</span><span class="p">)</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1338"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1338"><span class="linenos">1338</span></a>        <span class="k">if</span> <span class="n">leader_card</span><span class="o">.</span><span class="n">suit</span> <span class="o">!=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">trump_suit</span> <span class="ow">and</span> <span class="n">trump_cards</span><span class="p">:</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1339"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1339"><span class="linenos">1339</span></a>            <span class="k">return</span> <span class="n">RegularMove</span><span class="o">.</span><span class="n">from_cards</span><span class="p">(</span><span class="n">trump_cards</span><span class="p">)</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1340"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1340"><span class="linenos">1340</span></a>        <span class="c1"># failing this, you can play anything</span>
</span><span id="SchnapsenMoveValidator.get_legal_follower_moves-1341"><a href="#SchnapsenMoveValidator.get_legal_follower_moves-1341"><span class="linenos">1341</span></a>        <span class="k">return</span> <span class="n">RegularMove</span><span class="o">.</span><span class="n">from_cards</span><span class="p">(</span><span class="n">hand</span><span class="o">.</span><span class="n">get_cards</span><span class="p">())</span>
</span></pre></div>


            <div class="docstring"><p>Get all legal moves for the current follower of the game.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>game_engine</strong>:  The engine which is playing the game</li>
<li><strong>game_state</strong>:  The current state of the game</li>
<li><strong>partial_trick</strong>:  The move played by the leader of the trick.</li>
</ul>

<p>:returns: An iterable containing the current legal moves.</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#MoveValidator">MoveValidator</a></dt>
                                <dd id="SchnapsenMoveValidator.is_legal_follower_move" class="function"><a href="#MoveValidator.is_legal_follower_move">is_legal_follower_move</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="TrickScorer">
                            <input id="TrickScorer-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">TrickScorer</span><wbr>(<span class="base">abc.ABC</span>):

                <label class="view-source-button" for="TrickScorer-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TrickScorer"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TrickScorer-1344"><a href="#TrickScorer-1344"><span class="linenos">1344</span></a><span class="k">class</span> <span class="nc">TrickScorer</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="TrickScorer-1345"><a href="#TrickScorer-1345"><span class="linenos">1345</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="TrickScorer-1346"><a href="#TrickScorer-1346"><span class="linenos">1346</span></a>    <span class="k">def</span> <span class="nf">score</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">trick</span><span class="p">:</span> <span class="n">RegularTrick</span><span class="p">,</span> <span class="n">leader</span><span class="p">:</span> <span class="n">BotState</span><span class="p">,</span> <span class="n">follower</span><span class="p">:</span> <span class="n">BotState</span><span class="p">,</span> <span class="n">trump</span><span class="p">:</span> <span class="n">Suit</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">BotState</span><span class="p">,</span> <span class="n">BotState</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
</span><span id="TrickScorer-1347"><a href="#TrickScorer-1347"><span class="linenos">1347</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TrickScorer-1348"><a href="#TrickScorer-1348"><span class="linenos">1348</span></a><span class="sd">        Score the trick for the given leader and follower. The returned bots are the same bots provided (not copies) and have the score of the trick applied.</span>
</span><span id="TrickScorer-1349"><a href="#TrickScorer-1349"><span class="linenos">1349</span></a><span class="sd">        They are returned in order (new_leader, new_follower). If appropriate, also pending points have been applied.</span>
</span><span id="TrickScorer-1350"><a href="#TrickScorer-1350"><span class="linenos">1350</span></a><span class="sd">        The boolean is True if the leading bot remained the same, i.e., the past leader remains the leader</span>
</span><span id="TrickScorer-1351"><a href="#TrickScorer-1351"><span class="linenos">1351</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TrickScorer-1352"><a href="#TrickScorer-1352"><span class="linenos">1352</span></a>
</span><span id="TrickScorer-1353"><a href="#TrickScorer-1353"><span class="linenos">1353</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="TrickScorer-1354"><a href="#TrickScorer-1354"><span class="linenos">1354</span></a>    <span class="k">def</span> <span class="nf">declare_winner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">BotState</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]:</span>
</span><span id="TrickScorer-1355"><a href="#TrickScorer-1355"><span class="linenos">1355</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;return a bot and the number of points if there is a winner of this game already</span>
</span><span id="TrickScorer-1356"><a href="#TrickScorer-1356"><span class="linenos">1356</span></a>
</span><span id="TrickScorer-1357"><a href="#TrickScorer-1357"><span class="linenos">1357</span></a><span class="sd">        :param game_state: The current state of the game</span>
</span><span id="TrickScorer-1358"><a href="#TrickScorer-1358"><span class="linenos">1358</span></a><span class="sd">        :returns: The botstate of the winner and the number of game points, in case there is a winner already. Otherwise None.</span>
</span><span id="TrickScorer-1359"><a href="#TrickScorer-1359"><span class="linenos">1359</span></a>
</span><span id="TrickScorer-1360"><a href="#TrickScorer-1360"><span class="linenos">1360</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TrickScorer-1361"><a href="#TrickScorer-1361"><span class="linenos">1361</span></a>
</span><span id="TrickScorer-1362"><a href="#TrickScorer-1362"><span class="linenos">1362</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="TrickScorer-1363"><a href="#TrickScorer-1363"><span class="linenos">1363</span></a>    <span class="k">def</span> <span class="nf">rank_to_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rank</span><span class="p">:</span> <span class="n">Rank</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="TrickScorer-1364"><a href="#TrickScorer-1364"><span class="linenos">1364</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the point value for a given rank</span>
</span><span id="TrickScorer-1365"><a href="#TrickScorer-1365"><span class="linenos">1365</span></a>
</span><span id="TrickScorer-1366"><a href="#TrickScorer-1366"><span class="linenos">1366</span></a><span class="sd">        :param rank: the rank of a card for which you want to obtain the points</span>
</span><span id="TrickScorer-1367"><a href="#TrickScorer-1367"><span class="linenos">1367</span></a><span class="sd">        :returns: The score for that card</span>
</span><span id="TrickScorer-1368"><a href="#TrickScorer-1368"><span class="linenos">1368</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TrickScorer-1369"><a href="#TrickScorer-1369"><span class="linenos">1369</span></a>
</span><span id="TrickScorer-1370"><a href="#TrickScorer-1370"><span class="linenos">1370</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="TrickScorer-1371"><a href="#TrickScorer-1371"><span class="linenos">1371</span></a>    <span class="k">def</span> <span class="nf">marriage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">move</span><span class="p">:</span> <span class="n">Marriage</span><span class="p">,</span> <span class="n">gamestate</span><span class="p">:</span> <span class="n">GameState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Score&#39;</span><span class="p">:</span>
</span><span id="TrickScorer-1372"><a href="#TrickScorer-1372"><span class="linenos">1372</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the score which the player obtains for the given marriage</span>
</span><span id="TrickScorer-1373"><a href="#TrickScorer-1373"><span class="linenos">1373</span></a>
</span><span id="TrickScorer-1374"><a href="#TrickScorer-1374"><span class="linenos">1374</span></a><span class="sd">        :param move: The marriage for which to get the score</span>
</span><span id="TrickScorer-1375"><a href="#TrickScorer-1375"><span class="linenos">1375</span></a><span class="sd">        :param gamestate: the current state of the game, usually used to get the trump suit</span>
</span><span id="TrickScorer-1376"><a href="#TrickScorer-1376"><span class="linenos">1376</span></a><span class="sd">        :returns: The score for this marriage</span>
</span><span id="TrickScorer-1377"><a href="#TrickScorer-1377"><span class="linenos">1377</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Helper class that provides a standard way to create an ABC using
inheritance.</p>
</div>


                            <div id="TrickScorer.score" class="classattr">
                                        <input id="TrickScorer.score-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">score</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">trick</span><span class="p">:</span> <span class="n"><a href="#RegularTrick">schnapsen.game.RegularTrick</a></span>,</span><span class="param">	<span class="n">leader</span><span class="p">:</span> <span class="n"><a href="#BotState">schnapsen.game.BotState</a></span>,</span><span class="param">	<span class="n">follower</span><span class="p">:</span> <span class="n"><a href="#BotState">schnapsen.game.BotState</a></span>,</span><span class="param">	<span class="n">trump</span><span class="p">:</span> <span class="n"><a href="deck.html#Suit">schnapsen.deck.Suit</a></span></span><span class="return-annotation">) -> <span class="n">Tuple</span><span class="p">[</span><span class="n"><a href="#BotState">schnapsen.game.BotState</a></span><span class="p">,</span> <span class="n"><a href="#BotState">schnapsen.game.BotState</a></span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="TrickScorer.score-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TrickScorer.score"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TrickScorer.score-1345"><a href="#TrickScorer.score-1345"><span class="linenos">1345</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="TrickScorer.score-1346"><a href="#TrickScorer.score-1346"><span class="linenos">1346</span></a>    <span class="k">def</span> <span class="nf">score</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">trick</span><span class="p">:</span> <span class="n">RegularTrick</span><span class="p">,</span> <span class="n">leader</span><span class="p">:</span> <span class="n">BotState</span><span class="p">,</span> <span class="n">follower</span><span class="p">:</span> <span class="n">BotState</span><span class="p">,</span> <span class="n">trump</span><span class="p">:</span> <span class="n">Suit</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">BotState</span><span class="p">,</span> <span class="n">BotState</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
</span><span id="TrickScorer.score-1347"><a href="#TrickScorer.score-1347"><span class="linenos">1347</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TrickScorer.score-1348"><a href="#TrickScorer.score-1348"><span class="linenos">1348</span></a><span class="sd">        Score the trick for the given leader and follower. The returned bots are the same bots provided (not copies) and have the score of the trick applied.</span>
</span><span id="TrickScorer.score-1349"><a href="#TrickScorer.score-1349"><span class="linenos">1349</span></a><span class="sd">        They are returned in order (new_leader, new_follower). If appropriate, also pending points have been applied.</span>
</span><span id="TrickScorer.score-1350"><a href="#TrickScorer.score-1350"><span class="linenos">1350</span></a><span class="sd">        The boolean is True if the leading bot remained the same, i.e., the past leader remains the leader</span>
</span><span id="TrickScorer.score-1351"><a href="#TrickScorer.score-1351"><span class="linenos">1351</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Score the trick for the given leader and follower. The returned bots are the same bots provided (not copies) and have the score of the trick applied.
They are returned in order (new_leader, new_follower). If appropriate, also pending points have been applied.
The boolean is True if the leading bot remained the same, i.e., the past leader remains the leader</p>
</div>


                            </div>
                            <div id="TrickScorer.declare_winner" class="classattr">
                                        <input id="TrickScorer.declare_winner-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">declare_winner</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">game_state</span><span class="p">:</span> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span></span><span class="return-annotation">) -> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n"><a href="#BotState">schnapsen.game.BotState</a></span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span>:</span></span>

                <label class="view-source-button" for="TrickScorer.declare_winner-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TrickScorer.declare_winner"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TrickScorer.declare_winner-1353"><a href="#TrickScorer.declare_winner-1353"><span class="linenos">1353</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="TrickScorer.declare_winner-1354"><a href="#TrickScorer.declare_winner-1354"><span class="linenos">1354</span></a>    <span class="k">def</span> <span class="nf">declare_winner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">BotState</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]:</span>
</span><span id="TrickScorer.declare_winner-1355"><a href="#TrickScorer.declare_winner-1355"><span class="linenos">1355</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;return a bot and the number of points if there is a winner of this game already</span>
</span><span id="TrickScorer.declare_winner-1356"><a href="#TrickScorer.declare_winner-1356"><span class="linenos">1356</span></a>
</span><span id="TrickScorer.declare_winner-1357"><a href="#TrickScorer.declare_winner-1357"><span class="linenos">1357</span></a><span class="sd">        :param game_state: The current state of the game</span>
</span><span id="TrickScorer.declare_winner-1358"><a href="#TrickScorer.declare_winner-1358"><span class="linenos">1358</span></a><span class="sd">        :returns: The botstate of the winner and the number of game points, in case there is a winner already. Otherwise None.</span>
</span><span id="TrickScorer.declare_winner-1359"><a href="#TrickScorer.declare_winner-1359"><span class="linenos">1359</span></a>
</span><span id="TrickScorer.declare_winner-1360"><a href="#TrickScorer.declare_winner-1360"><span class="linenos">1360</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>return a bot and the number of points if there is a winner of this game already</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>game_state</strong>:  The current state of the game
:returns: The botstate of the winner and the number of game points, in case there is a winner already. Otherwise None.</li>
</ul>
</div>


                            </div>
                            <div id="TrickScorer.rank_to_points" class="classattr">
                                        <input id="TrickScorer.rank_to_points-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">rank_to_points</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">rank</span><span class="p">:</span> <span class="n"><a href="deck.html#Rank">schnapsen.deck.Rank</a></span></span><span class="return-annotation">) -> <span class="nb">int</span>:</span></span>

                <label class="view-source-button" for="TrickScorer.rank_to_points-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TrickScorer.rank_to_points"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TrickScorer.rank_to_points-1362"><a href="#TrickScorer.rank_to_points-1362"><span class="linenos">1362</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="TrickScorer.rank_to_points-1363"><a href="#TrickScorer.rank_to_points-1363"><span class="linenos">1363</span></a>    <span class="k">def</span> <span class="nf">rank_to_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rank</span><span class="p">:</span> <span class="n">Rank</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="TrickScorer.rank_to_points-1364"><a href="#TrickScorer.rank_to_points-1364"><span class="linenos">1364</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the point value for a given rank</span>
</span><span id="TrickScorer.rank_to_points-1365"><a href="#TrickScorer.rank_to_points-1365"><span class="linenos">1365</span></a>
</span><span id="TrickScorer.rank_to_points-1366"><a href="#TrickScorer.rank_to_points-1366"><span class="linenos">1366</span></a><span class="sd">        :param rank: the rank of a card for which you want to obtain the points</span>
</span><span id="TrickScorer.rank_to_points-1367"><a href="#TrickScorer.rank_to_points-1367"><span class="linenos">1367</span></a><span class="sd">        :returns: The score for that card</span>
</span><span id="TrickScorer.rank_to_points-1368"><a href="#TrickScorer.rank_to_points-1368"><span class="linenos">1368</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Get the point value for a given rank</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>rank</strong>:  the rank of a card for which you want to obtain the points
:returns: The score for that card</li>
</ul>
</div>


                            </div>
                            <div id="TrickScorer.marriage" class="classattr">
                                        <input id="TrickScorer.marriage-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">marriage</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">move</span><span class="p">:</span> <span class="n"><a href="#Marriage">schnapsen.game.Marriage</a></span>,</span><span class="param">	<span class="n">gamestate</span><span class="p">:</span> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span></span><span class="return-annotation">) -> <span class="n"><a href="#Score">schnapsen.game.Score</a></span>:</span></span>

                <label class="view-source-button" for="TrickScorer.marriage-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TrickScorer.marriage"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TrickScorer.marriage-1370"><a href="#TrickScorer.marriage-1370"><span class="linenos">1370</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="TrickScorer.marriage-1371"><a href="#TrickScorer.marriage-1371"><span class="linenos">1371</span></a>    <span class="k">def</span> <span class="nf">marriage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">move</span><span class="p">:</span> <span class="n">Marriage</span><span class="p">,</span> <span class="n">gamestate</span><span class="p">:</span> <span class="n">GameState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Score&#39;</span><span class="p">:</span>
</span><span id="TrickScorer.marriage-1372"><a href="#TrickScorer.marriage-1372"><span class="linenos">1372</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the score which the player obtains for the given marriage</span>
</span><span id="TrickScorer.marriage-1373"><a href="#TrickScorer.marriage-1373"><span class="linenos">1373</span></a>
</span><span id="TrickScorer.marriage-1374"><a href="#TrickScorer.marriage-1374"><span class="linenos">1374</span></a><span class="sd">        :param move: The marriage for which to get the score</span>
</span><span id="TrickScorer.marriage-1375"><a href="#TrickScorer.marriage-1375"><span class="linenos">1375</span></a><span class="sd">        :param gamestate: the current state of the game, usually used to get the trump suit</span>
</span><span id="TrickScorer.marriage-1376"><a href="#TrickScorer.marriage-1376"><span class="linenos">1376</span></a><span class="sd">        :returns: The score for this marriage</span>
</span><span id="TrickScorer.marriage-1377"><a href="#TrickScorer.marriage-1377"><span class="linenos">1377</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Get the score which the player obtains for the given marriage</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>move</strong>:  The marriage for which to get the score</li>
<li><strong>gamestate</strong>:  the current state of the game, usually used to get the trump suit
:returns: The score for this marriage</li>
</ul>
</div>


                            </div>
                </section>
                <section id="SchnapsenTrickScorer">
                            <input id="SchnapsenTrickScorer-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">SchnapsenTrickScorer</span><wbr>(<span class="base"><a href="#TrickScorer">TrickScorer</a></span>):

                <label class="view-source-button" for="SchnapsenTrickScorer-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SchnapsenTrickScorer"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SchnapsenTrickScorer-1380"><a href="#SchnapsenTrickScorer-1380"><span class="linenos">1380</span></a><span class="k">class</span> <span class="nc">SchnapsenTrickScorer</span><span class="p">(</span><span class="n">TrickScorer</span><span class="p">):</span>
</span><span id="SchnapsenTrickScorer-1381"><a href="#SchnapsenTrickScorer-1381"><span class="linenos">1381</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SchnapsenTrickScorer-1382"><a href="#SchnapsenTrickScorer-1382"><span class="linenos">1382</span></a><span class="sd">    A TrickScorer that scores ac cording to the Schnapsen rules</span>
</span><span id="SchnapsenTrickScorer-1383"><a href="#SchnapsenTrickScorer-1383"><span class="linenos">1383</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="SchnapsenTrickScorer-1384"><a href="#SchnapsenTrickScorer-1384"><span class="linenos">1384</span></a>
</span><span id="SchnapsenTrickScorer-1385"><a href="#SchnapsenTrickScorer-1385"><span class="linenos">1385</span></a>    <span class="n">SCORES</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="SchnapsenTrickScorer-1386"><a href="#SchnapsenTrickScorer-1386"><span class="linenos">1386</span></a>        <span class="n">Rank</span><span class="o">.</span><span class="n">ACE</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span>
</span><span id="SchnapsenTrickScorer-1387"><a href="#SchnapsenTrickScorer-1387"><span class="linenos">1387</span></a>        <span class="n">Rank</span><span class="o">.</span><span class="n">TEN</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
</span><span id="SchnapsenTrickScorer-1388"><a href="#SchnapsenTrickScorer-1388"><span class="linenos">1388</span></a>        <span class="n">Rank</span><span class="o">.</span><span class="n">KING</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
</span><span id="SchnapsenTrickScorer-1389"><a href="#SchnapsenTrickScorer-1389"><span class="linenos">1389</span></a>        <span class="n">Rank</span><span class="o">.</span><span class="n">QUEEN</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
</span><span id="SchnapsenTrickScorer-1390"><a href="#SchnapsenTrickScorer-1390"><span class="linenos">1390</span></a>        <span class="n">Rank</span><span class="o">.</span><span class="n">JACK</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
</span><span id="SchnapsenTrickScorer-1391"><a href="#SchnapsenTrickScorer-1391"><span class="linenos">1391</span></a>    <span class="p">}</span>
</span><span id="SchnapsenTrickScorer-1392"><a href="#SchnapsenTrickScorer-1392"><span class="linenos">1392</span></a>
</span><span id="SchnapsenTrickScorer-1393"><a href="#SchnapsenTrickScorer-1393"><span class="linenos">1393</span></a>    <span class="k">def</span> <span class="nf">rank_to_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rank</span><span class="p">:</span> <span class="n">Rank</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer-1394"><a href="#SchnapsenTrickScorer-1394"><span class="linenos">1394</span></a>        <span class="k">return</span> <span class="n">SchnapsenTrickScorer</span><span class="o">.</span><span class="n">SCORES</span><span class="p">[</span><span class="n">rank</span><span class="p">]</span>
</span><span id="SchnapsenTrickScorer-1395"><a href="#SchnapsenTrickScorer-1395"><span class="linenos">1395</span></a>
</span><span id="SchnapsenTrickScorer-1396"><a href="#SchnapsenTrickScorer-1396"><span class="linenos">1396</span></a>    <span class="k">def</span> <span class="nf">marriage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">move</span><span class="p">:</span> <span class="n">Marriage</span><span class="p">,</span> <span class="n">gamestate</span><span class="p">:</span> <span class="n">GameState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Score&#39;</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer-1397"><a href="#SchnapsenTrickScorer-1397"><span class="linenos">1397</span></a>        <span class="k">if</span> <span class="n">move</span><span class="o">.</span><span class="n">suit</span> <span class="ow">is</span> <span class="n">gamestate</span><span class="o">.</span><span class="n">trump_suit</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer-1398"><a href="#SchnapsenTrickScorer-1398"><span class="linenos">1398</span></a>            <span class="c1"># royal marriage</span>
</span><span id="SchnapsenTrickScorer-1399"><a href="#SchnapsenTrickScorer-1399"><span class="linenos">1399</span></a>            <span class="k">return</span> <span class="n">Score</span><span class="p">(</span><span class="n">pending_points</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
</span><span id="SchnapsenTrickScorer-1400"><a href="#SchnapsenTrickScorer-1400"><span class="linenos">1400</span></a>        <span class="c1"># any other marriage</span>
</span><span id="SchnapsenTrickScorer-1401"><a href="#SchnapsenTrickScorer-1401"><span class="linenos">1401</span></a>        <span class="k">return</span> <span class="n">Score</span><span class="p">(</span><span class="n">pending_points</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</span><span id="SchnapsenTrickScorer-1402"><a href="#SchnapsenTrickScorer-1402"><span class="linenos">1402</span></a>
</span><span id="SchnapsenTrickScorer-1403"><a href="#SchnapsenTrickScorer-1403"><span class="linenos">1403</span></a>    <span class="k">def</span> <span class="nf">score</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">trick</span><span class="p">:</span> <span class="n">RegularTrick</span><span class="p">,</span> <span class="n">leader</span><span class="p">:</span> <span class="n">BotState</span><span class="p">,</span> <span class="n">follower</span><span class="p">:</span> <span class="n">BotState</span><span class="p">,</span> <span class="n">trump</span><span class="p">:</span> <span class="n">Suit</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">BotState</span><span class="p">,</span> <span class="n">BotState</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
</span><span id="SchnapsenTrickScorer-1404"><a href="#SchnapsenTrickScorer-1404"><span class="linenos">1404</span></a>
</span><span id="SchnapsenTrickScorer-1405"><a href="#SchnapsenTrickScorer-1405"><span class="linenos">1405</span></a>        <span class="k">if</span> <span class="n">trick</span><span class="o">.</span><span class="n">leader_move</span><span class="o">.</span><span class="n">is_marriage</span><span class="p">():</span>
</span><span id="SchnapsenTrickScorer-1406"><a href="#SchnapsenTrickScorer-1406"><span class="linenos">1406</span></a>            <span class="n">regular_leader_move</span><span class="p">:</span> <span class="n">RegularMove</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Marriage</span><span class="p">,</span> <span class="n">trick</span><span class="o">.</span><span class="n">leader_move</span><span class="p">)</span><span class="o">.</span><span class="n">underlying_regular_move</span><span class="p">()</span>
</span><span id="SchnapsenTrickScorer-1407"><a href="#SchnapsenTrickScorer-1407"><span class="linenos">1407</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer-1408"><a href="#SchnapsenTrickScorer-1408"><span class="linenos">1408</span></a>            <span class="n">regular_leader_move</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">RegularMove</span><span class="p">,</span> <span class="n">trick</span><span class="o">.</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="SchnapsenTrickScorer-1409"><a href="#SchnapsenTrickScorer-1409"><span class="linenos">1409</span></a>
</span><span id="SchnapsenTrickScorer-1410"><a href="#SchnapsenTrickScorer-1410"><span class="linenos">1410</span></a>        <span class="n">leader_card</span> <span class="o">=</span> <span class="n">regular_leader_move</span><span class="o">.</span><span class="n">card</span>
</span><span id="SchnapsenTrickScorer-1411"><a href="#SchnapsenTrickScorer-1411"><span class="linenos">1411</span></a>        <span class="n">follower_card</span> <span class="o">=</span> <span class="n">trick</span><span class="o">.</span><span class="n">follower_move</span><span class="o">.</span><span class="n">card</span>
</span><span id="SchnapsenTrickScorer-1412"><a href="#SchnapsenTrickScorer-1412"><span class="linenos">1412</span></a>        <span class="k">assert</span> <span class="n">leader_card</span> <span class="o">!=</span> <span class="n">follower_card</span>
</span><span id="SchnapsenTrickScorer-1413"><a href="#SchnapsenTrickScorer-1413"><span class="linenos">1413</span></a>        <span class="n">leader_card_points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rank_to_points</span><span class="p">(</span><span class="n">leader_card</span><span class="o">.</span><span class="n">rank</span><span class="p">)</span>
</span><span id="SchnapsenTrickScorer-1414"><a href="#SchnapsenTrickScorer-1414"><span class="linenos">1414</span></a>        <span class="n">follower_card_points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rank_to_points</span><span class="p">(</span><span class="n">follower_card</span><span class="o">.</span><span class="n">rank</span><span class="p">)</span>
</span><span id="SchnapsenTrickScorer-1415"><a href="#SchnapsenTrickScorer-1415"><span class="linenos">1415</span></a>
</span><span id="SchnapsenTrickScorer-1416"><a href="#SchnapsenTrickScorer-1416"><span class="linenos">1416</span></a>        <span class="k">if</span> <span class="n">leader_card</span><span class="o">.</span><span class="n">suit</span> <span class="ow">is</span> <span class="n">follower_card</span><span class="o">.</span><span class="n">suit</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer-1417"><a href="#SchnapsenTrickScorer-1417"><span class="linenos">1417</span></a>            <span class="c1"># same suit, either trump or not</span>
</span><span id="SchnapsenTrickScorer-1418"><a href="#SchnapsenTrickScorer-1418"><span class="linenos">1418</span></a>            <span class="k">if</span> <span class="n">leader_card_points</span> <span class="o">&gt;</span> <span class="n">follower_card_points</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer-1419"><a href="#SchnapsenTrickScorer-1419"><span class="linenos">1419</span></a>                <span class="n">leader_wins</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="SchnapsenTrickScorer-1420"><a href="#SchnapsenTrickScorer-1420"><span class="linenos">1420</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer-1421"><a href="#SchnapsenTrickScorer-1421"><span class="linenos">1421</span></a>                <span class="n">leader_wins</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="SchnapsenTrickScorer-1422"><a href="#SchnapsenTrickScorer-1422"><span class="linenos">1422</span></a>        <span class="k">elif</span> <span class="n">leader_card</span><span class="o">.</span><span class="n">suit</span> <span class="ow">is</span> <span class="n">trump</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer-1423"><a href="#SchnapsenTrickScorer-1423"><span class="linenos">1423</span></a>            <span class="c1"># the follower suit cannot be trumps as per the previous condition</span>
</span><span id="SchnapsenTrickScorer-1424"><a href="#SchnapsenTrickScorer-1424"><span class="linenos">1424</span></a>            <span class="n">leader_wins</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="SchnapsenTrickScorer-1425"><a href="#SchnapsenTrickScorer-1425"><span class="linenos">1425</span></a>        <span class="k">elif</span> <span class="n">follower_card</span><span class="o">.</span><span class="n">suit</span> <span class="ow">is</span> <span class="n">trump</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer-1426"><a href="#SchnapsenTrickScorer-1426"><span class="linenos">1426</span></a>            <span class="c1"># the leader suit cannot be trumps because of the previous conditions</span>
</span><span id="SchnapsenTrickScorer-1427"><a href="#SchnapsenTrickScorer-1427"><span class="linenos">1427</span></a>            <span class="n">leader_wins</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="SchnapsenTrickScorer-1428"><a href="#SchnapsenTrickScorer-1428"><span class="linenos">1428</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer-1429"><a href="#SchnapsenTrickScorer-1429"><span class="linenos">1429</span></a>            <span class="c1"># the follower did not follow the suit of the leader and did not play trumps, hence the leader wins</span>
</span><span id="SchnapsenTrickScorer-1430"><a href="#SchnapsenTrickScorer-1430"><span class="linenos">1430</span></a>            <span class="n">leader_wins</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="SchnapsenTrickScorer-1431"><a href="#SchnapsenTrickScorer-1431"><span class="linenos">1431</span></a>        <span class="n">winner</span><span class="p">,</span> <span class="n">loser</span> <span class="o">=</span> <span class="p">(</span><span class="n">leader</span><span class="p">,</span> <span class="n">follower</span><span class="p">)</span> <span class="k">if</span> <span class="n">leader_wins</span> <span class="k">else</span> <span class="p">(</span><span class="n">follower</span><span class="p">,</span> <span class="n">leader</span><span class="p">)</span>
</span><span id="SchnapsenTrickScorer-1432"><a href="#SchnapsenTrickScorer-1432"><span class="linenos">1432</span></a>        <span class="c1"># record the win</span>
</span><span id="SchnapsenTrickScorer-1433"><a href="#SchnapsenTrickScorer-1433"><span class="linenos">1433</span></a>        <span class="n">winner</span><span class="o">.</span><span class="n">won_cards</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">leader_card</span><span class="p">,</span> <span class="n">follower_card</span><span class="p">])</span>
</span><span id="SchnapsenTrickScorer-1434"><a href="#SchnapsenTrickScorer-1434"><span class="linenos">1434</span></a>        <span class="c1"># apply the points</span>
</span><span id="SchnapsenTrickScorer-1435"><a href="#SchnapsenTrickScorer-1435"><span class="linenos">1435</span></a>        <span class="n">points_gained</span> <span class="o">=</span> <span class="n">leader_card_points</span> <span class="o">+</span> <span class="n">follower_card_points</span>
</span><span id="SchnapsenTrickScorer-1436"><a href="#SchnapsenTrickScorer-1436"><span class="linenos">1436</span></a>        <span class="n">winner</span><span class="o">.</span><span class="n">score</span> <span class="o">+=</span> <span class="n">Score</span><span class="p">(</span><span class="n">direct_points</span><span class="o">=</span><span class="n">points_gained</span><span class="p">)</span>
</span><span id="SchnapsenTrickScorer-1437"><a href="#SchnapsenTrickScorer-1437"><span class="linenos">1437</span></a>        <span class="c1"># add winner&#39;s total of direct and pending points as their new direct points</span>
</span><span id="SchnapsenTrickScorer-1438"><a href="#SchnapsenTrickScorer-1438"><span class="linenos">1438</span></a>        <span class="n">winner</span><span class="o">.</span><span class="n">score</span> <span class="o">=</span> <span class="n">winner</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">redeem_pending_points</span><span class="p">()</span>
</span><span id="SchnapsenTrickScorer-1439"><a href="#SchnapsenTrickScorer-1439"><span class="linenos">1439</span></a>        <span class="k">return</span> <span class="n">winner</span><span class="p">,</span> <span class="n">loser</span><span class="p">,</span> <span class="n">leader_wins</span>
</span><span id="SchnapsenTrickScorer-1440"><a href="#SchnapsenTrickScorer-1440"><span class="linenos">1440</span></a>
</span><span id="SchnapsenTrickScorer-1441"><a href="#SchnapsenTrickScorer-1441"><span class="linenos">1441</span></a>    <span class="k">def</span> <span class="nf">declare_winner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">BotState</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]:</span>
</span><span id="SchnapsenTrickScorer-1442"><a href="#SchnapsenTrickScorer-1442"><span class="linenos">1442</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SchnapsenTrickScorer-1443"><a href="#SchnapsenTrickScorer-1443"><span class="linenos">1443</span></a><span class="sd">        Declaring a winner uses the logic from https://www.pagat.com/marriage/schnaps.html#marriages , but simplified, because we do not have closing of the Talon and no need to guess the scores.</span>
</span><span id="SchnapsenTrickScorer-1444"><a href="#SchnapsenTrickScorer-1444"><span class="linenos">1444</span></a><span class="sd">        The following text adapted accordingly from that website.</span>
</span><span id="SchnapsenTrickScorer-1445"><a href="#SchnapsenTrickScorer-1445"><span class="linenos">1445</span></a>
</span><span id="SchnapsenTrickScorer-1446"><a href="#SchnapsenTrickScorer-1446"><span class="linenos">1446</span></a><span class="sd">        If a player has 66 or more points, she scores points toward game as follows:</span>
</span><span id="SchnapsenTrickScorer-1447"><a href="#SchnapsenTrickScorer-1447"><span class="linenos">1447</span></a>
</span><span id="SchnapsenTrickScorer-1448"><a href="#SchnapsenTrickScorer-1448"><span class="linenos">1448</span></a><span class="sd">            * one game point, if the opponent has made at least 33 points;</span>
</span><span id="SchnapsenTrickScorer-1449"><a href="#SchnapsenTrickScorer-1449"><span class="linenos">1449</span></a><span class="sd">            * two game points, if the opponent has made fewer than 33 points, but has won at least one trick (opponent is said to be Schneider);</span>
</span><span id="SchnapsenTrickScorer-1450"><a href="#SchnapsenTrickScorer-1450"><span class="linenos">1450</span></a><span class="sd">            * three game points, if the opponent has won no tricks (opponent is said to be Schwarz).</span>
</span><span id="SchnapsenTrickScorer-1451"><a href="#SchnapsenTrickScorer-1451"><span class="linenos">1451</span></a>
</span><span id="SchnapsenTrickScorer-1452"><a href="#SchnapsenTrickScorer-1452"><span class="linenos">1452</span></a><span class="sd">        If play continued to the very last trick with the talon exhausted, the player who takes the last trick wins the hand, scoring one game point, irrespective of the number of card points the players have taken.</span>
</span><span id="SchnapsenTrickScorer-1453"><a href="#SchnapsenTrickScorer-1453"><span class="linenos">1453</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SchnapsenTrickScorer-1454"><a href="#SchnapsenTrickScorer-1454"><span class="linenos">1454</span></a>        <span class="k">if</span> <span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">direct_points</span> <span class="o">&gt;=</span> <span class="mi">66</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer-1455"><a href="#SchnapsenTrickScorer-1455"><span class="linenos">1455</span></a>            <span class="n">follower_score</span> <span class="o">=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">direct_points</span>
</span><span id="SchnapsenTrickScorer-1456"><a href="#SchnapsenTrickScorer-1456"><span class="linenos">1456</span></a>            <span class="k">if</span> <span class="n">follower_score</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer-1457"><a href="#SchnapsenTrickScorer-1457"><span class="linenos">1457</span></a>                <span class="k">return</span> <span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="p">,</span> <span class="mi">3</span>
</span><span id="SchnapsenTrickScorer-1458"><a href="#SchnapsenTrickScorer-1458"><span class="linenos">1458</span></a>            <span class="k">elif</span> <span class="n">follower_score</span> <span class="o">&gt;=</span> <span class="mi">33</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer-1459"><a href="#SchnapsenTrickScorer-1459"><span class="linenos">1459</span></a>                <span class="k">return</span> <span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="p">,</span> <span class="mi">1</span>
</span><span id="SchnapsenTrickScorer-1460"><a href="#SchnapsenTrickScorer-1460"><span class="linenos">1460</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer-1461"><a href="#SchnapsenTrickScorer-1461"><span class="linenos">1461</span></a>                <span class="c1"># second case in explaination above, 0 &lt; score &lt; 33</span>
</span><span id="SchnapsenTrickScorer-1462"><a href="#SchnapsenTrickScorer-1462"><span class="linenos">1462</span></a>                <span class="k">assert</span> <span class="n">follower_score</span> <span class="o">&lt;</span> <span class="mi">66</span>
</span><span id="SchnapsenTrickScorer-1463"><a href="#SchnapsenTrickScorer-1463"><span class="linenos">1463</span></a>                <span class="k">return</span> <span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="p">,</span> <span class="mi">2</span>
</span><span id="SchnapsenTrickScorer-1464"><a href="#SchnapsenTrickScorer-1464"><span class="linenos">1464</span></a>        <span class="k">elif</span> <span class="n">game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">direct_points</span> <span class="o">&gt;=</span> <span class="mi">66</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer-1465"><a href="#SchnapsenTrickScorer-1465"><span class="linenos">1465</span></a>            <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;Would declare the follower winner, but this should never happen in the current implementation&quot;</span><span class="p">)</span>
</span><span id="SchnapsenTrickScorer-1466"><a href="#SchnapsenTrickScorer-1466"><span class="linenos">1466</span></a>        <span class="k">elif</span> <span class="n">game_state</span><span class="o">.</span><span class="n">are_all_cards_played</span><span class="p">():</span>
</span><span id="SchnapsenTrickScorer-1467"><a href="#SchnapsenTrickScorer-1467"><span class="linenos">1467</span></a>            <span class="k">return</span> <span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="p">,</span> <span class="mi">1</span>
</span><span id="SchnapsenTrickScorer-1468"><a href="#SchnapsenTrickScorer-1468"><span class="linenos">1468</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer-1469"><a href="#SchnapsenTrickScorer-1469"><span class="linenos">1469</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>A TrickScorer that scores ac cording to the Schnapsen rules</p>
</div>


                            <div id="SchnapsenTrickScorer.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">SchnapsenTrickScorer</span><span class="signature pdoc-code condensed">()</span>

        
    </div>
    <a class="headerlink" href="#SchnapsenTrickScorer.__init__"></a>
    
    

                            </div>
                            <div id="SchnapsenTrickScorer.rank_to_points" class="classattr">
                                        <input id="SchnapsenTrickScorer.rank_to_points-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">rank_to_points</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">rank</span><span class="p">:</span> <span class="n"><a href="deck.html#Rank">schnapsen.deck.Rank</a></span></span><span class="return-annotation">) -> <span class="nb">int</span>:</span></span>

                <label class="view-source-button" for="SchnapsenTrickScorer.rank_to_points-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SchnapsenTrickScorer.rank_to_points"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SchnapsenTrickScorer.rank_to_points-1393"><a href="#SchnapsenTrickScorer.rank_to_points-1393"><span class="linenos">1393</span></a>    <span class="k">def</span> <span class="nf">rank_to_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rank</span><span class="p">:</span> <span class="n">Rank</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer.rank_to_points-1394"><a href="#SchnapsenTrickScorer.rank_to_points-1394"><span class="linenos">1394</span></a>        <span class="k">return</span> <span class="n">SchnapsenTrickScorer</span><span class="o">.</span><span class="n">SCORES</span><span class="p">[</span><span class="n">rank</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Get the point value for a given rank</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>rank</strong>:  the rank of a card for which you want to obtain the points
:returns: The score for that card</li>
</ul>
</div>


                            </div>
                            <div id="SchnapsenTrickScorer.marriage" class="classattr">
                                        <input id="SchnapsenTrickScorer.marriage-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">marriage</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">move</span><span class="p">:</span> <span class="n"><a href="#Marriage">schnapsen.game.Marriage</a></span>,</span><span class="param">	<span class="n">gamestate</span><span class="p">:</span> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span></span><span class="return-annotation">) -> <span class="n"><a href="#Score">schnapsen.game.Score</a></span>:</span></span>

                <label class="view-source-button" for="SchnapsenTrickScorer.marriage-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SchnapsenTrickScorer.marriage"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SchnapsenTrickScorer.marriage-1396"><a href="#SchnapsenTrickScorer.marriage-1396"><span class="linenos">1396</span></a>    <span class="k">def</span> <span class="nf">marriage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">move</span><span class="p">:</span> <span class="n">Marriage</span><span class="p">,</span> <span class="n">gamestate</span><span class="p">:</span> <span class="n">GameState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Score&#39;</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer.marriage-1397"><a href="#SchnapsenTrickScorer.marriage-1397"><span class="linenos">1397</span></a>        <span class="k">if</span> <span class="n">move</span><span class="o">.</span><span class="n">suit</span> <span class="ow">is</span> <span class="n">gamestate</span><span class="o">.</span><span class="n">trump_suit</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer.marriage-1398"><a href="#SchnapsenTrickScorer.marriage-1398"><span class="linenos">1398</span></a>            <span class="c1"># royal marriage</span>
</span><span id="SchnapsenTrickScorer.marriage-1399"><a href="#SchnapsenTrickScorer.marriage-1399"><span class="linenos">1399</span></a>            <span class="k">return</span> <span class="n">Score</span><span class="p">(</span><span class="n">pending_points</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
</span><span id="SchnapsenTrickScorer.marriage-1400"><a href="#SchnapsenTrickScorer.marriage-1400"><span class="linenos">1400</span></a>        <span class="c1"># any other marriage</span>
</span><span id="SchnapsenTrickScorer.marriage-1401"><a href="#SchnapsenTrickScorer.marriage-1401"><span class="linenos">1401</span></a>        <span class="k">return</span> <span class="n">Score</span><span class="p">(</span><span class="n">pending_points</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Get the score which the player obtains for the given marriage</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>move</strong>:  The marriage for which to get the score</li>
<li><strong>gamestate</strong>:  the current state of the game, usually used to get the trump suit
:returns: The score for this marriage</li>
</ul>
</div>


                            </div>
                            <div id="SchnapsenTrickScorer.score" class="classattr">
                                        <input id="SchnapsenTrickScorer.score-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">score</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">trick</span><span class="p">:</span> <span class="n"><a href="#RegularTrick">schnapsen.game.RegularTrick</a></span>,</span><span class="param">	<span class="n">leader</span><span class="p">:</span> <span class="n"><a href="#BotState">schnapsen.game.BotState</a></span>,</span><span class="param">	<span class="n">follower</span><span class="p">:</span> <span class="n"><a href="#BotState">schnapsen.game.BotState</a></span>,</span><span class="param">	<span class="n">trump</span><span class="p">:</span> <span class="n"><a href="deck.html#Suit">schnapsen.deck.Suit</a></span></span><span class="return-annotation">) -> <span class="n">Tuple</span><span class="p">[</span><span class="n"><a href="#BotState">schnapsen.game.BotState</a></span><span class="p">,</span> <span class="n"><a href="#BotState">schnapsen.game.BotState</a></span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="SchnapsenTrickScorer.score-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SchnapsenTrickScorer.score"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SchnapsenTrickScorer.score-1403"><a href="#SchnapsenTrickScorer.score-1403"><span class="linenos">1403</span></a>    <span class="k">def</span> <span class="nf">score</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">trick</span><span class="p">:</span> <span class="n">RegularTrick</span><span class="p">,</span> <span class="n">leader</span><span class="p">:</span> <span class="n">BotState</span><span class="p">,</span> <span class="n">follower</span><span class="p">:</span> <span class="n">BotState</span><span class="p">,</span> <span class="n">trump</span><span class="p">:</span> <span class="n">Suit</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">BotState</span><span class="p">,</span> <span class="n">BotState</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
</span><span id="SchnapsenTrickScorer.score-1404"><a href="#SchnapsenTrickScorer.score-1404"><span class="linenos">1404</span></a>
</span><span id="SchnapsenTrickScorer.score-1405"><a href="#SchnapsenTrickScorer.score-1405"><span class="linenos">1405</span></a>        <span class="k">if</span> <span class="n">trick</span><span class="o">.</span><span class="n">leader_move</span><span class="o">.</span><span class="n">is_marriage</span><span class="p">():</span>
</span><span id="SchnapsenTrickScorer.score-1406"><a href="#SchnapsenTrickScorer.score-1406"><span class="linenos">1406</span></a>            <span class="n">regular_leader_move</span><span class="p">:</span> <span class="n">RegularMove</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Marriage</span><span class="p">,</span> <span class="n">trick</span><span class="o">.</span><span class="n">leader_move</span><span class="p">)</span><span class="o">.</span><span class="n">underlying_regular_move</span><span class="p">()</span>
</span><span id="SchnapsenTrickScorer.score-1407"><a href="#SchnapsenTrickScorer.score-1407"><span class="linenos">1407</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer.score-1408"><a href="#SchnapsenTrickScorer.score-1408"><span class="linenos">1408</span></a>            <span class="n">regular_leader_move</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">RegularMove</span><span class="p">,</span> <span class="n">trick</span><span class="o">.</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="SchnapsenTrickScorer.score-1409"><a href="#SchnapsenTrickScorer.score-1409"><span class="linenos">1409</span></a>
</span><span id="SchnapsenTrickScorer.score-1410"><a href="#SchnapsenTrickScorer.score-1410"><span class="linenos">1410</span></a>        <span class="n">leader_card</span> <span class="o">=</span> <span class="n">regular_leader_move</span><span class="o">.</span><span class="n">card</span>
</span><span id="SchnapsenTrickScorer.score-1411"><a href="#SchnapsenTrickScorer.score-1411"><span class="linenos">1411</span></a>        <span class="n">follower_card</span> <span class="o">=</span> <span class="n">trick</span><span class="o">.</span><span class="n">follower_move</span><span class="o">.</span><span class="n">card</span>
</span><span id="SchnapsenTrickScorer.score-1412"><a href="#SchnapsenTrickScorer.score-1412"><span class="linenos">1412</span></a>        <span class="k">assert</span> <span class="n">leader_card</span> <span class="o">!=</span> <span class="n">follower_card</span>
</span><span id="SchnapsenTrickScorer.score-1413"><a href="#SchnapsenTrickScorer.score-1413"><span class="linenos">1413</span></a>        <span class="n">leader_card_points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rank_to_points</span><span class="p">(</span><span class="n">leader_card</span><span class="o">.</span><span class="n">rank</span><span class="p">)</span>
</span><span id="SchnapsenTrickScorer.score-1414"><a href="#SchnapsenTrickScorer.score-1414"><span class="linenos">1414</span></a>        <span class="n">follower_card_points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rank_to_points</span><span class="p">(</span><span class="n">follower_card</span><span class="o">.</span><span class="n">rank</span><span class="p">)</span>
</span><span id="SchnapsenTrickScorer.score-1415"><a href="#SchnapsenTrickScorer.score-1415"><span class="linenos">1415</span></a>
</span><span id="SchnapsenTrickScorer.score-1416"><a href="#SchnapsenTrickScorer.score-1416"><span class="linenos">1416</span></a>        <span class="k">if</span> <span class="n">leader_card</span><span class="o">.</span><span class="n">suit</span> <span class="ow">is</span> <span class="n">follower_card</span><span class="o">.</span><span class="n">suit</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer.score-1417"><a href="#SchnapsenTrickScorer.score-1417"><span class="linenos">1417</span></a>            <span class="c1"># same suit, either trump or not</span>
</span><span id="SchnapsenTrickScorer.score-1418"><a href="#SchnapsenTrickScorer.score-1418"><span class="linenos">1418</span></a>            <span class="k">if</span> <span class="n">leader_card_points</span> <span class="o">&gt;</span> <span class="n">follower_card_points</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer.score-1419"><a href="#SchnapsenTrickScorer.score-1419"><span class="linenos">1419</span></a>                <span class="n">leader_wins</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="SchnapsenTrickScorer.score-1420"><a href="#SchnapsenTrickScorer.score-1420"><span class="linenos">1420</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer.score-1421"><a href="#SchnapsenTrickScorer.score-1421"><span class="linenos">1421</span></a>                <span class="n">leader_wins</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="SchnapsenTrickScorer.score-1422"><a href="#SchnapsenTrickScorer.score-1422"><span class="linenos">1422</span></a>        <span class="k">elif</span> <span class="n">leader_card</span><span class="o">.</span><span class="n">suit</span> <span class="ow">is</span> <span class="n">trump</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer.score-1423"><a href="#SchnapsenTrickScorer.score-1423"><span class="linenos">1423</span></a>            <span class="c1"># the follower suit cannot be trumps as per the previous condition</span>
</span><span id="SchnapsenTrickScorer.score-1424"><a href="#SchnapsenTrickScorer.score-1424"><span class="linenos">1424</span></a>            <span class="n">leader_wins</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="SchnapsenTrickScorer.score-1425"><a href="#SchnapsenTrickScorer.score-1425"><span class="linenos">1425</span></a>        <span class="k">elif</span> <span class="n">follower_card</span><span class="o">.</span><span class="n">suit</span> <span class="ow">is</span> <span class="n">trump</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer.score-1426"><a href="#SchnapsenTrickScorer.score-1426"><span class="linenos">1426</span></a>            <span class="c1"># the leader suit cannot be trumps because of the previous conditions</span>
</span><span id="SchnapsenTrickScorer.score-1427"><a href="#SchnapsenTrickScorer.score-1427"><span class="linenos">1427</span></a>            <span class="n">leader_wins</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="SchnapsenTrickScorer.score-1428"><a href="#SchnapsenTrickScorer.score-1428"><span class="linenos">1428</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer.score-1429"><a href="#SchnapsenTrickScorer.score-1429"><span class="linenos">1429</span></a>            <span class="c1"># the follower did not follow the suit of the leader and did not play trumps, hence the leader wins</span>
</span><span id="SchnapsenTrickScorer.score-1430"><a href="#SchnapsenTrickScorer.score-1430"><span class="linenos">1430</span></a>            <span class="n">leader_wins</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="SchnapsenTrickScorer.score-1431"><a href="#SchnapsenTrickScorer.score-1431"><span class="linenos">1431</span></a>        <span class="n">winner</span><span class="p">,</span> <span class="n">loser</span> <span class="o">=</span> <span class="p">(</span><span class="n">leader</span><span class="p">,</span> <span class="n">follower</span><span class="p">)</span> <span class="k">if</span> <span class="n">leader_wins</span> <span class="k">else</span> <span class="p">(</span><span class="n">follower</span><span class="p">,</span> <span class="n">leader</span><span class="p">)</span>
</span><span id="SchnapsenTrickScorer.score-1432"><a href="#SchnapsenTrickScorer.score-1432"><span class="linenos">1432</span></a>        <span class="c1"># record the win</span>
</span><span id="SchnapsenTrickScorer.score-1433"><a href="#SchnapsenTrickScorer.score-1433"><span class="linenos">1433</span></a>        <span class="n">winner</span><span class="o">.</span><span class="n">won_cards</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">leader_card</span><span class="p">,</span> <span class="n">follower_card</span><span class="p">])</span>
</span><span id="SchnapsenTrickScorer.score-1434"><a href="#SchnapsenTrickScorer.score-1434"><span class="linenos">1434</span></a>        <span class="c1"># apply the points</span>
</span><span id="SchnapsenTrickScorer.score-1435"><a href="#SchnapsenTrickScorer.score-1435"><span class="linenos">1435</span></a>        <span class="n">points_gained</span> <span class="o">=</span> <span class="n">leader_card_points</span> <span class="o">+</span> <span class="n">follower_card_points</span>
</span><span id="SchnapsenTrickScorer.score-1436"><a href="#SchnapsenTrickScorer.score-1436"><span class="linenos">1436</span></a>        <span class="n">winner</span><span class="o">.</span><span class="n">score</span> <span class="o">+=</span> <span class="n">Score</span><span class="p">(</span><span class="n">direct_points</span><span class="o">=</span><span class="n">points_gained</span><span class="p">)</span>
</span><span id="SchnapsenTrickScorer.score-1437"><a href="#SchnapsenTrickScorer.score-1437"><span class="linenos">1437</span></a>        <span class="c1"># add winner&#39;s total of direct and pending points as their new direct points</span>
</span><span id="SchnapsenTrickScorer.score-1438"><a href="#SchnapsenTrickScorer.score-1438"><span class="linenos">1438</span></a>        <span class="n">winner</span><span class="o">.</span><span class="n">score</span> <span class="o">=</span> <span class="n">winner</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">redeem_pending_points</span><span class="p">()</span>
</span><span id="SchnapsenTrickScorer.score-1439"><a href="#SchnapsenTrickScorer.score-1439"><span class="linenos">1439</span></a>        <span class="k">return</span> <span class="n">winner</span><span class="p">,</span> <span class="n">loser</span><span class="p">,</span> <span class="n">leader_wins</span>
</span></pre></div>


            <div class="docstring"><p>Score the trick for the given leader and follower. The returned bots are the same bots provided (not copies) and have the score of the trick applied.
They are returned in order (new_leader, new_follower). If appropriate, also pending points have been applied.
The boolean is True if the leading bot remained the same, i.e., the past leader remains the leader</p>
</div>


                            </div>
                            <div id="SchnapsenTrickScorer.declare_winner" class="classattr">
                                        <input id="SchnapsenTrickScorer.declare_winner-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">declare_winner</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">game_state</span><span class="p">:</span> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span></span><span class="return-annotation">) -> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n"><a href="#BotState">schnapsen.game.BotState</a></span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span>:</span></span>

                <label class="view-source-button" for="SchnapsenTrickScorer.declare_winner-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SchnapsenTrickScorer.declare_winner"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SchnapsenTrickScorer.declare_winner-1441"><a href="#SchnapsenTrickScorer.declare_winner-1441"><span class="linenos">1441</span></a>    <span class="k">def</span> <span class="nf">declare_winner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">BotState</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]:</span>
</span><span id="SchnapsenTrickScorer.declare_winner-1442"><a href="#SchnapsenTrickScorer.declare_winner-1442"><span class="linenos">1442</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SchnapsenTrickScorer.declare_winner-1443"><a href="#SchnapsenTrickScorer.declare_winner-1443"><span class="linenos">1443</span></a><span class="sd">        Declaring a winner uses the logic from https://www.pagat.com/marriage/schnaps.html#marriages , but simplified, because we do not have closing of the Talon and no need to guess the scores.</span>
</span><span id="SchnapsenTrickScorer.declare_winner-1444"><a href="#SchnapsenTrickScorer.declare_winner-1444"><span class="linenos">1444</span></a><span class="sd">        The following text adapted accordingly from that website.</span>
</span><span id="SchnapsenTrickScorer.declare_winner-1445"><a href="#SchnapsenTrickScorer.declare_winner-1445"><span class="linenos">1445</span></a>
</span><span id="SchnapsenTrickScorer.declare_winner-1446"><a href="#SchnapsenTrickScorer.declare_winner-1446"><span class="linenos">1446</span></a><span class="sd">        If a player has 66 or more points, she scores points toward game as follows:</span>
</span><span id="SchnapsenTrickScorer.declare_winner-1447"><a href="#SchnapsenTrickScorer.declare_winner-1447"><span class="linenos">1447</span></a>
</span><span id="SchnapsenTrickScorer.declare_winner-1448"><a href="#SchnapsenTrickScorer.declare_winner-1448"><span class="linenos">1448</span></a><span class="sd">            * one game point, if the opponent has made at least 33 points;</span>
</span><span id="SchnapsenTrickScorer.declare_winner-1449"><a href="#SchnapsenTrickScorer.declare_winner-1449"><span class="linenos">1449</span></a><span class="sd">            * two game points, if the opponent has made fewer than 33 points, but has won at least one trick (opponent is said to be Schneider);</span>
</span><span id="SchnapsenTrickScorer.declare_winner-1450"><a href="#SchnapsenTrickScorer.declare_winner-1450"><span class="linenos">1450</span></a><span class="sd">            * three game points, if the opponent has won no tricks (opponent is said to be Schwarz).</span>
</span><span id="SchnapsenTrickScorer.declare_winner-1451"><a href="#SchnapsenTrickScorer.declare_winner-1451"><span class="linenos">1451</span></a>
</span><span id="SchnapsenTrickScorer.declare_winner-1452"><a href="#SchnapsenTrickScorer.declare_winner-1452"><span class="linenos">1452</span></a><span class="sd">        If play continued to the very last trick with the talon exhausted, the player who takes the last trick wins the hand, scoring one game point, irrespective of the number of card points the players have taken.</span>
</span><span id="SchnapsenTrickScorer.declare_winner-1453"><a href="#SchnapsenTrickScorer.declare_winner-1453"><span class="linenos">1453</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SchnapsenTrickScorer.declare_winner-1454"><a href="#SchnapsenTrickScorer.declare_winner-1454"><span class="linenos">1454</span></a>        <span class="k">if</span> <span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">direct_points</span> <span class="o">&gt;=</span> <span class="mi">66</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer.declare_winner-1455"><a href="#SchnapsenTrickScorer.declare_winner-1455"><span class="linenos">1455</span></a>            <span class="n">follower_score</span> <span class="o">=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">direct_points</span>
</span><span id="SchnapsenTrickScorer.declare_winner-1456"><a href="#SchnapsenTrickScorer.declare_winner-1456"><span class="linenos">1456</span></a>            <span class="k">if</span> <span class="n">follower_score</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer.declare_winner-1457"><a href="#SchnapsenTrickScorer.declare_winner-1457"><span class="linenos">1457</span></a>                <span class="k">return</span> <span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="p">,</span> <span class="mi">3</span>
</span><span id="SchnapsenTrickScorer.declare_winner-1458"><a href="#SchnapsenTrickScorer.declare_winner-1458"><span class="linenos">1458</span></a>            <span class="k">elif</span> <span class="n">follower_score</span> <span class="o">&gt;=</span> <span class="mi">33</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer.declare_winner-1459"><a href="#SchnapsenTrickScorer.declare_winner-1459"><span class="linenos">1459</span></a>                <span class="k">return</span> <span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="p">,</span> <span class="mi">1</span>
</span><span id="SchnapsenTrickScorer.declare_winner-1460"><a href="#SchnapsenTrickScorer.declare_winner-1460"><span class="linenos">1460</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer.declare_winner-1461"><a href="#SchnapsenTrickScorer.declare_winner-1461"><span class="linenos">1461</span></a>                <span class="c1"># second case in explaination above, 0 &lt; score &lt; 33</span>
</span><span id="SchnapsenTrickScorer.declare_winner-1462"><a href="#SchnapsenTrickScorer.declare_winner-1462"><span class="linenos">1462</span></a>                <span class="k">assert</span> <span class="n">follower_score</span> <span class="o">&lt;</span> <span class="mi">66</span>
</span><span id="SchnapsenTrickScorer.declare_winner-1463"><a href="#SchnapsenTrickScorer.declare_winner-1463"><span class="linenos">1463</span></a>                <span class="k">return</span> <span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="p">,</span> <span class="mi">2</span>
</span><span id="SchnapsenTrickScorer.declare_winner-1464"><a href="#SchnapsenTrickScorer.declare_winner-1464"><span class="linenos">1464</span></a>        <span class="k">elif</span> <span class="n">game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">direct_points</span> <span class="o">&gt;=</span> <span class="mi">66</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer.declare_winner-1465"><a href="#SchnapsenTrickScorer.declare_winner-1465"><span class="linenos">1465</span></a>            <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;Would declare the follower winner, but this should never happen in the current implementation&quot;</span><span class="p">)</span>
</span><span id="SchnapsenTrickScorer.declare_winner-1466"><a href="#SchnapsenTrickScorer.declare_winner-1466"><span class="linenos">1466</span></a>        <span class="k">elif</span> <span class="n">game_state</span><span class="o">.</span><span class="n">are_all_cards_played</span><span class="p">():</span>
</span><span id="SchnapsenTrickScorer.declare_winner-1467"><a href="#SchnapsenTrickScorer.declare_winner-1467"><span class="linenos">1467</span></a>            <span class="k">return</span> <span class="n">game_state</span><span class="o">.</span><span class="n">leader</span><span class="p">,</span> <span class="mi">1</span>
</span><span id="SchnapsenTrickScorer.declare_winner-1468"><a href="#SchnapsenTrickScorer.declare_winner-1468"><span class="linenos">1468</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="SchnapsenTrickScorer.declare_winner-1469"><a href="#SchnapsenTrickScorer.declare_winner-1469"><span class="linenos">1469</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>Declaring a winner uses the logic from <a href="https://www.pagat.com/marriage/schnaps.html#marriages">https://www.pagat.com/marriage/schnaps.html#marriages</a> , but simplified, because we do not have closing of the Talon and no need to guess the scores.
The following text adapted accordingly from that website.</p>

<p>If a player has 66 or more points, she scores points toward game as follows:</p>

<pre><code>* one game point, if the opponent has made at least 33 points;
* two game points, if the opponent has made fewer than 33 points, but has won at least one trick (opponent is said to be Schneider);
* three game points, if the opponent has won no tricks (opponent is said to be Schwarz).
</code></pre>

<p>If play continued to the very last trick with the talon exhausted, the player who takes the last trick wins the hand, scoring one game point, irrespective of the number of card points the players have taken.</p>
</div>


                            </div>
                </section>
                <section id="GamePlayEngine">
                            <input id="GamePlayEngine-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass</div>

    <span class="def">class</span>
    <span class="name">GamePlayEngine</span>:

                <label class="view-source-button" for="GamePlayEngine-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GamePlayEngine"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GamePlayEngine-1472"><a href="#GamePlayEngine-1472"><span class="linenos">1472</span></a><span class="nd">@dataclass</span>
</span><span id="GamePlayEngine-1473"><a href="#GamePlayEngine-1473"><span class="linenos">1473</span></a><span class="k">class</span> <span class="nc">GamePlayEngine</span><span class="p">:</span>
</span><span id="GamePlayEngine-1474"><a href="#GamePlayEngine-1474"><span class="linenos">1474</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GamePlayEngine-1475"><a href="#GamePlayEngine-1475"><span class="linenos">1475</span></a><span class="sd">    The GamePlayengine combines the different aspects of the game into an engine that can execute games.</span>
</span><span id="GamePlayEngine-1476"><a href="#GamePlayEngine-1476"><span class="linenos">1476</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="GamePlayEngine-1477"><a href="#GamePlayEngine-1477"><span class="linenos">1477</span></a>    <span class="n">deck_generator</span><span class="p">:</span> <span class="n">DeckGenerator</span>
</span><span id="GamePlayEngine-1478"><a href="#GamePlayEngine-1478"><span class="linenos">1478</span></a>    <span class="n">hand_generator</span><span class="p">:</span> <span class="n">HandGenerator</span>
</span><span id="GamePlayEngine-1479"><a href="#GamePlayEngine-1479"><span class="linenos">1479</span></a>    <span class="n">trick_implementer</span><span class="p">:</span> <span class="n">TrickImplementer</span>
</span><span id="GamePlayEngine-1480"><a href="#GamePlayEngine-1480"><span class="linenos">1480</span></a>    <span class="n">move_requester</span><span class="p">:</span> <span class="n">MoveRequester</span>
</span><span id="GamePlayEngine-1481"><a href="#GamePlayEngine-1481"><span class="linenos">1481</span></a>    <span class="n">move_validator</span><span class="p">:</span> <span class="n">MoveValidator</span>
</span><span id="GamePlayEngine-1482"><a href="#GamePlayEngine-1482"><span class="linenos">1482</span></a>    <span class="n">trick_scorer</span><span class="p">:</span> <span class="n">TrickScorer</span>
</span><span id="GamePlayEngine-1483"><a href="#GamePlayEngine-1483"><span class="linenos">1483</span></a>
</span><span id="GamePlayEngine-1484"><a href="#GamePlayEngine-1484"><span class="linenos">1484</span></a>    <span class="k">def</span> <span class="nf">play_game</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bot1</span><span class="p">:</span> <span class="n">Bot</span><span class="p">,</span> <span class="n">bot2</span><span class="p">:</span> <span class="n">Bot</span><span class="p">,</span> <span class="n">rng</span><span class="p">:</span> <span class="n">Random</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Bot</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">Score</span><span class="p">]:</span>
</span><span id="GamePlayEngine-1485"><a href="#GamePlayEngine-1485"><span class="linenos">1485</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GamePlayEngine-1486"><a href="#GamePlayEngine-1486"><span class="linenos">1486</span></a><span class="sd">        Play a game between bot1 and bot2, using the rng to create the game.</span>
</span><span id="GamePlayEngine-1487"><a href="#GamePlayEngine-1487"><span class="linenos">1487</span></a>
</span><span id="GamePlayEngine-1488"><a href="#GamePlayEngine-1488"><span class="linenos">1488</span></a><span class="sd">        :param bot1: The first bot playing the game. This bot will be the leader for the first trick.</span>
</span><span id="GamePlayEngine-1489"><a href="#GamePlayEngine-1489"><span class="linenos">1489</span></a><span class="sd">        :param bot2: The second bot playing the game. This bot will be the follower for the first trick.</span>
</span><span id="GamePlayEngine-1490"><a href="#GamePlayEngine-1490"><span class="linenos">1490</span></a><span class="sd">        :param rng: The random number generator used to shuffle the deck.</span>
</span><span id="GamePlayEngine-1491"><a href="#GamePlayEngine-1491"><span class="linenos">1491</span></a>
</span><span id="GamePlayEngine-1492"><a href="#GamePlayEngine-1492"><span class="linenos">1492</span></a><span class="sd">        :returns: A tuple with the bot which won the game, the number of points obtained from this game and the score attained.</span>
</span><span id="GamePlayEngine-1493"><a href="#GamePlayEngine-1493"><span class="linenos">1493</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GamePlayEngine-1494"><a href="#GamePlayEngine-1494"><span class="linenos">1494</span></a>        <span class="n">cards</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deck_generator</span><span class="o">.</span><span class="n">get_initial_deck</span><span class="p">()</span>
</span><span id="GamePlayEngine-1495"><a href="#GamePlayEngine-1495"><span class="linenos">1495</span></a>        <span class="n">shuffled</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deck_generator</span><span class="o">.</span><span class="n">shuffle_deck</span><span class="p">(</span><span class="n">cards</span><span class="p">,</span> <span class="n">rng</span><span class="p">)</span>
</span><span id="GamePlayEngine-1496"><a href="#GamePlayEngine-1496"><span class="linenos">1496</span></a>        <span class="n">hand1</span><span class="p">,</span> <span class="n">hand2</span><span class="p">,</span> <span class="n">talon</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hand_generator</span><span class="o">.</span><span class="n">generateHands</span><span class="p">(</span><span class="n">shuffled</span><span class="p">)</span>
</span><span id="GamePlayEngine-1497"><a href="#GamePlayEngine-1497"><span class="linenos">1497</span></a>
</span><span id="GamePlayEngine-1498"><a href="#GamePlayEngine-1498"><span class="linenos">1498</span></a>        <span class="n">leader_state</span> <span class="o">=</span> <span class="n">BotState</span><span class="p">(</span><span class="n">implementation</span><span class="o">=</span><span class="n">bot1</span><span class="p">,</span> <span class="n">hand</span><span class="o">=</span><span class="n">hand1</span><span class="p">)</span>
</span><span id="GamePlayEngine-1499"><a href="#GamePlayEngine-1499"><span class="linenos">1499</span></a>        <span class="n">follower_state</span> <span class="o">=</span> <span class="n">BotState</span><span class="p">(</span><span class="n">implementation</span><span class="o">=</span><span class="n">bot2</span><span class="p">,</span> <span class="n">hand</span><span class="o">=</span><span class="n">hand2</span><span class="p">)</span>
</span><span id="GamePlayEngine-1500"><a href="#GamePlayEngine-1500"><span class="linenos">1500</span></a>
</span><span id="GamePlayEngine-1501"><a href="#GamePlayEngine-1501"><span class="linenos">1501</span></a>        <span class="n">game_state</span> <span class="o">=</span> <span class="n">GameState</span><span class="p">(</span>
</span><span id="GamePlayEngine-1502"><a href="#GamePlayEngine-1502"><span class="linenos">1502</span></a>            <span class="n">leader</span><span class="o">=</span><span class="n">leader_state</span><span class="p">,</span>
</span><span id="GamePlayEngine-1503"><a href="#GamePlayEngine-1503"><span class="linenos">1503</span></a>            <span class="n">follower</span><span class="o">=</span><span class="n">follower_state</span><span class="p">,</span>
</span><span id="GamePlayEngine-1504"><a href="#GamePlayEngine-1504"><span class="linenos">1504</span></a>            <span class="n">talon</span><span class="o">=</span><span class="n">talon</span><span class="p">,</span>
</span><span id="GamePlayEngine-1505"><a href="#GamePlayEngine-1505"><span class="linenos">1505</span></a>            <span class="n">previous</span><span class="o">=</span><span class="kc">None</span>
</span><span id="GamePlayEngine-1506"><a href="#GamePlayEngine-1506"><span class="linenos">1506</span></a>        <span class="p">)</span>
</span><span id="GamePlayEngine-1507"><a href="#GamePlayEngine-1507"><span class="linenos">1507</span></a>        <span class="n">winner</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">score</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">play_game_from_state</span><span class="p">(</span><span class="n">game_state</span><span class="o">=</span><span class="n">game_state</span><span class="p">,</span> <span class="n">leader_move</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="GamePlayEngine-1508"><a href="#GamePlayEngine-1508"><span class="linenos">1508</span></a>        <span class="k">return</span> <span class="n">winner</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">score</span>
</span><span id="GamePlayEngine-1509"><a href="#GamePlayEngine-1509"><span class="linenos">1509</span></a>
</span><span id="GamePlayEngine-1510"><a href="#GamePlayEngine-1510"><span class="linenos">1510</span></a>    <span class="k">def</span> <span class="nf">play_game_from_state_with_new_bots</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">new_leader</span><span class="p">:</span> <span class="n">Bot</span><span class="p">,</span> <span class="n">new_follower</span><span class="p">:</span> <span class="n">Bot</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Bot</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">Score</span><span class="p">]:</span>
</span><span id="GamePlayEngine-1511"><a href="#GamePlayEngine-1511"><span class="linenos">1511</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GamePlayEngine-1512"><a href="#GamePlayEngine-1512"><span class="linenos">1512</span></a><span class="sd">        Continue a game  which might have started before with other bots, with new bots.</span>
</span><span id="GamePlayEngine-1513"><a href="#GamePlayEngine-1513"><span class="linenos">1513</span></a><span class="sd">        The new bots are new_leader and new_follower.</span>
</span><span id="GamePlayEngine-1514"><a href="#GamePlayEngine-1514"><span class="linenos">1514</span></a><span class="sd">        The leader move is an optional paramter which can be provided to force this first move from the leader.</span>
</span><span id="GamePlayEngine-1515"><a href="#GamePlayEngine-1515"><span class="linenos">1515</span></a>
</span><span id="GamePlayEngine-1516"><a href="#GamePlayEngine-1516"><span class="linenos">1516</span></a><span class="sd">        :param game_state: The state of the game to start from</span>
</span><span id="GamePlayEngine-1517"><a href="#GamePlayEngine-1517"><span class="linenos">1517</span></a><span class="sd">        :param new_leader: The bot which will take the leader role in the game.</span>
</span><span id="GamePlayEngine-1518"><a href="#GamePlayEngine-1518"><span class="linenos">1518</span></a><span class="sd">        :param new_follower: The bot which will take the follower in the game.</span>
</span><span id="GamePlayEngine-1519"><a href="#GamePlayEngine-1519"><span class="linenos">1519</span></a><span class="sd">        :param leader_move: if provided, the leader will be forced to play this move as its first move.</span>
</span><span id="GamePlayEngine-1520"><a href="#GamePlayEngine-1520"><span class="linenos">1520</span></a>
</span><span id="GamePlayEngine-1521"><a href="#GamePlayEngine-1521"><span class="linenos">1521</span></a><span class="sd">        :returns: A tuple with the bot which won the game, the number of points obtained from this game and the score attained.</span>
</span><span id="GamePlayEngine-1522"><a href="#GamePlayEngine-1522"><span class="linenos">1522</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GamePlayEngine-1523"><a href="#GamePlayEngine-1523"><span class="linenos">1523</span></a>
</span><span id="GamePlayEngine-1524"><a href="#GamePlayEngine-1524"><span class="linenos">1524</span></a>        <span class="n">game_state_copy</span> <span class="o">=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">copy_with_other_bots</span><span class="p">(</span><span class="n">new_leader</span><span class="o">=</span><span class="n">new_leader</span><span class="p">,</span> <span class="n">new_follower</span><span class="o">=</span><span class="n">new_follower</span><span class="p">)</span>
</span><span id="GamePlayEngine-1525"><a href="#GamePlayEngine-1525"><span class="linenos">1525</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">play_game_from_state</span><span class="p">(</span><span class="n">game_state_copy</span><span class="p">,</span> <span class="n">leader_move</span><span class="o">=</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="GamePlayEngine-1526"><a href="#GamePlayEngine-1526"><span class="linenos">1526</span></a>
</span><span id="GamePlayEngine-1527"><a href="#GamePlayEngine-1527"><span class="linenos">1527</span></a>    <span class="k">def</span> <span class="nf">play_game_from_state</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Bot</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">Score</span><span class="p">]:</span>
</span><span id="GamePlayEngine-1528"><a href="#GamePlayEngine-1528"><span class="linenos">1528</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GamePlayEngine-1529"><a href="#GamePlayEngine-1529"><span class="linenos">1529</span></a><span class="sd">        Continue a game  which might have been started before.</span>
</span><span id="GamePlayEngine-1530"><a href="#GamePlayEngine-1530"><span class="linenos">1530</span></a><span class="sd">        The leader move is an optional paramter which can be provided to force this first move from the leader.</span>
</span><span id="GamePlayEngine-1531"><a href="#GamePlayEngine-1531"><span class="linenos">1531</span></a>
</span><span id="GamePlayEngine-1532"><a href="#GamePlayEngine-1532"><span class="linenos">1532</span></a><span class="sd">        :param game_state: The state of the game to start from</span>
</span><span id="GamePlayEngine-1533"><a href="#GamePlayEngine-1533"><span class="linenos">1533</span></a><span class="sd">        :param leader_move: if provided, the leader will be forced to play this move as its first move.</span>
</span><span id="GamePlayEngine-1534"><a href="#GamePlayEngine-1534"><span class="linenos">1534</span></a>
</span><span id="GamePlayEngine-1535"><a href="#GamePlayEngine-1535"><span class="linenos">1535</span></a><span class="sd">        :returns: A tuple with the bot which won the game, the number of points obtained from this game and the score attained.</span>
</span><span id="GamePlayEngine-1536"><a href="#GamePlayEngine-1536"><span class="linenos">1536</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GamePlayEngine-1537"><a href="#GamePlayEngine-1537"><span class="linenos">1537</span></a>        <span class="n">winner</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">BotState</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GamePlayEngine-1538"><a href="#GamePlayEngine-1538"><span class="linenos">1538</span></a>        <span class="n">points</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="GamePlayEngine-1539"><a href="#GamePlayEngine-1539"><span class="linenos">1539</span></a>        <span class="k">while</span> <span class="ow">not</span> <span class="n">winner</span><span class="p">:</span>
</span><span id="GamePlayEngine-1540"><a href="#GamePlayEngine-1540"><span class="linenos">1540</span></a>            <span class="k">if</span> <span class="n">leader_move</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GamePlayEngine-1541"><a href="#GamePlayEngine-1541"><span class="linenos">1541</span></a>                <span class="c1"># we continues from a game where the leading bot already did a move, we immitate that</span>
</span><span id="GamePlayEngine-1542"><a href="#GamePlayEngine-1542"><span class="linenos">1542</span></a>                <span class="n">game_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trick_implementer</span><span class="o">.</span><span class="n">play_trick_with_fixed_leader_move</span><span class="p">(</span><span class="n">game_engine</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_state</span><span class="o">=</span><span class="n">game_state</span><span class="p">,</span> <span class="n">leader_move</span><span class="o">=</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="GamePlayEngine-1543"><a href="#GamePlayEngine-1543"><span class="linenos">1543</span></a>                <span class="n">leader_move</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GamePlayEngine-1544"><a href="#GamePlayEngine-1544"><span class="linenos">1544</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GamePlayEngine-1545"><a href="#GamePlayEngine-1545"><span class="linenos">1545</span></a>                <span class="n">game_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trick_implementer</span><span class="o">.</span><span class="n">play_trick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_state</span><span class="p">)</span>
</span><span id="GamePlayEngine-1546"><a href="#GamePlayEngine-1546"><span class="linenos">1546</span></a>            <span class="n">winner</span><span class="p">,</span> <span class="n">points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trick_scorer</span><span class="o">.</span><span class="n">declare_winner</span><span class="p">(</span><span class="n">game_state</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GamePlayEngine-1547"><a href="#GamePlayEngine-1547"><span class="linenos">1547</span></a>
</span><span id="GamePlayEngine-1548"><a href="#GamePlayEngine-1548"><span class="linenos">1548</span></a>        <span class="n">winner_state</span> <span class="o">=</span> <span class="n">WinnerPerspective</span><span class="p">(</span><span class="n">game_state</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="GamePlayEngine-1549"><a href="#GamePlayEngine-1549"><span class="linenos">1549</span></a>        <span class="n">winner</span><span class="o">.</span><span class="n">implementation</span><span class="o">.</span><span class="n">notify_game_end</span><span class="p">(</span><span class="n">won</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="n">winner_state</span><span class="p">)</span>
</span><span id="GamePlayEngine-1550"><a href="#GamePlayEngine-1550"><span class="linenos">1550</span></a>
</span><span id="GamePlayEngine-1551"><a href="#GamePlayEngine-1551"><span class="linenos">1551</span></a>        <span class="n">loser_state</span> <span class="o">=</span> <span class="n">LoserPerspective</span><span class="p">(</span><span class="n">game_state</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="GamePlayEngine-1552"><a href="#GamePlayEngine-1552"><span class="linenos">1552</span></a>        <span class="n">game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">implementation</span><span class="o">.</span><span class="n">notify_game_end</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="n">loser_state</span><span class="p">)</span>
</span><span id="GamePlayEngine-1553"><a href="#GamePlayEngine-1553"><span class="linenos">1553</span></a>
</span><span id="GamePlayEngine-1554"><a href="#GamePlayEngine-1554"><span class="linenos">1554</span></a>        <span class="k">return</span> <span class="n">winner</span><span class="o">.</span><span class="n">implementation</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">winner</span><span class="o">.</span><span class="n">score</span>
</span><span id="GamePlayEngine-1555"><a href="#GamePlayEngine-1555"><span class="linenos">1555</span></a>
</span><span id="GamePlayEngine-1556"><a href="#GamePlayEngine-1556"><span class="linenos">1556</span></a>    <span class="k">def</span> <span class="nf">play_at_most_n_tricks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">new_leader</span><span class="p">:</span> <span class="n">Bot</span><span class="p">,</span> <span class="n">new_follower</span><span class="p">:</span> <span class="n">Bot</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">GameState</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
</span><span id="GamePlayEngine-1557"><a href="#GamePlayEngine-1557"><span class="linenos">1557</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GamePlayEngine-1558"><a href="#GamePlayEngine-1558"><span class="linenos">1558</span></a><span class="sd">        Plays up to n tricks (including the one started by the leader, if provided) on a game which might have started before.</span>
</span><span id="GamePlayEngine-1559"><a href="#GamePlayEngine-1559"><span class="linenos">1559</span></a><span class="sd">        The number of tricks will be smaller than n in case the game ends before n tricks are played.</span>
</span><span id="GamePlayEngine-1560"><a href="#GamePlayEngine-1560"><span class="linenos">1560</span></a><span class="sd">        The new bots are new_leader and new_follower.</span>
</span><span id="GamePlayEngine-1561"><a href="#GamePlayEngine-1561"><span class="linenos">1561</span></a>
</span><span id="GamePlayEngine-1562"><a href="#GamePlayEngine-1562"><span class="linenos">1562</span></a><span class="sd">        This method does not make changes to the provided game_state.</span>
</span><span id="GamePlayEngine-1563"><a href="#GamePlayEngine-1563"><span class="linenos">1563</span></a>
</span><span id="GamePlayEngine-1564"><a href="#GamePlayEngine-1564"><span class="linenos">1564</span></a><span class="sd">        :param game_state: The state of the game to start from</span>
</span><span id="GamePlayEngine-1565"><a href="#GamePlayEngine-1565"><span class="linenos">1565</span></a><span class="sd">        :param new_leader: The bot which will take the leader role in the game.</span>
</span><span id="GamePlayEngine-1566"><a href="#GamePlayEngine-1566"><span class="linenos">1566</span></a><span class="sd">        :param new_follower: The bot which will take the follower in the game.</span>
</span><span id="GamePlayEngine-1567"><a href="#GamePlayEngine-1567"><span class="linenos">1567</span></a>
</span><span id="GamePlayEngine-1568"><a href="#GamePlayEngine-1568"><span class="linenos">1568</span></a><span class="sd">        :returns: The GameState reached and the number of steps actually taken.</span>
</span><span id="GamePlayEngine-1569"><a href="#GamePlayEngine-1569"><span class="linenos">1569</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GamePlayEngine-1570"><a href="#GamePlayEngine-1570"><span class="linenos">1570</span></a>        <span class="k">assert</span> <span class="n">n</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Cannot play less than 0 rounds&quot;</span>
</span><span id="GamePlayEngine-1571"><a href="#GamePlayEngine-1571"><span class="linenos">1571</span></a>        <span class="n">game_state_copy</span> <span class="o">=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">copy_with_other_bots</span><span class="p">(</span><span class="n">new_leader</span><span class="o">=</span><span class="n">new_leader</span><span class="p">,</span> <span class="n">new_follower</span><span class="o">=</span><span class="n">new_follower</span><span class="p">)</span>
</span><span id="GamePlayEngine-1572"><a href="#GamePlayEngine-1572"><span class="linenos">1572</span></a>
</span><span id="GamePlayEngine-1573"><a href="#GamePlayEngine-1573"><span class="linenos">1573</span></a>        <span class="n">winner</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">BotState</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GamePlayEngine-1574"><a href="#GamePlayEngine-1574"><span class="linenos">1574</span></a>        <span class="n">rounds_played</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="GamePlayEngine-1575"><a href="#GamePlayEngine-1575"><span class="linenos">1575</span></a>        <span class="k">while</span> <span class="ow">not</span> <span class="n">winner</span><span class="p">:</span>
</span><span id="GamePlayEngine-1576"><a href="#GamePlayEngine-1576"><span class="linenos">1576</span></a>            <span class="k">if</span> <span class="n">rounds_played</span> <span class="o">==</span> <span class="n">n</span><span class="p">:</span>
</span><span id="GamePlayEngine-1577"><a href="#GamePlayEngine-1577"><span class="linenos">1577</span></a>                <span class="k">break</span>
</span><span id="GamePlayEngine-1578"><a href="#GamePlayEngine-1578"><span class="linenos">1578</span></a>            <span class="n">game_state_copy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trick_implementer</span><span class="o">.</span><span class="n">play_trick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_state_copy</span><span class="p">)</span>
</span><span id="GamePlayEngine-1579"><a href="#GamePlayEngine-1579"><span class="linenos">1579</span></a>            <span class="n">winner</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trick_scorer</span><span class="o">.</span><span class="n">declare_winner</span><span class="p">(</span><span class="n">game_state_copy</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GamePlayEngine-1580"><a href="#GamePlayEngine-1580"><span class="linenos">1580</span></a>            <span class="n">rounds_played</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="GamePlayEngine-1581"><a href="#GamePlayEngine-1581"><span class="linenos">1581</span></a>        <span class="k">if</span> <span class="n">winner</span><span class="p">:</span>
</span><span id="GamePlayEngine-1582"><a href="#GamePlayEngine-1582"><span class="linenos">1582</span></a>            <span class="n">winner_state</span> <span class="o">=</span> <span class="n">WinnerPerspective</span><span class="p">(</span><span class="n">game_state_copy</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="GamePlayEngine-1583"><a href="#GamePlayEngine-1583"><span class="linenos">1583</span></a>            <span class="n">winner</span><span class="o">.</span><span class="n">implementation</span><span class="o">.</span><span class="n">notify_game_end</span><span class="p">(</span><span class="n">won</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="n">winner_state</span><span class="p">)</span>
</span><span id="GamePlayEngine-1584"><a href="#GamePlayEngine-1584"><span class="linenos">1584</span></a>
</span><span id="GamePlayEngine-1585"><a href="#GamePlayEngine-1585"><span class="linenos">1585</span></a>            <span class="n">loser_state</span> <span class="o">=</span> <span class="n">LoserPerspective</span><span class="p">(</span><span class="n">game_state_copy</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="GamePlayEngine-1586"><a href="#GamePlayEngine-1586"><span class="linenos">1586</span></a>            <span class="n">game_state_copy</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">implementation</span><span class="o">.</span><span class="n">notify_game_end</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="n">loser_state</span><span class="p">)</span>
</span><span id="GamePlayEngine-1587"><a href="#GamePlayEngine-1587"><span class="linenos">1587</span></a>
</span><span id="GamePlayEngine-1588"><a href="#GamePlayEngine-1588"><span class="linenos">1588</span></a>        <span class="k">return</span> <span class="n">game_state_copy</span><span class="p">,</span> <span class="n">rounds_played</span>
</span><span id="GamePlayEngine-1589"><a href="#GamePlayEngine-1589"><span class="linenos">1589</span></a>
</span><span id="GamePlayEngine-1590"><a href="#GamePlayEngine-1590"><span class="linenos">1590</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GamePlayEngine-1591"><a href="#GamePlayEngine-1591"><span class="linenos">1591</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;GamePlayEngine(deck_generator=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">deck_generator</span><span class="si">}</span><span class="s2">, &quot;</span>\
</span><span id="GamePlayEngine-1592"><a href="#GamePlayEngine-1592"><span class="linenos">1592</span></a>               <span class="sa">f</span><span class="s2">&quot;hand_generator=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hand_generator</span><span class="si">}</span><span class="s2">, &quot;</span>\
</span><span id="GamePlayEngine-1593"><a href="#GamePlayEngine-1593"><span class="linenos">1593</span></a>               <span class="sa">f</span><span class="s2">&quot;trick_implementer=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">trick_implementer</span><span class="si">}</span><span class="s2">, &quot;</span>\
</span><span id="GamePlayEngine-1594"><a href="#GamePlayEngine-1594"><span class="linenos">1594</span></a>               <span class="sa">f</span><span class="s2">&quot;move_requester=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">move_requester</span><span class="si">}</span><span class="s2">, &quot;</span>\
</span><span id="GamePlayEngine-1595"><a href="#GamePlayEngine-1595"><span class="linenos">1595</span></a>               <span class="sa">f</span><span class="s2">&quot;move_validator=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">move_validator</span><span class="si">}</span><span class="s2">, &quot;</span>\
</span><span id="GamePlayEngine-1596"><a href="#GamePlayEngine-1596"><span class="linenos">1596</span></a>               <span class="sa">f</span><span class="s2">&quot;trick_scorer=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">trick_scorer</span><span class="si">}</span><span class="s2">)&quot;</span>
</span></pre></div>


            <div class="docstring"><p>The GamePlayengine combines the different aspects of the game into an engine that can execute games.</p>
</div>


                            <div id="GamePlayEngine.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">GamePlayEngine</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">deck_generator</span><span class="p">:</span> <span class="n"><a href="#DeckGenerator">schnapsen.game.DeckGenerator</a></span>,</span><span class="param">	<span class="n">hand_generator</span><span class="p">:</span> <span class="n"><a href="#HandGenerator">schnapsen.game.HandGenerator</a></span>,</span><span class="param">	<span class="n">trick_implementer</span><span class="p">:</span> <span class="n"><a href="#TrickImplementer">schnapsen.game.TrickImplementer</a></span>,</span><span class="param">	<span class="n">move_requester</span><span class="p">:</span> <span class="n"><a href="#MoveRequester">schnapsen.game.MoveRequester</a></span>,</span><span class="param">	<span class="n">move_validator</span><span class="p">:</span> <span class="n"><a href="#MoveValidator">schnapsen.game.MoveValidator</a></span>,</span><span class="param">	<span class="n">trick_scorer</span><span class="p">:</span> <span class="n"><a href="#TrickScorer">schnapsen.game.TrickScorer</a></span></span>)</span>

        
    </div>
    <a class="headerlink" href="#GamePlayEngine.__init__"></a>
    
    

                            </div>
                            <div id="GamePlayEngine.play_game" class="classattr">
                                        <input id="GamePlayEngine.play_game-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">play_game</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">bot1</span><span class="p">:</span> <span class="n"><a href="#Bot">schnapsen.game.Bot</a></span>,</span><span class="param">	<span class="n">bot2</span><span class="p">:</span> <span class="n"><a href="#Bot">schnapsen.game.Bot</a></span>,</span><span class="param">	<span class="n">rng</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">Random</span></span><span class="return-annotation">) -> <span class="n">Tuple</span><span class="p">[</span><span class="n"><a href="#Bot">schnapsen.game.Bot</a></span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n"><a href="#Score">schnapsen.game.Score</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="GamePlayEngine.play_game-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GamePlayEngine.play_game"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GamePlayEngine.play_game-1484"><a href="#GamePlayEngine.play_game-1484"><span class="linenos">1484</span></a>    <span class="k">def</span> <span class="nf">play_game</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bot1</span><span class="p">:</span> <span class="n">Bot</span><span class="p">,</span> <span class="n">bot2</span><span class="p">:</span> <span class="n">Bot</span><span class="p">,</span> <span class="n">rng</span><span class="p">:</span> <span class="n">Random</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Bot</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">Score</span><span class="p">]:</span>
</span><span id="GamePlayEngine.play_game-1485"><a href="#GamePlayEngine.play_game-1485"><span class="linenos">1485</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GamePlayEngine.play_game-1486"><a href="#GamePlayEngine.play_game-1486"><span class="linenos">1486</span></a><span class="sd">        Play a game between bot1 and bot2, using the rng to create the game.</span>
</span><span id="GamePlayEngine.play_game-1487"><a href="#GamePlayEngine.play_game-1487"><span class="linenos">1487</span></a>
</span><span id="GamePlayEngine.play_game-1488"><a href="#GamePlayEngine.play_game-1488"><span class="linenos">1488</span></a><span class="sd">        :param bot1: The first bot playing the game. This bot will be the leader for the first trick.</span>
</span><span id="GamePlayEngine.play_game-1489"><a href="#GamePlayEngine.play_game-1489"><span class="linenos">1489</span></a><span class="sd">        :param bot2: The second bot playing the game. This bot will be the follower for the first trick.</span>
</span><span id="GamePlayEngine.play_game-1490"><a href="#GamePlayEngine.play_game-1490"><span class="linenos">1490</span></a><span class="sd">        :param rng: The random number generator used to shuffle the deck.</span>
</span><span id="GamePlayEngine.play_game-1491"><a href="#GamePlayEngine.play_game-1491"><span class="linenos">1491</span></a>
</span><span id="GamePlayEngine.play_game-1492"><a href="#GamePlayEngine.play_game-1492"><span class="linenos">1492</span></a><span class="sd">        :returns: A tuple with the bot which won the game, the number of points obtained from this game and the score attained.</span>
</span><span id="GamePlayEngine.play_game-1493"><a href="#GamePlayEngine.play_game-1493"><span class="linenos">1493</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GamePlayEngine.play_game-1494"><a href="#GamePlayEngine.play_game-1494"><span class="linenos">1494</span></a>        <span class="n">cards</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deck_generator</span><span class="o">.</span><span class="n">get_initial_deck</span><span class="p">()</span>
</span><span id="GamePlayEngine.play_game-1495"><a href="#GamePlayEngine.play_game-1495"><span class="linenos">1495</span></a>        <span class="n">shuffled</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deck_generator</span><span class="o">.</span><span class="n">shuffle_deck</span><span class="p">(</span><span class="n">cards</span><span class="p">,</span> <span class="n">rng</span><span class="p">)</span>
</span><span id="GamePlayEngine.play_game-1496"><a href="#GamePlayEngine.play_game-1496"><span class="linenos">1496</span></a>        <span class="n">hand1</span><span class="p">,</span> <span class="n">hand2</span><span class="p">,</span> <span class="n">talon</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hand_generator</span><span class="o">.</span><span class="n">generateHands</span><span class="p">(</span><span class="n">shuffled</span><span class="p">)</span>
</span><span id="GamePlayEngine.play_game-1497"><a href="#GamePlayEngine.play_game-1497"><span class="linenos">1497</span></a>
</span><span id="GamePlayEngine.play_game-1498"><a href="#GamePlayEngine.play_game-1498"><span class="linenos">1498</span></a>        <span class="n">leader_state</span> <span class="o">=</span> <span class="n">BotState</span><span class="p">(</span><span class="n">implementation</span><span class="o">=</span><span class="n">bot1</span><span class="p">,</span> <span class="n">hand</span><span class="o">=</span><span class="n">hand1</span><span class="p">)</span>
</span><span id="GamePlayEngine.play_game-1499"><a href="#GamePlayEngine.play_game-1499"><span class="linenos">1499</span></a>        <span class="n">follower_state</span> <span class="o">=</span> <span class="n">BotState</span><span class="p">(</span><span class="n">implementation</span><span class="o">=</span><span class="n">bot2</span><span class="p">,</span> <span class="n">hand</span><span class="o">=</span><span class="n">hand2</span><span class="p">)</span>
</span><span id="GamePlayEngine.play_game-1500"><a href="#GamePlayEngine.play_game-1500"><span class="linenos">1500</span></a>
</span><span id="GamePlayEngine.play_game-1501"><a href="#GamePlayEngine.play_game-1501"><span class="linenos">1501</span></a>        <span class="n">game_state</span> <span class="o">=</span> <span class="n">GameState</span><span class="p">(</span>
</span><span id="GamePlayEngine.play_game-1502"><a href="#GamePlayEngine.play_game-1502"><span class="linenos">1502</span></a>            <span class="n">leader</span><span class="o">=</span><span class="n">leader_state</span><span class="p">,</span>
</span><span id="GamePlayEngine.play_game-1503"><a href="#GamePlayEngine.play_game-1503"><span class="linenos">1503</span></a>            <span class="n">follower</span><span class="o">=</span><span class="n">follower_state</span><span class="p">,</span>
</span><span id="GamePlayEngine.play_game-1504"><a href="#GamePlayEngine.play_game-1504"><span class="linenos">1504</span></a>            <span class="n">talon</span><span class="o">=</span><span class="n">talon</span><span class="p">,</span>
</span><span id="GamePlayEngine.play_game-1505"><a href="#GamePlayEngine.play_game-1505"><span class="linenos">1505</span></a>            <span class="n">previous</span><span class="o">=</span><span class="kc">None</span>
</span><span id="GamePlayEngine.play_game-1506"><a href="#GamePlayEngine.play_game-1506"><span class="linenos">1506</span></a>        <span class="p">)</span>
</span><span id="GamePlayEngine.play_game-1507"><a href="#GamePlayEngine.play_game-1507"><span class="linenos">1507</span></a>        <span class="n">winner</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">score</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">play_game_from_state</span><span class="p">(</span><span class="n">game_state</span><span class="o">=</span><span class="n">game_state</span><span class="p">,</span> <span class="n">leader_move</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="GamePlayEngine.play_game-1508"><a href="#GamePlayEngine.play_game-1508"><span class="linenos">1508</span></a>        <span class="k">return</span> <span class="n">winner</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">score</span>
</span></pre></div>


            <div class="docstring"><p>Play a game between bot1 and bot2, using the rng to create the game.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>bot1</strong>:  The first bot playing the game. This bot will be the leader for the first trick.</li>
<li><strong>bot2</strong>:  The second bot playing the game. This bot will be the follower for the first trick.</li>
<li><strong>rng</strong>:  The random number generator used to shuffle the deck.</li>
</ul>

<p>:returns: A tuple with the bot which won the game, the number of points obtained from this game and the score attained.</p>
</div>


                            </div>
                            <div id="GamePlayEngine.play_game_from_state_with_new_bots" class="classattr">
                                        <input id="GamePlayEngine.play_game_from_state_with_new_bots-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">play_game_from_state_with_new_bots</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">game_state</span><span class="p">:</span> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span>,</span><span class="param">	<span class="n">new_leader</span><span class="p">:</span> <span class="n"><a href="#Bot">schnapsen.game.Bot</a></span>,</span><span class="param">	<span class="n">new_follower</span><span class="p">:</span> <span class="n"><a href="#Bot">schnapsen.game.Bot</a></span>,</span><span class="param">	<span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="#Move">schnapsen.game.Move</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n">Tuple</span><span class="p">[</span><span class="n"><a href="#Bot">schnapsen.game.Bot</a></span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n"><a href="#Score">schnapsen.game.Score</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="GamePlayEngine.play_game_from_state_with_new_bots-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GamePlayEngine.play_game_from_state_with_new_bots"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GamePlayEngine.play_game_from_state_with_new_bots-1510"><a href="#GamePlayEngine.play_game_from_state_with_new_bots-1510"><span class="linenos">1510</span></a>    <span class="k">def</span> <span class="nf">play_game_from_state_with_new_bots</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">new_leader</span><span class="p">:</span> <span class="n">Bot</span><span class="p">,</span> <span class="n">new_follower</span><span class="p">:</span> <span class="n">Bot</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Bot</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">Score</span><span class="p">]:</span>
</span><span id="GamePlayEngine.play_game_from_state_with_new_bots-1511"><a href="#GamePlayEngine.play_game_from_state_with_new_bots-1511"><span class="linenos">1511</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GamePlayEngine.play_game_from_state_with_new_bots-1512"><a href="#GamePlayEngine.play_game_from_state_with_new_bots-1512"><span class="linenos">1512</span></a><span class="sd">        Continue a game  which might have started before with other bots, with new bots.</span>
</span><span id="GamePlayEngine.play_game_from_state_with_new_bots-1513"><a href="#GamePlayEngine.play_game_from_state_with_new_bots-1513"><span class="linenos">1513</span></a><span class="sd">        The new bots are new_leader and new_follower.</span>
</span><span id="GamePlayEngine.play_game_from_state_with_new_bots-1514"><a href="#GamePlayEngine.play_game_from_state_with_new_bots-1514"><span class="linenos">1514</span></a><span class="sd">        The leader move is an optional paramter which can be provided to force this first move from the leader.</span>
</span><span id="GamePlayEngine.play_game_from_state_with_new_bots-1515"><a href="#GamePlayEngine.play_game_from_state_with_new_bots-1515"><span class="linenos">1515</span></a>
</span><span id="GamePlayEngine.play_game_from_state_with_new_bots-1516"><a href="#GamePlayEngine.play_game_from_state_with_new_bots-1516"><span class="linenos">1516</span></a><span class="sd">        :param game_state: The state of the game to start from</span>
</span><span id="GamePlayEngine.play_game_from_state_with_new_bots-1517"><a href="#GamePlayEngine.play_game_from_state_with_new_bots-1517"><span class="linenos">1517</span></a><span class="sd">        :param new_leader: The bot which will take the leader role in the game.</span>
</span><span id="GamePlayEngine.play_game_from_state_with_new_bots-1518"><a href="#GamePlayEngine.play_game_from_state_with_new_bots-1518"><span class="linenos">1518</span></a><span class="sd">        :param new_follower: The bot which will take the follower in the game.</span>
</span><span id="GamePlayEngine.play_game_from_state_with_new_bots-1519"><a href="#GamePlayEngine.play_game_from_state_with_new_bots-1519"><span class="linenos">1519</span></a><span class="sd">        :param leader_move: if provided, the leader will be forced to play this move as its first move.</span>
</span><span id="GamePlayEngine.play_game_from_state_with_new_bots-1520"><a href="#GamePlayEngine.play_game_from_state_with_new_bots-1520"><span class="linenos">1520</span></a>
</span><span id="GamePlayEngine.play_game_from_state_with_new_bots-1521"><a href="#GamePlayEngine.play_game_from_state_with_new_bots-1521"><span class="linenos">1521</span></a><span class="sd">        :returns: A tuple with the bot which won the game, the number of points obtained from this game and the score attained.</span>
</span><span id="GamePlayEngine.play_game_from_state_with_new_bots-1522"><a href="#GamePlayEngine.play_game_from_state_with_new_bots-1522"><span class="linenos">1522</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GamePlayEngine.play_game_from_state_with_new_bots-1523"><a href="#GamePlayEngine.play_game_from_state_with_new_bots-1523"><span class="linenos">1523</span></a>
</span><span id="GamePlayEngine.play_game_from_state_with_new_bots-1524"><a href="#GamePlayEngine.play_game_from_state_with_new_bots-1524"><span class="linenos">1524</span></a>        <span class="n">game_state_copy</span> <span class="o">=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">copy_with_other_bots</span><span class="p">(</span><span class="n">new_leader</span><span class="o">=</span><span class="n">new_leader</span><span class="p">,</span> <span class="n">new_follower</span><span class="o">=</span><span class="n">new_follower</span><span class="p">)</span>
</span><span id="GamePlayEngine.play_game_from_state_with_new_bots-1525"><a href="#GamePlayEngine.play_game_from_state_with_new_bots-1525"><span class="linenos">1525</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">play_game_from_state</span><span class="p">(</span><span class="n">game_state_copy</span><span class="p">,</span> <span class="n">leader_move</span><span class="o">=</span><span class="n">leader_move</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Continue a game  which might have started before with other bots, with new bots.
The new bots are new_leader and new_follower.
The leader move is an optional paramter which can be provided to force this first move from the leader.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>game_state</strong>:  The state of the game to start from</li>
<li><strong>new_leader</strong>:  The bot which will take the leader role in the game.</li>
<li><strong>new_follower</strong>:  The bot which will take the follower in the game.</li>
<li><strong>leader_move</strong>:  if provided, the leader will be forced to play this move as its first move.</li>
</ul>

<p>:returns: A tuple with the bot which won the game, the number of points obtained from this game and the score attained.</p>
</div>


                            </div>
                            <div id="GamePlayEngine.play_game_from_state" class="classattr">
                                        <input id="GamePlayEngine.play_game_from_state-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">play_game_from_state</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">game_state</span><span class="p">:</span> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span>,</span><span class="param">	<span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="#Move">schnapsen.game.Move</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n">Tuple</span><span class="p">[</span><span class="n"><a href="#Bot">schnapsen.game.Bot</a></span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n"><a href="#Score">schnapsen.game.Score</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="GamePlayEngine.play_game_from_state-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GamePlayEngine.play_game_from_state"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GamePlayEngine.play_game_from_state-1527"><a href="#GamePlayEngine.play_game_from_state-1527"><span class="linenos">1527</span></a>    <span class="k">def</span> <span class="nf">play_game_from_state</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Bot</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">Score</span><span class="p">]:</span>
</span><span id="GamePlayEngine.play_game_from_state-1528"><a href="#GamePlayEngine.play_game_from_state-1528"><span class="linenos">1528</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GamePlayEngine.play_game_from_state-1529"><a href="#GamePlayEngine.play_game_from_state-1529"><span class="linenos">1529</span></a><span class="sd">        Continue a game  which might have been started before.</span>
</span><span id="GamePlayEngine.play_game_from_state-1530"><a href="#GamePlayEngine.play_game_from_state-1530"><span class="linenos">1530</span></a><span class="sd">        The leader move is an optional paramter which can be provided to force this first move from the leader.</span>
</span><span id="GamePlayEngine.play_game_from_state-1531"><a href="#GamePlayEngine.play_game_from_state-1531"><span class="linenos">1531</span></a>
</span><span id="GamePlayEngine.play_game_from_state-1532"><a href="#GamePlayEngine.play_game_from_state-1532"><span class="linenos">1532</span></a><span class="sd">        :param game_state: The state of the game to start from</span>
</span><span id="GamePlayEngine.play_game_from_state-1533"><a href="#GamePlayEngine.play_game_from_state-1533"><span class="linenos">1533</span></a><span class="sd">        :param leader_move: if provided, the leader will be forced to play this move as its first move.</span>
</span><span id="GamePlayEngine.play_game_from_state-1534"><a href="#GamePlayEngine.play_game_from_state-1534"><span class="linenos">1534</span></a>
</span><span id="GamePlayEngine.play_game_from_state-1535"><a href="#GamePlayEngine.play_game_from_state-1535"><span class="linenos">1535</span></a><span class="sd">        :returns: A tuple with the bot which won the game, the number of points obtained from this game and the score attained.</span>
</span><span id="GamePlayEngine.play_game_from_state-1536"><a href="#GamePlayEngine.play_game_from_state-1536"><span class="linenos">1536</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GamePlayEngine.play_game_from_state-1537"><a href="#GamePlayEngine.play_game_from_state-1537"><span class="linenos">1537</span></a>        <span class="n">winner</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">BotState</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GamePlayEngine.play_game_from_state-1538"><a href="#GamePlayEngine.play_game_from_state-1538"><span class="linenos">1538</span></a>        <span class="n">points</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="GamePlayEngine.play_game_from_state-1539"><a href="#GamePlayEngine.play_game_from_state-1539"><span class="linenos">1539</span></a>        <span class="k">while</span> <span class="ow">not</span> <span class="n">winner</span><span class="p">:</span>
</span><span id="GamePlayEngine.play_game_from_state-1540"><a href="#GamePlayEngine.play_game_from_state-1540"><span class="linenos">1540</span></a>            <span class="k">if</span> <span class="n">leader_move</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GamePlayEngine.play_game_from_state-1541"><a href="#GamePlayEngine.play_game_from_state-1541"><span class="linenos">1541</span></a>                <span class="c1"># we continues from a game where the leading bot already did a move, we immitate that</span>
</span><span id="GamePlayEngine.play_game_from_state-1542"><a href="#GamePlayEngine.play_game_from_state-1542"><span class="linenos">1542</span></a>                <span class="n">game_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trick_implementer</span><span class="o">.</span><span class="n">play_trick_with_fixed_leader_move</span><span class="p">(</span><span class="n">game_engine</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_state</span><span class="o">=</span><span class="n">game_state</span><span class="p">,</span> <span class="n">leader_move</span><span class="o">=</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="GamePlayEngine.play_game_from_state-1543"><a href="#GamePlayEngine.play_game_from_state-1543"><span class="linenos">1543</span></a>                <span class="n">leader_move</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GamePlayEngine.play_game_from_state-1544"><a href="#GamePlayEngine.play_game_from_state-1544"><span class="linenos">1544</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GamePlayEngine.play_game_from_state-1545"><a href="#GamePlayEngine.play_game_from_state-1545"><span class="linenos">1545</span></a>                <span class="n">game_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trick_implementer</span><span class="o">.</span><span class="n">play_trick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_state</span><span class="p">)</span>
</span><span id="GamePlayEngine.play_game_from_state-1546"><a href="#GamePlayEngine.play_game_from_state-1546"><span class="linenos">1546</span></a>            <span class="n">winner</span><span class="p">,</span> <span class="n">points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trick_scorer</span><span class="o">.</span><span class="n">declare_winner</span><span class="p">(</span><span class="n">game_state</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GamePlayEngine.play_game_from_state-1547"><a href="#GamePlayEngine.play_game_from_state-1547"><span class="linenos">1547</span></a>
</span><span id="GamePlayEngine.play_game_from_state-1548"><a href="#GamePlayEngine.play_game_from_state-1548"><span class="linenos">1548</span></a>        <span class="n">winner_state</span> <span class="o">=</span> <span class="n">WinnerPerspective</span><span class="p">(</span><span class="n">game_state</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="GamePlayEngine.play_game_from_state-1549"><a href="#GamePlayEngine.play_game_from_state-1549"><span class="linenos">1549</span></a>        <span class="n">winner</span><span class="o">.</span><span class="n">implementation</span><span class="o">.</span><span class="n">notify_game_end</span><span class="p">(</span><span class="n">won</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="n">winner_state</span><span class="p">)</span>
</span><span id="GamePlayEngine.play_game_from_state-1550"><a href="#GamePlayEngine.play_game_from_state-1550"><span class="linenos">1550</span></a>
</span><span id="GamePlayEngine.play_game_from_state-1551"><a href="#GamePlayEngine.play_game_from_state-1551"><span class="linenos">1551</span></a>        <span class="n">loser_state</span> <span class="o">=</span> <span class="n">LoserPerspective</span><span class="p">(</span><span class="n">game_state</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="GamePlayEngine.play_game_from_state-1552"><a href="#GamePlayEngine.play_game_from_state-1552"><span class="linenos">1552</span></a>        <span class="n">game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">implementation</span><span class="o">.</span><span class="n">notify_game_end</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="n">loser_state</span><span class="p">)</span>
</span><span id="GamePlayEngine.play_game_from_state-1553"><a href="#GamePlayEngine.play_game_from_state-1553"><span class="linenos">1553</span></a>
</span><span id="GamePlayEngine.play_game_from_state-1554"><a href="#GamePlayEngine.play_game_from_state-1554"><span class="linenos">1554</span></a>        <span class="k">return</span> <span class="n">winner</span><span class="o">.</span><span class="n">implementation</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">winner</span><span class="o">.</span><span class="n">score</span>
</span></pre></div>


            <div class="docstring"><p>Continue a game  which might have been started before.
The leader move is an optional paramter which can be provided to force this first move from the leader.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>game_state</strong>:  The state of the game to start from</li>
<li><strong>leader_move</strong>:  if provided, the leader will be forced to play this move as its first move.</li>
</ul>

<p>:returns: A tuple with the bot which won the game, the number of points obtained from this game and the score attained.</p>
</div>


                            </div>
                            <div id="GamePlayEngine.play_at_most_n_tricks" class="classattr">
                                        <input id="GamePlayEngine.play_at_most_n_tricks-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">play_at_most_n_tricks</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">game_state</span><span class="p">:</span> <span class="n"><a href="#GameState">schnapsen.game.GameState</a></span>,</span><span class="param">	<span class="n">new_leader</span><span class="p">:</span> <span class="n"><a href="#Bot">schnapsen.game.Bot</a></span>,</span><span class="param">	<span class="n">new_follower</span><span class="p">:</span> <span class="n"><a href="#Bot">schnapsen.game.Bot</a></span>,</span><span class="param">	<span class="n">n</span><span class="p">:</span> <span class="nb">int</span></span><span class="return-annotation">) -> <span class="n">Tuple</span><span class="p">[</span><span class="n"><a href="#GameState">schnapsen.game.GameState</a></span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="GamePlayEngine.play_at_most_n_tricks-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GamePlayEngine.play_at_most_n_tricks"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GamePlayEngine.play_at_most_n_tricks-1556"><a href="#GamePlayEngine.play_at_most_n_tricks-1556"><span class="linenos">1556</span></a>    <span class="k">def</span> <span class="nf">play_at_most_n_tricks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_state</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">new_leader</span><span class="p">:</span> <span class="n">Bot</span><span class="p">,</span> <span class="n">new_follower</span><span class="p">:</span> <span class="n">Bot</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">GameState</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1557"><a href="#GamePlayEngine.play_at_most_n_tricks-1557"><span class="linenos">1557</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1558"><a href="#GamePlayEngine.play_at_most_n_tricks-1558"><span class="linenos">1558</span></a><span class="sd">        Plays up to n tricks (including the one started by the leader, if provided) on a game which might have started before.</span>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1559"><a href="#GamePlayEngine.play_at_most_n_tricks-1559"><span class="linenos">1559</span></a><span class="sd">        The number of tricks will be smaller than n in case the game ends before n tricks are played.</span>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1560"><a href="#GamePlayEngine.play_at_most_n_tricks-1560"><span class="linenos">1560</span></a><span class="sd">        The new bots are new_leader and new_follower.</span>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1561"><a href="#GamePlayEngine.play_at_most_n_tricks-1561"><span class="linenos">1561</span></a>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1562"><a href="#GamePlayEngine.play_at_most_n_tricks-1562"><span class="linenos">1562</span></a><span class="sd">        This method does not make changes to the provided game_state.</span>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1563"><a href="#GamePlayEngine.play_at_most_n_tricks-1563"><span class="linenos">1563</span></a>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1564"><a href="#GamePlayEngine.play_at_most_n_tricks-1564"><span class="linenos">1564</span></a><span class="sd">        :param game_state: The state of the game to start from</span>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1565"><a href="#GamePlayEngine.play_at_most_n_tricks-1565"><span class="linenos">1565</span></a><span class="sd">        :param new_leader: The bot which will take the leader role in the game.</span>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1566"><a href="#GamePlayEngine.play_at_most_n_tricks-1566"><span class="linenos">1566</span></a><span class="sd">        :param new_follower: The bot which will take the follower in the game.</span>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1567"><a href="#GamePlayEngine.play_at_most_n_tricks-1567"><span class="linenos">1567</span></a>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1568"><a href="#GamePlayEngine.play_at_most_n_tricks-1568"><span class="linenos">1568</span></a><span class="sd">        :returns: The GameState reached and the number of steps actually taken.</span>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1569"><a href="#GamePlayEngine.play_at_most_n_tricks-1569"><span class="linenos">1569</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1570"><a href="#GamePlayEngine.play_at_most_n_tricks-1570"><span class="linenos">1570</span></a>        <span class="k">assert</span> <span class="n">n</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Cannot play less than 0 rounds&quot;</span>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1571"><a href="#GamePlayEngine.play_at_most_n_tricks-1571"><span class="linenos">1571</span></a>        <span class="n">game_state_copy</span> <span class="o">=</span> <span class="n">game_state</span><span class="o">.</span><span class="n">copy_with_other_bots</span><span class="p">(</span><span class="n">new_leader</span><span class="o">=</span><span class="n">new_leader</span><span class="p">,</span> <span class="n">new_follower</span><span class="o">=</span><span class="n">new_follower</span><span class="p">)</span>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1572"><a href="#GamePlayEngine.play_at_most_n_tricks-1572"><span class="linenos">1572</span></a>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1573"><a href="#GamePlayEngine.play_at_most_n_tricks-1573"><span class="linenos">1573</span></a>        <span class="n">winner</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">BotState</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1574"><a href="#GamePlayEngine.play_at_most_n_tricks-1574"><span class="linenos">1574</span></a>        <span class="n">rounds_played</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1575"><a href="#GamePlayEngine.play_at_most_n_tricks-1575"><span class="linenos">1575</span></a>        <span class="k">while</span> <span class="ow">not</span> <span class="n">winner</span><span class="p">:</span>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1576"><a href="#GamePlayEngine.play_at_most_n_tricks-1576"><span class="linenos">1576</span></a>            <span class="k">if</span> <span class="n">rounds_played</span> <span class="o">==</span> <span class="n">n</span><span class="p">:</span>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1577"><a href="#GamePlayEngine.play_at_most_n_tricks-1577"><span class="linenos">1577</span></a>                <span class="k">break</span>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1578"><a href="#GamePlayEngine.play_at_most_n_tricks-1578"><span class="linenos">1578</span></a>            <span class="n">game_state_copy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trick_implementer</span><span class="o">.</span><span class="n">play_trick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_state_copy</span><span class="p">)</span>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1579"><a href="#GamePlayEngine.play_at_most_n_tricks-1579"><span class="linenos">1579</span></a>            <span class="n">winner</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trick_scorer</span><span class="o">.</span><span class="n">declare_winner</span><span class="p">(</span><span class="n">game_state_copy</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1580"><a href="#GamePlayEngine.play_at_most_n_tricks-1580"><span class="linenos">1580</span></a>            <span class="n">rounds_played</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1581"><a href="#GamePlayEngine.play_at_most_n_tricks-1581"><span class="linenos">1581</span></a>        <span class="k">if</span> <span class="n">winner</span><span class="p">:</span>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1582"><a href="#GamePlayEngine.play_at_most_n_tricks-1582"><span class="linenos">1582</span></a>            <span class="n">winner_state</span> <span class="o">=</span> <span class="n">WinnerPerspective</span><span class="p">(</span><span class="n">game_state_copy</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1583"><a href="#GamePlayEngine.play_at_most_n_tricks-1583"><span class="linenos">1583</span></a>            <span class="n">winner</span><span class="o">.</span><span class="n">implementation</span><span class="o">.</span><span class="n">notify_game_end</span><span class="p">(</span><span class="n">won</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="n">winner_state</span><span class="p">)</span>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1584"><a href="#GamePlayEngine.play_at_most_n_tricks-1584"><span class="linenos">1584</span></a>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1585"><a href="#GamePlayEngine.play_at_most_n_tricks-1585"><span class="linenos">1585</span></a>            <span class="n">loser_state</span> <span class="o">=</span> <span class="n">LoserPerspective</span><span class="p">(</span><span class="n">game_state_copy</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1586"><a href="#GamePlayEngine.play_at_most_n_tricks-1586"><span class="linenos">1586</span></a>            <span class="n">game_state_copy</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">implementation</span><span class="o">.</span><span class="n">notify_game_end</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="n">loser_state</span><span class="p">)</span>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1587"><a href="#GamePlayEngine.play_at_most_n_tricks-1587"><span class="linenos">1587</span></a>
</span><span id="GamePlayEngine.play_at_most_n_tricks-1588"><a href="#GamePlayEngine.play_at_most_n_tricks-1588"><span class="linenos">1588</span></a>        <span class="k">return</span> <span class="n">game_state_copy</span><span class="p">,</span> <span class="n">rounds_played</span>
</span></pre></div>


            <div class="docstring"><p>Plays up to n tricks (including the one started by the leader, if provided) on a game which might have started before.
The number of tricks will be smaller than n in case the game ends before n tricks are played.
The new bots are new_leader and new_follower.</p>

<p>This method does not make changes to the provided game_state.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>game_state</strong>:  The state of the game to start from</li>
<li><strong>new_leader</strong>:  The bot which will take the leader role in the game.</li>
<li><strong>new_follower</strong>:  The bot which will take the follower in the game.</li>
</ul>

<p>:returns: The GameState reached and the number of steps actually taken.</p>
</div>


                            </div>
                </section>
                <section id="SchnapsenGamePlayEngine">
                            <input id="SchnapsenGamePlayEngine-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">SchnapsenGamePlayEngine</span><wbr>(<span class="base"><a href="#GamePlayEngine">GamePlayEngine</a></span>):

                <label class="view-source-button" for="SchnapsenGamePlayEngine-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SchnapsenGamePlayEngine"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SchnapsenGamePlayEngine-1599"><a href="#SchnapsenGamePlayEngine-1599"><span class="linenos">1599</span></a><span class="k">class</span> <span class="nc">SchnapsenGamePlayEngine</span><span class="p">(</span><span class="n">GamePlayEngine</span><span class="p">):</span>
</span><span id="SchnapsenGamePlayEngine-1600"><a href="#SchnapsenGamePlayEngine-1600"><span class="linenos">1600</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SchnapsenGamePlayEngine-1601"><a href="#SchnapsenGamePlayEngine-1601"><span class="linenos">1601</span></a><span class="sd">    A GamePlayEngine configured according to the rules of Schnapsen</span>
</span><span id="SchnapsenGamePlayEngine-1602"><a href="#SchnapsenGamePlayEngine-1602"><span class="linenos">1602</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="SchnapsenGamePlayEngine-1603"><a href="#SchnapsenGamePlayEngine-1603"><span class="linenos">1603</span></a>
</span><span id="SchnapsenGamePlayEngine-1604"><a href="#SchnapsenGamePlayEngine-1604"><span class="linenos">1604</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SchnapsenGamePlayEngine-1605"><a href="#SchnapsenGamePlayEngine-1605"><span class="linenos">1605</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="SchnapsenGamePlayEngine-1606"><a href="#SchnapsenGamePlayEngine-1606"><span class="linenos">1606</span></a>            <span class="n">deck_generator</span><span class="o">=</span><span class="n">SchnapsenDeckGenerator</span><span class="p">(),</span>
</span><span id="SchnapsenGamePlayEngine-1607"><a href="#SchnapsenGamePlayEngine-1607"><span class="linenos">1607</span></a>            <span class="n">hand_generator</span><span class="o">=</span><span class="n">SchnapsenHandGenerator</span><span class="p">(),</span>
</span><span id="SchnapsenGamePlayEngine-1608"><a href="#SchnapsenGamePlayEngine-1608"><span class="linenos">1608</span></a>            <span class="n">trick_implementer</span><span class="o">=</span><span class="n">SchnapsenTrickImplementer</span><span class="p">(),</span>
</span><span id="SchnapsenGamePlayEngine-1609"><a href="#SchnapsenGamePlayEngine-1609"><span class="linenos">1609</span></a>            <span class="n">move_requester</span><span class="o">=</span><span class="n">SimpleMoveRequester</span><span class="p">(),</span>
</span><span id="SchnapsenGamePlayEngine-1610"><a href="#SchnapsenGamePlayEngine-1610"><span class="linenos">1610</span></a>            <span class="n">move_validator</span><span class="o">=</span><span class="n">SchnapsenMoveValidator</span><span class="p">(),</span>
</span><span id="SchnapsenGamePlayEngine-1611"><a href="#SchnapsenGamePlayEngine-1611"><span class="linenos">1611</span></a>            <span class="n">trick_scorer</span><span class="o">=</span><span class="n">SchnapsenTrickScorer</span><span class="p">()</span>
</span><span id="SchnapsenGamePlayEngine-1612"><a href="#SchnapsenGamePlayEngine-1612"><span class="linenos">1612</span></a>        <span class="p">)</span>
</span><span id="SchnapsenGamePlayEngine-1613"><a href="#SchnapsenGamePlayEngine-1613"><span class="linenos">1613</span></a>
</span><span id="SchnapsenGamePlayEngine-1614"><a href="#SchnapsenGamePlayEngine-1614"><span class="linenos">1614</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SchnapsenGamePlayEngine-1615"><a href="#SchnapsenGamePlayEngine-1615"><span class="linenos">1615</span></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>A GamePlayEngine configured according to the rules of Schnapsen</p>
</div>


                            <div id="SchnapsenGamePlayEngine.__init__" class="classattr">
                                        <input id="SchnapsenGamePlayEngine.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">SchnapsenGamePlayEngine</span><span class="signature pdoc-code condensed">()</span>

                <label class="view-source-button" for="SchnapsenGamePlayEngine.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SchnapsenGamePlayEngine.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SchnapsenGamePlayEngine.__init__-1604"><a href="#SchnapsenGamePlayEngine.__init__-1604"><span class="linenos">1604</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SchnapsenGamePlayEngine.__init__-1605"><a href="#SchnapsenGamePlayEngine.__init__-1605"><span class="linenos">1605</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="SchnapsenGamePlayEngine.__init__-1606"><a href="#SchnapsenGamePlayEngine.__init__-1606"><span class="linenos">1606</span></a>            <span class="n">deck_generator</span><span class="o">=</span><span class="n">SchnapsenDeckGenerator</span><span class="p">(),</span>
</span><span id="SchnapsenGamePlayEngine.__init__-1607"><a href="#SchnapsenGamePlayEngine.__init__-1607"><span class="linenos">1607</span></a>            <span class="n">hand_generator</span><span class="o">=</span><span class="n">SchnapsenHandGenerator</span><span class="p">(),</span>
</span><span id="SchnapsenGamePlayEngine.__init__-1608"><a href="#SchnapsenGamePlayEngine.__init__-1608"><span class="linenos">1608</span></a>            <span class="n">trick_implementer</span><span class="o">=</span><span class="n">SchnapsenTrickImplementer</span><span class="p">(),</span>
</span><span id="SchnapsenGamePlayEngine.__init__-1609"><a href="#SchnapsenGamePlayEngine.__init__-1609"><span class="linenos">1609</span></a>            <span class="n">move_requester</span><span class="o">=</span><span class="n">SimpleMoveRequester</span><span class="p">(),</span>
</span><span id="SchnapsenGamePlayEngine.__init__-1610"><a href="#SchnapsenGamePlayEngine.__init__-1610"><span class="linenos">1610</span></a>            <span class="n">move_validator</span><span class="o">=</span><span class="n">SchnapsenMoveValidator</span><span class="p">(),</span>
</span><span id="SchnapsenGamePlayEngine.__init__-1611"><a href="#SchnapsenGamePlayEngine.__init__-1611"><span class="linenos">1611</span></a>            <span class="n">trick_scorer</span><span class="o">=</span><span class="n">SchnapsenTrickScorer</span><span class="p">()</span>
</span><span id="SchnapsenGamePlayEngine.__init__-1612"><a href="#SchnapsenGamePlayEngine.__init__-1612"><span class="linenos">1612</span></a>        <span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#GamePlayEngine">GamePlayEngine</a></dt>
                                <dd id="SchnapsenGamePlayEngine.play_game" class="function"><a href="#GamePlayEngine.play_game">play_game</a></dd>
                <dd id="SchnapsenGamePlayEngine.play_game_from_state_with_new_bots" class="function"><a href="#GamePlayEngine.play_game_from_state_with_new_bots">play_game_from_state_with_new_bots</a></dd>
                <dd id="SchnapsenGamePlayEngine.play_game_from_state" class="function"><a href="#GamePlayEngine.play_game_from_state">play_game_from_state</a></dd>
                <dd id="SchnapsenGamePlayEngine.play_at_most_n_tricks" class="function"><a href="#GamePlayEngine.play_at_most_n_tricks">play_at_most_n_tricks</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value">${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>