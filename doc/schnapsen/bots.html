<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 12.3.1"/>
    <title>schnapsen.bots API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent }nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--code);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../schnapsen.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;schnapsen</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



        <h2>API Documentation</h2>
            <ul class="memberlist">
            <li>
                    <a class="class" href="#RandBot">RandBot</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#RandBot.__init__">RandBot</a>
                        </li>
                        <li>
                                <a class="function" href="#RandBot.get_move">get_move</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#AlphaBetaBot">AlphaBetaBot</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#AlphaBetaBot.__init__">AlphaBetaBot</a>
                        </li>
                        <li>
                                <a class="function" href="#AlphaBetaBot.get_move">get_move</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#RdeepBot">RdeepBot</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#RdeepBot.__init__">RdeepBot</a>
                        </li>
                        <li>
                                <a class="function" href="#RdeepBot.get_move">get_move</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#MLDataBot">MLDataBot</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#MLDataBot.__init__">MLDataBot</a>
                        </li>
                        <li>
                                <a class="function" href="#MLDataBot.get_move">get_move</a>
                        </li>
                        <li>
                                <a class="function" href="#MLDataBot.notify_game_end">notify_game_end</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#MLPlayingBot">MLPlayingBot</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#MLPlayingBot.__init__">MLPlayingBot</a>
                        </li>
                        <li>
                                <a class="function" href="#MLPlayingBot.get_move">get_move</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#train_ML_model">train_ML_model</a>
            </li>
            <li>
                    <a class="class" href="#SchnapsenServer">SchnapsenServer</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#SchnapsenServer.__init__">SchnapsenServer</a>
                        </li>
                        <li>
                                <a class="function" href="#SchnapsenServer.make_gui_bot">make_gui_bot</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../schnapsen.html">schnapsen</a><wbr>.bots    </h1>

                        <div class="docstring"><p>Create a bot in a separate .py and import them here, so that one can simply import
it by from <a href="">schnapsen.bots</a> import MyBot.</p>
</div>

                        <input id="mod-bots-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-bots-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos"> 1</span></a><span class="sd">&quot;&quot;&quot;Create a bot in a separate .py and import them here, so that one can simply import</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos"> 2</span></a><span class="sd">it by from schnapsen.bots import MyBot.</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos"> 3</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos"> 4</span></a><span class="kn">from</span> <span class="nn">.rand</span> <span class="kn">import</span> <span class="n">RandBot</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos"> 5</span></a><span class="kn">from</span> <span class="nn">.alphabeta</span> <span class="kn">import</span> <span class="n">AlphaBetaBot</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos"> 6</span></a><span class="kn">from</span> <span class="nn">.rdeep</span> <span class="kn">import</span> <span class="n">RdeepBot</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos"> 7</span></a><span class="kn">from</span> <span class="nn">.ml_bot</span> <span class="kn">import</span> <span class="n">MLDataBot</span><span class="p">,</span> <span class="n">MLPlayingBot</span><span class="p">,</span> <span class="n">train_ML_model</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos"> 8</span></a><span class="kn">from</span> <span class="nn">.gui.guibot</span> <span class="kn">import</span> <span class="n">SchnapsenServer</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos"> 9</span></a>
</span><span id="L-10"><a href="#L-10"><span class="linenos">10</span></a><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;RandBot&quot;</span><span class="p">,</span> <span class="s2">&quot;AlphaBetaBot&quot;</span><span class="p">,</span> <span class="s2">&quot;RdeepBot&quot;</span><span class="p">,</span> <span class="s2">&quot;MLDataBot&quot;</span><span class="p">,</span> <span class="s2">&quot;MLPlayingBot&quot;</span><span class="p">,</span> <span class="s2">&quot;train_ML_model&quot;</span><span class="p">,</span> <span class="s2">&quot;SchnapsenServer&quot;</span><span class="p">]</span>
</span></pre></div>


            </section>
                <section id="RandBot">
                            <input id="RandBot-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">RandBot</span><wbr>(<span class="base"><a href="game.html#Bot">schnapsen.game.Bot</a></span>):

                <label class="view-source-button" for="RandBot-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RandBot"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RandBot-7"><a href="#RandBot-7"><span class="linenos"> 7</span></a><span class="k">class</span> <span class="nc">RandBot</span><span class="p">(</span><span class="n">Bot</span><span class="p">):</span>
</span><span id="RandBot-8"><a href="#RandBot-8"><span class="linenos"> 8</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seed</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="RandBot-9"><a href="#RandBot-9"><span class="linenos"> 9</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">seed</span> <span class="o">=</span> <span class="n">seed</span>
</span><span id="RandBot-10"><a href="#RandBot-10"><span class="linenos">10</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rng</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">Random</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">seed</span><span class="p">)</span>
</span><span id="RandBot-11"><a href="#RandBot-11"><span class="linenos">11</span></a>
</span><span id="RandBot-12"><a href="#RandBot-12"><span class="linenos">12</span></a>    <span class="k">def</span> <span class="nf">get_move</span><span class="p">(</span>
</span><span id="RandBot-13"><a href="#RandBot-13"><span class="linenos">13</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="RandBot-14"><a href="#RandBot-14"><span class="linenos">14</span></a>        <span class="n">state</span><span class="p">:</span> <span class="n">PlayerPerspective</span><span class="p">,</span>
</span><span id="RandBot-15"><a href="#RandBot-15"><span class="linenos">15</span></a>        <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">],</span>
</span><span id="RandBot-16"><a href="#RandBot-16"><span class="linenos">16</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Move</span><span class="p">:</span>
</span><span id="RandBot-17"><a href="#RandBot-17"><span class="linenos">17</span></a>        <span class="n">moves</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Move</span><span class="p">]</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">valid_moves</span><span class="p">()</span>
</span><span id="RandBot-18"><a href="#RandBot-18"><span class="linenos">18</span></a>        <span class="n">move</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rng</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">moves</span><span class="p">))</span>
</span><span id="RandBot-19"><a href="#RandBot-19"><span class="linenos">19</span></a>        <span class="k">return</span> <span class="n">move</span>
</span><span id="RandBot-20"><a href="#RandBot-20"><span class="linenos">20</span></a>
</span><span id="RandBot-21"><a href="#RandBot-21"><span class="linenos">21</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="RandBot-22"><a href="#RandBot-22"><span class="linenos">22</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;RandBot(seed=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">seed</span><span class="si">}</span><span class="s2">)&quot;</span>
</span></pre></div>


            <div class="docstring"><p>The Bot baseclass. Derive your own bots from this class and implement the get_move method to use it in games.</p>

<p>Besides the get_move method, it is also possible to override notify_trump_exchange and notify_game_end to get notified when these events happen.</p>
</div>


                            <div id="RandBot.__init__" class="classattr">
                                        <input id="RandBot.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">RandBot</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">seed</span><span class="p">:</span> <span class="nb">int</span></span>)</span>

                <label class="view-source-button" for="RandBot.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RandBot.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RandBot.__init__-8"><a href="#RandBot.__init__-8"><span class="linenos"> 8</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seed</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="RandBot.__init__-9"><a href="#RandBot.__init__-9"><span class="linenos"> 9</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">seed</span> <span class="o">=</span> <span class="n">seed</span>
</span><span id="RandBot.__init__-10"><a href="#RandBot.__init__-10"><span class="linenos">10</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rng</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">Random</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">seed</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="RandBot.get_move" class="classattr">
                                        <input id="RandBot.get_move-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_move</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">state</span><span class="p">:</span> <span class="n"><a href="game.html#PlayerPerspective">schnapsen.game.PlayerPerspective</a></span>,</span><span class="param">	<span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="game.html#Move">schnapsen.game.Move</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n"><a href="game.html#Move">schnapsen.game.Move</a></span>:</span></span>

                <label class="view-source-button" for="RandBot.get_move-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RandBot.get_move"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RandBot.get_move-12"><a href="#RandBot.get_move-12"><span class="linenos">12</span></a>    <span class="k">def</span> <span class="nf">get_move</span><span class="p">(</span>
</span><span id="RandBot.get_move-13"><a href="#RandBot.get_move-13"><span class="linenos">13</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="RandBot.get_move-14"><a href="#RandBot.get_move-14"><span class="linenos">14</span></a>        <span class="n">state</span><span class="p">:</span> <span class="n">PlayerPerspective</span><span class="p">,</span>
</span><span id="RandBot.get_move-15"><a href="#RandBot.get_move-15"><span class="linenos">15</span></a>        <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">],</span>
</span><span id="RandBot.get_move-16"><a href="#RandBot.get_move-16"><span class="linenos">16</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Move</span><span class="p">:</span>
</span><span id="RandBot.get_move-17"><a href="#RandBot.get_move-17"><span class="linenos">17</span></a>        <span class="n">moves</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Move</span><span class="p">]</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">valid_moves</span><span class="p">()</span>
</span><span id="RandBot.get_move-18"><a href="#RandBot.get_move-18"><span class="linenos">18</span></a>        <span class="n">move</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rng</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">moves</span><span class="p">))</span>
</span><span id="RandBot.get_move-19"><a href="#RandBot.get_move-19"><span class="linenos">19</span></a>        <span class="k">return</span> <span class="n">move</span>
</span></pre></div>


            <div class="docstring"><p>Get the move this Bot wants to play.
If this Bot is leading, the leader_move will be None. If this both is following, the leader_move will contain the move the opponent just played</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="game.html#Bot">schnapsen.game.Bot</a></dt>
                                <dd id="RandBot.notify_trump_exchange" class="function"><a href="game.html#Bot.notify_trump_exchange">notify_trump_exchange</a></dd>
                <dd id="RandBot.notify_game_end" class="function"><a href="game.html#Bot.notify_game_end">notify_game_end</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="AlphaBetaBot">
                            <input id="AlphaBetaBot-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">AlphaBetaBot</span><wbr>(<span class="base"><a href="game.html#Bot">schnapsen.game.Bot</a></span>):

                <label class="view-source-button" for="AlphaBetaBot-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AlphaBetaBot"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AlphaBetaBot-7"><a href="#AlphaBetaBot-7"><span class="linenos"> 7</span></a><span class="k">class</span> <span class="nc">AlphaBetaBot</span><span class="p">(</span><span class="n">Bot</span><span class="p">):</span>
</span><span id="AlphaBetaBot-8"><a href="#AlphaBetaBot-8"><span class="linenos"> 8</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AlphaBetaBot-9"><a href="#AlphaBetaBot-9"><span class="linenos"> 9</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="AlphaBetaBot-10"><a href="#AlphaBetaBot-10"><span class="linenos">10</span></a>
</span><span id="AlphaBetaBot-11"><a href="#AlphaBetaBot-11"><span class="linenos">11</span></a>    <span class="k">def</span> <span class="nf">get_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">PlayerPerspective</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Move</span><span class="p">:</span>
</span><span id="AlphaBetaBot-12"><a href="#AlphaBetaBot-12"><span class="linenos">12</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>The Bot baseclass. Derive your own bots from this class and implement the get_move method to use it in games.</p>

<p>Besides the get_move method, it is also possible to override notify_trump_exchange and notify_game_end to get notified when these events happen.</p>
</div>


                            <div id="AlphaBetaBot.__init__" class="classattr">
                                        <input id="AlphaBetaBot.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">AlphaBetaBot</span><span class="signature pdoc-code condensed">()</span>

                <label class="view-source-button" for="AlphaBetaBot.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AlphaBetaBot.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AlphaBetaBot.__init__-8"><a href="#AlphaBetaBot.__init__-8"><span class="linenos">8</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AlphaBetaBot.__init__-9"><a href="#AlphaBetaBot.__init__-9"><span class="linenos">9</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="AlphaBetaBot.get_move" class="classattr">
                                        <input id="AlphaBetaBot.get_move-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_move</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">state</span><span class="p">:</span> <span class="n"><a href="game.html#PlayerPerspective">schnapsen.game.PlayerPerspective</a></span>,</span><span class="param">	<span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="game.html#Move">schnapsen.game.Move</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n"><a href="game.html#Move">schnapsen.game.Move</a></span>:</span></span>

                <label class="view-source-button" for="AlphaBetaBot.get_move-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AlphaBetaBot.get_move"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AlphaBetaBot.get_move-11"><a href="#AlphaBetaBot.get_move-11"><span class="linenos">11</span></a>    <span class="k">def</span> <span class="nf">get_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">PlayerPerspective</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Move</span><span class="p">:</span>
</span><span id="AlphaBetaBot.get_move-12"><a href="#AlphaBetaBot.get_move-12"><span class="linenos">12</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Get the move this Bot wants to play.
If this Bot is leading, the leader_move will be None. If this both is following, the leader_move will contain the move the opponent just played</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="game.html#Bot">schnapsen.game.Bot</a></dt>
                                <dd id="AlphaBetaBot.notify_trump_exchange" class="function"><a href="game.html#Bot.notify_trump_exchange">notify_trump_exchange</a></dd>
                <dd id="AlphaBetaBot.notify_game_end" class="function"><a href="game.html#Bot.notify_game_end">notify_game_end</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="RdeepBot">
                            <input id="RdeepBot-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">RdeepBot</span><wbr>(<span class="base"><a href="game.html#Bot">schnapsen.game.Bot</a></span>):

                <label class="view-source-button" for="RdeepBot-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RdeepBot"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RdeepBot-7"><a href="#RdeepBot-7"><span class="linenos"> 7</span></a><span class="k">class</span> <span class="nc">RdeepBot</span><span class="p">(</span><span class="n">Bot</span><span class="p">):</span>
</span><span id="RdeepBot-8"><a href="#RdeepBot-8"><span class="linenos"> 8</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_samples</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">depth</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">rand</span><span class="p">:</span> <span class="n">Random</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="RdeepBot-9"><a href="#RdeepBot-9"><span class="linenos"> 9</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RdeepBot-10"><a href="#RdeepBot-10"><span class="linenos">10</span></a><span class="sd">        Create a new rdeep bot.</span>
</span><span id="RdeepBot-11"><a href="#RdeepBot-11"><span class="linenos">11</span></a>
</span><span id="RdeepBot-12"><a href="#RdeepBot-12"><span class="linenos">12</span></a><span class="sd">        :param num_samples: how many samples to take per move</span>
</span><span id="RdeepBot-13"><a href="#RdeepBot-13"><span class="linenos">13</span></a><span class="sd">        :param depth: how deep to sample</span>
</span><span id="RdeepBot-14"><a href="#RdeepBot-14"><span class="linenos">14</span></a><span class="sd">        :param rand: the source of randomness for this Bot</span>
</span><span id="RdeepBot-15"><a href="#RdeepBot-15"><span class="linenos">15</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RdeepBot-16"><a href="#RdeepBot-16"><span class="linenos">16</span></a>        <span class="k">assert</span> <span class="n">num_samples</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;we cannot work with less than one sample, got </span><span class="si">{</span><span class="n">num_samples</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="RdeepBot-17"><a href="#RdeepBot-17"><span class="linenos">17</span></a>        <span class="k">assert</span> <span class="n">depth</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;it does not make sense to use a dept &lt;1. got </span><span class="si">{</span><span class="n">depth</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="RdeepBot-18"><a href="#RdeepBot-18"><span class="linenos">18</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__num_samples</span> <span class="o">=</span> <span class="n">num_samples</span>
</span><span id="RdeepBot-19"><a href="#RdeepBot-19"><span class="linenos">19</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__depth</span> <span class="o">=</span> <span class="n">depth</span>
</span><span id="RdeepBot-20"><a href="#RdeepBot-20"><span class="linenos">20</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__rand</span> <span class="o">=</span> <span class="n">rand</span>
</span><span id="RdeepBot-21"><a href="#RdeepBot-21"><span class="linenos">21</span></a>
</span><span id="RdeepBot-22"><a href="#RdeepBot-22"><span class="linenos">22</span></a>    <span class="k">def</span> <span class="nf">get_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">PlayerPerspective</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Move</span><span class="p">:</span>
</span><span id="RdeepBot-23"><a href="#RdeepBot-23"><span class="linenos">23</span></a>        <span class="c1"># get the list of valid moves, and shuffle it such</span>
</span><span id="RdeepBot-24"><a href="#RdeepBot-24"><span class="linenos">24</span></a>        <span class="c1"># that we get a random move of the highest scoring</span>
</span><span id="RdeepBot-25"><a href="#RdeepBot-25"><span class="linenos">25</span></a>        <span class="c1"># ones if there are multiple highest scoring moves.</span>
</span><span id="RdeepBot-26"><a href="#RdeepBot-26"><span class="linenos">26</span></a>        <span class="n">moves</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">valid_moves</span><span class="p">()</span>
</span><span id="RdeepBot-27"><a href="#RdeepBot-27"><span class="linenos">27</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__rand</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">moves</span><span class="p">)</span>
</span><span id="RdeepBot-28"><a href="#RdeepBot-28"><span class="linenos">28</span></a>
</span><span id="RdeepBot-29"><a href="#RdeepBot-29"><span class="linenos">29</span></a>        <span class="n">best_score</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;-inf&#39;</span><span class="p">)</span>
</span><span id="RdeepBot-30"><a href="#RdeepBot-30"><span class="linenos">30</span></a>        <span class="n">best_move</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="RdeepBot-31"><a href="#RdeepBot-31"><span class="linenos">31</span></a>        <span class="k">for</span> <span class="n">move</span> <span class="ow">in</span> <span class="n">moves</span><span class="p">:</span>
</span><span id="RdeepBot-32"><a href="#RdeepBot-32"><span class="linenos">32</span></a>            <span class="n">sum_of_scores</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="RdeepBot-33"><a href="#RdeepBot-33"><span class="linenos">33</span></a>            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__num_samples</span><span class="p">):</span>
</span><span id="RdeepBot-34"><a href="#RdeepBot-34"><span class="linenos">34</span></a>                <span class="n">gamestate</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">make_assumption</span><span class="p">(</span><span class="n">leader_move</span><span class="o">=</span><span class="n">leader_move</span><span class="p">,</span> <span class="n">rand</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__rand</span><span class="p">)</span>
</span><span id="RdeepBot-35"><a href="#RdeepBot-35"><span class="linenos">35</span></a>                <span class="n">score</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__evaluate</span><span class="p">(</span><span class="n">gamestate</span><span class="p">,</span> <span class="n">state</span><span class="o">.</span><span class="n">get_engine</span><span class="p">(),</span> <span class="n">leader_move</span><span class="p">,</span> <span class="n">move</span><span class="p">)</span>
</span><span id="RdeepBot-36"><a href="#RdeepBot-36"><span class="linenos">36</span></a>                <span class="n">sum_of_scores</span> <span class="o">+=</span> <span class="n">score</span>
</span><span id="RdeepBot-37"><a href="#RdeepBot-37"><span class="linenos">37</span></a>            <span class="n">average_score</span> <span class="o">=</span> <span class="n">sum_of_scores</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">__num_samples</span>
</span><span id="RdeepBot-38"><a href="#RdeepBot-38"><span class="linenos">38</span></a>            <span class="k">if</span> <span class="n">average_score</span> <span class="o">&gt;</span> <span class="n">best_score</span><span class="p">:</span>
</span><span id="RdeepBot-39"><a href="#RdeepBot-39"><span class="linenos">39</span></a>                <span class="n">best_score</span> <span class="o">=</span> <span class="n">average_score</span>
</span><span id="RdeepBot-40"><a href="#RdeepBot-40"><span class="linenos">40</span></a>                <span class="n">best_move</span> <span class="o">=</span> <span class="n">move</span>
</span><span id="RdeepBot-41"><a href="#RdeepBot-41"><span class="linenos">41</span></a>        <span class="k">assert</span> <span class="n">best_move</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="RdeepBot-42"><a href="#RdeepBot-42"><span class="linenos">42</span></a>        <span class="k">return</span> <span class="n">best_move</span>
</span><span id="RdeepBot-43"><a href="#RdeepBot-43"><span class="linenos">43</span></a>
</span><span id="RdeepBot-44"><a href="#RdeepBot-44"><span class="linenos">44</span></a>    <span class="k">def</span> <span class="nf">__evaluate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gamestate</span><span class="p">:</span> <span class="n">GameState</span><span class="p">,</span> <span class="n">engine</span><span class="p">:</span> <span class="n">GamePlayEngine</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">],</span> <span class="n">my_move</span><span class="p">:</span> <span class="n">Move</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="RdeepBot-45"><a href="#RdeepBot-45"><span class="linenos">45</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RdeepBot-46"><a href="#RdeepBot-46"><span class="linenos">46</span></a><span class="sd">        Evaluates the value of the given state for the given player</span>
</span><span id="RdeepBot-47"><a href="#RdeepBot-47"><span class="linenos">47</span></a><span class="sd">        :param state: The state to evaluate</span>
</span><span id="RdeepBot-48"><a href="#RdeepBot-48"><span class="linenos">48</span></a><span class="sd">        :param player: The player for whom to evaluate this state (1 or 2)</span>
</span><span id="RdeepBot-49"><a href="#RdeepBot-49"><span class="linenos">49</span></a><span class="sd">        :return: A float representing the value of this state for the given player. The higher the value, the better the</span>
</span><span id="RdeepBot-50"><a href="#RdeepBot-50"><span class="linenos">50</span></a><span class="sd">                state is for the player.</span>
</span><span id="RdeepBot-51"><a href="#RdeepBot-51"><span class="linenos">51</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RdeepBot-52"><a href="#RdeepBot-52"><span class="linenos">52</span></a>        <span class="n">me</span><span class="p">:</span> <span class="n">Bot</span>
</span><span id="RdeepBot-53"><a href="#RdeepBot-53"><span class="linenos">53</span></a>        <span class="n">leader_bot</span><span class="p">:</span> <span class="n">Bot</span>
</span><span id="RdeepBot-54"><a href="#RdeepBot-54"><span class="linenos">54</span></a>        <span class="n">follower_bot</span><span class="p">:</span> <span class="n">Bot</span>
</span><span id="RdeepBot-55"><a href="#RdeepBot-55"><span class="linenos">55</span></a>
</span><span id="RdeepBot-56"><a href="#RdeepBot-56"><span class="linenos">56</span></a>        <span class="k">if</span> <span class="n">leader_move</span><span class="p">:</span>
</span><span id="RdeepBot-57"><a href="#RdeepBot-57"><span class="linenos">57</span></a>            <span class="c1"># we know what the other bot played</span>
</span><span id="RdeepBot-58"><a href="#RdeepBot-58"><span class="linenos">58</span></a>            <span class="n">leader_bot</span> <span class="o">=</span> <span class="n">FirstFixedMoveThenBaseBot</span><span class="p">(</span><span class="n">RandBot</span><span class="p">(</span><span class="n">rand</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__rand</span><span class="p">),</span> <span class="n">leader_move</span><span class="p">)</span>
</span><span id="RdeepBot-59"><a href="#RdeepBot-59"><span class="linenos">59</span></a>            <span class="c1"># I am the follower</span>
</span><span id="RdeepBot-60"><a href="#RdeepBot-60"><span class="linenos">60</span></a>            <span class="n">me</span> <span class="o">=</span> <span class="n">follower_bot</span> <span class="o">=</span> <span class="n">FirstFixedMoveThenBaseBot</span><span class="p">(</span><span class="n">RandBot</span><span class="p">(</span><span class="n">rand</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__rand</span><span class="p">),</span> <span class="n">my_move</span><span class="p">)</span>
</span><span id="RdeepBot-61"><a href="#RdeepBot-61"><span class="linenos">61</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="RdeepBot-62"><a href="#RdeepBot-62"><span class="linenos">62</span></a>            <span class="c1"># I am the leader bot</span>
</span><span id="RdeepBot-63"><a href="#RdeepBot-63"><span class="linenos">63</span></a>            <span class="n">me</span> <span class="o">=</span> <span class="n">leader_bot</span> <span class="o">=</span> <span class="n">FirstFixedMoveThenBaseBot</span><span class="p">(</span><span class="n">RandBot</span><span class="p">(</span><span class="n">rand</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__rand</span><span class="p">),</span> <span class="n">my_move</span><span class="p">)</span>
</span><span id="RdeepBot-64"><a href="#RdeepBot-64"><span class="linenos">64</span></a>            <span class="c1"># We assume the other bot just random</span>
</span><span id="RdeepBot-65"><a href="#RdeepBot-65"><span class="linenos">65</span></a>            <span class="n">follower_bot</span> <span class="o">=</span> <span class="n">RandBot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__rand</span><span class="p">)</span>
</span><span id="RdeepBot-66"><a href="#RdeepBot-66"><span class="linenos">66</span></a>
</span><span id="RdeepBot-67"><a href="#RdeepBot-67"><span class="linenos">67</span></a>        <span class="n">new_game_state</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">play_at_most_n_tricks</span><span class="p">(</span><span class="n">game_state</span><span class="o">=</span><span class="n">gamestate</span><span class="p">,</span> <span class="n">new_leader</span><span class="o">=</span><span class="n">leader_bot</span><span class="p">,</span> <span class="n">new_follower</span><span class="o">=</span><span class="n">follower_bot</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__depth</span><span class="p">)</span>
</span><span id="RdeepBot-68"><a href="#RdeepBot-68"><span class="linenos">68</span></a>
</span><span id="RdeepBot-69"><a href="#RdeepBot-69"><span class="linenos">69</span></a>        <span class="k">if</span> <span class="n">new_game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">implementation</span> <span class="ow">is</span> <span class="n">me</span><span class="p">:</span>
</span><span id="RdeepBot-70"><a href="#RdeepBot-70"><span class="linenos">70</span></a>            <span class="n">my_score</span> <span class="o">=</span> <span class="n">new_game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">direct_points</span>
</span><span id="RdeepBot-71"><a href="#RdeepBot-71"><span class="linenos">71</span></a>            <span class="n">opponent_score</span> <span class="o">=</span> <span class="n">new_game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">direct_points</span>
</span><span id="RdeepBot-72"><a href="#RdeepBot-72"><span class="linenos">72</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="RdeepBot-73"><a href="#RdeepBot-73"><span class="linenos">73</span></a>            <span class="n">my_score</span> <span class="o">=</span> <span class="n">new_game_state</span><span class="o">.</span><span class="n">follower</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">direct_points</span>
</span><span id="RdeepBot-74"><a href="#RdeepBot-74"><span class="linenos">74</span></a>            <span class="n">opponent_score</span> <span class="o">=</span> <span class="n">new_game_state</span><span class="o">.</span><span class="n">leader</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">direct_points</span>
</span><span id="RdeepBot-75"><a href="#RdeepBot-75"><span class="linenos">75</span></a>
</span><span id="RdeepBot-76"><a href="#RdeepBot-76"><span class="linenos">76</span></a>        <span class="n">heuristic</span> <span class="o">=</span> <span class="n">my_score</span> <span class="o">/</span> <span class="p">(</span><span class="n">my_score</span> <span class="o">+</span> <span class="n">opponent_score</span><span class="p">)</span>
</span><span id="RdeepBot-77"><a href="#RdeepBot-77"><span class="linenos">77</span></a>        <span class="k">return</span> <span class="n">heuristic</span>
</span></pre></div>


            <div class="docstring"><p>The Bot baseclass. Derive your own bots from this class and implement the get_move method to use it in games.</p>

<p>Besides the get_move method, it is also possible to override notify_trump_exchange and notify_game_end to get notified when these events happen.</p>
</div>


                            <div id="RdeepBot.__init__" class="classattr">
                                        <input id="RdeepBot.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">RdeepBot</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">num_samples</span><span class="p">:</span> <span class="nb">int</span>, </span><span class="param"><span class="n">depth</span><span class="p">:</span> <span class="nb">int</span>, </span><span class="param"><span class="n">rand</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">Random</span></span>)</span>

                <label class="view-source-button" for="RdeepBot.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RdeepBot.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RdeepBot.__init__-8"><a href="#RdeepBot.__init__-8"><span class="linenos"> 8</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_samples</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">depth</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">rand</span><span class="p">:</span> <span class="n">Random</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="RdeepBot.__init__-9"><a href="#RdeepBot.__init__-9"><span class="linenos"> 9</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RdeepBot.__init__-10"><a href="#RdeepBot.__init__-10"><span class="linenos">10</span></a><span class="sd">        Create a new rdeep bot.</span>
</span><span id="RdeepBot.__init__-11"><a href="#RdeepBot.__init__-11"><span class="linenos">11</span></a>
</span><span id="RdeepBot.__init__-12"><a href="#RdeepBot.__init__-12"><span class="linenos">12</span></a><span class="sd">        :param num_samples: how many samples to take per move</span>
</span><span id="RdeepBot.__init__-13"><a href="#RdeepBot.__init__-13"><span class="linenos">13</span></a><span class="sd">        :param depth: how deep to sample</span>
</span><span id="RdeepBot.__init__-14"><a href="#RdeepBot.__init__-14"><span class="linenos">14</span></a><span class="sd">        :param rand: the source of randomness for this Bot</span>
</span><span id="RdeepBot.__init__-15"><a href="#RdeepBot.__init__-15"><span class="linenos">15</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RdeepBot.__init__-16"><a href="#RdeepBot.__init__-16"><span class="linenos">16</span></a>        <span class="k">assert</span> <span class="n">num_samples</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;we cannot work with less than one sample, got </span><span class="si">{</span><span class="n">num_samples</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="RdeepBot.__init__-17"><a href="#RdeepBot.__init__-17"><span class="linenos">17</span></a>        <span class="k">assert</span> <span class="n">depth</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;it does not make sense to use a dept &lt;1. got </span><span class="si">{</span><span class="n">depth</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="RdeepBot.__init__-18"><a href="#RdeepBot.__init__-18"><span class="linenos">18</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__num_samples</span> <span class="o">=</span> <span class="n">num_samples</span>
</span><span id="RdeepBot.__init__-19"><a href="#RdeepBot.__init__-19"><span class="linenos">19</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__depth</span> <span class="o">=</span> <span class="n">depth</span>
</span><span id="RdeepBot.__init__-20"><a href="#RdeepBot.__init__-20"><span class="linenos">20</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__rand</span> <span class="o">=</span> <span class="n">rand</span>
</span></pre></div>


            <div class="docstring"><p>Create a new rdeep bot.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>num_samples</strong>:  how many samples to take per move</li>
<li><strong>depth</strong>:  how deep to sample</li>
<li><strong>rand</strong>:  the source of randomness for this Bot</li>
</ul>
</div>


                            </div>
                            <div id="RdeepBot.get_move" class="classattr">
                                        <input id="RdeepBot.get_move-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_move</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">state</span><span class="p">:</span> <span class="n"><a href="game.html#PlayerPerspective">schnapsen.game.PlayerPerspective</a></span>,</span><span class="param">	<span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="game.html#Move">schnapsen.game.Move</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n"><a href="game.html#Move">schnapsen.game.Move</a></span>:</span></span>

                <label class="view-source-button" for="RdeepBot.get_move-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RdeepBot.get_move"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RdeepBot.get_move-22"><a href="#RdeepBot.get_move-22"><span class="linenos">22</span></a>    <span class="k">def</span> <span class="nf">get_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">PlayerPerspective</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Move</span><span class="p">:</span>
</span><span id="RdeepBot.get_move-23"><a href="#RdeepBot.get_move-23"><span class="linenos">23</span></a>        <span class="c1"># get the list of valid moves, and shuffle it such</span>
</span><span id="RdeepBot.get_move-24"><a href="#RdeepBot.get_move-24"><span class="linenos">24</span></a>        <span class="c1"># that we get a random move of the highest scoring</span>
</span><span id="RdeepBot.get_move-25"><a href="#RdeepBot.get_move-25"><span class="linenos">25</span></a>        <span class="c1"># ones if there are multiple highest scoring moves.</span>
</span><span id="RdeepBot.get_move-26"><a href="#RdeepBot.get_move-26"><span class="linenos">26</span></a>        <span class="n">moves</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">valid_moves</span><span class="p">()</span>
</span><span id="RdeepBot.get_move-27"><a href="#RdeepBot.get_move-27"><span class="linenos">27</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__rand</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">moves</span><span class="p">)</span>
</span><span id="RdeepBot.get_move-28"><a href="#RdeepBot.get_move-28"><span class="linenos">28</span></a>
</span><span id="RdeepBot.get_move-29"><a href="#RdeepBot.get_move-29"><span class="linenos">29</span></a>        <span class="n">best_score</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;-inf&#39;</span><span class="p">)</span>
</span><span id="RdeepBot.get_move-30"><a href="#RdeepBot.get_move-30"><span class="linenos">30</span></a>        <span class="n">best_move</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="RdeepBot.get_move-31"><a href="#RdeepBot.get_move-31"><span class="linenos">31</span></a>        <span class="k">for</span> <span class="n">move</span> <span class="ow">in</span> <span class="n">moves</span><span class="p">:</span>
</span><span id="RdeepBot.get_move-32"><a href="#RdeepBot.get_move-32"><span class="linenos">32</span></a>            <span class="n">sum_of_scores</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="RdeepBot.get_move-33"><a href="#RdeepBot.get_move-33"><span class="linenos">33</span></a>            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__num_samples</span><span class="p">):</span>
</span><span id="RdeepBot.get_move-34"><a href="#RdeepBot.get_move-34"><span class="linenos">34</span></a>                <span class="n">gamestate</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">make_assumption</span><span class="p">(</span><span class="n">leader_move</span><span class="o">=</span><span class="n">leader_move</span><span class="p">,</span> <span class="n">rand</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__rand</span><span class="p">)</span>
</span><span id="RdeepBot.get_move-35"><a href="#RdeepBot.get_move-35"><span class="linenos">35</span></a>                <span class="n">score</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__evaluate</span><span class="p">(</span><span class="n">gamestate</span><span class="p">,</span> <span class="n">state</span><span class="o">.</span><span class="n">get_engine</span><span class="p">(),</span> <span class="n">leader_move</span><span class="p">,</span> <span class="n">move</span><span class="p">)</span>
</span><span id="RdeepBot.get_move-36"><a href="#RdeepBot.get_move-36"><span class="linenos">36</span></a>                <span class="n">sum_of_scores</span> <span class="o">+=</span> <span class="n">score</span>
</span><span id="RdeepBot.get_move-37"><a href="#RdeepBot.get_move-37"><span class="linenos">37</span></a>            <span class="n">average_score</span> <span class="o">=</span> <span class="n">sum_of_scores</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">__num_samples</span>
</span><span id="RdeepBot.get_move-38"><a href="#RdeepBot.get_move-38"><span class="linenos">38</span></a>            <span class="k">if</span> <span class="n">average_score</span> <span class="o">&gt;</span> <span class="n">best_score</span><span class="p">:</span>
</span><span id="RdeepBot.get_move-39"><a href="#RdeepBot.get_move-39"><span class="linenos">39</span></a>                <span class="n">best_score</span> <span class="o">=</span> <span class="n">average_score</span>
</span><span id="RdeepBot.get_move-40"><a href="#RdeepBot.get_move-40"><span class="linenos">40</span></a>                <span class="n">best_move</span> <span class="o">=</span> <span class="n">move</span>
</span><span id="RdeepBot.get_move-41"><a href="#RdeepBot.get_move-41"><span class="linenos">41</span></a>        <span class="k">assert</span> <span class="n">best_move</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="RdeepBot.get_move-42"><a href="#RdeepBot.get_move-42"><span class="linenos">42</span></a>        <span class="k">return</span> <span class="n">best_move</span>
</span></pre></div>


            <div class="docstring"><p>Get the move this Bot wants to play.
If this Bot is leading, the leader_move will be None. If this both is following, the leader_move will contain the move the opponent just played</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="game.html#Bot">schnapsen.game.Bot</a></dt>
                                <dd id="RdeepBot.notify_trump_exchange" class="function"><a href="game.html#Bot.notify_trump_exchange">notify_trump_exchange</a></dd>
                <dd id="RdeepBot.notify_game_end" class="function"><a href="game.html#Bot.notify_game_end">notify_game_end</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="MLDataBot">
                            <input id="MLDataBot-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">MLDataBot</span><wbr>(<span class="base"><a href="game.html#Bot">schnapsen.game.Bot</a></span>):

                <label class="view-source-button" for="MLDataBot-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MLDataBot"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MLDataBot-66"><a href="#MLDataBot-66"><span class="linenos"> 66</span></a><span class="k">class</span> <span class="nc">MLDataBot</span><span class="p">(</span><span class="n">Bot</span><span class="p">):</span>
</span><span id="MLDataBot-67"><a href="#MLDataBot-67"><span class="linenos"> 67</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MLDataBot-68"><a href="#MLDataBot-68"><span class="linenos"> 68</span></a><span class="sd">    This class is defined to allow the creation of a training schnapsen bot dataset, that allows us to train a Machine Learning (ML) Bot</span>
</span><span id="MLDataBot-69"><a href="#MLDataBot-69"><span class="linenos"> 69</span></a><span class="sd">    Practically, it helps us record how the game plays out according to a provided Bot behaviour; build what is called a &quot;replay memory&quot;</span>
</span><span id="MLDataBot-70"><a href="#MLDataBot-70"><span class="linenos"> 70</span></a><span class="sd">    In more detail, we create one training sample for each decision the bot makes within a game, where a decision is an action selection for a specific game state.</span>
</span><span id="MLDataBot-71"><a href="#MLDataBot-71"><span class="linenos"> 71</span></a><span class="sd">    Then we relate each decision with the outcome of the game, i.e. whether this bot won or not.</span>
</span><span id="MLDataBot-72"><a href="#MLDataBot-72"><span class="linenos"> 72</span></a><span class="sd">    This way we can then train a bot according to the assumption that:</span>
</span><span id="MLDataBot-73"><a href="#MLDataBot-73"><span class="linenos"> 73</span></a><span class="sd">        &quot;decisions in earlier games that ended up in victories should be preferred over decisions that lead to lost games&quot;</span>
</span><span id="MLDataBot-74"><a href="#MLDataBot-74"><span class="linenos"> 74</span></a><span class="sd">    This class only records the decisions and game outcomes of the provided bot, according to its own perspective - incomplete game state knowledge.</span>
</span><span id="MLDataBot-75"><a href="#MLDataBot-75"><span class="linenos"> 75</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="MLDataBot-76"><a href="#MLDataBot-76"><span class="linenos"> 76</span></a>
</span><span id="MLDataBot-77"><a href="#MLDataBot-77"><span class="linenos"> 77</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bot</span><span class="p">:</span> <span class="n">Bot</span><span class="p">,</span> <span class="n">replay_memory_location</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MLDataBot-78"><a href="#MLDataBot-78"><span class="linenos"> 78</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MLDataBot-79"><a href="#MLDataBot-79"><span class="linenos"> 79</span></a><span class="sd">        :param bot: the provided bot that will actually play the game and make decisions</span>
</span><span id="MLDataBot-80"><a href="#MLDataBot-80"><span class="linenos"> 80</span></a><span class="sd">        :param replay_memory_location: the filename under which the replay memory records will be</span>
</span><span id="MLDataBot-81"><a href="#MLDataBot-81"><span class="linenos"> 81</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MLDataBot-82"><a href="#MLDataBot-82"><span class="linenos"> 82</span></a>
</span><span id="MLDataBot-83"><a href="#MLDataBot-83"><span class="linenos"> 83</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="p">:</span> <span class="n">Bot</span> <span class="o">=</span> <span class="n">bot</span>
</span><span id="MLDataBot-84"><a href="#MLDataBot-84"><span class="linenos"> 84</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">replay_memory_file_path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">=</span> <span class="n">replay_memory_location</span>
</span><span id="MLDataBot-85"><a href="#MLDataBot-85"><span class="linenos"> 85</span></a>
</span><span id="MLDataBot-86"><a href="#MLDataBot-86"><span class="linenos"> 86</span></a>    <span class="k">def</span> <span class="nf">get_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">PlayerPerspective</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Move</span><span class="p">:</span>
</span><span id="MLDataBot-87"><a href="#MLDataBot-87"><span class="linenos"> 87</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MLDataBot-88"><a href="#MLDataBot-88"><span class="linenos"> 88</span></a><span class="sd">            This function simply calls the get_move of the provided bot</span>
</span><span id="MLDataBot-89"><a href="#MLDataBot-89"><span class="linenos"> 89</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MLDataBot-90"><a href="#MLDataBot-90"><span class="linenos"> 90</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">get_move</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="n">state</span><span class="p">,</span> <span class="n">leader_move</span><span class="o">=</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="MLDataBot-91"><a href="#MLDataBot-91"><span class="linenos"> 91</span></a>
</span><span id="MLDataBot-92"><a href="#MLDataBot-92"><span class="linenos"> 92</span></a>    <span class="k">def</span> <span class="nf">notify_game_end</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">won</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">PlayerPerspective</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MLDataBot-93"><a href="#MLDataBot-93"><span class="linenos"> 93</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MLDataBot-94"><a href="#MLDataBot-94"><span class="linenos"> 94</span></a><span class="sd">        When the game ends, this function retrieves the game history and more specifically all the replay memories that can</span>
</span><span id="MLDataBot-95"><a href="#MLDataBot-95"><span class="linenos"> 95</span></a><span class="sd">        be derived from it, and stores them in the form of state-actions vector representations and the corresponding outcome of the game</span>
</span><span id="MLDataBot-96"><a href="#MLDataBot-96"><span class="linenos"> 96</span></a>
</span><span id="MLDataBot-97"><a href="#MLDataBot-97"><span class="linenos"> 97</span></a><span class="sd">        :param won: Did this bot win the game?</span>
</span><span id="MLDataBot-98"><a href="#MLDataBot-98"><span class="linenos"> 98</span></a><span class="sd">        :param state: The final state of the game.</span>
</span><span id="MLDataBot-99"><a href="#MLDataBot-99"><span class="linenos"> 99</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MLDataBot-100"><a href="#MLDataBot-100"><span class="linenos">100</span></a>        <span class="c1"># we retrieve the game history while actually discarding the last useless history record (which is after the game has ended),</span>
</span><span id="MLDataBot-101"><a href="#MLDataBot-101"><span class="linenos">101</span></a>        <span class="c1"># we know none of the Tricks can be None because that is only for the last record</span>
</span><span id="MLDataBot-102"><a href="#MLDataBot-102"><span class="linenos">102</span></a>        <span class="n">game_history</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">PlayerPerspective</span><span class="p">,</span> <span class="n">Trick</span><span class="p">]]</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">PlayerPerspective</span><span class="p">,</span> <span class="n">Trick</span><span class="p">]],</span> <span class="n">state</span><span class="o">.</span><span class="n">get_game_history</span><span class="p">()[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="MLDataBot-103"><a href="#MLDataBot-103"><span class="linenos">103</span></a>        <span class="c1"># we also save the training label &quot;won or lost&quot;</span>
</span><span id="MLDataBot-104"><a href="#MLDataBot-104"><span class="linenos">104</span></a>        <span class="n">won_label</span> <span class="o">=</span> <span class="n">won</span>
</span><span id="MLDataBot-105"><a href="#MLDataBot-105"><span class="linenos">105</span></a>
</span><span id="MLDataBot-106"><a href="#MLDataBot-106"><span class="linenos">106</span></a>        <span class="c1"># we iterate over all the rounds of the game</span>
</span><span id="MLDataBot-107"><a href="#MLDataBot-107"><span class="linenos">107</span></a>        <span class="k">for</span> <span class="n">round_player_perspective</span><span class="p">,</span> <span class="n">round_trick</span> <span class="ow">in</span> <span class="n">game_history</span><span class="p">:</span>
</span><span id="MLDataBot-108"><a href="#MLDataBot-108"><span class="linenos">108</span></a>
</span><span id="MLDataBot-109"><a href="#MLDataBot-109"><span class="linenos">109</span></a>            <span class="k">if</span> <span class="n">round_trick</span><span class="o">.</span><span class="n">is_trump_exchange</span><span class="p">():</span>
</span><span id="MLDataBot-110"><a href="#MLDataBot-110"><span class="linenos">110</span></a>                <span class="n">leader_move</span> <span class="o">=</span> <span class="n">round_trick</span><span class="o">.</span><span class="n">exchange</span>
</span><span id="MLDataBot-111"><a href="#MLDataBot-111"><span class="linenos">111</span></a>                <span class="n">follower_move</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="MLDataBot-112"><a href="#MLDataBot-112"><span class="linenos">112</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="MLDataBot-113"><a href="#MLDataBot-113"><span class="linenos">113</span></a>                <span class="n">leader_move</span> <span class="o">=</span> <span class="n">round_trick</span><span class="o">.</span><span class="n">leader_move</span>
</span><span id="MLDataBot-114"><a href="#MLDataBot-114"><span class="linenos">114</span></a>                <span class="n">follower_move</span> <span class="o">=</span> <span class="n">round_trick</span><span class="o">.</span><span class="n">follower_move</span>
</span><span id="MLDataBot-115"><a href="#MLDataBot-115"><span class="linenos">115</span></a>
</span><span id="MLDataBot-116"><a href="#MLDataBot-116"><span class="linenos">116</span></a>            <span class="c1"># we do not want this representation to include actions that followed. So if this agent was the leader, we ignore the followers move</span>
</span><span id="MLDataBot-117"><a href="#MLDataBot-117"><span class="linenos">117</span></a>            <span class="k">if</span> <span class="n">round_player_perspective</span><span class="o">.</span><span class="n">am_i_leader</span><span class="p">():</span>
</span><span id="MLDataBot-118"><a href="#MLDataBot-118"><span class="linenos">118</span></a>                <span class="n">follower_move</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="MLDataBot-119"><a href="#MLDataBot-119"><span class="linenos">119</span></a>
</span><span id="MLDataBot-120"><a href="#MLDataBot-120"><span class="linenos">120</span></a>            <span class="n">state_actions_representation</span> <span class="o">=</span> <span class="n">create_state_and_actions_vector_representation</span><span class="p">(</span>
</span><span id="MLDataBot-121"><a href="#MLDataBot-121"><span class="linenos">121</span></a>                <span class="n">state</span><span class="o">=</span><span class="n">round_player_perspective</span><span class="p">,</span> <span class="n">leader_move</span><span class="o">=</span><span class="n">leader_move</span><span class="p">,</span> <span class="n">follower_move</span><span class="o">=</span><span class="n">follower_move</span><span class="p">)</span>
</span><span id="MLDataBot-122"><a href="#MLDataBot-122"><span class="linenos">122</span></a>
</span><span id="MLDataBot-123"><a href="#MLDataBot-123"><span class="linenos">123</span></a>            <span class="c1"># append replay memory to file</span>
</span><span id="MLDataBot-124"><a href="#MLDataBot-124"><span class="linenos">124</span></a>            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">replay_memory_file_path</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;a&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">replay_memory_file</span><span class="p">:</span>
</span><span id="MLDataBot-125"><a href="#MLDataBot-125"><span class="linenos">125</span></a>                <span class="c1"># replay_memory_line: List[Tuple[list, number]] = [state_actions_representation, won_label]</span>
</span><span id="MLDataBot-126"><a href="#MLDataBot-126"><span class="linenos">126</span></a>                <span class="c1"># writing to replay memory file in the form &quot;[feature list] || int(won_label)]</span>
</span><span id="MLDataBot-127"><a href="#MLDataBot-127"><span class="linenos">127</span></a>                <span class="n">replay_memory_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">state_actions_representation</span><span class="p">)[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2"> || </span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">won_label</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>This class is defined to allow the creation of a training schnapsen bot dataset, that allows us to train a Machine Learning (ML) Bot
Practically, it helps us record how the game plays out according to a provided Bot behaviour; build what is called a "replay memory"
In more detail, we create one training sample for each decision the bot makes within a game, where a decision is an action selection for a specific game state.
Then we relate each decision with the outcome of the game, i.e. whether this bot won or not.
This way we can then train a bot according to the assumption that:
    "decisions in earlier games that ended up in victories should be preferred over decisions that lead to lost games"
This class only records the decisions and game outcomes of the provided bot, according to its own perspective - incomplete game state knowledge.</p>
</div>


                            <div id="MLDataBot.__init__" class="classattr">
                                        <input id="MLDataBot.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">MLDataBot</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">bot</span><span class="p">:</span> <span class="n"><a href="game.html#Bot">schnapsen.game.Bot</a></span>, </span><span class="param"><span class="n">replay_memory_location</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span></span>)</span>

                <label class="view-source-button" for="MLDataBot.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MLDataBot.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MLDataBot.__init__-77"><a href="#MLDataBot.__init__-77"><span class="linenos">77</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bot</span><span class="p">:</span> <span class="n">Bot</span><span class="p">,</span> <span class="n">replay_memory_location</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MLDataBot.__init__-78"><a href="#MLDataBot.__init__-78"><span class="linenos">78</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MLDataBot.__init__-79"><a href="#MLDataBot.__init__-79"><span class="linenos">79</span></a><span class="sd">        :param bot: the provided bot that will actually play the game and make decisions</span>
</span><span id="MLDataBot.__init__-80"><a href="#MLDataBot.__init__-80"><span class="linenos">80</span></a><span class="sd">        :param replay_memory_location: the filename under which the replay memory records will be</span>
</span><span id="MLDataBot.__init__-81"><a href="#MLDataBot.__init__-81"><span class="linenos">81</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MLDataBot.__init__-82"><a href="#MLDataBot.__init__-82"><span class="linenos">82</span></a>
</span><span id="MLDataBot.__init__-83"><a href="#MLDataBot.__init__-83"><span class="linenos">83</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="p">:</span> <span class="n">Bot</span> <span class="o">=</span> <span class="n">bot</span>
</span><span id="MLDataBot.__init__-84"><a href="#MLDataBot.__init__-84"><span class="linenos">84</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">replay_memory_file_path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">=</span> <span class="n">replay_memory_location</span>
</span></pre></div>


            <div class="docstring"><h6 id="parameters">Parameters</h6>

<ul>
<li><strong>bot</strong>:  the provided bot that will actually play the game and make decisions</li>
<li><strong>replay_memory_location</strong>:  the filename under which the replay memory records will be</li>
</ul>
</div>


                            </div>
                            <div id="MLDataBot.get_move" class="classattr">
                                        <input id="MLDataBot.get_move-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_move</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">state</span><span class="p">:</span> <span class="n"><a href="game.html#PlayerPerspective">schnapsen.game.PlayerPerspective</a></span>,</span><span class="param">	<span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="game.html#Move">schnapsen.game.Move</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n"><a href="game.html#Move">schnapsen.game.Move</a></span>:</span></span>

                <label class="view-source-button" for="MLDataBot.get_move-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MLDataBot.get_move"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MLDataBot.get_move-86"><a href="#MLDataBot.get_move-86"><span class="linenos">86</span></a>    <span class="k">def</span> <span class="nf">get_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">PlayerPerspective</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Move</span><span class="p">:</span>
</span><span id="MLDataBot.get_move-87"><a href="#MLDataBot.get_move-87"><span class="linenos">87</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MLDataBot.get_move-88"><a href="#MLDataBot.get_move-88"><span class="linenos">88</span></a><span class="sd">            This function simply calls the get_move of the provided bot</span>
</span><span id="MLDataBot.get_move-89"><a href="#MLDataBot.get_move-89"><span class="linenos">89</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MLDataBot.get_move-90"><a href="#MLDataBot.get_move-90"><span class="linenos">90</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">get_move</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="n">state</span><span class="p">,</span> <span class="n">leader_move</span><span class="o">=</span><span class="n">leader_move</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>This function simply calls the get_move of the provided bot</p>
</div>


                            </div>
                            <div id="MLDataBot.notify_game_end" class="classattr">
                                        <input id="MLDataBot.notify_game_end-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">notify_game_end</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">won</span><span class="p">:</span> <span class="nb">bool</span>, </span><span class="param"><span class="n">state</span><span class="p">:</span> <span class="n"><a href="game.html#PlayerPerspective">schnapsen.game.PlayerPerspective</a></span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="MLDataBot.notify_game_end-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MLDataBot.notify_game_end"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MLDataBot.notify_game_end-92"><a href="#MLDataBot.notify_game_end-92"><span class="linenos"> 92</span></a>    <span class="k">def</span> <span class="nf">notify_game_end</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">won</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">PlayerPerspective</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MLDataBot.notify_game_end-93"><a href="#MLDataBot.notify_game_end-93"><span class="linenos"> 93</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MLDataBot.notify_game_end-94"><a href="#MLDataBot.notify_game_end-94"><span class="linenos"> 94</span></a><span class="sd">        When the game ends, this function retrieves the game history and more specifically all the replay memories that can</span>
</span><span id="MLDataBot.notify_game_end-95"><a href="#MLDataBot.notify_game_end-95"><span class="linenos"> 95</span></a><span class="sd">        be derived from it, and stores them in the form of state-actions vector representations and the corresponding outcome of the game</span>
</span><span id="MLDataBot.notify_game_end-96"><a href="#MLDataBot.notify_game_end-96"><span class="linenos"> 96</span></a>
</span><span id="MLDataBot.notify_game_end-97"><a href="#MLDataBot.notify_game_end-97"><span class="linenos"> 97</span></a><span class="sd">        :param won: Did this bot win the game?</span>
</span><span id="MLDataBot.notify_game_end-98"><a href="#MLDataBot.notify_game_end-98"><span class="linenos"> 98</span></a><span class="sd">        :param state: The final state of the game.</span>
</span><span id="MLDataBot.notify_game_end-99"><a href="#MLDataBot.notify_game_end-99"><span class="linenos"> 99</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MLDataBot.notify_game_end-100"><a href="#MLDataBot.notify_game_end-100"><span class="linenos">100</span></a>        <span class="c1"># we retrieve the game history while actually discarding the last useless history record (which is after the game has ended),</span>
</span><span id="MLDataBot.notify_game_end-101"><a href="#MLDataBot.notify_game_end-101"><span class="linenos">101</span></a>        <span class="c1"># we know none of the Tricks can be None because that is only for the last record</span>
</span><span id="MLDataBot.notify_game_end-102"><a href="#MLDataBot.notify_game_end-102"><span class="linenos">102</span></a>        <span class="n">game_history</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">PlayerPerspective</span><span class="p">,</span> <span class="n">Trick</span><span class="p">]]</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">PlayerPerspective</span><span class="p">,</span> <span class="n">Trick</span><span class="p">]],</span> <span class="n">state</span><span class="o">.</span><span class="n">get_game_history</span><span class="p">()[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="MLDataBot.notify_game_end-103"><a href="#MLDataBot.notify_game_end-103"><span class="linenos">103</span></a>        <span class="c1"># we also save the training label &quot;won or lost&quot;</span>
</span><span id="MLDataBot.notify_game_end-104"><a href="#MLDataBot.notify_game_end-104"><span class="linenos">104</span></a>        <span class="n">won_label</span> <span class="o">=</span> <span class="n">won</span>
</span><span id="MLDataBot.notify_game_end-105"><a href="#MLDataBot.notify_game_end-105"><span class="linenos">105</span></a>
</span><span id="MLDataBot.notify_game_end-106"><a href="#MLDataBot.notify_game_end-106"><span class="linenos">106</span></a>        <span class="c1"># we iterate over all the rounds of the game</span>
</span><span id="MLDataBot.notify_game_end-107"><a href="#MLDataBot.notify_game_end-107"><span class="linenos">107</span></a>        <span class="k">for</span> <span class="n">round_player_perspective</span><span class="p">,</span> <span class="n">round_trick</span> <span class="ow">in</span> <span class="n">game_history</span><span class="p">:</span>
</span><span id="MLDataBot.notify_game_end-108"><a href="#MLDataBot.notify_game_end-108"><span class="linenos">108</span></a>
</span><span id="MLDataBot.notify_game_end-109"><a href="#MLDataBot.notify_game_end-109"><span class="linenos">109</span></a>            <span class="k">if</span> <span class="n">round_trick</span><span class="o">.</span><span class="n">is_trump_exchange</span><span class="p">():</span>
</span><span id="MLDataBot.notify_game_end-110"><a href="#MLDataBot.notify_game_end-110"><span class="linenos">110</span></a>                <span class="n">leader_move</span> <span class="o">=</span> <span class="n">round_trick</span><span class="o">.</span><span class="n">exchange</span>
</span><span id="MLDataBot.notify_game_end-111"><a href="#MLDataBot.notify_game_end-111"><span class="linenos">111</span></a>                <span class="n">follower_move</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="MLDataBot.notify_game_end-112"><a href="#MLDataBot.notify_game_end-112"><span class="linenos">112</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="MLDataBot.notify_game_end-113"><a href="#MLDataBot.notify_game_end-113"><span class="linenos">113</span></a>                <span class="n">leader_move</span> <span class="o">=</span> <span class="n">round_trick</span><span class="o">.</span><span class="n">leader_move</span>
</span><span id="MLDataBot.notify_game_end-114"><a href="#MLDataBot.notify_game_end-114"><span class="linenos">114</span></a>                <span class="n">follower_move</span> <span class="o">=</span> <span class="n">round_trick</span><span class="o">.</span><span class="n">follower_move</span>
</span><span id="MLDataBot.notify_game_end-115"><a href="#MLDataBot.notify_game_end-115"><span class="linenos">115</span></a>
</span><span id="MLDataBot.notify_game_end-116"><a href="#MLDataBot.notify_game_end-116"><span class="linenos">116</span></a>            <span class="c1"># we do not want this representation to include actions that followed. So if this agent was the leader, we ignore the followers move</span>
</span><span id="MLDataBot.notify_game_end-117"><a href="#MLDataBot.notify_game_end-117"><span class="linenos">117</span></a>            <span class="k">if</span> <span class="n">round_player_perspective</span><span class="o">.</span><span class="n">am_i_leader</span><span class="p">():</span>
</span><span id="MLDataBot.notify_game_end-118"><a href="#MLDataBot.notify_game_end-118"><span class="linenos">118</span></a>                <span class="n">follower_move</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="MLDataBot.notify_game_end-119"><a href="#MLDataBot.notify_game_end-119"><span class="linenos">119</span></a>
</span><span id="MLDataBot.notify_game_end-120"><a href="#MLDataBot.notify_game_end-120"><span class="linenos">120</span></a>            <span class="n">state_actions_representation</span> <span class="o">=</span> <span class="n">create_state_and_actions_vector_representation</span><span class="p">(</span>
</span><span id="MLDataBot.notify_game_end-121"><a href="#MLDataBot.notify_game_end-121"><span class="linenos">121</span></a>                <span class="n">state</span><span class="o">=</span><span class="n">round_player_perspective</span><span class="p">,</span> <span class="n">leader_move</span><span class="o">=</span><span class="n">leader_move</span><span class="p">,</span> <span class="n">follower_move</span><span class="o">=</span><span class="n">follower_move</span><span class="p">)</span>
</span><span id="MLDataBot.notify_game_end-122"><a href="#MLDataBot.notify_game_end-122"><span class="linenos">122</span></a>
</span><span id="MLDataBot.notify_game_end-123"><a href="#MLDataBot.notify_game_end-123"><span class="linenos">123</span></a>            <span class="c1"># append replay memory to file</span>
</span><span id="MLDataBot.notify_game_end-124"><a href="#MLDataBot.notify_game_end-124"><span class="linenos">124</span></a>            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">replay_memory_file_path</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;a&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">replay_memory_file</span><span class="p">:</span>
</span><span id="MLDataBot.notify_game_end-125"><a href="#MLDataBot.notify_game_end-125"><span class="linenos">125</span></a>                <span class="c1"># replay_memory_line: List[Tuple[list, number]] = [state_actions_representation, won_label]</span>
</span><span id="MLDataBot.notify_game_end-126"><a href="#MLDataBot.notify_game_end-126"><span class="linenos">126</span></a>                <span class="c1"># writing to replay memory file in the form &quot;[feature list] || int(won_label)]</span>
</span><span id="MLDataBot.notify_game_end-127"><a href="#MLDataBot.notify_game_end-127"><span class="linenos">127</span></a>                <span class="n">replay_memory_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">state_actions_representation</span><span class="p">)[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2"> || </span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">won_label</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>When the game ends, this function retrieves the game history and more specifically all the replay memories that can
be derived from it, and stores them in the form of state-actions vector representations and the corresponding outcome of the game</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>won</strong>:  Did this bot win the game?</li>
<li><strong>state</strong>:  The final state of the game.</li>
</ul>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="game.html#Bot">schnapsen.game.Bot</a></dt>
                                <dd id="MLDataBot.notify_trump_exchange" class="function"><a href="game.html#Bot.notify_trump_exchange">notify_trump_exchange</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="MLPlayingBot">
                            <input id="MLPlayingBot-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">MLPlayingBot</span><wbr>(<span class="base"><a href="game.html#Bot">schnapsen.game.Bot</a></span>):

                <label class="view-source-button" for="MLPlayingBot-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MLPlayingBot"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MLPlayingBot-12"><a href="#MLPlayingBot-12"><span class="linenos">12</span></a><span class="k">class</span> <span class="nc">MLPlayingBot</span><span class="p">(</span><span class="n">Bot</span><span class="p">):</span>
</span><span id="MLPlayingBot-13"><a href="#MLPlayingBot-13"><span class="linenos">13</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MLPlayingBot-14"><a href="#MLPlayingBot-14"><span class="linenos">14</span></a><span class="sd">    This class loads a trained ML model and uses it to play</span>
</span><span id="MLPlayingBot-15"><a href="#MLPlayingBot-15"><span class="linenos">15</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="MLPlayingBot-16"><a href="#MLPlayingBot-16"><span class="linenos">16</span></a>
</span><span id="MLPlayingBot-17"><a href="#MLPlayingBot-17"><span class="linenos">17</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_location</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MLPlayingBot-18"><a href="#MLPlayingBot-18"><span class="linenos">18</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MLPlayingBot-19"><a href="#MLPlayingBot-19"><span class="linenos">19</span></a><span class="sd">        Create a new MLPlayingBot which uses the model stored in the mofel_location.</span>
</span><span id="MLPlayingBot-20"><a href="#MLPlayingBot-20"><span class="linenos">20</span></a>
</span><span id="MLPlayingBot-21"><a href="#MLPlayingBot-21"><span class="linenos">21</span></a><span class="sd">        :param model_location: The file containing the model.</span>
</span><span id="MLPlayingBot-22"><a href="#MLPlayingBot-22"><span class="linenos">22</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MLPlayingBot-23"><a href="#MLPlayingBot-23"><span class="linenos">23</span></a>        <span class="k">if</span> <span class="n">model_location</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MLPlayingBot-24"><a href="#MLPlayingBot-24"><span class="linenos">24</span></a>            <span class="n">model_location</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;ML_models/&quot;</span><span class="p">)</span> <span class="o">/</span> <span class="s2">&quot;test_model&quot;</span>
</span><span id="MLPlayingBot-25"><a href="#MLPlayingBot-25"><span class="linenos">25</span></a>        <span class="k">assert</span> <span class="n">model_location</span><span class="o">.</span><span class="n">exists</span><span class="p">(),</span> <span class="sa">f</span><span class="s2">&quot;Model could not be found at: </span><span class="si">{</span><span class="n">model_location</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="MLPlayingBot-26"><a href="#MLPlayingBot-26"><span class="linenos">26</span></a>        <span class="c1"># load model</span>
</span><span id="MLPlayingBot-27"><a href="#MLPlayingBot-27"><span class="linenos">27</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span> <span class="o">=</span> <span class="n">joblib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">model_location</span><span class="p">)</span>
</span><span id="MLPlayingBot-28"><a href="#MLPlayingBot-28"><span class="linenos">28</span></a>
</span><span id="MLPlayingBot-29"><a href="#MLPlayingBot-29"><span class="linenos">29</span></a>    <span class="k">def</span> <span class="nf">get_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">PlayerPerspective</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Move</span><span class="p">:</span>
</span><span id="MLPlayingBot-30"><a href="#MLPlayingBot-30"><span class="linenos">30</span></a>        <span class="c1"># get the sate feature representation</span>
</span><span id="MLPlayingBot-31"><a href="#MLPlayingBot-31"><span class="linenos">31</span></a>        <span class="n">state_representation</span> <span class="o">=</span> <span class="n">get_state_feature_vector</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="MLPlayingBot-32"><a href="#MLPlayingBot-32"><span class="linenos">32</span></a>        <span class="c1"># get the leader&#39;s move representation, even if it is None</span>
</span><span id="MLPlayingBot-33"><a href="#MLPlayingBot-33"><span class="linenos">33</span></a>        <span class="n">leader_move_representation</span> <span class="o">=</span> <span class="n">get_move_feature_vector</span><span class="p">(</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="MLPlayingBot-34"><a href="#MLPlayingBot-34"><span class="linenos">34</span></a>        <span class="c1"># get all my valid moves</span>
</span><span id="MLPlayingBot-35"><a href="#MLPlayingBot-35"><span class="linenos">35</span></a>        <span class="n">my_valid_moves</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">valid_moves</span><span class="p">()</span>
</span><span id="MLPlayingBot-36"><a href="#MLPlayingBot-36"><span class="linenos">36</span></a>        <span class="c1"># get the feature representations for all my valid moves</span>
</span><span id="MLPlayingBot-37"><a href="#MLPlayingBot-37"><span class="linenos">37</span></a>        <span class="n">my_move_representations</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="MLPlayingBot-38"><a href="#MLPlayingBot-38"><span class="linenos">38</span></a>        <span class="k">for</span> <span class="n">my_move</span> <span class="ow">in</span> <span class="n">my_valid_moves</span><span class="p">:</span>
</span><span id="MLPlayingBot-39"><a href="#MLPlayingBot-39"><span class="linenos">39</span></a>            <span class="n">my_move_representations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">get_move_feature_vector</span><span class="p">(</span><span class="n">my_move</span><span class="p">))</span>
</span><span id="MLPlayingBot-40"><a href="#MLPlayingBot-40"><span class="linenos">40</span></a>
</span><span id="MLPlayingBot-41"><a href="#MLPlayingBot-41"><span class="linenos">41</span></a>        <span class="c1"># create all model inputs, for all bot&#39;s valid moves</span>
</span><span id="MLPlayingBot-42"><a href="#MLPlayingBot-42"><span class="linenos">42</span></a>        <span class="n">action_state_representations</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="MLPlayingBot-43"><a href="#MLPlayingBot-43"><span class="linenos">43</span></a>
</span><span id="MLPlayingBot-44"><a href="#MLPlayingBot-44"><span class="linenos">44</span></a>        <span class="k">if</span> <span class="n">state</span><span class="o">.</span><span class="n">am_i_leader</span><span class="p">():</span>
</span><span id="MLPlayingBot-45"><a href="#MLPlayingBot-45"><span class="linenos">45</span></a>            <span class="n">follower_move_representation</span> <span class="o">=</span> <span class="n">get_move_feature_vector</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
</span><span id="MLPlayingBot-46"><a href="#MLPlayingBot-46"><span class="linenos">46</span></a>            <span class="k">for</span> <span class="n">my_move_representation</span> <span class="ow">in</span> <span class="n">my_move_representations</span><span class="p">:</span>
</span><span id="MLPlayingBot-47"><a href="#MLPlayingBot-47"><span class="linenos">47</span></a>                <span class="n">action_state_representations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="MLPlayingBot-48"><a href="#MLPlayingBot-48"><span class="linenos">48</span></a>                    <span class="n">state_representation</span> <span class="o">+</span> <span class="n">my_move_representation</span> <span class="o">+</span> <span class="n">follower_move_representation</span><span class="p">)</span>
</span><span id="MLPlayingBot-49"><a href="#MLPlayingBot-49"><span class="linenos">49</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="MLPlayingBot-50"><a href="#MLPlayingBot-50"><span class="linenos">50</span></a>            <span class="k">for</span> <span class="n">my_move_representation</span> <span class="ow">in</span> <span class="n">my_move_representations</span><span class="p">:</span>
</span><span id="MLPlayingBot-51"><a href="#MLPlayingBot-51"><span class="linenos">51</span></a>                <span class="n">action_state_representations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="MLPlayingBot-52"><a href="#MLPlayingBot-52"><span class="linenos">52</span></a>                    <span class="n">state_representation</span> <span class="o">+</span> <span class="n">leader_move_representation</span> <span class="o">+</span> <span class="n">my_move_representation</span><span class="p">)</span>
</span><span id="MLPlayingBot-53"><a href="#MLPlayingBot-53"><span class="linenos">53</span></a>
</span><span id="MLPlayingBot-54"><a href="#MLPlayingBot-54"><span class="linenos">54</span></a>        <span class="n">model_output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">action_state_representations</span><span class="p">)</span>
</span><span id="MLPlayingBot-55"><a href="#MLPlayingBot-55"><span class="linenos">55</span></a>        <span class="n">winning_probabilities_of_moves</span> <span class="o">=</span> <span class="p">[</span><span class="n">outcome_prob</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">outcome_prob</span> <span class="ow">in</span> <span class="n">model_output</span><span class="p">]</span>
</span><span id="MLPlayingBot-56"><a href="#MLPlayingBot-56"><span class="linenos">56</span></a>        <span class="n">highest_value</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="MLPlayingBot-57"><a href="#MLPlayingBot-57"><span class="linenos">57</span></a>        <span class="n">best_move</span><span class="p">:</span> <span class="n">Move</span>
</span><span id="MLPlayingBot-58"><a href="#MLPlayingBot-58"><span class="linenos">58</span></a>        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">winning_probabilities_of_moves</span><span class="p">):</span>
</span><span id="MLPlayingBot-59"><a href="#MLPlayingBot-59"><span class="linenos">59</span></a>            <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="n">highest_value</span><span class="p">:</span>
</span><span id="MLPlayingBot-60"><a href="#MLPlayingBot-60"><span class="linenos">60</span></a>                <span class="n">highest_value</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="MLPlayingBot-61"><a href="#MLPlayingBot-61"><span class="linenos">61</span></a>                <span class="n">best_move</span> <span class="o">=</span> <span class="n">my_valid_moves</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
</span><span id="MLPlayingBot-62"><a href="#MLPlayingBot-62"><span class="linenos">62</span></a>        <span class="k">assert</span> <span class="n">best_move</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="MLPlayingBot-63"><a href="#MLPlayingBot-63"><span class="linenos">63</span></a>        <span class="k">return</span> <span class="n">best_move</span>
</span></pre></div>


            <div class="docstring"><p>This class loads a trained ML model and uses it to play</p>
</div>


                            <div id="MLPlayingBot.__init__" class="classattr">
                                        <input id="MLPlayingBot.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">MLPlayingBot</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">model_location</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]</span></span>)</span>

                <label class="view-source-button" for="MLPlayingBot.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MLPlayingBot.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MLPlayingBot.__init__-17"><a href="#MLPlayingBot.__init__-17"><span class="linenos">17</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_location</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MLPlayingBot.__init__-18"><a href="#MLPlayingBot.__init__-18"><span class="linenos">18</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MLPlayingBot.__init__-19"><a href="#MLPlayingBot.__init__-19"><span class="linenos">19</span></a><span class="sd">        Create a new MLPlayingBot which uses the model stored in the mofel_location.</span>
</span><span id="MLPlayingBot.__init__-20"><a href="#MLPlayingBot.__init__-20"><span class="linenos">20</span></a>
</span><span id="MLPlayingBot.__init__-21"><a href="#MLPlayingBot.__init__-21"><span class="linenos">21</span></a><span class="sd">        :param model_location: The file containing the model.</span>
</span><span id="MLPlayingBot.__init__-22"><a href="#MLPlayingBot.__init__-22"><span class="linenos">22</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MLPlayingBot.__init__-23"><a href="#MLPlayingBot.__init__-23"><span class="linenos">23</span></a>        <span class="k">if</span> <span class="n">model_location</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MLPlayingBot.__init__-24"><a href="#MLPlayingBot.__init__-24"><span class="linenos">24</span></a>            <span class="n">model_location</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;ML_models/&quot;</span><span class="p">)</span> <span class="o">/</span> <span class="s2">&quot;test_model&quot;</span>
</span><span id="MLPlayingBot.__init__-25"><a href="#MLPlayingBot.__init__-25"><span class="linenos">25</span></a>        <span class="k">assert</span> <span class="n">model_location</span><span class="o">.</span><span class="n">exists</span><span class="p">(),</span> <span class="sa">f</span><span class="s2">&quot;Model could not be found at: </span><span class="si">{</span><span class="n">model_location</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="MLPlayingBot.__init__-26"><a href="#MLPlayingBot.__init__-26"><span class="linenos">26</span></a>        <span class="c1"># load model</span>
</span><span id="MLPlayingBot.__init__-27"><a href="#MLPlayingBot.__init__-27"><span class="linenos">27</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span> <span class="o">=</span> <span class="n">joblib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">model_location</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Create a new MLPlayingBot which uses the model stored in the mofel_location.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>model_location</strong>:  The file containing the model.</li>
</ul>
</div>


                            </div>
                            <div id="MLPlayingBot.get_move" class="classattr">
                                        <input id="MLPlayingBot.get_move-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_move</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">state</span><span class="p">:</span> <span class="n"><a href="game.html#PlayerPerspective">schnapsen.game.PlayerPerspective</a></span>,</span><span class="param">	<span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="game.html#Move">schnapsen.game.Move</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n"><a href="game.html#Move">schnapsen.game.Move</a></span>:</span></span>

                <label class="view-source-button" for="MLPlayingBot.get_move-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MLPlayingBot.get_move"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MLPlayingBot.get_move-29"><a href="#MLPlayingBot.get_move-29"><span class="linenos">29</span></a>    <span class="k">def</span> <span class="nf">get_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">PlayerPerspective</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Move</span><span class="p">:</span>
</span><span id="MLPlayingBot.get_move-30"><a href="#MLPlayingBot.get_move-30"><span class="linenos">30</span></a>        <span class="c1"># get the sate feature representation</span>
</span><span id="MLPlayingBot.get_move-31"><a href="#MLPlayingBot.get_move-31"><span class="linenos">31</span></a>        <span class="n">state_representation</span> <span class="o">=</span> <span class="n">get_state_feature_vector</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="MLPlayingBot.get_move-32"><a href="#MLPlayingBot.get_move-32"><span class="linenos">32</span></a>        <span class="c1"># get the leader&#39;s move representation, even if it is None</span>
</span><span id="MLPlayingBot.get_move-33"><a href="#MLPlayingBot.get_move-33"><span class="linenos">33</span></a>        <span class="n">leader_move_representation</span> <span class="o">=</span> <span class="n">get_move_feature_vector</span><span class="p">(</span><span class="n">leader_move</span><span class="p">)</span>
</span><span id="MLPlayingBot.get_move-34"><a href="#MLPlayingBot.get_move-34"><span class="linenos">34</span></a>        <span class="c1"># get all my valid moves</span>
</span><span id="MLPlayingBot.get_move-35"><a href="#MLPlayingBot.get_move-35"><span class="linenos">35</span></a>        <span class="n">my_valid_moves</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">valid_moves</span><span class="p">()</span>
</span><span id="MLPlayingBot.get_move-36"><a href="#MLPlayingBot.get_move-36"><span class="linenos">36</span></a>        <span class="c1"># get the feature representations for all my valid moves</span>
</span><span id="MLPlayingBot.get_move-37"><a href="#MLPlayingBot.get_move-37"><span class="linenos">37</span></a>        <span class="n">my_move_representations</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="MLPlayingBot.get_move-38"><a href="#MLPlayingBot.get_move-38"><span class="linenos">38</span></a>        <span class="k">for</span> <span class="n">my_move</span> <span class="ow">in</span> <span class="n">my_valid_moves</span><span class="p">:</span>
</span><span id="MLPlayingBot.get_move-39"><a href="#MLPlayingBot.get_move-39"><span class="linenos">39</span></a>            <span class="n">my_move_representations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">get_move_feature_vector</span><span class="p">(</span><span class="n">my_move</span><span class="p">))</span>
</span><span id="MLPlayingBot.get_move-40"><a href="#MLPlayingBot.get_move-40"><span class="linenos">40</span></a>
</span><span id="MLPlayingBot.get_move-41"><a href="#MLPlayingBot.get_move-41"><span class="linenos">41</span></a>        <span class="c1"># create all model inputs, for all bot&#39;s valid moves</span>
</span><span id="MLPlayingBot.get_move-42"><a href="#MLPlayingBot.get_move-42"><span class="linenos">42</span></a>        <span class="n">action_state_representations</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="MLPlayingBot.get_move-43"><a href="#MLPlayingBot.get_move-43"><span class="linenos">43</span></a>
</span><span id="MLPlayingBot.get_move-44"><a href="#MLPlayingBot.get_move-44"><span class="linenos">44</span></a>        <span class="k">if</span> <span class="n">state</span><span class="o">.</span><span class="n">am_i_leader</span><span class="p">():</span>
</span><span id="MLPlayingBot.get_move-45"><a href="#MLPlayingBot.get_move-45"><span class="linenos">45</span></a>            <span class="n">follower_move_representation</span> <span class="o">=</span> <span class="n">get_move_feature_vector</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
</span><span id="MLPlayingBot.get_move-46"><a href="#MLPlayingBot.get_move-46"><span class="linenos">46</span></a>            <span class="k">for</span> <span class="n">my_move_representation</span> <span class="ow">in</span> <span class="n">my_move_representations</span><span class="p">:</span>
</span><span id="MLPlayingBot.get_move-47"><a href="#MLPlayingBot.get_move-47"><span class="linenos">47</span></a>                <span class="n">action_state_representations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="MLPlayingBot.get_move-48"><a href="#MLPlayingBot.get_move-48"><span class="linenos">48</span></a>                    <span class="n">state_representation</span> <span class="o">+</span> <span class="n">my_move_representation</span> <span class="o">+</span> <span class="n">follower_move_representation</span><span class="p">)</span>
</span><span id="MLPlayingBot.get_move-49"><a href="#MLPlayingBot.get_move-49"><span class="linenos">49</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="MLPlayingBot.get_move-50"><a href="#MLPlayingBot.get_move-50"><span class="linenos">50</span></a>            <span class="k">for</span> <span class="n">my_move_representation</span> <span class="ow">in</span> <span class="n">my_move_representations</span><span class="p">:</span>
</span><span id="MLPlayingBot.get_move-51"><a href="#MLPlayingBot.get_move-51"><span class="linenos">51</span></a>                <span class="n">action_state_representations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="MLPlayingBot.get_move-52"><a href="#MLPlayingBot.get_move-52"><span class="linenos">52</span></a>                    <span class="n">state_representation</span> <span class="o">+</span> <span class="n">leader_move_representation</span> <span class="o">+</span> <span class="n">my_move_representation</span><span class="p">)</span>
</span><span id="MLPlayingBot.get_move-53"><a href="#MLPlayingBot.get_move-53"><span class="linenos">53</span></a>
</span><span id="MLPlayingBot.get_move-54"><a href="#MLPlayingBot.get_move-54"><span class="linenos">54</span></a>        <span class="n">model_output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">action_state_representations</span><span class="p">)</span>
</span><span id="MLPlayingBot.get_move-55"><a href="#MLPlayingBot.get_move-55"><span class="linenos">55</span></a>        <span class="n">winning_probabilities_of_moves</span> <span class="o">=</span> <span class="p">[</span><span class="n">outcome_prob</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">outcome_prob</span> <span class="ow">in</span> <span class="n">model_output</span><span class="p">]</span>
</span><span id="MLPlayingBot.get_move-56"><a href="#MLPlayingBot.get_move-56"><span class="linenos">56</span></a>        <span class="n">highest_value</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="MLPlayingBot.get_move-57"><a href="#MLPlayingBot.get_move-57"><span class="linenos">57</span></a>        <span class="n">best_move</span><span class="p">:</span> <span class="n">Move</span>
</span><span id="MLPlayingBot.get_move-58"><a href="#MLPlayingBot.get_move-58"><span class="linenos">58</span></a>        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">winning_probabilities_of_moves</span><span class="p">):</span>
</span><span id="MLPlayingBot.get_move-59"><a href="#MLPlayingBot.get_move-59"><span class="linenos">59</span></a>            <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="n">highest_value</span><span class="p">:</span>
</span><span id="MLPlayingBot.get_move-60"><a href="#MLPlayingBot.get_move-60"><span class="linenos">60</span></a>                <span class="n">highest_value</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="MLPlayingBot.get_move-61"><a href="#MLPlayingBot.get_move-61"><span class="linenos">61</span></a>                <span class="n">best_move</span> <span class="o">=</span> <span class="n">my_valid_moves</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
</span><span id="MLPlayingBot.get_move-62"><a href="#MLPlayingBot.get_move-62"><span class="linenos">62</span></a>        <span class="k">assert</span> <span class="n">best_move</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="MLPlayingBot.get_move-63"><a href="#MLPlayingBot.get_move-63"><span class="linenos">63</span></a>        <span class="k">return</span> <span class="n">best_move</span>
</span></pre></div>


            <div class="docstring"><p>Get the move this Bot wants to play.
If this Bot is leading, the leader_move will be None. If this both is following, the leader_move will contain the move the opponent just played</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="game.html#Bot">schnapsen.game.Bot</a></dt>
                                <dd id="MLPlayingBot.notify_trump_exchange" class="function"><a href="game.html#Bot.notify_trump_exchange">notify_trump_exchange</a></dd>
                <dd id="MLPlayingBot.notify_game_end" class="function"><a href="game.html#Bot.notify_game_end">notify_game_end</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="train_ML_model">
                            <input id="train_ML_model-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">train_ML_model</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">replay_memory_location</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]</span>,</span><span class="param">	<span class="n">model_location</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]</span>,</span><span class="param">	<span class="n">model_class</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;NN&#39;</span><span class="p">,</span> <span class="s1">&#39;LR&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;LR&#39;</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="train_ML_model-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#train_ML_model"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="train_ML_model-130"><a href="#train_ML_model-130"><span class="linenos">130</span></a><span class="k">def</span> <span class="nf">train_ML_model</span><span class="p">(</span><span class="n">replay_memory_location</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">],</span>
</span><span id="train_ML_model-131"><a href="#train_ML_model-131"><span class="linenos">131</span></a>                   <span class="n">model_location</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">],</span>
</span><span id="train_ML_model-132"><a href="#train_ML_model-132"><span class="linenos">132</span></a>                   <span class="n">model_class</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;NN&quot;</span><span class="p">,</span> <span class="s2">&quot;LR&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;LR&quot;</span>
</span><span id="train_ML_model-133"><a href="#train_ML_model-133"><span class="linenos">133</span></a>                   <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="train_ML_model-134"><a href="#train_ML_model-134"><span class="linenos">134</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="train_ML_model-135"><a href="#train_ML_model-135"><span class="linenos">135</span></a><span class="sd">    Train the ML model for the MLPlayingBot based on replay memory stored byt the MLDataBot.</span>
</span><span id="train_ML_model-136"><a href="#train_ML_model-136"><span class="linenos">136</span></a><span class="sd">    This implementation has the option to train a neural network model or a model based on linear regression.</span>
</span><span id="train_ML_model-137"><a href="#train_ML_model-137"><span class="linenos">137</span></a><span class="sd">    The model classes used in this implemntation are not necesarily optimal.</span>
</span><span id="train_ML_model-138"><a href="#train_ML_model-138"><span class="linenos">138</span></a>
</span><span id="train_ML_model-139"><a href="#train_ML_model-139"><span class="linenos">139</span></a><span class="sd">    :param replay_memory_location: Location of the games stored by MLDataBot, default pathlib.Path(&#39;ML_replay_memories&#39;) / &#39;test_replay_memory&#39;</span>
</span><span id="train_ML_model-140"><a href="#train_ML_model-140"><span class="linenos">140</span></a><span class="sd">    :param model_location: Location where the model will be stored, default pathlib.Path(&quot;ML_models&quot;) / &#39;test_model&#39;</span>
</span><span id="train_ML_model-141"><a href="#train_ML_model-141"><span class="linenos">141</span></a><span class="sd">    :param model_class: The machine learning model class to be used, either &#39;NN&#39; for a neural network, or &#39;LR&#39; for a linear regression.</span>
</span><span id="train_ML_model-142"><a href="#train_ML_model-142"><span class="linenos">142</span></a><span class="sd">    :param overwrite: Whether to overwrite a possibly existing model.</span>
</span><span id="train_ML_model-143"><a href="#train_ML_model-143"><span class="linenos">143</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="train_ML_model-144"><a href="#train_ML_model-144"><span class="linenos">144</span></a>    <span class="k">if</span> <span class="n">replay_memory_location</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="train_ML_model-145"><a href="#train_ML_model-145"><span class="linenos">145</span></a>        <span class="n">replay_memory_location</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;ML_replay_memories&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="s1">&#39;test_replay_memory&#39;</span>
</span><span id="train_ML_model-146"><a href="#train_ML_model-146"><span class="linenos">146</span></a>    <span class="k">if</span> <span class="n">model_location</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="train_ML_model-147"><a href="#train_ML_model-147"><span class="linenos">147</span></a>        <span class="n">model_location</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;ML_models&quot;</span><span class="p">)</span> <span class="o">/</span> <span class="s1">&#39;test_model&#39;</span>
</span><span id="train_ML_model-148"><a href="#train_ML_model-148"><span class="linenos">148</span></a>    <span class="k">assert</span> <span class="n">model_class</span> <span class="o">==</span> <span class="s1">&#39;NN&#39;</span> <span class="ow">or</span> <span class="n">model_class</span> <span class="o">==</span> <span class="s1">&#39;LR&#39;</span><span class="p">,</span> <span class="s2">&quot;Unknown model class&quot;</span>
</span><span id="train_ML_model-149"><a href="#train_ML_model-149"><span class="linenos">149</span></a>
</span><span id="train_ML_model-150"><a href="#train_ML_model-150"><span class="linenos">150</span></a>    <span class="c1"># check that the replay memory dataset is found at the specified location</span>
</span><span id="train_ML_model-151"><a href="#train_ML_model-151"><span class="linenos">151</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">replay_memory_location</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
</span><span id="train_ML_model-152"><a href="#train_ML_model-152"><span class="linenos">152</span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Dataset was not found at: </span><span class="si">{</span><span class="n">replay_memory_location</span><span class="si">}</span><span class="s2"> !&quot;</span><span class="p">)</span>
</span><span id="train_ML_model-153"><a href="#train_ML_model-153"><span class="linenos">153</span></a>
</span><span id="train_ML_model-154"><a href="#train_ML_model-154"><span class="linenos">154</span></a>    <span class="c1"># Check if model exists already</span>
</span><span id="train_ML_model-155"><a href="#train_ML_model-155"><span class="linenos">155</span></a>    <span class="k">if</span> <span class="n">model_location</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
</span><span id="train_ML_model-156"><a href="#train_ML_model-156"><span class="linenos">156</span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="train_ML_model-157"><a href="#train_ML_model-157"><span class="linenos">157</span></a>            <span class="sa">f</span><span class="s2">&quot;Model at </span><span class="si">{</span><span class="n">model_location</span><span class="si">}</span><span class="s2"> exists already and overwrite is set to False. </span><span class="se">\n</span><span class="s2">No new model will be trained, process terminates&quot;</span><span class="p">)</span>
</span><span id="train_ML_model-158"><a href="#train_ML_model-158"><span class="linenos">158</span></a>
</span><span id="train_ML_model-159"><a href="#train_ML_model-159"><span class="linenos">159</span></a>    <span class="c1"># check if directory exists, and if not, then create it</span>
</span><span id="train_ML_model-160"><a href="#train_ML_model-160"><span class="linenos">160</span></a>    <span class="n">model_location</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="train_ML_model-161"><a href="#train_ML_model-161"><span class="linenos">161</span></a>
</span><span id="train_ML_model-162"><a href="#train_ML_model-162"><span class="linenos">162</span></a>    <span class="n">data</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="train_ML_model-163"><a href="#train_ML_model-163"><span class="linenos">163</span></a>    <span class="n">targets</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="train_ML_model-164"><a href="#train_ML_model-164"><span class="linenos">164</span></a>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="n">replay_memory_location</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">replay_memory_file</span><span class="p">:</span>
</span><span id="train_ML_model-165"><a href="#train_ML_model-165"><span class="linenos">165</span></a>        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">replay_memory_file</span><span class="p">:</span>
</span><span id="train_ML_model-166"><a href="#train_ML_model-166"><span class="linenos">166</span></a>            <span class="n">feature_string</span><span class="p">,</span> <span class="n">won_label_str</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;||&quot;</span><span class="p">)</span>
</span><span id="train_ML_model-167"><a href="#train_ML_model-167"><span class="linenos">167</span></a>            <span class="n">feature_list_strings</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">feature_string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
</span><span id="train_ML_model-168"><a href="#train_ML_model-168"><span class="linenos">168</span></a>            <span class="n">feature_list</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">feature</span><span class="p">)</span> <span class="k">for</span> <span class="n">feature</span> <span class="ow">in</span> <span class="n">feature_list_strings</span><span class="p">]</span>
</span><span id="train_ML_model-169"><a href="#train_ML_model-169"><span class="linenos">169</span></a>            <span class="n">won_label</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">won_label_str</span><span class="p">)</span>
</span><span id="train_ML_model-170"><a href="#train_ML_model-170"><span class="linenos">170</span></a>            <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">feature_list</span><span class="p">)</span>
</span><span id="train_ML_model-171"><a href="#train_ML_model-171"><span class="linenos">171</span></a>            <span class="n">targets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">won_label</span><span class="p">)</span>
</span><span id="train_ML_model-172"><a href="#train_ML_model-172"><span class="linenos">172</span></a>
</span><span id="train_ML_model-173"><a href="#train_ML_model-173"><span class="linenos">173</span></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Dataset Statistics:&quot;</span><span class="p">)</span>
</span><span id="train_ML_model-174"><a href="#train_ML_model-174"><span class="linenos">174</span></a>    <span class="n">samples_of_wins</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">targets</span><span class="p">)</span>
</span><span id="train_ML_model-175"><a href="#train_ML_model-175"><span class="linenos">175</span></a>    <span class="n">samples_of_losses</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">targets</span><span class="p">)</span> <span class="o">-</span> <span class="n">samples_of_wins</span>
</span><span id="train_ML_model-176"><a href="#train_ML_model-176"><span class="linenos">176</span></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Samples of wins:&quot;</span><span class="p">,</span> <span class="n">samples_of_wins</span><span class="p">)</span>
</span><span id="train_ML_model-177"><a href="#train_ML_model-177"><span class="linenos">177</span></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Samples of losses:&quot;</span><span class="p">,</span> <span class="n">samples_of_losses</span><span class="p">)</span>
</span><span id="train_ML_model-178"><a href="#train_ML_model-178"><span class="linenos">178</span></a>
</span><span id="train_ML_model-179"><a href="#train_ML_model-179"><span class="linenos">179</span></a>    <span class="c1"># What type of model will be used depends on the value of the parameter use_neural_network</span>
</span><span id="train_ML_model-180"><a href="#train_ML_model-180"><span class="linenos">180</span></a>    <span class="k">if</span> <span class="n">model_class</span> <span class="o">==</span> <span class="s1">&#39;NN&#39;</span><span class="p">:</span>
</span><span id="train_ML_model-181"><a href="#train_ML_model-181"><span class="linenos">181</span></a>        <span class="c1">#############################################</span>
</span><span id="train_ML_model-182"><a href="#train_ML_model-182"><span class="linenos">182</span></a>        <span class="c1"># Neural Network model parameters :</span>
</span><span id="train_ML_model-183"><a href="#train_ML_model-183"><span class="linenos">183</span></a>        <span class="c1"># learn more about the model or how to use better use it by checking out its documentation</span>
</span><span id="train_ML_model-184"><a href="#train_ML_model-184"><span class="linenos">184</span></a>        <span class="c1"># https://scikit-learn.org/stable/modules/generated/sklearn.neural_network.MLPClassifier.html#sklearn.neural_network.MLPClassifier</span>
</span><span id="train_ML_model-185"><a href="#train_ML_model-185"><span class="linenos">185</span></a>        <span class="c1"># Play around with the model parameters below</span>
</span><span id="train_ML_model-186"><a href="#train_ML_model-186"><span class="linenos">186</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Training a Complex (Neural Network) model.&quot;</span><span class="p">)</span>
</span><span id="train_ML_model-187"><a href="#train_ML_model-187"><span class="linenos">187</span></a>
</span><span id="train_ML_model-188"><a href="#train_ML_model-188"><span class="linenos">188</span></a>        <span class="c1"># Feel free to experiment with different number of neural layers or differnt type of neurons per layer</span>
</span><span id="train_ML_model-189"><a href="#train_ML_model-189"><span class="linenos">189</span></a>        <span class="c1"># Tips: more neurons or more layers of neurons create a more complicated model that takes more time to train and</span>
</span><span id="train_ML_model-190"><a href="#train_ML_model-190"><span class="linenos">190</span></a>        <span class="c1"># needs a bigger dataset, but if you find the correct combination of neurons and neural layers and provide a big enough training dataset can lead to better performance</span>
</span><span id="train_ML_model-191"><a href="#train_ML_model-191"><span class="linenos">191</span></a>
</span><span id="train_ML_model-192"><a href="#train_ML_model-192"><span class="linenos">192</span></a>        <span class="c1"># one layer of 30 neurons</span>
</span><span id="train_ML_model-193"><a href="#train_ML_model-193"><span class="linenos">193</span></a>        <span class="n">hidden_layer_sizes</span> <span class="o">=</span> <span class="p">(</span><span class="mi">30</span><span class="p">)</span>
</span><span id="train_ML_model-194"><a href="#train_ML_model-194"><span class="linenos">194</span></a>        <span class="c1"># two layers of 30 and 5 neurons respectively</span>
</span><span id="train_ML_model-195"><a href="#train_ML_model-195"><span class="linenos">195</span></a>        <span class="c1"># hidden_layer_sizes = (30, 5)</span>
</span><span id="train_ML_model-196"><a href="#train_ML_model-196"><span class="linenos">196</span></a>
</span><span id="train_ML_model-197"><a href="#train_ML_model-197"><span class="linenos">197</span></a>        <span class="c1"># The learning rate determines how fast we move towards the optimal solution.</span>
</span><span id="train_ML_model-198"><a href="#train_ML_model-198"><span class="linenos">198</span></a>        <span class="c1"># A low learning rate will converge slowly, but a large one might overshoot.</span>
</span><span id="train_ML_model-199"><a href="#train_ML_model-199"><span class="linenos">199</span></a>        <span class="n">learning_rate</span> <span class="o">=</span> <span class="mf">0.0001</span>
</span><span id="train_ML_model-200"><a href="#train_ML_model-200"><span class="linenos">200</span></a>
</span><span id="train_ML_model-201"><a href="#train_ML_model-201"><span class="linenos">201</span></a>        <span class="c1"># The regularization term aims to prevent over-fitting, and we can tweak its strength here.</span>
</span><span id="train_ML_model-202"><a href="#train_ML_model-202"><span class="linenos">202</span></a>        <span class="n">regularization_strength</span> <span class="o">=</span> <span class="mf">0.0001</span>
</span><span id="train_ML_model-203"><a href="#train_ML_model-203"><span class="linenos">203</span></a>
</span><span id="train_ML_model-204"><a href="#train_ML_model-204"><span class="linenos">204</span></a>        <span class="c1"># Train a neural network</span>
</span><span id="train_ML_model-205"><a href="#train_ML_model-205"><span class="linenos">205</span></a>        <span class="n">learner</span> <span class="o">=</span> <span class="n">MLPClassifier</span><span class="p">(</span><span class="n">hidden_layer_sizes</span><span class="o">=</span><span class="n">hidden_layer_sizes</span><span class="p">,</span> <span class="n">learning_rate_init</span><span class="o">=</span><span class="n">learning_rate</span><span class="p">,</span>
</span><span id="train_ML_model-206"><a href="#train_ML_model-206"><span class="linenos">206</span></a>                                <span class="n">alpha</span><span class="o">=</span><span class="n">regularization_strength</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">early_stopping</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">n_iter_no_change</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
</span><span id="train_ML_model-207"><a href="#train_ML_model-207"><span class="linenos">207</span></a>                                <span class="n">activation</span><span class="o">=</span><span class="s1">&#39;tanh&#39;</span><span class="p">)</span>
</span><span id="train_ML_model-208"><a href="#train_ML_model-208"><span class="linenos">208</span></a>    <span class="k">elif</span> <span class="n">model_class</span> <span class="o">==</span> <span class="s1">&#39;LR&#39;</span><span class="p">:</span>
</span><span id="train_ML_model-209"><a href="#train_ML_model-209"><span class="linenos">209</span></a>        <span class="c1"># Train a simpler Linear Logistic Regression model</span>
</span><span id="train_ML_model-210"><a href="#train_ML_model-210"><span class="linenos">210</span></a>        <span class="c1"># learn more about the model or how to use better use it by checking out its documentation</span>
</span><span id="train_ML_model-211"><a href="#train_ML_model-211"><span class="linenos">211</span></a>        <span class="c1"># https://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LogisticRegression.html#sklearn.linear_model.LogisticRegression</span>
</span><span id="train_ML_model-212"><a href="#train_ML_model-212"><span class="linenos">212</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Training a Simple (Linear Logistic Regression model)&quot;</span><span class="p">)</span>
</span><span id="train_ML_model-213"><a href="#train_ML_model-213"><span class="linenos">213</span></a>
</span><span id="train_ML_model-214"><a href="#train_ML_model-214"><span class="linenos">214</span></a>        <span class="c1"># Usually there is no reason to change the hyperparameters of such a simple model but fill free to experiment:</span>
</span><span id="train_ML_model-215"><a href="#train_ML_model-215"><span class="linenos">215</span></a>        <span class="n">learner</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">max_iter</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
</span><span id="train_ML_model-216"><a href="#train_ML_model-216"><span class="linenos">216</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="train_ML_model-217"><a href="#train_ML_model-217"><span class="linenos">217</span></a>        <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;Unknown model class&quot;</span><span class="p">)</span>
</span><span id="train_ML_model-218"><a href="#train_ML_model-218"><span class="linenos">218</span></a>
</span><span id="train_ML_model-219"><a href="#train_ML_model-219"><span class="linenos">219</span></a>    <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="train_ML_model-220"><a href="#train_ML_model-220"><span class="linenos">220</span></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Starting training phase...&quot;</span><span class="p">)</span>
</span><span id="train_ML_model-221"><a href="#train_ML_model-221"><span class="linenos">221</span></a>
</span><span id="train_ML_model-222"><a href="#train_ML_model-222"><span class="linenos">222</span></a>    <span class="n">model</span> <span class="o">=</span> <span class="n">learner</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">targets</span><span class="p">)</span>
</span><span id="train_ML_model-223"><a href="#train_ML_model-223"><span class="linenos">223</span></a>    <span class="c1"># Save the model in a file</span>
</span><span id="train_ML_model-224"><a href="#train_ML_model-224"><span class="linenos">224</span></a>    <span class="n">joblib</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">model_location</span><span class="p">)</span>
</span><span id="train_ML_model-225"><a href="#train_ML_model-225"><span class="linenos">225</span></a>    <span class="n">end</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="train_ML_model-226"><a href="#train_ML_model-226"><span class="linenos">226</span></a>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The model was trained in &#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span> <span class="o">/</span> <span class="mi">60</span><span class="p">,</span> <span class="s1">&#39;minutes.&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Train the ML model for the MLPlayingBot based on replay memory stored byt the MLDataBot.
This implementation has the option to train a neural network model or a model based on linear regression.
The model classes used in this implemntation are not necesarily optimal.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>replay_memory_location</strong>:  Location of the games stored by MLDataBot, default pathlib.Path('ML_replay_memories') / 'test_replay_memory'</li>
<li><strong>model_location</strong>:  Location where the model will be stored, default pathlib.Path("ML_models") / 'test_model'</li>
<li><strong>model_class</strong>:  The machine learning model class to be used, either 'NN' for a neural network, or 'LR' for a linear regression.</li>
<li><strong>overwrite</strong>:  Whether to overwrite a possibly existing model.</li>
</ul>
</div>


                </section>
                <section id="SchnapsenServer">
                            <input id="SchnapsenServer-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">SchnapsenServer</span>:

                <label class="view-source-button" for="SchnapsenServer-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SchnapsenServer"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SchnapsenServer-40"><a href="#SchnapsenServer-40"><span class="linenos"> 40</span></a><span class="k">class</span> <span class="nc">SchnapsenServer</span><span class="p">:</span>
</span><span id="SchnapsenServer-41"><a href="#SchnapsenServer-41"><span class="linenos"> 41</span></a>
</span><span id="SchnapsenServer-42"><a href="#SchnapsenServer-42"><span class="linenos"> 42</span></a>    <span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;SchnapsenServer&#39;</span><span class="p">:</span>
</span><span id="SchnapsenServer-43"><a href="#SchnapsenServer-43"><span class="linenos"> 43</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="SchnapsenServer-44"><a href="#SchnapsenServer-44"><span class="linenos"> 44</span></a>
</span><span id="SchnapsenServer-45"><a href="#SchnapsenServer-45"><span class="linenos"> 45</span></a>    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="SchnapsenServer-46"><a href="#SchnapsenServer-46"><span class="linenos"> 46</span></a>                 <span class="n">exctype</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]],</span>
</span><span id="SchnapsenServer-47"><a href="#SchnapsenServer-47"><span class="linenos"> 47</span></a>                 <span class="n">excinst</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">],</span>
</span><span id="SchnapsenServer-48"><a href="#SchnapsenServer-48"><span class="linenos"> 48</span></a>                 <span class="n">exctb</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TracebackType</span><span class="p">]</span>
</span><span id="SchnapsenServer-49"><a href="#SchnapsenServer-49"><span class="linenos"> 49</span></a>                 <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="SchnapsenServer-50"><a href="#SchnapsenServer-50"><span class="linenos"> 50</span></a>        <span class="k">if</span> <span class="n">excinst</span><span class="p">:</span>
</span><span id="SchnapsenServer-51"><a href="#SchnapsenServer-51"><span class="linenos"> 51</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Closing the server, because an Exception was raised&quot;</span><span class="p">)</span>
</span><span id="SchnapsenServer-52"><a href="#SchnapsenServer-52"><span class="linenos"> 52</span></a>            <span class="c1"># by returning False, we indicate that the exception was not handled.</span>
</span><span id="SchnapsenServer-53"><a href="#SchnapsenServer-53"><span class="linenos"> 53</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="SchnapsenServer-54"><a href="#SchnapsenServer-54"><span class="linenos"> 54</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Server closed&quot;</span><span class="p">)</span>
</span><span id="SchnapsenServer-55"><a href="#SchnapsenServer-55"><span class="linenos"> 55</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="SchnapsenServer-56"><a href="#SchnapsenServer-56"><span class="linenos"> 56</span></a>
</span><span id="SchnapsenServer-57"><a href="#SchnapsenServer-57"><span class="linenos"> 57</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span> <span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">8080</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SchnapsenServer-58"><a href="#SchnapsenServer-58"><span class="linenos"> 58</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates and starts the schnapsen server&quot;&quot;&quot;</span>
</span><span id="SchnapsenServer-59"><a href="#SchnapsenServer-59"><span class="linenos"> 59</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__host_name</span> <span class="o">=</span> <span class="n">host_name</span>
</span><span id="SchnapsenServer-60"><a href="#SchnapsenServer-60"><span class="linenos"> 60</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__port</span> <span class="o">=</span> <span class="n">port</span>
</span><span id="SchnapsenServer-61"><a href="#SchnapsenServer-61"><span class="linenos"> 61</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__bots</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">_StateExchange</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="SchnapsenServer-62"><a href="#SchnapsenServer-62"><span class="linenos"> 62</span></a>
</span><span id="SchnapsenServer-63"><a href="#SchnapsenServer-63"><span class="linenos"> 63</span></a>        <span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">template_folder</span><span class="o">=</span><span class="s1">&#39;template&#39;</span><span class="p">)</span>
</span><span id="SchnapsenServer-64"><a href="#SchnapsenServer-64"><span class="linenos"> 64</span></a>        <span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="SchnapsenServer-65"><a href="#SchnapsenServer-65"><span class="linenos"> 65</span></a>            <span class="n">PROPAGATE_EXCEPTIONS</span><span class="o">=</span><span class="kc">True</span>
</span><span id="SchnapsenServer-66"><a href="#SchnapsenServer-66"><span class="linenos"> 66</span></a>        <span class="p">)</span>
</span><span id="SchnapsenServer-67"><a href="#SchnapsenServer-67"><span class="linenos"> 67</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__setup_routes</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</span><span id="SchnapsenServer-68"><a href="#SchnapsenServer-68"><span class="linenos"> 68</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__process</span> <span class="o">=</span> <span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="n">host_name</span><span class="p">,</span> <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="n">port</span><span class="p">,</span> <span class="s2">&quot;use_reloader&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;debug&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">})</span>
</span><span id="SchnapsenServer-69"><a href="#SchnapsenServer-69"><span class="linenos"> 69</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Starting the server on </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__host_name</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__port</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="SchnapsenServer-70"><a href="#SchnapsenServer-70"><span class="linenos"> 70</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__process</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="SchnapsenServer-71"><a href="#SchnapsenServer-71"><span class="linenos"> 71</span></a>
</span><span id="SchnapsenServer-72"><a href="#SchnapsenServer-72"><span class="linenos"> 72</span></a>    <span class="k">def</span> <span class="nf">make_gui_bot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Bot</span><span class="p">:</span>
</span><span id="SchnapsenServer-73"><a href="#SchnapsenServer-73"><span class="linenos"> 73</span></a>        <span class="n">bot</span> <span class="o">=</span> <span class="n">GUIBot</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="SchnapsenServer-74"><a href="#SchnapsenServer-74"><span class="linenos"> 74</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__bots</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">_StateExchange</span><span class="p">(</span><span class="n">bot</span><span class="o">=</span><span class="n">bot</span><span class="p">,</span> <span class="n">browser_game_started</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_state_ready</span><span class="o">=</span><span class="n">Event</span><span class="p">(),</span> <span class="n">is_move_ready</span><span class="o">=</span><span class="n">Event</span><span class="p">(),</span> <span class="n">state</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">leader_move</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">browser_move</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="SchnapsenServer-75"><a href="#SchnapsenServer-75"><span class="linenos"> 75</span></a>        <span class="k">return</span> <span class="n">bot</span>
</span><span id="SchnapsenServer-76"><a href="#SchnapsenServer-76"><span class="linenos"> 76</span></a>
</span><span id="SchnapsenServer-77"><a href="#SchnapsenServer-77"><span class="linenos"> 77</span></a>    <span class="k">def</span> <span class="nf">_post_final_state</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">botname</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">PlayerPerspective</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SchnapsenServer-78"><a href="#SchnapsenServer-78"><span class="linenos"> 78</span></a>        <span class="n">state_exchange</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bots</span><span class="p">[</span><span class="n">botname</span><span class="p">]</span>
</span><span id="SchnapsenServer-79"><a href="#SchnapsenServer-79"><span class="linenos"> 79</span></a>        <span class="n">state_exchange</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">state</span>
</span><span id="SchnapsenServer-80"><a href="#SchnapsenServer-80"><span class="linenos"> 80</span></a>        <span class="n">state_exchange</span><span class="o">.</span><span class="n">is_game_over</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="SchnapsenServer-81"><a href="#SchnapsenServer-81"><span class="linenos"> 81</span></a>        <span class="n">state_exchange</span><span class="o">.</span><span class="n">is_state_ready</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
</span><span id="SchnapsenServer-82"><a href="#SchnapsenServer-82"><span class="linenos"> 82</span></a>
</span><span id="SchnapsenServer-83"><a href="#SchnapsenServer-83"><span class="linenos"> 83</span></a>    <span class="k">def</span> <span class="nf">_get_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">botname</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">PlayerPerspective</span><span class="p">,</span> <span class="n">leader_move</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Move</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Move</span><span class="p">:</span>
</span><span id="SchnapsenServer-84"><a href="#SchnapsenServer-84"><span class="linenos"> 84</span></a>        <span class="n">state_exchange</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bots</span><span class="p">[</span><span class="n">botname</span><span class="p">]</span>
</span><span id="SchnapsenServer-85"><a href="#SchnapsenServer-85"><span class="linenos"> 85</span></a>        <span class="n">state_exchange</span><span class="o">.</span><span class="n">is_move_ready</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="SchnapsenServer-86"><a href="#SchnapsenServer-86"><span class="linenos"> 86</span></a>        <span class="n">state_exchange</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">state</span>
</span><span id="SchnapsenServer-87"><a href="#SchnapsenServer-87"><span class="linenos"> 87</span></a>        <span class="n">state_exchange</span><span class="o">.</span><span class="n">leader_move</span> <span class="o">=</span> <span class="n">leader_move</span>
</span><span id="SchnapsenServer-88"><a href="#SchnapsenServer-88"><span class="linenos"> 88</span></a>        <span class="n">state_exchange</span><span class="o">.</span><span class="n">is_state_ready</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
</span><span id="SchnapsenServer-89"><a href="#SchnapsenServer-89"><span class="linenos"> 89</span></a>        <span class="c1"># we now wait for the browser to make the move</span>
</span><span id="SchnapsenServer-90"><a href="#SchnapsenServer-90"><span class="linenos"> 90</span></a>        <span class="n">state_exchange</span><span class="o">.</span><span class="n">is_move_ready</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
</span><span id="SchnapsenServer-91"><a href="#SchnapsenServer-91"><span class="linenos"> 91</span></a>        <span class="n">move</span> <span class="o">=</span> <span class="n">state_exchange</span><span class="o">.</span><span class="n">browser_move</span>
</span><span id="SchnapsenServer-92"><a href="#SchnapsenServer-92"><span class="linenos"> 92</span></a>        <span class="k">assert</span> <span class="n">move</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="SchnapsenServer-93"><a href="#SchnapsenServer-93"><span class="linenos"> 93</span></a>        <span class="k">return</span> <span class="n">move</span>
</span><span id="SchnapsenServer-94"><a href="#SchnapsenServer-94"><span class="linenos"> 94</span></a>
</span><span id="SchnapsenServer-95"><a href="#SchnapsenServer-95"><span class="linenos"> 95</span></a>    <span class="k">def</span> <span class="nf">__sendmove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">botname</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SchnapsenServer-96"><a href="#SchnapsenServer-96"><span class="linenos"> 96</span></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">(</span><span class="n">force</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</span><span id="SchnapsenServer-97"><a href="#SchnapsenServer-97"><span class="linenos"> 97</span></a>        <span class="n">old_move</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="SchnapsenServer-98"><a href="#SchnapsenServer-98"><span class="linenos"> 98</span></a>        <span class="n">move</span> <span class="o">=</span> <span class="n">_Old_GUI_Compatibility</span><span class="o">.</span><span class="n">convert_move</span><span class="p">(</span><span class="n">old_move</span><span class="p">)</span>
</span><span id="SchnapsenServer-99"><a href="#SchnapsenServer-99"><span class="linenos"> 99</span></a>
</span><span id="SchnapsenServer-100"><a href="#SchnapsenServer-100"><span class="linenos">100</span></a>        <span class="n">state_exchange</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bots</span><span class="p">[</span><span class="n">botname</span><span class="p">]</span>
</span><span id="SchnapsenServer-101"><a href="#SchnapsenServer-101"><span class="linenos">101</span></a>        <span class="n">state_exchange</span><span class="o">.</span><span class="n">browser_move</span> <span class="o">=</span> <span class="n">move</span>
</span><span id="SchnapsenServer-102"><a href="#SchnapsenServer-102"><span class="linenos">102</span></a>        <span class="n">state_exchange</span><span class="o">.</span><span class="n">is_state_ready</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="SchnapsenServer-103"><a href="#SchnapsenServer-103"><span class="linenos">103</span></a>        <span class="n">state_exchange</span><span class="o">.</span><span class="n">is_move_ready</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
</span><span id="SchnapsenServer-104"><a href="#SchnapsenServer-104"><span class="linenos">104</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__generate</span><span class="p">(</span><span class="n">botname</span><span class="o">=</span><span class="n">botname</span><span class="p">)</span>
</span><span id="SchnapsenServer-105"><a href="#SchnapsenServer-105"><span class="linenos">105</span></a>
</span><span id="SchnapsenServer-106"><a href="#SchnapsenServer-106"><span class="linenos">106</span></a>    <span class="k">def</span> <span class="nf">__generate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">botname</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SchnapsenServer-107"><a href="#SchnapsenServer-107"><span class="linenos">107</span></a>        <span class="n">state_exchange</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bots</span><span class="p">[</span><span class="n">botname</span><span class="p">]</span>
</span><span id="SchnapsenServer-108"><a href="#SchnapsenServer-108"><span class="linenos">108</span></a>        <span class="n">state_exchange</span><span class="o">.</span><span class="n">is_state_ready</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
</span><span id="SchnapsenServer-109"><a href="#SchnapsenServer-109"><span class="linenos">109</span></a>
</span><span id="SchnapsenServer-110"><a href="#SchnapsenServer-110"><span class="linenos">110</span></a>        <span class="n">state</span> <span class="o">=</span> <span class="n">state_exchange</span><span class="o">.</span><span class="n">state</span>
</span><span id="SchnapsenServer-111"><a href="#SchnapsenServer-111"><span class="linenos">111</span></a>        <span class="k">assert</span> <span class="n">state</span>  <span class="c1"># cannot be None, because we waited for it.</span>
</span><span id="SchnapsenServer-112"><a href="#SchnapsenServer-112"><span class="linenos">112</span></a>        <span class="n">leader_move</span> <span class="o">=</span> <span class="n">state_exchange</span><span class="o">.</span><span class="n">leader_move</span>
</span><span id="SchnapsenServer-113"><a href="#SchnapsenServer-113"><span class="linenos">113</span></a>        <span class="n">json</span> <span class="o">=</span> <span class="n">_Old_GUI_Compatibility</span><span class="o">.</span><span class="n">player_game_state_to_json</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="n">state</span><span class="p">,</span> <span class="n">leader_move</span><span class="o">=</span><span class="n">leader_move</span><span class="p">,</span> <span class="n">game_over</span><span class="o">=</span><span class="n">state_exchange</span><span class="o">.</span><span class="n">is_game_over</span><span class="p">)</span>
</span><span id="SchnapsenServer-114"><a href="#SchnapsenServer-114"><span class="linenos">114</span></a>        <span class="k">return</span> <span class="n">json</span>
</span><span id="SchnapsenServer-115"><a href="#SchnapsenServer-115"><span class="linenos">115</span></a>
</span><span id="SchnapsenServer-116"><a href="#SchnapsenServer-116"><span class="linenos">116</span></a>    <span class="k">def</span> <span class="nf">__setup_routes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">:</span> <span class="n">Flask</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SchnapsenServer-117"><a href="#SchnapsenServer-117"><span class="linenos">117</span></a>        <span class="n">app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])(</span><span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">)</span>
</span><span id="SchnapsenServer-118"><a href="#SchnapsenServer-118"><span class="linenos">118</span></a>        <span class="n">app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/game/&lt;botname&gt;&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])(</span><span class="bp">self</span><span class="o">.</span><span class="n">__game</span><span class="p">)</span>
</span><span id="SchnapsenServer-119"><a href="#SchnapsenServer-119"><span class="linenos">119</span></a>        <span class="n">app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/generate/&lt;botname&gt;&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])(</span><span class="bp">self</span><span class="o">.</span><span class="n">__generate</span><span class="p">)</span>
</span><span id="SchnapsenServer-120"><a href="#SchnapsenServer-120"><span class="linenos">120</span></a>        <span class="n">app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/sendmove/&lt;botname&gt;&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])(</span><span class="bp">self</span><span class="o">.</span><span class="n">__sendmove</span><span class="p">)</span>
</span><span id="SchnapsenServer-121"><a href="#SchnapsenServer-121"><span class="linenos">121</span></a>
</span><span id="SchnapsenServer-122"><a href="#SchnapsenServer-122"><span class="linenos">122</span></a>    <span class="k">def</span> <span class="nf">_index</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SchnapsenServer-123"><a href="#SchnapsenServer-123"><span class="linenos">123</span></a>        <span class="n">bots</span> <span class="o">=</span> <span class="p">[(</span><span class="n">botname</span><span class="p">,</span> <span class="n">state</span><span class="o">.</span><span class="n">browser_game_started</span><span class="p">)</span> <span class="k">for</span> <span class="n">botname</span><span class="p">,</span> <span class="n">state</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bots</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
</span><span id="SchnapsenServer-124"><a href="#SchnapsenServer-124"><span class="linenos">124</span></a>        <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s2">&quot;gamechooser.html&quot;</span><span class="p">,</span> <span class="n">bots</span><span class="o">=</span><span class="n">bots</span><span class="p">)</span>
</span><span id="SchnapsenServer-125"><a href="#SchnapsenServer-125"><span class="linenos">125</span></a>
</span><span id="SchnapsenServer-126"><a href="#SchnapsenServer-126"><span class="linenos">126</span></a>    <span class="k">def</span> <span class="nf">__game</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">botname</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SchnapsenServer-127"><a href="#SchnapsenServer-127"><span class="linenos">127</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bots</span><span class="p">[</span><span class="n">botname</span><span class="p">]</span><span class="o">.</span><span class="n">browser_game_started</span><span class="p">:</span>
</span><span id="SchnapsenServer-128"><a href="#SchnapsenServer-128"><span class="linenos">128</span></a>            <span class="n">abort</span><span class="p">(</span><span class="mi">409</span><span class="p">,</span> <span class="s2">&quot;This game has already started&quot;</span><span class="p">)</span>
</span><span id="SchnapsenServer-129"><a href="#SchnapsenServer-129"><span class="linenos">129</span></a>
</span><span id="SchnapsenServer-130"><a href="#SchnapsenServer-130"><span class="linenos">130</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__bots</span><span class="p">[</span><span class="n">botname</span><span class="p">]</span><span class="o">.</span><span class="n">browser_game_started</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="SchnapsenServer-131"><a href="#SchnapsenServer-131"><span class="linenos">131</span></a>        <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s2">&quot;index_interactive.html&quot;</span><span class="p">,</span> <span class="n">botname</span><span class="o">=</span><span class="n">botname</span><span class="p">)</span>
</span></pre></div>


    

                            <div id="SchnapsenServer.__init__" class="classattr">
                                        <input id="SchnapsenServer.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">SchnapsenServer</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">host_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;0.0.0.0&#39;</span>, </span><span class="param"><span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">8080</span></span>)</span>

                <label class="view-source-button" for="SchnapsenServer.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SchnapsenServer.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SchnapsenServer.__init__-57"><a href="#SchnapsenServer.__init__-57"><span class="linenos">57</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span> <span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">8080</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SchnapsenServer.__init__-58"><a href="#SchnapsenServer.__init__-58"><span class="linenos">58</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates and starts the schnapsen server&quot;&quot;&quot;</span>
</span><span id="SchnapsenServer.__init__-59"><a href="#SchnapsenServer.__init__-59"><span class="linenos">59</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__host_name</span> <span class="o">=</span> <span class="n">host_name</span>
</span><span id="SchnapsenServer.__init__-60"><a href="#SchnapsenServer.__init__-60"><span class="linenos">60</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__port</span> <span class="o">=</span> <span class="n">port</span>
</span><span id="SchnapsenServer.__init__-61"><a href="#SchnapsenServer.__init__-61"><span class="linenos">61</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__bots</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">_StateExchange</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="SchnapsenServer.__init__-62"><a href="#SchnapsenServer.__init__-62"><span class="linenos">62</span></a>
</span><span id="SchnapsenServer.__init__-63"><a href="#SchnapsenServer.__init__-63"><span class="linenos">63</span></a>        <span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">template_folder</span><span class="o">=</span><span class="s1">&#39;template&#39;</span><span class="p">)</span>
</span><span id="SchnapsenServer.__init__-64"><a href="#SchnapsenServer.__init__-64"><span class="linenos">64</span></a>        <span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="SchnapsenServer.__init__-65"><a href="#SchnapsenServer.__init__-65"><span class="linenos">65</span></a>            <span class="n">PROPAGATE_EXCEPTIONS</span><span class="o">=</span><span class="kc">True</span>
</span><span id="SchnapsenServer.__init__-66"><a href="#SchnapsenServer.__init__-66"><span class="linenos">66</span></a>        <span class="p">)</span>
</span><span id="SchnapsenServer.__init__-67"><a href="#SchnapsenServer.__init__-67"><span class="linenos">67</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__setup_routes</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</span><span id="SchnapsenServer.__init__-68"><a href="#SchnapsenServer.__init__-68"><span class="linenos">68</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__process</span> <span class="o">=</span> <span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="n">host_name</span><span class="p">,</span> <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="n">port</span><span class="p">,</span> <span class="s2">&quot;use_reloader&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;debug&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">})</span>
</span><span id="SchnapsenServer.__init__-69"><a href="#SchnapsenServer.__init__-69"><span class="linenos">69</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Starting the server on </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__host_name</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__port</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="SchnapsenServer.__init__-70"><a href="#SchnapsenServer.__init__-70"><span class="linenos">70</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__process</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Creates and starts the schnapsen server</p>
</div>


                            </div>
                            <div id="SchnapsenServer.make_gui_bot" class="classattr">
                                        <input id="SchnapsenServer.make_gui_bot-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">make_gui_bot</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n"><a href="game.html#Bot">schnapsen.game.Bot</a></span>:</span></span>

                <label class="view-source-button" for="SchnapsenServer.make_gui_bot-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SchnapsenServer.make_gui_bot"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SchnapsenServer.make_gui_bot-72"><a href="#SchnapsenServer.make_gui_bot-72"><span class="linenos">72</span></a>    <span class="k">def</span> <span class="nf">make_gui_bot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Bot</span><span class="p">:</span>
</span><span id="SchnapsenServer.make_gui_bot-73"><a href="#SchnapsenServer.make_gui_bot-73"><span class="linenos">73</span></a>        <span class="n">bot</span> <span class="o">=</span> <span class="n">GUIBot</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="SchnapsenServer.make_gui_bot-74"><a href="#SchnapsenServer.make_gui_bot-74"><span class="linenos">74</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__bots</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">_StateExchange</span><span class="p">(</span><span class="n">bot</span><span class="o">=</span><span class="n">bot</span><span class="p">,</span> <span class="n">browser_game_started</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_state_ready</span><span class="o">=</span><span class="n">Event</span><span class="p">(),</span> <span class="n">is_move_ready</span><span class="o">=</span><span class="n">Event</span><span class="p">(),</span> <span class="n">state</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">leader_move</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">browser_move</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="SchnapsenServer.make_gui_bot-75"><a href="#SchnapsenServer.make_gui_bot-75"><span class="linenos">75</span></a>        <span class="k">return</span> <span class="n">bot</span>
</span></pre></div>


    

                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value">${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>